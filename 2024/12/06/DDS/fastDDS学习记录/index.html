<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>fastDDS学习记录 | 易锦风的博客</title><meta name="author" content="formeasy"><meta name="copyright" content="formeasy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="fastDDS学习记录"><meta property="og:type" content="article"><meta property="og:title" content="fastDDS学习记录"><meta property="og:url" content="http://www.formeasy.cc/2024/12/06/DDS/fastDDS%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/index.html"><meta property="og:site_name" content="易锦风的博客"><meta property="og:description" content="fastDDS学习记录"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.formeasy.cc/2024/12/06/DDS/fastDDS%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/imageMogr2auto-orientstripimageView22w1095format.webp"><meta property="article:published_time" content="2024-12-06T08:28:42.000Z"><meta property="article:modified_time" content="2025-04-25T00:59:42.474Z"><meta property="article:author" content="formeasy"><meta property="article:tag" content="DDS"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://www.formeasy.cc/2024/12/06/DDS/fastDDS%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/imageMogr2auto-orientstripimageView22w1095format.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.formeasy.cc/2024/12/06/DDS/fastDDS%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{var e={set:(e,t,a)=>{a&&(a=Date.now()+864e5*a,localStorage.setItem(e,JSON.stringify({value:t,expiry:a})))},get:e=>{var t=localStorage.getItem(e);if(t){var{value:t,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return t;localStorage.removeItem(e)}}},t=(window.btf={saveToLocal:e,getScript:(o,n={})=>new Promise((e,t)=>{const a=document.createElement("script");a.src=o,a.async=!0,Object.entries(n).forEach(([e,t])=>a.setAttribute(e,t)),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),getCSS:(o,n)=>new Promise((e,t)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),addGlobalFn:(e,t,a=!1,o=window)=>{var n;e.startsWith("pjax")||((n=o.globalFn||{})[e]=n[e]||{},n[e][a||Object.keys(n[e]).length]=t,o.globalFn=n)}},()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")}),a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")},o=(btf.activateDarkMode=t,btf.activateLightMode=a,e.get("theme")),t=("dark"===o?t():"light"===o&&a(),e.get("aside-status"));void 0!==t&&document.documentElement.classList.toggle("hide-aside","hide"===t);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"fastDDS学习记录",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="易锦风的博客" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">253</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 资源链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/2024/12/06/DDS/fastDDS学习记录/imageMogr2auto-orientstripimageView22w1095format.webp)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/icon.png" alt="Logo"><span class="site-name">易锦风的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">fastDDS学习记录</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 资源链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">fastDDS学习记录</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-06T08:28:42.000Z" title="发表于 2024-12-06 16:28:42">2024-12-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-04-25T00:59:42.474Z" title="更新于 2025-04-25 08:59:42">2025-04-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF/">网络通讯</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="一-windows系统下fastdds使用"><a class="markdownIt-Anchor" href="#一-windows系统下fastdds使用"></a> 一. Windows系统下fastDDS使用</h2><ol><li>官网下载fastDDS，已经是编译好的二级制安装文件，安装好之后，对应的fastDDS gen和需要的环境变量已经自动装好了。</li><li>直接按照网上教程，先写一个idl后缀文件，用来设置传输的数据类型</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">HelloSeven</span> &#123; string sevenData; &#125;;</span><br></pre></td></tr></table></figure><ol start="3"><li><p>然后运行：<code>fastddsgen -example CMake HelloSevenPubSubMain.idl</code>，不出意外，报错了</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="imageMogr2auto-orientstripimageView22w1095format.webp" alt=""></p><p>报错1</p><p>查了一下，cl.exe文件已经装好了，应该是cl.exe的环境变量没设置好，搜了一下，github上有一样的问题，答案里有解决方案。可以通过vs里的命令行（工具—&gt;命令行—&gt;开发者命令工具）来执行这个指令，成功，生成了一系列文件。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="imageMogr2auto-orientstripimageView22w906format.webp" alt=""></p><p>VS命令行工具.png</p></li><li><p>这代表已经用fastddsgen工具生成了工程文件了，下一步就是编译这个工程文件。摸索了好几次，还是用最原始的方法，就是先拿cmake软件make一下这个工程，报错，报的错是系统没有openssl的环境变量，查了一下，系统没有装openssl，去官网下载，开始装了个light版，不行，必须装完整版。装完之后，添加三个环境变量<code>OPENSSL_ROOT_DIR OPENSSL_CRYPTO_LIBRARY OPENSSL_INCLUDE_DIR</code><br>再编译，通过了。<br>参考代码如下</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build <span class="built_in">cd</span> build cmake ..</span><br></pre></td></tr></table></figure><ol start="5"><li><p>中间cmake --build时，还有报错，“MSBuild version 17.6.3+07e294721 for .NET Framework<br>MSBUILD : error MSB1009: 项目文件不存在。”在系统变量path中添加msbuild的路径“C:\Program Files\Microsoft Visual Studio\2022\Community\MSBuild”就好了。</p></li><li><p>用vs打开工程，生成解决方案，生成了一个exe文件，叫HelloSevenPubSubMain.exe和一个lib文件。</p></li><li><p>运行示例项目，用这个exe文件给上不同的参数，分别运行publisher和subscriber，成功</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="imageMogr2auto-orientstripimageView22w638format.webp" alt=""></p><p>publisher.png</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="imageMogr2auto-orientstripimageView22w605format.webp" alt=""></p><p>subscriber.png</p></li></ol><h2 id="2-用docker运行fastdds"><a class="markdownIt-Anchor" href="#2-用docker运行fastdds"></a> 2. 用docker运行fastdds</h2><p>在Windows上安装docker-desktop。然后去下载fastdds的image，fastdds官网有，下载下来是一个tar文件。然后把这个image载入进docker中，在tar文件所在文件夹运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i <span class="string">&quot;ubuntu-fastdds &lt;FastDDS-Version&gt;.tar&quot;</span></span><br></pre></td></tr></table></figure><p>双引号里是tar文件的名称，改成实际文件的名称。<br>这时候去docker-desktop里面去看，可以看到image里已经有了这个image了。然后就是用这个image启动一个container，运行指令</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --network=host --ipc=host <span class="tag">&lt;<span class="name">docker-image</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中的<docker-image>用实际image名替换，可以去docker-desktop里去复制，</docker-image></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="imageMogr2auto-orientstripimageView22w1200format.webp" alt=""></p><p>复制image名</p><p>这样就启动了这个fastdds的image。network和host的两个参数，是为了容器之间共享内存，可以使得容器之间通过共享内存通讯，详见官方说明<a target="_blank" rel="noopener" href="https://fast-dds.docs.eprosima.com/en/latest/docker/shm_docker.html">1.1. Leveraging Fast DDS SHM in Docker deployments — Fast DDS 2.13.1 documentation (eprosima.com)</a><br>再根据官网指示，运行一个image内部自带的例程</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root<span class="meta">@docker</span>-<span class="attr">desktop</span>:<span class="regexp">/usr/</span>local/eprosima/fastrtps/examples/cpp/dds/<span class="title class_">HelloWorldExample</span>/bin# tmux <span class="keyword">new</span>-session <span class="string">&quot;./DDSHelloWorldExample publisher 0 1000&quot;</span> \; split-<span class="variable language_">window</span> <span class="string">&quot;./DDSHelloWorldExample subscriber&quot;</span> \; select-layout even-vertical</span><br></pre></td></tr></table></figure><p>效果如下</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="imageMogr2auto-orientstripimageView22w1200format.1.webp" alt=""></p><p>例程运行效果</p><p>这是在同一个container中subscriber和publisher同时运行并通讯。<br>接着测试了开启两个container分别做publisher和subscriber，也成功进行了通讯。<br>例程参考<a target="_blank" rel="noopener" href="https://fast-dds.docs.eprosima.com/en/latest/docker/fastdds/fast_dds.html">1.2. Fast DDS Image — Fast DDS 2.13.1 documentation (eprosima.com)</a></p><h2 id="fastdds共享内存shm模式"><a class="markdownIt-Anchor" href="#fastdds共享内存shm模式"></a> FastDDS共享内存shm模式</h2><p>按照官方教程<a target="_blank" rel="noopener" href="https://fast-dds.docs.eprosima.com/en/latest/docker/shm_docker.html">1.1. Leveraging Fast DDS SHM in Docker deployments — Fast DDS 2.13.2 documentation (eprosima.com)</a>，测试有docker端参与的共享内存方式下的dds通讯。<br>用官方的这个docker配置方法</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --network=host --ipc=host --name cont1 <span class="tag">&lt;<span class="name">image</span> <span class="attr">name</span>&gt;</span></span><br></pre></td></tr></table></figure><p>启动俩容器之后，运行共享内存专用测试程序HelloWorldExampleSharedMem，俩容器正常收发，通讯正常。<br>用–ipc=shareable和–ipc=container:cont1方式启动俩互相共享内存的容器后，</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --network=host --ipc=shareable --name cont1 <span class="tag">&lt;<span class="name">image</span> <span class="attr">name</span>&gt;</span> docker run -it --rm --network=host --ipc=container:cont1 <span class="tag">&lt;<span class="name">image</span> <span class="attr">name</span>&gt;</span></span><br></pre></td></tr></table></figure><p>共享内存的dds程序可以跑通，俩容器正常收发。<br>之前启动容器时，没有加–network=host，跑这个共享内存的fastdds就不通。看来跟网络还有关系，所以必须网络配置成host模式。在上边链接里的官方教程中也有相关说明。<br>两个容器的共享内存通讯通了，但是测试容器和windows共享内存跑FastDDS还是不行，应该是因为Windows和docker容器中间还隔了一个wsl，并没有共享内存。</p><h2 id="两容器通讯"><a class="markdownIt-Anchor" href="#两容器通讯"></a> 两容器通讯</h2><p>在默认bridge的网络模式下启动两个容器，hello worldexample运行，两容器通讯成功。</p><h2 id="容器和wsl2的互联互通"><a class="markdownIt-Anchor" href="#容器和wsl2的互联互通"></a> 容器和wsl2的互联互通</h2><ol><li>在默认bridge网络模式下启动容器，然后在wsl2上启动DDSHelloWorldExample，作为publisher，在容器上运行subscriber，无法连通。</li><li>用host网络模式下启动容器，然后测试与wsl2进行dds通讯，还是无法联通。</li></ol><h2 id="linux下docker-容器运行fastdds"><a class="markdownIt-Anchor" href="#linux下docker-容器运行fastdds"></a> linux下docker 容器运行fastDDS</h2><p>ubuntu的宿主机运行一个FastDDS的docker容器，容器网络设置为host模式，即启动时候用</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --network=host --ipc=host <span class="tag">&lt;<span class="name">docker-image</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在局域网另一台的Windows机中运行helloworldexample程序，一边发布，一边订阅，<strong>容器中程序成功实现同Windows系统通讯</strong>。注意要关闭防火墙，或者单独设置防火墙规则。</p><h2 id="三用ros常用的一组msg文件构建fastdds的发布与订阅c工程"><a class="markdownIt-Anchor" href="#三用ros常用的一组msg文件构建fastdds的发布与订阅c工程"></a> 三.用ros常用的一组msg文件构建fastDDS的发布与订阅c++工程</h2><p>拿到如下的接口数据结构描述文件夹</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F:. │ CMakeLists.txt │ darknetf.txt │ package.xml │ └─msg DeadZoneOccupancyGrid.msg GirdNormalInfo.msg GirdNormalInfo2.msg LeaderVehicle.msg LqEntryState.msg LqOccupancyGrid.msg NoObstacleFlag.msg OccupancyGridInfo.msg PercepVehicleState.msg TargetGlobal.msg TargetGlobalInfo.msg TargetLocal.msg TargetLocalInfo.msg UnderWaterOccupancyGrid.msg VehiclePose.msg WaterOccupancyGrid.msg</span><br></pre></td></tr></table></figure><p>数据是嵌套构造的，我们需要的最外层数据是WaterOccupancyGrid.msg定义的数据。从msg文件生成idl可以通过ros2系统packages构建过程附带完成，也可以通过构建脚本手动生成，在chat某某T的协助写，编写了python脚本，将msg文件批量转换为了idl文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os <span class="comment"># 定义类型映射关系 type_mapping = &#123; &#x27;bool&#x27;: &#x27;boolean&#x27;, &#x27;int8&#x27;: &#x27;int8&#x27;, &#x27;uint8&#x27;: &#x27;uint8&#x27;, &#x27;int16&#x27;: &#x27;int16&#x27;, &#x27;uint16&#x27;: &#x27;uint16&#x27;, &#x27;int32&#x27;: &#x27;int32&#x27;, &#x27;uint32&#x27;: &#x27;uint32&#x27;, &#x27;int64&#x27;: &#x27;int64&#x27;, &#x27;uint64&#x27;: &#x27;uint64&#x27;, &#x27;float32&#x27;: &#x27;float&#x27;, &#x27;float64&#x27;: &#x27;double&#x27;, &#x27;string&#x27;: &#x27;string&#x27; &#125; def convert_msg_type_to_idl_type(msg_type): &quot;&quot;&quot;将ROS 2的消息类型转换为IDL类型&quot;&quot;&quot; if msg_type in type_mapping: return type_mapping[msg_type] elif msg_type.endswith(&quot;[]&quot;): # 处理数组 base_type = msg_type[:-2] return f&quot;sequence&lt;&#123;type_mapping.get(base_type, base_type)&#125;&gt;&quot; else: return msg_type # 自定义类型保持不变 def convert_msg_file_to_idl(msg_file, idl_file): &quot;&quot;&quot;将一个.msg文件转换为.idl文件&quot;&quot;&quot; print(f&quot;Converting &#123;msg_file&#125; to &#123;idl_file&#125;&quot;) with open(msg_file, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as msg_f, open(idl_file, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as idl_f: msg_name = os.path.splitext(os.path.basename(msg_file))[0] # 写入IDL文件的头 idl_f.write(f&quot;module &#123;msg_name&#125; &#123;&#123;\n&quot;) idl_f.write(&quot; struct Msg &#123;\n&quot;) # 读取每一行并转换为IDL格式 for line in msg_f: line = line.strip() if not line or line.startswith(&#x27;#&#x27;): # 忽略空行和注释 continue parts = line.split() if len(parts) &lt; 2: print(f&quot;Skipping invalid line: &#123;line&#125;&quot;) continue msg_type, msg_field = parts[0], parts[1] idl_type = convert_msg_type_to_idl_type(msg_type) idl_f.write(f&quot; &#123;idl_type&#125; &#123;msg_field&#125;;\n&quot;) # 写入结构体和模块结束符 idl_f.write(&quot; &#125;;\n&quot;) idl_f.write(&quot;&#125;;\n&quot;) print(f&quot;Finished writing &#123;idl_file&#125;&quot;) def convert_all_msg_files_to_idl(msg_dir, idl_dir): &quot;&quot;&quot;将一个目录下的所有.msg文件转换为.idl文件&quot;&quot;&quot; if not os.path.exists(idl_dir): os.makedirs(idl_dir) for root, dirs, files in os.walk(msg_dir): for file in files: if file.endswith(&#x27;.msg&#x27;): msg_file = os.path.join(root, file) idl_file = os.path.join(idl_dir, file.replace(&#x27;.msg&#x27;, &#x27;.idl&#x27;)) print(f&quot;Converting &#123;msg_file&#125; to &#123;idl_file&#125;&quot;) convert_msg_file_to_idl(msg_file, idl_file) if __name__ == &quot;__main__&quot;: # 设置msg文件目录和生成的idl文件目录 msg_directory = &#x27;./msg&#x27; # 你的.msg文件目录 idl_directory = &#x27;./idl&#x27; # 输出.idl文件的目录 # 执行转换 convert_all_msg_files_to_idl(msg_directory, idl_directory)</span></span><br></pre></td></tr></table></figure><p>执行完转换之后，还需要解决数据结构在不同idl文件之间嵌套的问题，本文第一章节的内容是针对单个idl文件的工程生成，需要进行针对性的修正工作，才能针对多idl文件生成工程。</p><ol><li>要将嵌套引用的idl文件include进idl文件中，然后要保证同一个工程的module名相同，struct名区分，</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GirdNormalInfo.idl&quot;</span> <span class="comment">//结构体的第一个元素GirdNormalInfo是自定义数据格式，需要include该结构体所在的GirdNormalInfo.idl文件 module WaterOccupancyGrid &#123; struct GirdNormalInfo2 &#123; GirdNormalInfo info; uint16 us_height; uint16 uc_target_type; &#125;; &#125;;</span></span></span><br></pre></td></tr></table></figure><ol start="2"><li>fastddsgen指令使用时，需要将所有用到的idl文件全部放入指令中</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastddsgen -example CMake GirdNormalInfo<span class="selector-class">.idl</span> UniHeader<span class="selector-class">.idl</span> OccupancyGridInfo<span class="selector-class">.idl</span> VehiclePose<span class="selector-class">.idl</span> GirdNormalInfo2<span class="selector-class">.idl</span> WaterOccupancyGrid<span class="selector-class">.idl</span></span><br></pre></td></tr></table></figure><p>这样就生成了发布和订阅的工程源文件，再通过本文第一章节的编译生成过程，就能实现发布和订阅功能了。中间有一些小问题，调试后发布和订阅功能正常。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.formeasy.cc">formeasy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.formeasy.cc/2024/12/06/DDS/fastDDS%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">http://www.formeasy.cc/2024/12/06/DDS/fastDDS学习记录/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://www.formeasy.cc" target="_blank">易锦风的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/DDS/">DDS</a></div><div class="post-share"><div class="social-share" data-image="/2024/12/06/DDS/fastDDS%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/imageMogr2auto-orientstripimageView22w1095format.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/12/06/DDS/Fast%20DDS%E5%85%A5%E9%97%A8-Fast%20DDS%E4%BB%8B%E7%BB%8D/" title="Fast DDS入门-Fast DDS介绍"><div class="cover" style="background:/2024/12/6/DDS/Fast%20DDS入门-Fast%20DDS介绍/0c8e08a1967e7a65491c84702ad7eddd.bmp"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Fast DDS入门-Fast DDS介绍</div></div><div class="info-2"><div class="info-item-1">1 前言 Fast DDS是DDS（数据分发服务）规范的C++实现，DDS是由对象管理组（OMG）定义的协议。Fast DDS库提供应用程序编程接口（API）和通信协议，用于部署以数据为中心的发布-订阅（DCPS）模型，目的是在实时系统之间建立高效可靠的信息分发。Fast DDS在资源处理方面具有可预测性、可扩展性、灵活性和高效性。为了满足这些要求，它使用了类型化接口，并依赖于一个多对多的分布式网络范例，该范例巧妙地允许将通信的发布方和订阅方分离。Fast DDS包括： DDS API实现。 Fast DDS-Gen，一种用于桥接类型化接口和中间件实现的生成工具。 底层RTPS有线协议实现。 除了以上内容，Fast DDS已被选为Robot Operating System 2（ROS 2）在每个长期（LTS）版本和大多数非LTS版本中支持的默认中间件。 2...</div></div></div></a><a class="pagination-related" href="/2024/12/06/Qt/VS2019%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEQT%E6%8F%92%E4%BB%B6/" title="VS2019安装配置QT插件"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/12/06/Qt/VS2019%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEQT%E6%8F%92%E4%BB%B6/8d006fd85e003f26051c9ae7095ad6a4.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">VS2019安装配置QT插件</div></div><div class="info-2"><div class="info-item-1">1、介绍 Windows的Qt开发，一般采用Visual Studio安装Qt插件的方法开发Qt程序，毕竟VS开发工具还是比QtCreator开发工具强大、好用的多。 本教程采用VS2019安装配置Qt插件（qt-vsaddin-msvc2019-2.6.0.vsix），默认已经安装了VS2019（已安装“MSVC V141-VS 2017 C++ x64/x86 生成…”选项）和Qt5.14（已安装“msvc2017 32-bit”和“msvc2017 64-bit”选项）。 如果未安装则需安装VS2019和Qt5.14，安装VS2019和Qt5.14需要注意以下： 安装VS2019，则需选择“MSVCV141-VS 2017 C++ x64/x86 生成…”选项，以支持VS2017的编译器，因为Qt5.14最高支持VS2017版本编译的Qt基础库。 安装Qt5.14，选中msvc201732-bit和msvc2017 64-bit选项，VS安装Qt插件后才能配置使用Qt的基础库（包括msvc201732-bit和msvc2017...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/12/06/DDS/Fast%20DDS%E5%85%A5%E9%97%A8-Fast%20DDS%E4%BB%8B%E7%BB%8D/" title="Fast DDS入门-Fast DDS介绍"><div class="cover" style="background:/2024/12/6/DDS/Fast%20DDS入门-Fast%20DDS介绍/0c8e08a1967e7a65491c84702ad7eddd.bmp"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-06</div><div class="info-item-2">Fast DDS入门-Fast DDS介绍</div></div><div class="info-2"><div class="info-item-1">1 前言 Fast DDS是DDS（数据分发服务）规范的C++实现，DDS是由对象管理组（OMG）定义的协议。Fast DDS库提供应用程序编程接口（API）和通信协议，用于部署以数据为中心的发布-订阅（DCPS）模型，目的是在实时系统之间建立高效可靠的信息分发。Fast DDS在资源处理方面具有可预测性、可扩展性、灵活性和高效性。为了满足这些要求，它使用了类型化接口，并依赖于一个多对多的分布式网络范例，该范例巧妙地允许将通信的发布方和订阅方分离。Fast DDS包括： DDS API实现。 Fast DDS-Gen，一种用于桥接类型化接口和中间件实现的生成工具。 底层RTPS有线协议实现。 除了以上内容，Fast DDS已被选为Robot Operating System 2（ROS 2）在每个长期（LTS）版本和大多数非LTS版本中支持的默认中间件。 2...</div></div></div></a><a class="pagination-related" href="/2025/08/15/DDS/%E9%80%9A%E4%BF%A1%E4%B8%AD%E9%97%B4%E4%BB%B6%20Fast%20DDS%20%EF%BC%9A%E7%BC%96%E8%AF%91%E3%80%81%E5%AE%89%E8%A3%85%E5%92%8C%E6%B5%8B%E8%AF%95/" title="通信中间件 Fast DDS：编译、安装和测试"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/08/15/DDS/%E9%80%9A%E4%BF%A1%E4%B8%AD%E9%97%B4%E4%BB%B6%20Fast%20DDS%20%EF%BC%9A%E7%BC%96%E8%AF%91%E3%80%81%E5%AE%89%E8%A3%85%E5%92%8C%E6%B5%8B%E8%AF%95/517d6cae3ac74f93ad264358ba386c1f.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-15</div><div class="info-item-2">通信中间件 Fast DDS：编译、安装和测试</div></div><div class="info-2"><div class="info-item-1">1.简介 DDS是 OMG 组织发布的一种中间件协议和 API 标准，它将系统的组件集成在一起，提供业务和任务关键型物联网(IoT) 应用程序所需的低延迟数据连接、极高的可靠性和可扩展架构。 DDS(Data Distribution Service,数据分发服务) 是一种以数据为中心的通信协议，用于分布式软件应用程序通信。 它描述了支持 数据提供者(Data Providers) 和 数据消费者(Data Consumers) 之间通信的通信应用程序编程接口 (API) 和通信语义。 要学习 DDS 就不能忽略它的模型：DCPS(以数据为中心的发布订阅模型)。 DCPS 有 3 个关键实体： publication entities: 定义消息生成对象及相关属性 subscription entities：定义消息消费对象及相关属性 configuration entities:定义传输相关的属性如 Topic 类型，通信的 QoS(服务质量)。 QoS 是一个非常重要的概念，DDS 使用 QoS 来定义 DDS 实体的行为特征。 QoS 由单独的 QoS 策略（源自...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">formeasy</div><div class="author-info-description">专注互联网和软件技术</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">253</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/formeasy"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/formeasy" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:formeasy@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">用学习，面对遭遇的变化；用斗志，面对每天的挫折；用坚持，面对失去的动力!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-windows%E7%B3%BB%E7%BB%9F%E4%B8%8Bfastdds%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">一. Windows系统下fastDDS使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%94%A8docker%E8%BF%90%E8%A1%8Cfastdds"><span class="toc-number">2.</span> <span class="toc-text">2. 用docker运行fastdds</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fastdds%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98shm%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">FastDDS共享内存shm模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%A4%E5%AE%B9%E5%99%A8%E9%80%9A%E8%AE%AF"><span class="toc-number">4.</span> <span class="toc-text">两容器通讯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%92%8Cwsl2%E7%9A%84%E4%BA%92%E8%81%94%E4%BA%92%E9%80%9A"><span class="toc-number">5.</span> <span class="toc-text">容器和wsl2的互联互通</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E4%B8%8Bdocker-%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8Cfastdds"><span class="toc-number">6.</span> <span class="toc-text">linux下docker 容器运行fastDDS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E7%94%A8ros%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%80%E7%BB%84msg%E6%96%87%E4%BB%B6%E6%9E%84%E5%BB%BAfastdds%E7%9A%84%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85c%E5%B7%A5%E7%A8%8B"><span class="toc-number">7.</span> <span class="toc-text">三.用ros常用的一组msg文件构建fastDDS的发布与订阅c++工程</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/01/31/UE/UE5%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5%E4%B9%8BRawInput%E6%8F%92%E4%BB%B6/" title="UE5增强输入之RawInput插件"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2026/01/31/UE/UE5%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5%E4%B9%8BRawInput%E6%8F%92%E4%BB%B6/2026-01-31_221641_144.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="UE5增强输入之RawInput插件"></a><div class="content"><a class="title" href="/2026/01/31/UE/UE5%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5%E4%B9%8BRawInput%E6%8F%92%E4%BB%B6/" title="UE5增强输入之RawInput插件">UE5增强输入之RawInput插件</a><time datetime="2026-01-31T14:01:13.000Z" title="发表于 2026-01-31 22:01:13">2026-01-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/31/UE/UE5%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5/" title="UE5增强输入"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2026/01/31/UE/UE5%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5/5d948f36d9387dcdc89578f0e49dc50559509622.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="UE5增强输入"></a><div class="content"><a class="title" href="/2026/01/31/UE/UE5%E5%A2%9E%E5%BC%BA%E8%BE%93%E5%85%A5/" title="UE5增强输入">UE5增强输入</a><time datetime="2026-01-31T09:53:13.000Z" title="发表于 2026-01-31 17:53:13">2026-01-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/29/UE/UE%20Async%20Load%20Asset%E9%80%9A%E8%BF%87%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90/" title="UE Async Load Asset通过资源路径动态加载资源"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2026/01/29/UE/UE%20Async%20Load%20Asset%E9%80%9A%E8%BF%87%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90/111636_991.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="UE Async Load Asset通过资源路径动态加载资源"></a><div class="content"><a class="title" href="/2026/01/29/UE/UE%20Async%20Load%20Asset%E9%80%9A%E8%BF%87%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90/" title="UE Async Load Asset通过资源路径动态加载资源">UE Async Load Asset通过资源路径动态加载资源</a><time datetime="2026-01-29T03:23:13.000Z" title="发表于 2026-01-29 11:23:13">2026-01-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/22/UE/%E5%85%B3%E4%BA%8E%E9%A3%9E%E6%9C%BA%E7%9A%84%E7%BF%BC%E5%92%8C%E8%88%B5/" title="关于飞机的翼和舵"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2026/01/22/UE/%E5%85%B3%E4%BA%8E%E9%A3%9E%E6%9C%BA%E7%9A%84%E7%BF%BC%E5%92%8C%E8%88%B5/1c502f5433cdb915d54d957f374436c1.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="关于飞机的翼和舵"></a><div class="content"><a class="title" href="/2026/01/22/UE/%E5%85%B3%E4%BA%8E%E9%A3%9E%E6%9C%BA%E7%9A%84%E7%BF%BC%E5%92%8C%E8%88%B5/" title="关于飞机的翼和舵">关于飞机的翼和舵</a><time datetime="2026-01-22T01:20:11.000Z" title="发表于 2026-01-22 09:20:11">2026-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/19/UML/UML%E7%B1%BB%E5%9B%BE%E8%AF%A6%E8%A7%A3/" title="UML类图详解"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2026/01/19/UML/UML%E7%B1%BB%E5%9B%BE%E8%AF%A6%E8%A7%A3/9c7c3f64477366af39881fbdc38683d7.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="UML类图详解"></a><div class="content"><a class="title" href="/2026/01/19/UML/UML%E7%B1%BB%E5%9B%BE%E8%AF%A6%E8%A7%A3/" title="UML类图详解">UML类图详解</a><time datetime="2026-01-19T00:58:42.000Z" title="发表于 2026-01-19 08:58:42">2026-01-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2026 By formeasy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(async()=>{window.katex_js_css||(window.katex_js_css=!0,await btf.getCSS("https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"),await btf.getScript("https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js")),document.querySelectorAll("#article-container .katex").forEach(t=>t.classList.add("katex-show"))})()</script><script>(()=>{var e=()=>{var e;0!==(e=document.querySelectorAll("pre > code.mermaid")).length&&e.forEach(e=>{var t=document.createElement("pre"),n=(t.className="mermaid-src",t.hidden=!0,t.textContent=e.textContent,document.createElement("div"));n.className="mermaid-wrap",n.appendChild(t),e.parentNode.replaceWith(n)});const t=document.querySelectorAll("#article-container .mermaid-wrap");0!==t.length&&(e=()=>{{var e=t;window.loadMermaid=!0;const a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach((e,t)=>{const n=e.firstElementChild;e=`%%{init:{ 'theme':'${a}'}}%%
`+n.textContent,t=mermaid.render("mermaid-"+t,e);const d=e=>{n.insertAdjacentHTML("afterend",e)};"string"==typeof t?d(t):t.then(({svg:e})=>d(e))})}},btf.addGlobalFn("themeChange",e,"mermaid"),window.loadMermaid?e():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(e))};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const a=GLOBAL_CONFIG_SITE.isShuoshuo,s=null,n=t=>"dark"===t?"dark":"light";var t=(t=document,e)=>{e=a?{"data-mapping":"specific","data-term":e}:{"data-mapping":(s,"pathname")},e=(t=>{const a=document.createElement("script");return Object.entries(t).forEach(([t,e])=>{a.setAttribute(t,e)}),a})({src:"https://giscus.app/client.js","data-repo":"formeasy/blog","data-repo-id":"R_kgDOJ2sA5A","data-category-id":"DIC_kwDOJ2sA5M4CktKh","data-theme":n(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0,...s,...e});t.querySelector("#giscus-wrap").appendChild(e),a&&(window.shuoshuoComment.destroyGiscus=()=>{t.children.length&&(t.innerHTML="",t.classList.add("no-comment"))})};btf.addGlobalFn("themeChange",t=>{var e=document.querySelector("#giscus-wrap iframe");e&&(t={giscus:{setConfig:{theme:n(t)}}},e.contentWindow.postMessage(t,"https://giscus.app"))},"giscus"),a?window.shuoshuoComment={loadComment:t}:t()})()</script></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="请输入搜索关键字" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>