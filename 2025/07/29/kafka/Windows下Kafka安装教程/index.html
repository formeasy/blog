<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Windows 下 Kafka 安装教程 | 易锦风的博客</title><meta name="author" content="formeasy"><meta name="copyright" content="formeasy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Windows 下 Kafka 安装教程"><meta property="og:type" content="article"><meta property="og:title" content="Windows 下 Kafka 安装教程"><meta property="og:url" content="http://www.formeasy.cc/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/index.html"><meta property="og:site_name" content="易锦风的博客"><meta property="og:description" content="Windows 下 Kafka 安装教程"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.formeasy.cc/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/a4fc229519524deba1995b24f6c6eb53.png"><meta property="article:published_time" content="2025-07-29T01:29:11.000Z"><meta property="article:modified_time" content="2025-07-29T02:01:29.123Z"><meta property="article:author" content="formeasy"><meta property="article:tag" content="kafka"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://www.formeasy.cc/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/a4fc229519524deba1995b24f6c6eb53.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.formeasy.cc/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{var e={set:(e,t,a)=>{a&&(a=Date.now()+864e5*a,localStorage.setItem(e,JSON.stringify({value:t,expiry:a})))},get:e=>{var t=localStorage.getItem(e);if(t){var{value:t,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return t;localStorage.removeItem(e)}}},t=(window.btf={saveToLocal:e,getScript:(o,n={})=>new Promise((e,t)=>{const a=document.createElement("script");a.src=o,a.async=!0,Object.entries(n).forEach(([e,t])=>a.setAttribute(e,t)),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),getCSS:(o,n)=>new Promise((e,t)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),addGlobalFn:(e,t,a=!1,o=window)=>{var n;e.startsWith("pjax")||((n=o.globalFn||{})[e]=n[e]||{},n[e][a||Object.keys(n[e]).length]=t,o.globalFn=n)}},()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")}),a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")},o=(btf.activateDarkMode=t,btf.activateLightMode=a,e.get("theme")),t=("dark"===o?t():"light"===o&&a(),e.get("aside-status"));void 0!==t&&document.documentElement.classList.toggle("hide-aside","hide"===t);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Windows 下 Kafka 安装教程",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="易锦风的博客" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">223</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/2025/07/29/kafka/Windows下Kafka安装教程/a4fc229519524deba1995b24f6c6eb53.png)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/icon.png" alt="Logo"><span class="site-name">易锦风的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">Windows 下 Kafka 安装教程</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Windows 下 Kafka 安装教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-29T01:29:11.000Z" title="发表于 2025-07-29 09:29:11">2025-07-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-29T02:01:29.123Z" title="更新于 2025-07-29 10:01:29">2025-07-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="一-准备工作"><a class="markdownIt-Anchor" href="#一-准备工作"></a> 一、准备工作</h3><h4 id="1-安装-java-jdkkafka-依赖-java-运行环境"><a class="markdownIt-Anchor" href="#1-安装-java-jdkkafka-依赖-java-运行环境"></a> ✅ 1. 安装 Java JDK（Kafka 依赖 Java 运行环境）</h4><p>Kafka 是基于 Java 的，必须先安装 JDK。一般学到kafka的同学肯定已经安装好了JDK了，这一步我就不写了，具体可以参考其他文章。</p><p>⚠️ 注意：Kafka 3.9.0 要求本地必须安装 JDK 17 或以上版本。JDK 8 和 11 已不再被官方支持。</p><h5 id="步骤"><a class="markdownIt-Anchor" href="#步骤"></a> 步骤：</h5><ol><li><p>访问官网下载 <a target="_blank" rel="noopener" href="https://adoptium.net/" title="OpenJDK">OpenJDK</a> 或 Oracle JDK。</p></li><li><p>推荐版本：JDK 8 ~ JDK 17（Kafka 3.x 支持到 JDK 17）</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="a4fc229519524deba1995b24f6c6eb53.png" alt=""></p><p>Kafka需要的JDK版本！</p></li><li><p>安装完成后设置环境变量：</p><ul><li><p><code>JAVA_HOME</code>：指向 JDK 安装目录，例如 <code>C:\Program Files\Java\jdk-17.0.1</code></p></li><li><p><code>Path</code> 中添加 <code>%JAVA_HOME%\bin</code></p></li></ul></li></ol><h5 id="验证是否安装成功"><a class="markdownIt-Anchor" href="#验证是否安装成功"></a> 验证是否安装成功：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br><span class="line">javac -version</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="b1da93c4349f40c7af7c8cdca7204828.png" alt=""></p><hr><h3 id="二-下载-kafka"><a class="markdownIt-Anchor" href="#二-下载-kafka"></a> 二、下载 Kafka</h3><p>访问 Apache Kafka 官网下载页面：</p><p>🔗 <a target="_blank" rel="noopener" href="https://kafka.apache.org/downloads" title="https://kafka.apache.org/downloads">https://kafka.apache.org/downloads</a></p><p>选择最新的稳定版本，例如：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="c36284b3c6f04772949c492a94223dfa.png" alt=""></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Latest release: kafka_2.13-3.9.0.tgz</span><br></pre></td></tr></table></figure><p><strong>Windows 用户选择 <code>kafka_2.13-3.9.0.tgz</code> 即可，Scala 版本不影响你在 Windows 上运行 Kafka。除非你自己用 Scala 编写客户端程序，否则任意版本都可以。社区推荐使用 2.13，因此建议你就选这个版本。</strong></p><blockquote><p>✅ 注意：Windows 上使用的是 Kafka 自带的 <code>windows</code> 脚本，不需要 Linux 工具支持。</p></blockquote><hr><h3 id="三-解压-kafka"><a class="markdownIt-Anchor" href="#三-解压-kafka"></a> 三、解压 Kafka</h3><p>虽然 Kafka 是为 Linux 设计的，但官方提供了部分 Windows 兼容脚本（位于 <code>bin/windows/</code> 目录下），所以你可以放心地：</p><ul><li>使用 <code>zookeeper-server-start.bat</code></li><li>使用 <code>kafka-server-start.bat</code></li><li>创建 Topic、发送和消费消息等操作都正常运行</li></ul><p>只是要注意以下几点：</p><table><thead><tr><th>注意事项</th><th>说明</th></tr></thead><tbody><tr><td>路径<strong>不要有空格或中文</strong></td><td>推荐安装路径如 <code>F:\kafka_2.13-3.9.0</code></td></tr><tr><td>日志文件位置</td><td>默认在 <code>logs/</code> 目录下</td></tr><tr><td>性能略差于 Linux</td><td>本地开发没问题，生产建议用 Linux</td></tr><tr><td>不支持某些高级功能</td><td>如 <code>log.dirs</code> 中使用多个磁盘路径（Windows 下可能出错）</td></tr></tbody></table><h4 id="kafka配置kafka-logs的新建必要"><a class="markdownIt-Anchor" href="#kafka配置kafka-logs的新建必要"></a> Kafka配置（kafka-logs的新建必要！！）</h4><p>这个文件主要是存放分区的offerset，元文件，记录消费到哪里等等。</p><table><thead><tr><th>类型</th><th>存放内容</th></tr></thead><tbody><tr><td>Topic 数据</td><td>每个 Topic 的分区数据都存在这里</td></tr><tr><td>Offset 信息</td><td>记录消费者组消费到的位置</td></tr><tr><td>元数据</td><td>分区状态、ISR（In-Sync Replicas）等</td></tr><tr><td>日志文件</td><td>controller.log、kafka-request.log 等</td></tr></tbody></table><p>第一步：一定要需要建立一个空文件夹kafka-logs在bin、config同级！！</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">F:\kafka_2.13-3.9.0\</span><br><span class="line">├── bin/</span><br><span class="line">├── config/</span><br><span class="line">├── logs/</span><br><span class="line">└── kafka-logs/    ← 新建这个文件夹</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="cc0a4784348f4d82ad1c560822d3f9e3.png" alt=""></p><p>第二步：编辑\kafka_2.13-3.9.0\config下的server.properties文件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log.dirs=/kafka-logs</span><br></pre></td></tr></table></figure><p>除了 <code>log.dirs</code>，还有几个常用配置项也建议了解一下，其他改不改不影响基本使用：</p><table><thead><tr><th>配置项</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td><code>broker.id</code></td><td>0</td><td>Kafka 实例的唯一 ID，单机版保持默认即可</td></tr><tr><td><code>listeners</code></td><td>PLAINTEXT://:9092</td><td>Kafka 监听地址，默认本地访问</td></tr><tr><td><code>num.partitions</code></td><td>1</td><td>默认每个 topic 创建的分区数</td></tr><tr><td><code>log.retention.hours</code></td><td>168 (7天)</td><td>消息保留时间</td></tr><tr><td><code>log.segment.bytes</code></td><td>1GB</td><td>单个日志文件大小上限</td></tr><tr><td><code>message.max.bytes</code></td><td>1MB</td><td>最大消息体大小（生产环境可调大）</td></tr></tbody></table><h4 id="完整配置样例适合-windows-单节点开发不必要默认也可"><a class="markdownIt-Anchor" href="#完整配置样例适合-windows-单节点开发不必要默认也可"></a> 完整配置样例（适合 Windows 单节点开发，不必要，默认也可）</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">broker.id=0</span><br><span class="line">listeners=PLAINTEXT://:9092</span><br><span class="line">advertised.listeners=PLAINTEXT://localhost:9092</span><br><span class="line">log.dirs=F:/kafka_2.13-3.9.0/kafka-logs</span><br><span class="line">num.partitions=1</span><br><span class="line">log.retention.hours=168</span><br><span class="line">log.segment.bytes=1073741824</span><br><span class="line">message.max.bytes=10485880</span><br><span class="line">replica.lag.time.ms=10000</span><br><span class="line">offsets.topic.replication.factor=1</span><br><span class="line">transaction.state.log.replication.factor=1</span><br><span class="line">transaction.state.log.min.isr=1</span><br></pre></td></tr></table></figure><h3 id="四-启动-kafka与关闭kafka比较麻烦需要打开多窗口执行"><a class="markdownIt-Anchor" href="#四-启动-kafka与关闭kafka比较麻烦需要打开多窗口执行"></a> 四、启动 Kafka与关闭Kafka（比较麻烦，需要打开多窗口执行）</h3><h4 id="1-启动-zookeeper"><a class="markdownIt-Anchor" href="#1-启动-zookeeper"></a> ✅ 1. 启动 ZooKeeper</h4><p>Kafka 依赖 ZooKeeper 存储元数据信息。</p><p>打开 CMD，进入 Kafka 目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> F:\kafka_2.13-3.9.0</span><br></pre></td></tr></table></figure><p>执行以下命令启动 ZooKeeper：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\zookeeper-server-start.bat .\config\zookeeper.properties</span><br></pre></td></tr></table></figure><p>✅ 成功标志：看到类似 <code>INFO ... Starting zookeeper version...</code> 的日志输出。</p><h4 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述"></a> 问题描述</h4><p>有时zooKeeper报错:ZooKeeper audit is disabled.</p><blockquote><p>[2023-02-18 12:17:27,368] INFO ZooKeeper audit is disabled. (org.apache.zookeeper.audit.ZKAuditProvider)</p></blockquote><h4 id="原因分析"><a class="markdownIt-Anchor" href="#原因分析"></a> 原因分析：</h4><blockquote><p>zookeeper设置参数问题</p></blockquote><h4 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案"></a> 解决方案：</h4><blockquote><p>修改kafka安装目录下config文件中的zookeeper.properties文件</p></blockquote><p>在文件中将false改为true，没有的话就添加下面语句</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">audit.enable=true</span><br></pre></td></tr></table></figure><blockquote><p>[2023-02-18 12:17:27,368] INFO ZooKeeper audit is enabled.(org.apache.zookeeper.audit.ZKAuditProvider)</p></blockquote><hr><h4 id="2-启动-kafka"><a class="markdownIt-Anchor" href="#2-启动-kafka"></a> ✅ 2. 启动 Kafka</h4><p>保持上一个窗口不要关闭，<strong>再打开一个新的 CMD 窗口</strong>，同样进入 Kafka 目录：</p><p>执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-server-start.bat .\config\server.properties</span><br></pre></td></tr></table></figure><p>✅ 成功标志：看到 <code>INFO [KafkaServer id=0] started (kafka.server.KafkaServer)</code></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="b7365692676f4492b5890423ef5ad042.png" alt=""></p><p>成功启动kafka图</p><hr><h4 id="步骤-3关闭-kafka"><a class="markdownIt-Anchor" href="#步骤-3关闭-kafka"></a> ✅ 步骤 3：关闭 Kafka</h4><p>进入 Kafka 目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-server-stop.bat</span><br></pre></td></tr></table></figure><p>你会看到 Kafka 开始安全退出，等待几秒后自动结束。</p><hr><h4 id="步骤-4关闭-zookeeper"><a class="markdownIt-Anchor" href="#步骤-4关闭-zookeeper"></a> ✅ 步骤 4：关闭 ZooKeeper</h4><p>继续在当前 CMD 窗口中执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\zookeeper-server-stop.bat</span><br></pre></td></tr></table></figure><p>ZooKeeper 也会优雅退出。</p><h3 id="五-创建-topic"><a class="markdownIt-Anchor" href="#五-创建-topic"></a> 五、创建 Topic</h3><p>新打开一个 CMD 窗口，创建一个测试用的 Topic：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-topics.bat --create --topic test-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1</span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li><p><code>--topic</code>：Topic 名称</p></li><li><p><code>--partitions</code>：分区数</p></li><li><p><code>--replication-factor</code>：副本数（本地开发设为 1 即可）</p></li></ul><p>查看已创建的 Topic：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-topics.bat --list --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure><hr><h3 id="六-发送消息producer"><a class="markdownIt-Anchor" href="#六-发送消息producer"></a> 六、发送消息（Producer）</h3><p>打开一个新 CMD 窗口，运行生产者控制台：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-console-producer.bat --topic test-topic --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure><p>输入任意文字后按回车即可发送消息，比如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;Hello Kafka!</span><br><span class="line">&gt;This is a <span class="built_in">test</span> message.</span><br></pre></td></tr></table></figure><hr><h3 id="七-消费消息consumer"><a class="markdownIt-Anchor" href="#七-消费消息consumer"></a> 七、消费消息（Consumer）</h3><p>再新开一个 CMD 窗口，运行消费者控制台：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\bin\windows\kafka-console-consumer.bat --topic test-topic --from-beginning --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure><p>你会看到刚刚发送的消息被打印出来！</p><hr><h3 id="八-windows-下如何正确启动和关闭-kafka"><a class="markdownIt-Anchor" href="#八-windows-下如何正确启动和关闭-kafka"></a> 八、<strong>Windows 下如何正确启动和关闭 Kafka？</strong></h3><p><strong>⚠️ 不要直接关闭 CMD 窗口也不要ctrl + c，都是强制关机！再次启动可能会有很多bug！</strong></p><p><strong>一定要使用官方的启动和关闭脚本！！！bug血泪！</strong></p><p>因为：</p><ul><li><p><code>Ctrl + C</code> 是发送 <code>SIGINT</code> 信号，Kafka 和 ZooKeeper 会尝试优雅关闭，但<strong>不一定能完成全部清理工作</strong></p></li><li><p>如果用户误操作、窗口被意外关闭、或脚本中断，会导致：</p><ul><li><p><code>.lock</code> 文件残留</p></li><li><p><code>controller.log</code> 重命名失败</p></li><li><p>ZooKeeper 节点未清除</p></li><li><p>Kafka Broker 状态未更新</p></li></ul></li></ul><hr><h3 id="九-推荐脚本自动化启停"><a class="markdownIt-Anchor" href="#九-推荐脚本自动化启停"></a> 九、推荐脚本（自动化启停）</h3><p>为了方便你以后快速操作，我为你写好了两个批处理脚本：</p><p><strong>放在同级目录下即可！</strong></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="c49b688d70cd4defb3b76b8a17e2036e.png" alt=""></p><hr><h4 id="启动脚本start-kafkabat"><a class="markdownIt-Anchor" href="#启动脚本start-kafkabat"></a> ✅ 启动脚本：<code>start-kafka.bat</code></h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">chcp</span> <span class="number">65001</span> &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="built_in">TITLE</span> Kafka 启动器 - kafka_2.<span class="number">13</span>-<span class="number">3</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">​</span><br><span class="line"><span class="built_in">SETLOCAL</span></span><br><span class="line">​</span><br><span class="line"><span class="built_in">set</span> KAFKA_HOME=F:\kafka_2.<span class="number">13</span>-<span class="number">3</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> &quot;<span class="variable">%KAFKA_HOME%</span>&quot; (</span><br><span class="line">    <span class="built_in">echo</span> ❌ 错误：KAFKA_HOME 路径不存在: <span class="variable">%KAFKA_HOME%</span></span><br><span class="line">    <span class="built_in">pause</span></span><br><span class="line">    <span class="keyword">exit</span> /b <span class="number">1</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="built_in">cd</span> /d <span class="variable">%KAFKA_HOME%</span></span><br><span class="line">​</span><br><span class="line">:: 清理锁文件（防止上次异常退出导致冲突）</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> &quot;logs\*.lock&quot; <span class="built_in">del</span> /Q &quot;logs\*.lock&quot;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> &quot;logs\*.pid&quot; <span class="built_in">del</span> /Q &quot;logs\*.pid&quot;</span><br><span class="line">​</span><br><span class="line">:: 启动 ZooKeeper</span><br><span class="line"><span class="built_in">echo</span> ▶️ 正在启动 ZooKeeper...</span><br><span class="line"><span class="built_in">start</span> &quot;ZooKeeper&quot; /D &quot;<span class="variable">%KAFKA_HOME%</span>&quot; <span class="keyword">call</span> bin\windows\zookeeper-server-<span class="built_in">start</span>.bat config\zookeeper.properties</span><br><span class="line">​</span><br><span class="line">:: 等待初始化完成</span><br><span class="line">timeout /t <span class="number">7</span> &gt; <span class="built_in">NUL</span></span><br><span class="line">​</span><br><span class="line">:: 启动 Kafka</span><br><span class="line"><span class="built_in">echo</span> ▶️ 正在启动 Kafka Server...</span><br><span class="line"><span class="keyword">call</span> bin\windows\kafka-server-<span class="built_in">start</span>.bat config\server.properties</span><br><span class="line">​</span><br><span class="line"><span class="built_in">echo</span> ✅ Kafka 已成功启动！</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><hr><h4 id="关闭脚本stop-kafkabat"><a class="markdownIt-Anchor" href="#关闭脚本stop-kafkabat"></a> ✅ 关闭脚本：<code>stop-kafka.bat</code></h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">chcp</span> <span class="number">65001</span> &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="built_in">TITLE</span> Kafka 关闭器 - kafka_2.<span class="number">13</span>-<span class="number">3</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">​</span><br><span class="line"><span class="built_in">SETLOCAL</span></span><br><span class="line">​</span><br><span class="line"><span class="built_in">set</span> KAFKA_HOME=F:\kafka_2.<span class="number">13</span>-<span class="number">3</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">​</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> &quot;<span class="variable">%KAFKA_HOME%</span>&quot; (</span><br><span class="line">    <span class="built_in">echo</span> ❌ 错误：KAFKA_HOME 路径不存在: <span class="variable">%KAFKA_HOME%</span></span><br><span class="line">    <span class="built_in">pause</span></span><br><span class="line">    <span class="keyword">exit</span> /b <span class="number">1</span></span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="built_in">cd</span> /d <span class="variable">%KAFKA_HOME%</span></span><br><span class="line">​</span><br><span class="line">:: 停止 Kafka</span><br><span class="line"><span class="built_in">echo</span> ⏹️ 正在尝试优雅地停止 Kafka...</span><br><span class="line"><span class="keyword">call</span> &quot;<span class="variable">%KAFKA_HOME%</span>\bin\windows\kafka-server-stop.bat&quot;</span><br><span class="line">​</span><br><span class="line">:: 等待 Kafka 进程结束</span><br><span class="line"><span class="keyword">call</span> :wait_for_process_exit &quot;kafka&quot; <span class="number">30</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">errorlevel</span> <span class="number">1</span> (</span><br><span class="line">    <span class="built_in">echo</span> ⚠️ Kafka 进程未能在指定时间内退出，请检查日志或手动终止。</span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line">:: 停止 ZooKeeper</span><br><span class="line"><span class="built_in">echo</span> ⏹️ 正在尝试优雅地停止 ZooKeeper...</span><br><span class="line"><span class="keyword">call</span> &quot;<span class="variable">%KAFKA_HOME%</span>\bin\windows\zookeeper-server-stop.bat&quot;</span><br><span class="line">​</span><br><span class="line">:: 等待 ZooKeeper 进程结束</span><br><span class="line"><span class="keyword">call</span> :wait_for_process_exit &quot;zookeeper&quot; <span class="number">30</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">errorlevel</span> <span class="number">1</span> (</span><br><span class="line">    <span class="built_in">echo</span> ⚠️ ZooKeeper 进程未能在指定时间内退出，请检查日志或手动终止。</span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="built_in">echo</span> ✅ Kafka 和 ZooKeeper 已尝试优雅关闭。</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span> /b <span class="number">0</span></span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">:: ============ 函数区 ============</span><br><span class="line">​</span><br><span class="line">:: 等待指定关键字的 Java 进程退出</span><br><span class="line">:wait_for_process_exit</span><br><span class="line"><span class="built_in">setlocal</span></span><br><span class="line"><span class="built_in">set</span> keyword=%~<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> timeout=%~<span class="number">2</span></span><br><span class="line"><span class="built_in">set</span> count=<span class="number">0</span></span><br><span class="line">​</span><br><span class="line"><span class="built_in">echo</span> 🔍 正在等待 [<span class="variable">%keyword%</span>] 进程退出，最多等待 <span class="variable">%timeout%</span> 秒...</span><br><span class="line">​</span><br><span class="line">:loop</span><br><span class="line">tasklist | <span class="built_in">findstr</span> /i java &gt;<span class="built_in">nul</span> &amp;&amp; (</span><br><span class="line">    tasklist | <span class="built_in">findstr</span> /i <span class="variable">%keyword%</span> &gt;<span class="built_in">nul</span> &amp;&amp; (</span><br><span class="line">        <span class="keyword">if</span> <span class="variable">%count%</span> <span class="keyword">lss</span> <span class="variable">%timeout%</span> (</span><br><span class="line">            timeout /t <span class="number">1</span> &gt;<span class="built_in">nul</span></span><br><span class="line">            <span class="built_in">set</span> /a count+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">goto</span> loop</span><br><span class="line">        ) <span class="keyword">else</span> (</span><br><span class="line">            <span class="built_in">endlocal</span></span><br><span class="line">            <span class="keyword">exit</span> /b <span class="number">1</span></span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">​</span><br><span class="line"><span class="built_in">endlocal</span></span><br><span class="line"><span class="keyword">exit</span> /b <span class="number">0</span></span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="e82ade6a847d4f24ac98841c85b92b04.png" alt=""></p><p>优雅地关闭Kafka</p><h3 id="十-常见问题与解决方案"><a class="markdownIt-Anchor" href="#十-常见问题与解决方案"></a> 十、常见问题与解决方案</h3><table><thead><tr><th>问题</th><th>可能原因</th><th>解决方案</th></tr></thead><tbody><tr><td><strong><code>Address already in use</code></strong></td><td>上次未正常关闭 Kafka 或 ZooKeeper</td><td>使用 <code>stop-kafka.bat</code> 关闭服务，或重启电脑</td></tr><tr><td><strong><code>Node does not exist</code></strong></td><td>ZooKeeper 没有正确启动</td><td>确保 ZooKeeper 启动后再启动 Kafka</td></tr><tr><td><strong><code>Class 'kafka.Kafka' could not be found</code></strong></td><td>路径错误或 JDK 版本不对</td><td>检查 <code>JAVA_HOME</code> 是否设置正确</td></tr><tr><td><strong><code>找不到或无法加载主类</code></strong></td><td>Kafka 路径包含中文或空格</td><td>将 Kafka 安装到英文路径下</td></tr></tbody></table><hr></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.formeasy.cc">formeasy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.formeasy.cc/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">http://www.formeasy.cc/2025/07/29/kafka/Windows下Kafka安装教程/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://www.formeasy.cc" target="_blank">易锦风的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/kafka/">kafka</a></div><div class="post-share"><div class="social-share" data-image="/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/a4fc229519524deba1995b24f6c6eb53.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/29/kafka/kafka%E5%85%A5%E9%97%A8%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B_ubuntu%E5%AE%89%E8%A3%85kafka/" title="kafka入门安装教程_ubuntu安装kafka"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">kafka入门安装教程_ubuntu安装kafka</div></div><div class="info-2"><div class="info-item-1">一、安装前准备 安装Java环境 Kafka依赖Java运行，推荐安装OpenJDK 8或11： 12sudo apt updatesudo apt install openjdk-11-jdk # 或 openjdk-8-jdk 验证安装： 1java -version 配置环境变量（如未自动配置）： 12echo &#x27;export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64&#x27; &gt;&gt; ~/.bashrc # 根据实际路径调整source ~/.bashrc 创建专用用户（可选） 为安全起见，建议创建独立用户运行Kafka： 1234sudo useradd -m kafkasudo passwd kafkasudo adduser kafka sudosu - kafka # 切换到kafka用户 二、下载与安装Kafka 下载Kafka二进制包 访问Apache Kafka官网选择版本（推荐3.5.1或稳定版），下载并解压： 123wget...</div></div></div></a><a class="pagination-related" href="/2025/07/28/Neo4j/%E4%BD%BF%E7%94%A8Python%E6%93%8D%E4%BD%9CNeo4j/" title="使用Python操作Neo4j"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/07/28/Neo4j/%E4%BD%BF%E7%94%A8Python%E6%93%8D%E4%BD%9CNeo4j/43d5c8d02d119777f3452127bb80c5f8a2707e.webp" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">使用Python操作Neo4j</div></div><div class="info-2"><div class="info-item-1">一、基础环境准备 1.1 创建 Conda 虚拟环境 打开终端/命令行，输入： 1conda create -n neo4j_env python=3.11 -y -n neo4j_env：环境名称（可自定义，如 my_neo4j_env）。 python=3.11.0：指定 Python 版本（本次采用3.11.0）。 -y：自动确认安装依赖。 激活环境 1conda activate neo4j_env # Windows/macOS/Linux 通用命令 1.2 安装 Py2neo 库 安装最新py2neo版本的命令： 12# 或安装最新版（适合 Neo4j 5.x）pip install py2neo 1.3 验证安装 在 Python 交互环境中测试： 123456from py2neo import __version__print(&quot;Py2neo 版本:&quot;, __version__) # 应显示安装版本号# 连接 Neo4j 测试（确保本地 Neo4j 服务已启动）from py2neo import Graphgraph...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/07/29/kafka/Kafka%E7%AE%80%E4%BB%8B%E5%92%8CUbuntu20.04%E5%AE%89%E8%A3%85kafka/" title="Kafka简介和Ubuntu20.04安装kafka"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/07/29/kafka/Kafka%E7%AE%80%E4%BB%8B%E5%92%8CUbuntu20.04%E5%AE%89%E8%A3%85kafka/57bd315695d55136ee958cc6bd3a3ece.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">Kafka简介和Ubuntu20.04安装kafka</div></div><div class="info-2"><div class="info-item-1">简介 Kafka是一个实时数据处理系统，可以横向扩展、高可靠，而且还变态快，已经被很多公司使用。 那么什么是实时数据处理系统呢？顾名思义，实时数据处理系统就是数据一旦产生，就要能快速进行处理的系统。 对于实时数据处理，我们最常见的，就是消息中间件了，也叫MQ（Message Queue，消息队列），也有叫Message Broker的。 为什么需要消息中间件 消息中间件的作用主要有两点： 1. 解耦消息的生产和消费。 2. 缓冲。 想象一个场景，你的一个创建订单的操作，在订单创建完成之后，需要触发一系列其他的操作，比如进行用户订单数据的统计、给用户发送短信、给用户发送邮件等等，就像这样： 123456createOrder(...)&#123; ... statOrderData(...); sendSMS();...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/kafka%E5%85%A5%E9%97%A8%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B_ubuntu%E5%AE%89%E8%A3%85kafka/" title="kafka入门安装教程_ubuntu安装kafka"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">kafka入门安装教程_ubuntu安装kafka</div></div><div class="info-2"><div class="info-item-1">一、安装前准备 安装Java环境 Kafka依赖Java运行，推荐安装OpenJDK 8或11： 12sudo apt updatesudo apt install openjdk-11-jdk # 或 openjdk-8-jdk 验证安装： 1java -version 配置环境变量（如未自动配置）： 12echo &#x27;export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64&#x27; &gt;&gt; ~/.bashrc # 根据实际路径调整source ~/.bashrc 创建专用用户（可选） 为安全起见，建议创建独立用户运行Kafka： 1234sudo useradd -m kafkasudo passwd kafkasudo adduser kafka sudosu - kafka # 切换到kafka用户 二、下载与安装Kafka 下载Kafka二进制包 访问Apache Kafka官网选择版本（推荐3.5.1或稳定版），下载并解压： 123wget...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/" title="kafka单机和集群部署"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/bc0251f81f814d2fb6fb334411538d4f.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">kafka单机和集群部署</div></div><div class="info-2"><div class="info-item-1">一、kafka简介 1.1、概述 kafka 是由 linkedin 公司开发，是一个分布式、分区、多副本、多生产者、多消费者，基于 zookeeper 的分布式 日志系统（也可以作为MQ 系统），常见可以用于 web/nginx 日志、访问日志、消息服务等， Linkedin2010 年将项目贡献给了Apache 基金会并成为顶级开源项目。 主要应用场景是：日志收集系统和消息详细。 设计目标如下： 1. 一时间复杂度为 O(1) 的方式提供消息持久能力，即使对 TB 级以上的数据也能保证常数时间的访问性能。 2. 高吞吐率：即使在非常廉价的商用机器上也能做到单机支持每秒 100k 条消息的传输。 3. 支持 Kafka Server 间的消息分布，以及分布式消费，同时保证每个 partition 内的消息顺序传输。 4. 同时支持离线数据和实时数据处理。 5. Scale out ：支持在线水平扩展。 1.2、消息系统介绍 一个消息系统负责将数据从一个应用传递到另外一个应用，应用只需要关注数据，无需要关系数据再两个或者...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%8E%A9%E8%BD%AC%20kafka-python%EF%BC%9A%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E6%B6%88%E8%B4%B9%E8%80%85%E5%AE%9E%E6%88%98%E5%85%A8%E6%94%BB%E7%95%A5/" title="手把手教你玩转 kafka-python：从安装到消费者实战全攻略"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">手把手教你玩转 kafka-python：从安装到消费者实战全攻略</div></div><div class="info-2"><div class="info-item-1">在分布式系统开发中，我们经常会遇到消息队列的需求，而 Kafka 作为高性能的消息中间件，自然成为首选。但如何在 Python 中高效使用 Kafka 呢？今天我们就来深入探讨 kafka-python 的安装与消费者实战，带你从零开始掌握这个强大的工具。 一、kafka-python 安装指南 1. 最新稳定版安装 我们可以使用最常用的 Pip 包管理器来安装 kafka-python 的最新稳定版本，只需一行命令即可完成基础安装： 1pip install kafka-python 2. 开发版安装（获取最新特性） 如果我们想体验最新的功能特性，可以通过 Git 克隆仓库并手动安装： 123git clone https://github.com/dpkp/kafka-pythoncd kafka-pythonpip install . 3. 性能优化相关的可选安装 （1）crc32c 安装（Kafka 11 + 强烈推荐） 当我们使用 Kafka 11 + 版本的 broker 时，新的消息协议需要计算 crc32c，而默认的纯 Python 实现性能较差。安装...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">formeasy</div><div class="author-info-description">专注互联网和软件技术</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">223</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/formeasy"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/formeasy" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:formeasy@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">用学习，面对遭遇的变化；用斗志，面对每天的挫折；用坚持，面对失去的动力!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">一、准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-java-jdkkafka-%E4%BE%9D%E8%B5%96-java-%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.</span> <span class="toc-text">✅ 1. 安装 Java JDK（Kafka 依赖 Java 运行环境）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.1.1.</span> <span class="toc-text">步骤：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F"><span class="toc-number">1.1.2.</span> <span class="toc-text">验证是否安装成功：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E4%B8%8B%E8%BD%BD-kafka"><span class="toc-number">2.</span> <span class="toc-text">二、下载 Kafka</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E8%A7%A3%E5%8E%8B-kafka"><span class="toc-number">3.</span> <span class="toc-text">三、解压 Kafka</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#kafka%E9%85%8D%E7%BD%AEkafka-logs%E7%9A%84%E6%96%B0%E5%BB%BA%E5%BF%85%E8%A6%81"><span class="toc-number">3.1.</span> <span class="toc-text">Kafka配置（kafka-logs的新建必要！！）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE%E6%A0%B7%E4%BE%8B%E9%80%82%E5%90%88-windows-%E5%8D%95%E8%8A%82%E7%82%B9%E5%BC%80%E5%8F%91%E4%B8%8D%E5%BF%85%E8%A6%81%E9%BB%98%E8%AE%A4%E4%B9%9F%E5%8F%AF"><span class="toc-number">3.2.</span> <span class="toc-text">完整配置样例（适合 Windows 单节点开发，不必要，默认也可）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E5%90%AF%E5%8A%A8-kafka%E4%B8%8E%E5%85%B3%E9%97%ADkafka%E6%AF%94%E8%BE%83%E9%BA%BB%E7%83%A6%E9%9C%80%E8%A6%81%E6%89%93%E5%BC%80%E5%A4%9A%E7%AA%97%E5%8F%A3%E6%89%A7%E8%A1%8C"><span class="toc-number">4.</span> <span class="toc-text">四、启动 Kafka与关闭Kafka（比较麻烦，需要打开多窗口执行）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%90%AF%E5%8A%A8-zookeeper"><span class="toc-number">4.1.</span> <span class="toc-text">✅ 1. 启动 ZooKeeper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="toc-number">4.2.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90"><span class="toc-number">4.3.</span> <span class="toc-text">原因分析：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">4.4.</span> <span class="toc-text">解决方案：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%90%AF%E5%8A%A8-kafka"><span class="toc-number">4.5.</span> <span class="toc-text">✅ 2. 启动 Kafka</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-3%E5%85%B3%E9%97%AD-kafka"><span class="toc-number">4.6.</span> <span class="toc-text">✅ 步骤 3：关闭 Kafka</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-4%E5%85%B3%E9%97%AD-zookeeper"><span class="toc-number">4.7.</span> <span class="toc-text">✅ 步骤 4：关闭 ZooKeeper</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-%E5%88%9B%E5%BB%BA-topic"><span class="toc-number">5.</span> <span class="toc-text">五、创建 Topic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD-%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AFproducer"><span class="toc-number">6.</span> <span class="toc-text">六、发送消息（Producer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83-%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AFconsumer"><span class="toc-number">7.</span> <span class="toc-text">七、消费消息（Consumer）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB-windows-%E4%B8%8B%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD-kafka"><span class="toc-number">8.</span> <span class="toc-text">八、Windows 下如何正确启动和关闭 Kafka？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D-%E6%8E%A8%E8%8D%90%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E5%90%AF%E5%81%9C"><span class="toc-number">9.</span> <span class="toc-text">九、推荐脚本（自动化启停）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%ACstart-kafkabat"><span class="toc-number">9.1.</span> <span class="toc-text">✅ 启动脚本：start-kafka.bat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E8%84%9A%E6%9C%ACstop-kafkabat"><span class="toc-number">9.2.</span> <span class="toc-text">✅ 关闭脚本：stop-kafka.bat</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">10.</span> <span class="toc-text">十、常见问题与解决方案</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/24/MySQL/MySQL5.6-5.7-8.0%E7%89%88%E6%9C%AC%E6%8E%88%E6%9D%83%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/" title="MySQL5.6-5.7-8.0版本授权用户远程连接"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="MySQL5.6-5.7-8.0版本授权用户远程连接"></a><div class="content"><a class="title" href="/2025/10/24/MySQL/MySQL5.6-5.7-8.0%E7%89%88%E6%9C%AC%E6%8E%88%E6%9D%83%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/" title="MySQL5.6-5.7-8.0版本授权用户远程连接">MySQL5.6-5.7-8.0版本授权用户远程连接</a><time datetime="2025-10-24T13:42:07.000Z" title="发表于 2025-10-24 21:42:07">2025-10-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/10/Redis/Window%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85Redis/" title="Window环境下安装Redis"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Window环境下安装Redis"></a><div class="content"><a class="title" href="/2025/10/10/Redis/Window%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85Redis/" title="Window环境下安装Redis">Window环境下安装Redis</a><time datetime="2025-10-10T06:27:15.000Z" title="发表于 2025-10-10 14:27:15">2025-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/07/Other/Java%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6%E5%A4%A7%E6%AF%94%E6%8B%BC%EF%BC%9AJeesite%20%E3%80%81jeecgBoot%E3%80%81smartAdmin%E3%80%81%E8%8B%A5%E4%BE%9D%E5%85%A8%E6%96%B9%E4%BD%8D%E8%A7%A3%E6%9E%90/" title="Java快速开发框架大比拼：Jeesite 、jeecgBoot、smartAdmin、若依全方位解析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/10/07/Other/Java%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6%E5%A4%A7%E6%AF%94%E6%8B%BC%EF%BC%9AJeesite%20%E3%80%81jeecgBoot%E3%80%81smartAdmin%E3%80%81%E8%8B%A5%E4%BE%9D%E5%85%A8%E6%96%B9%E4%BD%8D%E8%A7%A3%E6%9E%90/911b7b057788d21493e66a10c6d05835.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Java快速开发框架大比拼：Jeesite 、jeecgBoot、smartAdmin、若依全方位解析"></a><div class="content"><a class="title" href="/2025/10/07/Other/Java%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6%E5%A4%A7%E6%AF%94%E6%8B%BC%EF%BC%9AJeesite%20%E3%80%81jeecgBoot%E3%80%81smartAdmin%E3%80%81%E8%8B%A5%E4%BE%9D%E5%85%A8%E6%96%B9%E4%BD%8D%E8%A7%A3%E6%9E%90/" title="Java快速开发框架大比拼：Jeesite 、jeecgBoot、smartAdmin、若依全方位解析">Java快速开发框架大比拼：Jeesite 、jeecgBoot、smartAdmin、若依全方位解析</a><time datetime="2025-10-07T14:16:42.000Z" title="发表于 2025-10-07 22:16:42">2025-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/05/Redis/Redis%20%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6%E8%A7%A3%E6%9E%90/" title="Redis 同步机制解析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Redis 同步机制解析"></a><div class="content"><a class="title" href="/2025/10/05/Redis/Redis%20%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6%E8%A7%A3%E6%9E%90/" title="Redis 同步机制解析">Redis 同步机制解析</a><time datetime="2025-10-05T14:21:03.000Z" title="发表于 2025-10-05 22:21:03">2025-10-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/05/Redis/Redis%20%E8%A7%A3%E9%94%81%EF%BC%9AC++%20%E5%AE%9E%E6%88%98%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20Set%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="Redis 解锁：C++ 实战深度探索 Set 数据类型"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/10/05/Redis/Redis%20%E8%A7%A3%E9%94%81%EF%BC%9AC++%20%E5%AE%9E%E6%88%98%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20Set%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/ecfbf686c86c863f90654a62651e1aeb.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Redis 解锁：C++ 实战深度探索 Set 数据类型"></a><div class="content"><a class="title" href="/2025/10/05/Redis/Redis%20%E8%A7%A3%E9%94%81%EF%BC%9AC++%20%E5%AE%9E%E6%88%98%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%B4%A2%20Set%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="Redis 解锁：C++ 实战深度探索 Set 数据类型">Redis 解锁：C++ 实战深度探索 Set 数据类型</a><time datetime="2025-10-05T14:07:35.000Z" title="发表于 2025-10-05 22:07:35">2025-10-05</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By formeasy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(async()=>{window.katex_js_css||(window.katex_js_css=!0,await btf.getCSS("https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"),await btf.getScript("https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js")),document.querySelectorAll("#article-container .katex").forEach(t=>t.classList.add("katex-show"))})()</script><script>(()=>{var e=()=>{var e;0!==(e=document.querySelectorAll("pre > code.mermaid")).length&&e.forEach(e=>{var t=document.createElement("pre"),n=(t.className="mermaid-src",t.hidden=!0,t.textContent=e.textContent,document.createElement("div"));n.className="mermaid-wrap",n.appendChild(t),e.parentNode.replaceWith(n)});const t=document.querySelectorAll("#article-container .mermaid-wrap");0!==t.length&&(e=()=>{{var e=t;window.loadMermaid=!0;const a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach((e,t)=>{const n=e.firstElementChild;e=`%%{init:{ 'theme':'${a}'}}%%
`+n.textContent,t=mermaid.render("mermaid-"+t,e);const d=e=>{n.insertAdjacentHTML("afterend",e)};"string"==typeof t?d(t):t.then(({svg:e})=>d(e))})}},btf.addGlobalFn("themeChange",e,"mermaid"),window.loadMermaid?e():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(e))};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const a=GLOBAL_CONFIG_SITE.isShuoshuo,s=null,n=t=>"dark"===t?"dark":"light";var t=(t=document,e)=>{e=a?{"data-mapping":"specific","data-term":e}:{"data-mapping":(s,"pathname")},e=(t=>{const a=document.createElement("script");return Object.entries(t).forEach(([t,e])=>{a.setAttribute(t,e)}),a})({src:"https://giscus.app/client.js","data-repo":"formeasy/blog","data-repo-id":"R_kgDOJ2sA5A","data-category-id":"DIC_kwDOJ2sA5M4CktKh","data-theme":n(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0,...s,...e});t.querySelector("#giscus-wrap").appendChild(e),a&&(window.shuoshuoComment.destroyGiscus=()=>{t.children.length&&(t.innerHTML="",t.classList.add("no-comment"))})};btf.addGlobalFn("themeChange",t=>{var e=document.querySelector("#giscus-wrap iframe");e&&(t={giscus:{setConfig:{theme:n(t)}}},e.contentWindow.postMessage(t,"https://giscus.app"))},"giscus"),a?window.shuoshuoComment={loadComment:t}:t()})()</script></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="请输入搜索关键字" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>