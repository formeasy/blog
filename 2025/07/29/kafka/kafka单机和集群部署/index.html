<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>kafka单机和集群部署 | 易锦风的博客</title><meta name="author" content="formeasy"><meta name="copyright" content="formeasy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="kafka单机和集群部署"><meta property="og:type" content="article"><meta property="og:title" content="kafka单机和集群部署"><meta property="og:url" content="http://www.formeasy.cc/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/index.html"><meta property="og:site_name" content="易锦风的博客"><meta property="og:description" content="kafka单机和集群部署"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.formeasy.cc/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/bc0251f81f814d2fb6fb334411538d4f.png"><meta property="article:published_time" content="2025-07-29T02:47:14.000Z"><meta property="article:modified_time" content="2025-07-29T02:55:49.414Z"><meta property="article:author" content="formeasy"><meta property="article:tag" content="kafka"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://www.formeasy.cc/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/bc0251f81f814d2fb6fb334411538d4f.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://www.formeasy.cc/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{var e={set:(e,t,a)=>{a&&(a=Date.now()+864e5*a,localStorage.setItem(e,JSON.stringify({value:t,expiry:a})))},get:e=>{var t=localStorage.getItem(e);if(t){var{value:t,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return t;localStorage.removeItem(e)}}},t=(window.btf={saveToLocal:e,getScript:(o,n={})=>new Promise((e,t)=>{const a=document.createElement("script");a.src=o,a.async=!0,Object.entries(n).forEach(([e,t])=>a.setAttribute(e,t)),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),getCSS:(o,n)=>new Promise((e,t)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=o,n&&(a.id=n),a.onload=a.onreadystatechange=()=>{a.readyState&&!/loaded|complete/.test(a.readyState)||e()},a.onerror=t,document.head.appendChild(a)}),addGlobalFn:(e,t,a=!1,o=window)=>{var n;e.startsWith("pjax")||((n=o.globalFn||{})[e]=n[e]||{},n[e][a||Object.keys(n[e]).length]=t,o.globalFn=n)}},()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")}),a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")},o=(btf.activateDarkMode=t,btf.activateLightMode=a,e.get("theme")),t=("dark"===o?t():"light"===o&&a(),e.get("aside-status"));void 0!==t&&document.documentElement.classList.toggle("hide-aside","hide"===t);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"kafka单机和集群部署",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="易锦风的博客" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/2025/07/29/kafka/kafka单机和集群部署/bc0251f81f814d2fb6fb334411538d4f.png)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/icon.png" alt="Logo"><span class="site-name">易锦风的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">kafka单机和集群部署</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我们</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">kafka单机和集群部署</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-29T02:47:14.000Z" title="发表于 2025-07-29 10:47:14">2025-07-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-29T02:55:49.414Z" title="更新于 2025-07-29 10:55:49">2025-07-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">3.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="一-kafka简介"><a class="markdownIt-Anchor" href="#一-kafka简介"></a> 一、kafka简介</h2><h3 id="11-概述"><a class="markdownIt-Anchor" href="#11-概述"></a> 1.1、概述</h3><p>kafka 是由 linkedin 公司开发，是一个分布式、分区、多副本、多生产者、多消费者，基于 zookeeper 的分布式 日志系统（也可以作为MQ 系统），常见可以用于 web/nginx 日志、访问日志、消息服务等， Linkedin2010 年将项目贡献给了Apache 基金会并成为顶级开源项目。</p><p>主要应用场景是：日志收集系统和消息详细。</p><p>设计目标如下：</p><p>1. 一时间复杂度为 O(1) 的方式提供消息持久能力，即使对 TB 级以上的数据也能保证常数时间的访问性能。</p><p>2. 高吞吐率：即使在非常廉价的商用机器上也能做到单机支持每秒 100k 条消息的传输。</p><p>3. 支持 Kafka Server 间的消息分布，以及分布式消费，同时保证每个 partition 内的消息顺序传输。</p><p>4. 同时支持离线数据和实时数据处理。</p><p>5. Scale out ：支持在线水平扩展。</p><h3 id="12-消息系统介绍"><a class="markdownIt-Anchor" href="#12-消息系统介绍"></a> 1.2、消息系统介绍</h3><p>一个消息系统负责将数据从一个应用传递到另外一个应用，应用只需要关注数据，无需要关系数据再两个或者 多个应用间是如何传递的。分布式消息传递基于可靠的消息队列，在客户端应用和消息系统之间异步传递消 息，有两种主要的消息传递模式：点对点传递模式、发布-订阅模式。大部分的消息系统选用发布 - 订阅模式。</p><p>kafka 无疑也是一种消息订阅模式的系统。</p><h3 id="13-点对点消息传递模式"><a class="markdownIt-Anchor" href="#13-点对点消息传递模式"></a> 1.3、点对点消息传递模式</h3><p>在点对点消息系统中，消息持久化到一个队列中。此时，将有一个或多个消费队列中的数据。但是一条消息只 能被消费一次，当一个消费者消费了队列中的某条数据之后，该条数据则从消息队列中删除。该模式及时有多 个消费者同时消费数据，也能保证数据处理的顺序，架构示意图如下</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="bc0251f81f814d2fb6fb334411538d4f.png" alt=""></p><h3 id="14-发布-订阅消息传递模式"><a class="markdownIt-Anchor" href="#14-发布-订阅消息传递模式"></a> 1.4、发布-订阅消息传递模式</h3><p>在该模式中，消息呗持久化到一个 topic 中。与点对点消息系统不同的是，消费者可以订阅一个或者多个 topic，消费者可以消费 topic 中所有的数据，同一条数据可以被多个消费者消费，数据被消费后不会立马删除。在该模式下，消息的生产者称为发布者，消费者称为订阅这，架构示意图如下：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="3b1a0a05651d4cdfa63b7412cef70d72.png" alt=""></p><h2 id="二-kafka术语解释"><a class="markdownIt-Anchor" href="#二-kafka术语解释"></a> 二、kafka术语解释</h2><h3 id="21-结构概述"><a class="markdownIt-Anchor" href="#21-结构概述"></a> 2.1、结构概述</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="5335e2aca880419b9aab561ab26ef9ed.png" alt=""></p><p>上图中一个 topic 配置了 3 个 partition 。 Partition1 有两个 oﬀset ： 0 和 1 。 Partition2 有 4 个 oﬀset 。 Partition3 有 1个oﬀset 。副本的 id 和副本所在的机器的 id 恰好相同。</p><p>如果一个 topic 的副本数为 3 ，那么 Kafka 将在集群中为每个 partition 创建 3 个相同的副本。集群中的每个 broker存储一个或多个partition 。多个 producer 和 consumer 可同时生产和消费数据。</p><h3 id="22-broker"><a class="markdownIt-Anchor" href="#22-broker"></a> 2.2、broker</h3><p>一台 Kafka 服务器就是一个 Broker ，一个集群由多个 Broker 组成，一个 Broker 可以容纳多个 Topic ， Broker 和Broker之间没有 Master 和 Standy 的概念，他们之间的地位基本是平等的。</p><p>Kafka 集群包含一个或者多个服务器，服务器节点成为 broker 。</p><p>broker 存储 topic 的数据，如果某 topic 有 N 个 partion, 集群有 N 个 broker 。</p><p>broker 存储 topic 的数据。如果某 topic 有 N 个 partition ，集群有 N 个 broker ，那么每个 broker 存储该 topic 的一个partition 。</p><p>如果某 topic 有 N 个 partition ，集群有 (N+M) 个 broker ，那么其中有 N 个 broker 存储该 topic 的一个 partition ，剩下的M 个 broker 不存储该 topic 的 partition 数据。</p><p>如果某 topic 有 N 个 partition ，集群中 broker 数目少于 N 个，那么一个 broker 存储该 topic 的一个或多个 partition。在实际生产环境中，尽量避免这种情况的发生，这种情况容易导致 Kafka 集群数据不均衡。</p><h3 id="23-topic"><a class="markdownIt-Anchor" href="#23-topic"></a> 2.3、topic</h3><p>每条发布到 Kafka 集群的消息都有一个类别，这个类别被称为 Topic 。（物理上不同 Topic 的消息分开存储，逻辑上一个Topic 的消息虽然保存于一个或多个 broker 上但用户只需指定消息的 Topic 即可生产或消费数据而不必关心数据存于何处）</p><p>类似于数据库的表名。</p><h3 id="24-producer"><a class="markdownIt-Anchor" href="#24-producer"></a> 2.4、producer</h3><p>topic 中的数据分割为一个或多个 partition 。每个 topic 至少有一个 partition 。每个 partition 中的数据使用多个 segment文件存储。 partition 中的数据是有序的，不同 partition 间的数据丢失了数据的顺序。如果 topic 有多个partition，消费数据时就不能保证数据的顺序。在需要严格保证消息的消费顺序的场景下，需要将 partition 数目设为1 。</p><h3 id="25-consumer"><a class="markdownIt-Anchor" href="#25-consumer"></a> 2.5、consumer</h3><p>消费者可以从 broker 中读取数据。消费者可以消费多个 topic 中的数据。</p><h3 id="26-consumer-group"><a class="markdownIt-Anchor" href="#26-consumer-group"></a> 2.6、consumer group</h3><p>每个 Consumer 属于一个特定的 Consumer Group （可为每个 Consumer 指定 group name ，若不指定 groupname则属于默认的 group ）。</p><h3 id="27-leader"><a class="markdownIt-Anchor" href="#27-leader"></a> 2.7、leader</h3><p>每个 partition 有多个副本，其中有且仅有一个作为 Leader ， Leader 是当前负责数据的读写的 partition 。</p><h3 id="28-follower"><a class="markdownIt-Anchor" href="#28-follower"></a> 2.8、follower</h3><p>Follower 跟随 Leader ，所有写请求都通过 Leader 路由，数据变更会广播给所有 Follower ， Follower 与 Leader 保持数据同步。如果Leader 失效，则从 Follower 中选举出一个新的 Leader 。当 Follower 与 Leader 挂掉、卡住或者同步太慢，leader 会把这个 follower 从 “in sync replicas” （ ISR ）列表中删除，重新创建一个 Follower 。</p><h3 id="29-partition"><a class="markdownIt-Anchor" href="#29-partition"></a> 2.9、partition</h3><p>为了实现可扩展性，一个非常大的 Topic 可以被分为多个 Partion, 从而分布到多台 Broker 上。 Partion 中的每条消息都会被分配一个自增Id(Oﬀset) 。 Kafka 只保证按一个 Partion 中的顺序将消息发送给消费者，但是不保证单个Topic 中的多个 Partion 之间的顺序。</p><h3 id="210-offset"><a class="markdownIt-Anchor" href="#210-offset"></a> 2.10、offset</h3><p>消息在 Topic 的 Partion 中的位置，同一个 Partion 中的消息随着消息的写入，其对应的 Oﬀset 也自增，结构图如下：</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="a85e03bc2ba148e08d99efb4ab1c3950.png" alt=""></p><h3 id="211-replica"><a class="markdownIt-Anchor" href="#211-replica"></a> 2.11、replica</h3><p>副本。 Topic 的 Partion 含有 N 个 replica,N 为副本因子。其中一个 Replica 为 Leader, 其他都为 Follower,Leader 处理Partition 的所有读写请求，与此同时， Follower 会定期去同步 Leader 上的数据。</p><h3 id="212-message"><a class="markdownIt-Anchor" href="#212-message"></a> 2.12、message</h3><p>通讯的基本单位，消息</p><h3 id="213-zookeeper"><a class="markdownIt-Anchor" href="#213-zookeeper"></a> 2.13、zookeeper</h3><p>存放 Kafka 集群相关元数据的组件。在 ZK 集群中会保存 Topic 的状态消息，例如分区的个数，分区的组成，分区的分布情况等；保存Broker 的状态消息；报错消费者的消息等。通过这些消息， Kafka 很好的将消息生产，消息存储，消息消费的过程结合起来。</p><h2 id="三-kafka架构"><a class="markdownIt-Anchor" href="#三-kafka架构"></a> 三、kafka架构</h2><p>在 Kafka 集群中生产者将消息发送给以 Topic 命名的消息队列 Queue 中，消费者订阅发往以某个 Topic 命名的消息队列Queue 中的消息。其中 Kafka 集群由若干个 Broker 组成， Topic 由若干个 Partition 组成，每个 Partition 里面的消息通过Oﬀset 来获取。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="73ae904b833f4497bb8bcd0a612aef53.png" alt=""></p><p>一个典型的 Kafka 集群中包含若干个 Producer( 可以是某个模块下发的 Command, 或者是 Web 前端产生的 PageView，或者是服务器日志，系统 CPU,Memor 等 ) ，若干个 Broker （ Kafka 集群支持水平扩展，一般 Broker数量越多，整个Kafka 集群的吞吐率也就越高），若干个 ConsumerGroup, 以及一个 Zookeeper 集群。 Kafka 通过zookeeper 管理集群配置。 Producer 使用 Push 模式将消息发不到 Broker 上， consumer 使用 Pull 模式从Broker上订阅并消费消息。</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="afc0319471f24477bd20758646bed79a.png" alt=""></p><h2 id="四-kafka的部署"><a class="markdownIt-Anchor" href="#四-kafka的部署"></a> 四、kafka的部署</h2><h3 id="41-软件下载"><a class="markdownIt-Anchor" href="#41-软件下载"></a> 4.1、软件下载</h3><p>无论单机部署还是集群，这一步都不能省</p><h4 id="411-jdk的安装"><a class="markdownIt-Anchor" href="#411-jdk的安装"></a> 4.1.1、jdk的安装</h4><p>由于带GUI界面的安装，是自带jdk版本的，我们可以选择使用默认jdk</p><p>自带JDK，这种JDK可以使用java -version检查，如果使用javac就不行了，所以进行安装:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install java-1.8.0-openjdk-devel -y</span><br></pre></td></tr></table></figure><h4 id="412-zookeeper安装"><a class="markdownIt-Anchor" href="#412-zookeeper安装"></a> 4.1.2、zookeeper安装</h4><p><a target="_blank" rel="noopener" href="https://zookeeper.apache.org/releases.html#download" title="Apache ZooKeeper">Apache ZooKeeper</a></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="d3cde0f1ac034fedb3590f044136b31e.png" alt=""></p><p>选择3.5.7版本</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="01fbdf318ace4d9bba9312d5629e04e2.png" alt=""></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="adc63997e2ee4227819f931c2882402b.png" alt=""></p><p>上传服务器，安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">解压</span><br><span class="line">tar -zxvf apache-zookeeper-3.5.7-bin.tar.gz</span><br><span class="line"><span class="built_in">mv</span> apache-zookeeper-3.5.7-bin zookeeper3.5.7</span><br><span class="line"><span class="built_in">mv</span> zookeeper3.5.7/ /opt</span><br><span class="line"> </span><br><span class="line">创建软链接</span><br><span class="line"><span class="built_in">ln</span> -s /opt/zookeeper3.5.7/ /opt/zookeeper</span><br><span class="line"> </span><br><span class="line">配置环境变量</span><br><span class="line">vim /etc/profile</span><br><span class="line"> </span><br><span class="line">添加</span><br><span class="line"><span class="built_in">export</span> ZK_HOME=/opt/zookeeper</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$ZK_HOME</span>/bin</span><br><span class="line"> </span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"> </span><br><span class="line">将Zookeeper提供的配置文件复制一份，复制成Zookeeper默认寻找的文件</span><br><span class="line"><span class="built_in">cd</span> /opt/zookeeper/conf</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="built_in">cp</span> zoo_sample.cfg zoo.cfg</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"> </span><br><span class="line">创建数据存放目录</span><br><span class="line"><span class="built_in">mkdir</span> data</span><br><span class="line"><span class="built_in">chmod</span> 755 /opt/zookeeper/data</span><br><span class="line"> </span><br><span class="line">修改数据存放位置</span><br><span class="line"><span class="built_in">cd</span> conf/</span><br><span class="line">vim zoo.cfg</span><br><span class="line"> </span><br><span class="line"><span class="comment">##修改以下配置</span></span><br><span class="line">dataDir=/opt/zookeeper/data</span><br><span class="line"> </span><br><span class="line">启动 Zookeeper，Zookeeper的bin目录下</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">./bin/zkServer.sh start zoo.cfg</span><br></pre></td></tr></table></figure><p>检测zookeeper是否正常</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jps <span class="comment"># 看到控制台成功输出 QuorumPeerMain，表示启动成功</span></span><br><span class="line"> </span><br><span class="line">./bin/zkServer.sh status zoo.cfg <span class="comment">## Mode: standalone表示ok</span></span><br></pre></td></tr></table></figure><h4 id="413-kafka的安装"><a class="markdownIt-Anchor" href="#413-kafka的安装"></a> 4.1.3、kafka的安装</h4><p><a target="_blank" rel="noopener" href="https://kafka.apache.org/downloads" title="https://kafka.apache.org/downloads">https://kafka.apache.org/downloads</a></p><p>选择 <code>kafka_2.12-3.8.0.tgz</code> 进行下载，Scala 2.12 和 Scala 2.13 主要是使用Scala编译的版本不同，两者皆可</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="a41ced3968df4fe2b80da9870a199768.png" alt=""></p><p>上传服务器，安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">解压</span><br><span class="line">tar -zxvf kafka_2.12-2.7.0.tgz</span><br><span class="line"><span class="built_in">mv</span> kafka_2.12-2.7.0 /opt</span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"> </span><br><span class="line">创建软链接</span><br><span class="line"><span class="built_in">ln</span> -s /opt/kafka_2.12-2.7.0/ /opt/kafka</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"> </span><br><span class="line">配置环境变量</span><br><span class="line">vim /etc/profile</span><br><span class="line"> </span><br><span class="line">添加</span><br><span class="line"><span class="built_in">export</span> KAFKA_HOME=/opt/kafka</span><br><span class="line"><span class="built_in">export</span> PATH=:<span class="variable">$PATH</span>:<span class="variable">$&#123;KAFKA_HOME&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h3 id="42-单机模式"><a class="markdownIt-Anchor" href="#42-单机模式"></a> 4.2、单机模式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">在Kafka的config目录下存在相关的配置信息——本次我们只想让Kafka快速启动起来只关注server.properties文件即可</span><br><span class="line"> </span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;KAFKA_HOME&#125;</span>/config</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="comment">#connect-console-sink.properties    connect-file-source.properties   consumer.properties  server.properties</span></span><br><span class="line"><span class="comment">#connect-console-source.properties  connect-log4j.properties         kraft                tools-log4j.properties</span></span><br><span class="line"><span class="comment">#connect-distributed.properties     connect-mirror-maker.properties  log4j.properties     trogdor.conf</span></span><br><span class="line"><span class="comment">#connect-file-sink.properties       connect-standalone.properties    producer.properties  zookeeper.properties</span></span><br><span class="line"> </span><br><span class="line">打开配置文件，并主要注意以下几个配置</span><br><span class="line">vim server.properties</span><br><span class="line"> </span><br><span class="line">broker.id=0 <span class="comment">#kafka服务节点的唯一标识，这里是单机不用修改</span></span><br><span class="line"><span class="comment">#     listeners = PLAINTEXT://host1:9092  别忘了设置成自己的主机名</span></span><br><span class="line">listeners=PLAINTEXT://host1:9092 <span class="comment">#kafka底层监听的服务地址，注意是使用主机名，不是ip。</span></span><br><span class="line"><span class="comment"># log.dirs 指定的目录 kafka启动时可以自动创建，因此不要忘了让kafka可以有读写这个目录的权限。</span></span><br><span class="line">log.dirs=/opt/kafka/data <span class="comment">##kafka的分区以日志的形式存储在集群中（其实就是broker数据存储的目录）</span></span><br><span class="line"> </span><br><span class="line">log.retention.hours=168 <span class="comment">#日志的留存策略，默认168小时也就是一周</span></span><br><span class="line"><span class="comment"># zookeeper 的连接地址 ，别忘了设置成自己的主机名，单机情况下可以使用 localhost</span></span><br><span class="line">zookeeper.connect=host1:2181</span><br></pre></td></tr></table></figure><p>启动kafka</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./bin/kafka-server-start.sh -daemon config/server.properties <span class="comment">#后台启动kafka</span></span><br><span class="line"> </span><br><span class="line">使用 jps 查看是否成功启动kafka</span><br><span class="line">jps</span><br><span class="line">34843 QuorumPeerMain</span><br><span class="line">21756 Jps</span><br><span class="line">116076 Kafka</span><br></pre></td></tr></table></figure><h3 id="43-集群部署"><a class="markdownIt-Anchor" href="#43-集群部署"></a> 4.3、集群部署</h3><h4 id="431-针对每一个节点的hosts文件添加节点的ip映射信息"><a class="markdownIt-Anchor" href="#431-针对每一个节点的hosts文件添加节点的ip映射信息"></a> 4.3.1、针对每一个节点的hosts文件添加节点的ip映射信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim  /etc/hosts</span><br><span class="line">192.168.157.80 host1</span><br><span class="line">192.168.157.81 host2</span><br><span class="line">192.168.157.82 host3</span><br></pre></td></tr></table></figure><h4 id="432-时间同步"><a class="markdownIt-Anchor" href="#432-时间同步"></a> 4.3.2、时间同步</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install ntp -y</span><br><span class="line">ntpdate cn.pool.ntp.org | ntp[1-7].aliyun.com <span class="comment">#两个时钟同步地址选择一个就行</span></span><br></pre></td></tr></table></figure><h4 id="433-zookeeper配置"><a class="markdownIt-Anchor" href="#433-zookeeper配置"></a> 4.3.3、zookeeper配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /opt/zookeeper/conf/zoo.cfg</span><br><span class="line"><span class="comment">##额外添加以下配置</span></span><br><span class="line">server.1=host1:2888:3888 <span class="comment">#数据同步端口:领导选举时服务器监听的端口</span></span><br><span class="line">server.2=host2:2888:3888</span><br><span class="line">server.3=host3:2888:3888</span><br></pre></td></tr></table></figure><h4 id="434-创建对应的服务id"><a class="markdownIt-Anchor" href="#434-创建对应的服务id"></a> 4.3.4、创建对应的服务id</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># host1</span></span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /opt/zookeeper/data/myid <span class="comment">#在这个文件中写入自己服务的id号</span></span><br><span class="line"><span class="comment"># host2</span></span><br><span class="line"><span class="built_in">echo</span> 2 &gt; /opt/zookeeper/data/myid</span><br><span class="line"><span class="comment"># host3</span></span><br><span class="line"><span class="built_in">echo</span> 3 &gt; /opt/zookeeper/data/myid</span><br></pre></td></tr></table></figure><h4 id="435-zoocfg参数解析"><a class="markdownIt-Anchor" href="#435-zoocfg参数解析"></a> 4.3.5、zoo.cfg参数解析</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tickTime=2000: 通信心跳数，用于设置Zookeeper服务器与客户端之间的心跳时间间隔，单位是毫秒。这个时间间隔是Zookeeper使用的基本时间单位，用于服务器之间或客户端与服务器之间维持心跳的时间间隔。</span><br><span class="line"> </span><br><span class="line">initLimit=10: LF初始通信时限，用于设置集群中的Follower跟随者服务器与Leader领导者服务器之间启动时能容忍的最多心跳数。如果在这个时限内（10个心跳时间）领导和根随者没有发出心跳通信，就视为失效的连接，领导和根随者彻底断开。</span><br><span class="line"> </span><br><span class="line">syncLimit=5: LF同步通信时限，用于设置集群启动后，Leader与Follower之间的最大响应时间单位。假如响应超过这个时间（syncLimit * tick Time -&gt; 10秒），Leader就认为Follower已经死掉，会将Follower从服务器列表中删除。</span><br><span class="line"> </span><br><span class="line">dataDir: 数据文件目录+数据持久化路径，主要用于保存Zookeeper中的数据。</span><br><span class="line"> </span><br><span class="line">dataLogDir: 日志文件目录，用于存储Zookeeper的日志文件。</span><br><span class="line"> </span><br><span class="line">clientPort=2181: 客户端连接端口，用于监听客户端连接的端口</span><br></pre></td></tr></table></figure><h4 id="436-集群kafka配置"><a class="markdownIt-Anchor" href="#436-集群kafka配置"></a> 4.3.6、集群kafka配置</h4><p><code>server.properties</code>配置文件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cd $&#123;KAFKA_HOME&#125;/config</span><br><span class="line">vim server.properties</span><br><span class="line"> </span><br><span class="line">broker.id=0 #kafka服务节点的唯一标识</span><br><span class="line">#     listeners = PLAINTEXT://your.host.name:9092  别忘了设置成自己的主机名</span><br><span class="line">listeners=PLAINTEXT://host1:9092 #集群中需要设置成每个节点自己的</span><br><span class="line"># log.dirs 指定的目录 kafka启动时可以自动创建，因此不要忘了让kafka可以有读写这个目录的权限。</span><br><span class="line">log.dirs=/opt/kafka/data ##kafka的分区以日志的形式存储在集群中（其实就是broker数据存储的目录）</span><br><span class="line"># The minimum age of a log file to be eligible for deletion due to age</span><br><span class="line">log.retention.hours=168 #日志的留存策略，默认168小时也就是一周</span><br><span class="line"># zookeeper 集群的连接地址 </span><br><span class="line">zookeeper.connect=host1:2181,host2:2181，host3:2181</span><br></pre></td></tr></table></figure><p>其余配置：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">##修改差异配置</span><br><span class="line">cd $&#123;KAFKA_HOME&#125;/config</span><br><span class="line">vim server.properties</span><br><span class="line"> </span><br><span class="line"># host2节点</span><br><span class="line">broker.id=1</span><br><span class="line">listeners=PLAINTEXT://host2:9092</span><br><span class="line"># host3节点</span><br><span class="line">broker.id=2</span><br><span class="line">listeners=PLAINTEXT://host3:9092</span><br></pre></td></tr></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="7d44b9e403214819954ad08f1101cd77.png" alt=""></p><p>kafka集群即可正常启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kafka其余命令</span><br><span class="line"> </span><br><span class="line">./bin/kafka-server-stop.sh <span class="comment">#关闭kafka</span></span><br><span class="line">kafka-console-consumer.sh <span class="comment">#消费命令</span></span><br><span class="line">kafka-console-producer.sh <span class="comment">#生产命令</span></span><br><span class="line">kafka-consumer-groups.sh <span class="comment">#查看消费者组，重置消费位点等</span></span><br><span class="line">kafka-topics.sh <span class="comment">#查询topic状态，新建，删除，扩容</span></span><br><span class="line">kafka-acls.sh <span class="comment">#配置，查看kafka集群鉴权信息</span></span><br><span class="line">kafka-configs.sh <span class="comment">#查看，修改kafka配置</span></span><br><span class="line">kafka-mirror-maker.sh <span class="comment">#kafka集群间同步命令</span></span><br><span class="line">kafka-preferred-replica-election.sh <span class="comment">#重新选举topic分区leader</span></span><br><span class="line">kafka-producer-perf-test.sh <span class="comment">#kafka自带生产性能测试命令</span></span><br><span class="line">kafka-reassign-partitions.sh <span class="comment">#kafka数据重平衡命令</span></span><br><span class="line">kafka-run-class.sh <span class="comment">#kafka执行脚本</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://www.formeasy.cc">formeasy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://www.formeasy.cc/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/">http://www.formeasy.cc/2025/07/29/kafka/kafka单机和集群部署/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://www.formeasy.cc" target="_blank">易锦风的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/kafka/">kafka</a></div><div class="post-share"><div class="social-share" data-image="/2025/07/29/kafka/kafka%E5%8D%95%E6%9C%BA%E5%92%8C%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/bc0251f81f814d2fb6fb334411538d4f.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/29/LLM/%E7%90%86%E8%A7%A3%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83%EF%BC%88Fine-tuning%EF%BC%89%20%E5%92%8C%20%E6%A8%A1%E5%9E%8B%E8%92%B8%E9%A6%8F%EF%BC%88Distillation%EF%BC%89/" title="理解模型微调（Fine-tuning） 和 模型蒸馏（Distillation）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">理解模型微调（Fine-tuning） 和 模型蒸馏（Distillation）</div></div><div class="info-2"><div class="info-item-1">大模型蒸馏与大模型微调是当前人工智能领域中两种重要的技术手段，它们在模型优化、性能提升和资源利用方面各有特点。以下将从定义、技术原理、应用场景及优缺点等方面对这两种技术进行深入对比。 一、定义与基本概念 大模型蒸馏（Knowledge Distillation） 蒸馏是一种将大型复杂模型（教师模型）的知识迁移到小型模型（学生模型）的技术。通过训练学生模型模仿教师模型的行为，实现模型压缩和性能保留的目标。蒸馏过程通常包括两个阶段：预训练阶段（教师模型训练）和知识传递阶段（学生模型训练）。 大模型微调（Fine-tuning） 微调是指在预训练的大模型基础上，通过少量标注数据的再训练，使模型适应特定任务的需求。微调可以分为全量微调和参数高效微调（如PEFT）。全量微调适用于需要高精度输出的任务，而参数高效微调则通过优化超参数和调整策略，减少计算资源消耗。 ...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%8E%A9%E8%BD%AC%20kafka-python%EF%BC%9A%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E6%B6%88%E8%B4%B9%E8%80%85%E5%AE%9E%E6%88%98%E5%85%A8%E6%94%BB%E7%95%A5/" title="手把手教你玩转 kafka-python：从安装到消费者实战全攻略"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">手把手教你玩转 kafka-python：从安装到消费者实战全攻略</div></div><div class="info-2"><div class="info-item-1">在分布式系统开发中，我们经常会遇到消息队列的需求，而 Kafka 作为高性能的消息中间件，自然成为首选。但如何在 Python 中高效使用 Kafka 呢？今天我们就来深入探讨 kafka-python 的安装与消费者实战，带你从零开始掌握这个强大的工具。 一、kafka-python 安装指南 1. 最新稳定版安装 我们可以使用最常用的 Pip 包管理器来安装 kafka-python 的最新稳定版本，只需一行命令即可完成基础安装： 1pip install kafka-python 2. 开发版安装（获取最新特性） 如果我们想体验最新的功能特性，可以通过 Git 克隆仓库并手动安装： 123git clone https://github.com/dpkp/kafka-pythoncd kafka-pythonpip install . 3. 性能优化相关的可选安装 （1）crc32c 安装（Kafka 11 + 强烈推荐） 当我们使用 Kafka 11 + 版本的 broker 时，新的消息协议需要计算 crc32c，而默认的纯 Python 实现性能较差。安装...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/07/29/kafka/Kafka%E7%AE%80%E4%BB%8B%E5%92%8CUbuntu20.04%E5%AE%89%E8%A3%85kafka/" title="Kafka简介和Ubuntu20.04安装kafka"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/07/29/kafka/Kafka%E7%AE%80%E4%BB%8B%E5%92%8CUbuntu20.04%E5%AE%89%E8%A3%85kafka/57bd315695d55136ee958cc6bd3a3ece.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">Kafka简介和Ubuntu20.04安装kafka</div></div><div class="info-2"><div class="info-item-1">简介 Kafka是一个实时数据处理系统，可以横向扩展、高可靠，而且还变态快，已经被很多公司使用。 那么什么是实时数据处理系统呢？顾名思义，实时数据处理系统就是数据一旦产生，就要能快速进行处理的系统。 对于实时数据处理，我们最常见的，就是消息中间件了，也叫MQ（Message Queue，消息队列），也有叫Message Broker的。 为什么需要消息中间件 消息中间件的作用主要有两点： 1. 解耦消息的生产和消费。 2. 缓冲。 想象一个场景，你的一个创建订单的操作，在订单创建完成之后，需要触发一系列其他的操作，比如进行用户订单数据的统计、给用户发送短信、给用户发送邮件等等，就像这样： 123456createOrder(...)&#123; ... statOrderData(...); sendSMS();...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" title="Windows 下 Kafka 安装教程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/07/29/kafka/Windows%E4%B8%8BKafka%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/a4fc229519524deba1995b24f6c6eb53.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">Windows 下 Kafka 安装教程</div></div><div class="info-2"><div class="info-item-1">一、准备工作 ✅ 1. 安装 Java JDK（Kafka 依赖 Java 运行环境） Kafka 是基于 Java 的，必须先安装 JDK。一般学到kafka的同学肯定已经安装好了JDK了，这一步我就不写了，具体可以参考其他文章。 ⚠️ 注意：Kafka 3.9.0 要求本地必须安装 JDK 17 或以上版本。JDK 8 和 11 已不再被官方支持。 步骤： 访问官网下载 OpenJDK 或 Oracle JDK。 推荐版本：JDK 8 ~ JDK 17（Kafka 3.x 支持到 JDK 17） Kafka需要的JDK版本！ 安装完成后设置环境变量： JAVA_HOME：指向 JDK 安装目录，例如 C:\Program Files\Java\jdk-17.0.1 Path 中添加 %JAVA_HOME%\bin 验证是否安装成功： 12java -versionjavac -version 二、下载 Kafka 访问 Apache Kafka 官网下载页面： 🔗...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/kafka%E5%85%A5%E9%97%A8%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B_ubuntu%E5%AE%89%E8%A3%85kafka/" title="kafka入门安装教程_ubuntu安装kafka"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">kafka入门安装教程_ubuntu安装kafka</div></div><div class="info-2"><div class="info-item-1">一、安装前准备 安装Java环境 Kafka依赖Java运行，推荐安装OpenJDK 8或11： 12sudo apt updatesudo apt install openjdk-11-jdk # 或 openjdk-8-jdk 验证安装： 1java -version 配置环境变量（如未自动配置）： 12echo &#x27;export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64&#x27; &gt;&gt; ~/.bashrc # 根据实际路径调整source ~/.bashrc 创建专用用户（可选） 为安全起见，建议创建独立用户运行Kafka： 1234sudo useradd -m kafkasudo passwd kafkasudo adduser kafka sudosu - kafka # 切换到kafka用户 二、下载与安装Kafka 下载Kafka二进制包 访问Apache Kafka官网选择版本（推荐3.5.1或稳定版），下载并解压： 123wget...</div></div></div></a><a class="pagination-related" href="/2025/07/29/kafka/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%8E%A9%E8%BD%AC%20kafka-python%EF%BC%9A%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E6%B6%88%E8%B4%B9%E8%80%85%E5%AE%9E%E6%88%98%E5%85%A8%E6%94%BB%E7%95%A5/" title="手把手教你玩转 kafka-python：从安装到消费者实战全攻略"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-29</div><div class="info-item-2">手把手教你玩转 kafka-python：从安装到消费者实战全攻略</div></div><div class="info-2"><div class="info-item-1">在分布式系统开发中，我们经常会遇到消息队列的需求，而 Kafka 作为高性能的消息中间件，自然成为首选。但如何在 Python 中高效使用 Kafka 呢？今天我们就来深入探讨 kafka-python 的安装与消费者实战，带你从零开始掌握这个强大的工具。 一、kafka-python 安装指南 1. 最新稳定版安装 我们可以使用最常用的 Pip 包管理器来安装 kafka-python 的最新稳定版本，只需一行命令即可完成基础安装： 1pip install kafka-python 2. 开发版安装（获取最新特性） 如果我们想体验最新的功能特性，可以通过 Git 克隆仓库并手动安装： 123git clone https://github.com/dpkp/kafka-pythoncd kafka-pythonpip install . 3. 性能优化相关的可选安装 （1）crc32c 安装（Kafka 11 + 强烈推荐） 当我们使用 Kafka 11 + 版本的 broker 时，新的消息协议需要计算 crc32c，而默认的纯 Python 实现性能较差。安装...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/butterfly-icon.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">formeasy</div><div class="author-info-description">专注互联网和软件技术</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">217</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/formeasy"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/formeasy" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:formeasy@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">用学习，面对遭遇的变化；用斗志，面对每天的挫折；用坚持，面对失去的动力!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-kafka%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">一、kafka简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1、概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%B6%88%E6%81%AF%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">1.2、消息系统介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E7%82%B9%E5%AF%B9%E7%82%B9%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">1.3、点对点消息传递模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E5%8F%91%E5%B8%83-%E8%AE%A2%E9%98%85%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">1.4、发布-订阅消息传递模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-kafka%E6%9C%AF%E8%AF%AD%E8%A7%A3%E9%87%8A"><span class="toc-number">2.</span> <span class="toc-text">二、kafka术语解释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">2.1、结构概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-broker"><span class="toc-number">2.2.</span> <span class="toc-text">2.2、broker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-topic"><span class="toc-number">2.3.</span> <span class="toc-text">2.3、topic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-producer"><span class="toc-number">2.4.</span> <span class="toc-text">2.4、producer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-consumer"><span class="toc-number">2.5.</span> <span class="toc-text">2.5、consumer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-consumer-group"><span class="toc-number">2.6.</span> <span class="toc-text">2.6、consumer group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-leader"><span class="toc-number">2.7.</span> <span class="toc-text">2.7、leader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-follower"><span class="toc-number">2.8.</span> <span class="toc-text">2.8、follower</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-partition"><span class="toc-number">2.9.</span> <span class="toc-text">2.9、partition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#210-offset"><span class="toc-number">2.10.</span> <span class="toc-text">2.10、offset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#211-replica"><span class="toc-number">2.11.</span> <span class="toc-text">2.11、replica</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#212-message"><span class="toc-number">2.12.</span> <span class="toc-text">2.12、message</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#213-zookeeper"><span class="toc-number">2.13.</span> <span class="toc-text">2.13、zookeeper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-kafka%E6%9E%B6%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">三、kafka架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-kafka%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="toc-number">4.</span> <span class="toc-text">四、kafka的部署</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-%E8%BD%AF%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">4.1.</span> <span class="toc-text">4.1、软件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#411-jdk%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1、jdk的安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#412-zookeeper%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2、zookeeper安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#413-kafka%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.1.3、kafka的安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E5%8D%95%E6%9C%BA%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.2.</span> <span class="toc-text">4.2、单机模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43-%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="toc-number">4.3.</span> <span class="toc-text">4.3、集群部署</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#431-%E9%92%88%E5%AF%B9%E6%AF%8F%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84hosts%E6%96%87%E4%BB%B6%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9%E7%9A%84ip%E6%98%A0%E5%B0%84%E4%BF%A1%E6%81%AF"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1、针对每一个节点的hosts文件添加节点的ip映射信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#432-%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2、时间同步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#433-zookeeper%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.3.</span> <span class="toc-text">4.3.3、zookeeper配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#434-%E5%88%9B%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%9A%84%E6%9C%8D%E5%8A%A1id"><span class="toc-number">4.3.4.</span> <span class="toc-text">4.3.4、创建对应的服务id</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#435-zoocfg%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90"><span class="toc-number">4.3.5.</span> <span class="toc-text">4.3.5、zoo.cfg参数解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#436-%E9%9B%86%E7%BE%A4kafka%E9%85%8D%E7%BD%AE"><span class="toc-number">4.3.6.</span> <span class="toc-text">4.3.6、集群kafka配置</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/04/Redis/%E3%80%90Redis%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%BC%93%E5%AD%98%E5%90%8C%E6%AD%A5%E3%80%91/" title="【Redis缓存一致性：如何保证数据库与缓存同步】"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/10/04/Redis/%E3%80%90Redis%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%BC%93%E5%AD%98%E5%90%8C%E6%AD%A5%E3%80%91/c1a02890a7ad4c8cb1d6d172adcdb820.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Redis缓存一致性：如何保证数据库与缓存同步】"></a><div class="content"><a class="title" href="/2025/10/04/Redis/%E3%80%90Redis%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%BC%93%E5%AD%98%E5%90%8C%E6%AD%A5%E3%80%91/" title="【Redis缓存一致性：如何保证数据库与缓存同步】">【Redis缓存一致性：如何保证数据库与缓存同步】</a><time datetime="2025-10-04T08:11:24.000Z" title="发表于 2025-10-04 16:11:24">2025-10-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/03/Elasticsearch/Elasticsearch%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E7%BB%86%E6%80%BB%E7%BB%93/" title="Elasticsearch知识点详细总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Elasticsearch知识点详细总结"></a><div class="content"><a class="title" href="/2025/10/03/Elasticsearch/Elasticsearch%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E7%BB%86%E6%80%BB%E7%BB%93/" title="Elasticsearch知识点详细总结">Elasticsearch知识点详细总结</a><time datetime="2025-10-03T13:42:57.000Z" title="发表于 2025-10-03 21:42:57">2025-10-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/03/Other/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B4%A0%E6%9D%90%E6%A0%BC%E5%BC%8F%E5%AE%8C%E6%95%B4%E6%B8%85%E5%8D%95%EF%BC%88%E9%80%82%E7%94%A8%E4%BA%8E%E5%89%8D%E5%90%8E%E7%AB%AF%E3%80%81%E5%85%A8%E6%A0%88%E5%8F%8A%E5%90%84%E9%A2%86%E5%9F%9F%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89/" title="开发中常用素材格式完整清单（适用于前后端、全栈及各领域研发工程师）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="开发中常用素材格式完整清单（适用于前后端、全栈及各领域研发工程师）"></a><div class="content"><a class="title" href="/2025/10/03/Other/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B4%A0%E6%9D%90%E6%A0%BC%E5%BC%8F%E5%AE%8C%E6%95%B4%E6%B8%85%E5%8D%95%EF%BC%88%E9%80%82%E7%94%A8%E4%BA%8E%E5%89%8D%E5%90%8E%E7%AB%AF%E3%80%81%E5%85%A8%E6%A0%88%E5%8F%8A%E5%90%84%E9%A2%86%E5%9F%9F%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89/" title="开发中常用素材格式完整清单（适用于前后端、全栈及各领域研发工程师）">开发中常用素材格式完整清单（适用于前后端、全栈及各领域研发工程师）</a><time datetime="2025-10-03T13:29:38.000Z" title="发表于 2025-10-03 21:29:38">2025-10-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/21/ollama/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20RAG%EF%BC%9A%E5%8E%9F%E7%90%86%E3%80%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/" title="深入浅出 RAG：原理、流程与代码实战"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="深入浅出 RAG：原理、流程与代码实战"></a><div class="content"><a class="title" href="/2025/09/21/ollama/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20RAG%EF%BC%9A%E5%8E%9F%E7%90%86%E3%80%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/" title="深入浅出 RAG：原理、流程与代码实战">深入浅出 RAG：原理、流程与代码实战</a><time datetime="2025-09-21T03:22:29.000Z" title="发表于 2025-09-21 11:22:29">2025-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/17/Python/%E4%BD%BF%E7%94%A8WinSW%E6%8A%8Anginx%E5%81%9A%E6%88%90windows%E6%9C%8D%E5%8A%A1/" title="使用WinSW把nginx做成windows服务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="使用WinSW把nginx做成windows服务"></a><div class="content"><a class="title" href="/2025/09/17/Python/%E4%BD%BF%E7%94%A8WinSW%E6%8A%8Anginx%E5%81%9A%E6%88%90windows%E6%9C%8D%E5%8A%A1/" title="使用WinSW把nginx做成windows服务">使用WinSW把nginx做成windows服务</a><time datetime="2025-09-17T05:58:13.000Z" title="发表于 2025-09-17 13:58:13">2025-09-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By formeasy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(async()=>{window.katex_js_css||(window.katex_js_css=!0,await btf.getCSS("https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"),await btf.getScript("https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js")),document.querySelectorAll("#article-container .katex").forEach(t=>t.classList.add("katex-show"))})()</script><script>(()=>{var e=()=>{var e;0!==(e=document.querySelectorAll("pre > code.mermaid")).length&&e.forEach(e=>{var t=document.createElement("pre"),n=(t.className="mermaid-src",t.hidden=!0,t.textContent=e.textContent,document.createElement("div"));n.className="mermaid-wrap",n.appendChild(t),e.parentNode.replaceWith(n)});const t=document.querySelectorAll("#article-container .mermaid-wrap");0!==t.length&&(e=()=>{{var e=t;window.loadMermaid=!0;const a="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";e.forEach((e,t)=>{const n=e.firstElementChild;e=`%%{init:{ 'theme':'${a}'}}%%
`+n.textContent,t=mermaid.render("mermaid-"+t,e);const d=e=>{n.insertAdjacentHTML("afterend",e)};"string"==typeof t?d(t):t.then(({svg:e})=>d(e))})}},btf.addGlobalFn("themeChange",e,"mermaid"),window.loadMermaid?e():btf.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(e))};btf.addGlobalFn("encrypt",e,"mermaid"),window.pjax?e():document.addEventListener("DOMContentLoaded",e)})()</script><script>(()=>{const a=GLOBAL_CONFIG_SITE.isShuoshuo,s=null,n=t=>"dark"===t?"dark":"light";var t=(t=document,e)=>{e=a?{"data-mapping":"specific","data-term":e}:{"data-mapping":(s,"pathname")},e=(t=>{const a=document.createElement("script");return Object.entries(t).forEach(([t,e])=>{a.setAttribute(t,e)}),a})({src:"https://giscus.app/client.js","data-repo":"formeasy/blog","data-repo-id":"R_kgDOJ2sA5A","data-category-id":"DIC_kwDOJ2sA5M4CktKh","data-theme":n(document.documentElement.getAttribute("data-theme")),"data-reactions-enabled":"1",crossorigin:"anonymous",async:!0,...s,...e});t.querySelector("#giscus-wrap").appendChild(e),a&&(window.shuoshuoComment.destroyGiscus=()=>{t.children.length&&(t.innerHTML="",t.classList.add("no-comment"))})};btf.addGlobalFn("themeChange",t=>{var e=document.querySelector("#giscus-wrap iframe");e&&(t={giscus:{setConfig:{theme:n(t)}}},e.contentWindow.postMessage(t,"https://giscus.app"))},"giscus"),a?window.shuoshuoComment={loadComment:t}:t()})()</script></div><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="请输入搜索关键字" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>