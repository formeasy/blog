<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ˜“é”¦é£çš„åšå®¢</title>
  
  <subtitle>ä¸“æ³¨äº’è”ç½‘å’Œè½¯ä»¶æŠ€æœ¯</subtitle>
  <link href="http://www.formeasy.cc/atom.xml" rel="self"/>
  
  <link href="http://www.formeasy.cc/"/>
  <updated>2025-09-07T08:05:00.412Z</updated>
  <id>http://www.formeasy.cc/</id>
  
  <author>
    <name>formeasy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ­ç§˜Swaggerä¸OpenAPIé›†æˆçš„ç»ˆææ”»ç•¥</title>
    <link href="http://www.formeasy.cc/2025/09/07/Springboot/%E6%8F%AD%E7%A7%98Swagger%E4%B8%8EOpenAPI%E9%9B%86%E6%88%90%E7%9A%84%E7%BB%88%E6%9E%81%E6%94%BB%E7%95%A5/"/>
    <id>http://www.formeasy.cc/2025/09/07/Springboot/%E6%8F%AD%E7%A7%98Swagger%E4%B8%8EOpenAPI%E9%9B%86%E6%88%90%E7%9A%84%E7%BB%88%E6%9E%81%E6%94%BB%E7%95%A5/</id>
    <published>2025-09-07T07:52:12.000Z</published>
    <updated>2025-09-07T08:05:00.412Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>æ¼”ç¤ºç¯å¢ƒè¯´æ˜ï¼š</strong></p><ul><li>å¼€å‘å·¥å…·ï¼šIDEA 2021.3</li><li>JDKç‰ˆæœ¬ï¼š JDK 17ï¼ˆæ¨èä½¿ç”¨ JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå› ä¸º Spring Boot 3.x ç³»åˆ—è¦æ±‚ Java 17ï¼ŒSpring Boot 3.5.4 åŸºäº Spring Framework 6.x å’Œ Jakarta EE 9ï¼Œå®ƒä»¬éƒ½è¦æ±‚è‡³å°‘ JDK 17ã€‚ï¼‰</li><li>Spring Bootç‰ˆæœ¬ï¼š3.5.4ï¼ˆäº25å¹´7æœˆ24æ—¥å‘å¸ƒï¼‰</li><li>Mavenç‰ˆæœ¬ï¼š3.8.2 ï¼ˆæˆ–æ›´é«˜ï¼‰</li><li>Gradleï¼šï¼ˆå¦‚æœä½¿ç”¨ Gradle æ„å»ºå·¥å…·çš„è¯ï¼‰ï¼šæ¨èä½¿ç”¨ Gradle 7.5 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œç¡®ä¿ä¸ JDK 17 å…¼å®¹ã€‚</li><li>æ“ä½œç³»ç»Ÿï¼šWindows 11</li></ul></blockquote><h3 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> ğŸ“ å‰è¨€</h3><p>å“å‘€ï¼Œè¯´èµ·APIæ–‡æ¡£è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘å°±å¿ä¸ä½è¦åæ§½ä¸€ä¸‹ï¼ğŸ™„ ä½œä¸ºä¸€ä¸ªåœ¨ä»£ç ä¸–ç•Œé‡Œæ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„è€å¸æœºï¼Œæˆ‘è§è¿‡å¤ªå¤šå› ä¸ºAPIæ–‡æ¡£ä¸è§„èŒƒã€ä¸åŠæ—¶æ›´æ–°è€Œå¯¼è‡´çš„&quot;è¡€æ¡ˆ&quot;äº†ã€‚å‰ç«¯å°ä¼™ä¼´æ‹¿ç€è¿‡æ—¶çš„æ–‡æ¡£è°ƒæ¥å£ï¼Œåç«¯åŒå­¦å¿™ç€è§£é‡Š&quot;è¿™ä¸ªå‚æ•°å·²ç»æ”¹äº†&quot;ï¼Œæµ‹è¯•åŒå­¦æ›´æ˜¯ä¸€è„¸æ‡µé€¼åœ°é—®&quot;è¿™ä¸ªæ¥å£åˆ°åº•è¿”å›ä»€ä¹ˆæ•°æ®ï¼Ÿ&quot;ğŸ˜‚</p><p>ä¸è¿‡å‘¢ï¼Œéšç€SpringBoot 3.xçš„æ¨ªç©ºå‡ºä¸–ï¼Œç‰¹åˆ«æ˜¯å®ƒä¸OpenAPI 3.0çš„å®Œç¾èåˆï¼Œè¿™äº›ç—›ç‚¹ç»ˆäºæœ‰äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼ä»Šå¤©æˆ‘å°±æ¥è·Ÿå¤§å®¶å¥½å¥½èŠèŠè¿™ä¸ªè¯é¢˜ï¼Œä¿è¯è®©ä½ çœ‹å®Œä¹‹åç›´å‘¼&quot;åŸæ¥å¦‚æ­¤&quot;ï¼ğŸ’¡</p><h3 id="springboot-3xä¸openapiçš„é‚‚é€…"><a class="markdownIt-Anchor" href="#springboot-3xä¸openapiçš„é‚‚é€…"></a> ğŸ¯ SpringBoot 3.xä¸OpenAPIçš„é‚‚é€…</h3><p>è¯´åˆ°SpringBoot 3.xï¼Œé‚£å¯çœŸæ˜¯ä¸ªé‡Œç¨‹ç¢‘å¼çš„ç‰ˆæœ¬å•Šï¼ğŸ˜ å®ƒä¸ä»…æ‹¥æŠ±äº†Java 17çš„æ–°ç‰¹æ€§ï¼Œè¿˜å¯¹æ•´ä¸ªç”Ÿæ€è¿›è¡Œäº†å¤§å¹…åº¦çš„å‡çº§ã€‚è€ŒOpenAPIï¼ˆä»¥å‰å«Swagger Specificationï¼‰ä½œä¸ºAPIæ–‡æ¡£çš„æ ‡å‡†è§„èŒƒï¼Œåœ¨3.0ç‰ˆæœ¬ä¸­ä¹Ÿæ˜¯ç„•ç„¶ä¸€æ–°ï¼</p><h4 id="ä»€ä¹ˆæ˜¯openapi-30"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯openapi-30"></a> ğŸ” ä»€ä¹ˆæ˜¯OpenAPI 3.0ï¼Ÿ</h4><p>OpenAPI 3.0æ˜¯ä¸€ä¸ªç”¨äºæè¿°REST APIçš„è§„èŒƒæ ‡å‡†ï¼Œå®ƒå°±åƒæ˜¯ç»™ä½ çš„APIå†™äº†ä¸€ä»½&quot;èº«ä»½è¯&quot;ğŸ“‹ã€‚é€šè¿‡è¿™ä¸ªè§„èŒƒï¼Œä½ å¯ä»¥æ¸…æ™°åœ°æè¿°ï¼š</p><ul><li>APIçš„åŸºæœ¬ä¿¡æ¯ï¼ˆç‰ˆæœ¬ã€æè¿°ç­‰ï¼‰</li><li>æ¥å£è·¯å¾„å’ŒHTTPæ–¹æ³•</li><li>è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼</li><li>è®¤è¯æ–¹å¼</li><li>é”™è¯¯ç å®šä¹‰</li></ul><p>ç›¸æ¯”äºOpenAPI 2.0ï¼ˆSwagger 2.0ï¼‰ï¼Œ3.0ç‰ˆæœ¬å¸¦æ¥äº†ä¸å°‘å¥½ä¸œè¥¿ï¼š</p><ul><li><strong>æ›´çµæ´»çš„æ•°æ®ç±»å‹æ”¯æŒ</strong>ï¼šæ”¯æŒ<code>oneOf</code>ã€<code>anyOf</code>ã€<code>allOf</code>ç­‰å¤æ‚ç±»å‹ç»„åˆ</li><li><strong>æ›´å¼ºå¤§çš„è®¤è¯æœºåˆ¶</strong>ï¼šæ”¯æŒOAuth 2.0ã€OpenID Connectç­‰ç°ä»£è®¤è¯æ–¹å¼</li><li><strong>ç»„ä»¶å¤ç”¨</strong>ï¼šé€šè¿‡<code>components</code>å®ç°æ›´å¥½çš„å¤ç”¨æ€§</li><li><strong>å›è°ƒæ”¯æŒ</strong>ï¼šæ”¯æŒå¼‚æ­¥APIçš„å›è°ƒå®šä¹‰</li></ul><h4 id="springboot-3xçš„å˜åŒ–"><a class="markdownIt-Anchor" href="#springboot-3xçš„å˜åŒ–"></a> ğŸ¤ SpringBoot 3.xçš„å˜åŒ–</h4><p>SpringBoot 3.xæœ€å¤§çš„å˜åŒ–å°±æ˜¯å…¨é¢æ‹¥æŠ±äº†Jakarta EEï¼ğŸ‰ è¿™æ„å‘€ç€ï¼š</p><ul><li>åŒ…åä»<code>javax.*</code>å˜æˆäº†<code>jakarta.*</code></li><li>æœ€ä½Javaç‰ˆæœ¬è¦æ±‚æå‡åˆ°17</li><li>åŸç”Ÿæ”¯æŒGraalVM</li><li>æ›´å¥½çš„å¯è§‚æµ‹æ€§æ”¯æŒ</li></ul><p>è¿™äº›å˜åŒ–å¯¹æˆ‘ä»¬é›†æˆOpenAPIæœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿåˆ«æ€¥ï¼Œå’±ä»¬æ…¢æ…¢é“æ¥ï¼</p><h3 id="ç¯å¢ƒæ­å»ºè®©ä¸€åˆ‡å‡†å¤‡å°±ç»ª"><a class="markdownIt-Anchor" href="#ç¯å¢ƒæ­å»ºè®©ä¸€åˆ‡å‡†å¤‡å°±ç»ª"></a> ğŸ”§ ç¯å¢ƒæ­å»ºï¼šè®©ä¸€åˆ‡å‡†å¤‡å°±ç»ª</h3><p>ä¿—è¯è¯´&quot;å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨&quot;ï¼åœ¨å¼€å§‹æˆ‘ä»¬çš„OpenAPIä¹‹æ—…ä¹‹å‰ï¼Œå…ˆæŠŠç¯å¢ƒæ­å»ºå¥½ã€‚ğŸ˜</p><h4 id="é¡¹ç›®ä¾èµ–é…ç½®"><a class="markdownIt-Anchor" href="#é¡¹ç›®ä¾èµ–é…ç½®"></a> ğŸ“¦ é¡¹ç›®ä¾èµ–é…ç½®</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ç›¸å…³ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 </span></span></span><br><span class="line"><span class="string"><span class="tag">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot3-openapi-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>SpringBoot 3.x OpenAPI Demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>SpringBoot 3.x é›†æˆ OpenAPI ç¤ºä¾‹é¡¹ç›®<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springdoc.version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">springdoc.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot Web Starter --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot Validation --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- SpringDoc OpenAPI UI --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springdoc.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot Test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™é‡Œï¼Œå¯èƒ½æœ‰å°ä¼™ä¼´è¦é—®äº†ï¼š&quot;è¯¶ï¼Œæ€ä¹ˆæ²¡æœ‰çœ‹åˆ°<code>springfox</code>çš„ä¾èµ–å•Šï¼Ÿ&quot;ğŸ¤” å“ˆå“ˆï¼Œè¿™å°±æ˜¯SpringBoot 3.xæ—¶ä»£çš„å˜åŒ–å•¦ï¼ç”±äºSpringFoxé¡¹ç›®å·²ç»å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œå¹¶ä¸”ä¸å…¼å®¹SpringBoot 3.xçš„Jakartaå‘½åç©ºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©äº†æ›´æ´»è·ƒçš„<code>SpringDoc</code>é¡¹ç›®ï¼</p><h4 id="ï¸-åŸºç¡€é…ç½®"><a class="markdownIt-Anchor" href="#ï¸-åŸºç¡€é…ç½®"></a> âš™ï¸ åŸºç¡€é…ç½®</h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨<code>application.yml</code>ä¸­æ·»åŠ ä¸€äº›åŸºç¡€é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨åŸºç¡€é…ç½®</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/api</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">springboot3-openapi-demo</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SpringDoc OpenAPI é…ç½®</span></span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šOpenAPI 3æ–‡æ¡£çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º/v3/api-docs</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/v3/api-docs</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Swagger UIè·¯å¾„ï¼Œé»˜è®¤ä¸º/swagger-ui.html</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/swagger-ui.html</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># è®¾ç½®UIç•Œé¢çš„ä¸€äº›é…ç½®</span></span><br><span class="line">    <span class="attr">config-url:</span> <span class="string">/v3/api-docs/swagger-config</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/v3/api-docs</span></span><br><span class="line">    <span class="comment"># æ”¯æŒå°è¯•è°ƒç”¨</span></span><br><span class="line">    <span class="attr">try-it-out-enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæ“ä½œID</span></span><br><span class="line">    <span class="attr">display-operation-id:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºè¯·æ±‚æŒç»­æ—¶é—´</span></span><br><span class="line">    <span class="attr">display-request-duration:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># ç¼“å­˜æ—¶é—´è®¾ç½®ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">disabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦æ˜¾ç¤ºactuatoræ¥å£</span></span><br><span class="line">  <span class="attr">show-actuator:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—é…ç½®</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.example:</span> <span class="string">DEBUG</span></span><br><span class="line">    <span class="attr">org.springframework.web:</span> <span class="string">DEBUG</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">&#x27;%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®å¯æ˜¯æˆ‘ç²¾å¿ƒè°ƒè¯•å‡ºæ¥çš„ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼ğŸ¨ æ¯”å¦‚<code>try-it-out-enabled: true</code>å°±èƒ½è®©ä½ ç›´æ¥åœ¨æ–‡æ¡£é¡µé¢æµ‹è¯•APIï¼Œç®€ç›´ä¸è¦å¤ªçˆ½ï¼</p><h3 id="openapi-30è§„èŒƒè¯¦è§£"><a class="markdownIt-Anchor" href="#openapi-30è§„èŒƒè¯¦è§£"></a> ğŸ“– OpenAPI 3.0è§„èŒƒè¯¦è§£</h3><p>åœ¨åŠ¨æ‰‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¥½å¥½äº†è§£ä¸€ä¸‹OpenAPI 3.0çš„è§„èŒƒç»“æ„ã€‚æ¯•ç«Ÿï¼ŒçŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†å˜›ï¼ğŸ˜„</p><h4 id="ï¸-openapiæ–‡æ¡£ç»“æ„"><a class="markdownIt-Anchor" href="#ï¸-openapiæ–‡æ¡£ç»“æ„"></a> ğŸ—ï¸ OpenAPIæ–‡æ¡£ç»“æ„</h4><p>ä¸€ä¸ªå®Œæ•´çš„OpenAPI 3.0æ–‡æ¡£ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™æ˜¯ä¸€ä¸ªOpenAPIæ–‡æ¡£çš„åŸºæœ¬ç»“æ„ç¤ºä¾‹</span></span><br><span class="line"><span class="attr">openapi:</span> <span class="number">3.0</span><span class="number">.3</span></span><br><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&quot;æˆ‘çš„ç‰›é€¼API&quot;</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªè¶…çº§å‰å®³çš„APIæ–‡æ¡£&quot;</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line">  <span class="attr">contact:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;APIæ”¯æŒå›¢é˜Ÿ&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">&quot;support@example.com&quot;</span></span><br><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">&quot;https://api.example.com/v1&quot;</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒ&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">&quot;https://test-api.example.com/v1&quot;</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;æµ‹è¯•ç¯å¢ƒ&quot;</span></span><br><span class="line"><span class="attr">paths:</span></span><br><span class="line">  <span class="string">/users:</span></span><br><span class="line">    <span class="attr">get:</span></span><br><span class="line">      <span class="attr">summary:</span> <span class="string">&quot;è·å–ç”¨æˆ·åˆ—è¡¨&quot;</span></span><br><span class="line">      <span class="comment"># ...è¯¦ç»†å®šä¹‰</span></span><br><span class="line"><span class="attr">components:</span></span><br><span class="line">  <span class="attr">schemas:</span></span><br><span class="line">    <span class="attr">User:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">object</span></span><br><span class="line">      <span class="attr">properties:</span></span><br><span class="line">        <span class="attr">id:</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">integer</span></span><br><span class="line">        <span class="attr">name:</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">string</span></span><br></pre></td></tr></table></figure><h4 id="æ ¸å¿ƒæ¦‚å¿µè§£æ"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒæ¦‚å¿µè§£æ"></a> ğŸª æ ¸å¿ƒæ¦‚å¿µè§£æ</h4><h5 id="1ï¸âƒ£-infoå¯¹è±¡"><a class="markdownIt-Anchor" href="#1ï¸âƒ£-infoå¯¹è±¡"></a> 1ï¸âƒ£ Infoå¯¹è±¡</h5><p>è¿™å°±æ˜¯ä½ çš„APIçš„&quot;åç‰‡&quot;ï¼ŒåŒ…å«äº†æ ‡é¢˜ã€ç‰ˆæœ¬ã€æè¿°ç­‰åŸºæœ¬ä¿¡æ¯ã€‚</p><h5 id="2ï¸âƒ£-serverså¯¹è±¡"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-serverså¯¹è±¡"></a> 2ï¸âƒ£ Serverså¯¹è±¡</h5><p>å®šä¹‰APIæœåŠ¡å™¨çš„åœ°å€ï¼Œå¯ä»¥æœ‰å¤šä¸ªç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ã€‚</p><h5 id="3ï¸âƒ£-pathså¯¹è±¡"><a class="markdownIt-Anchor" href="#3ï¸âƒ£-pathså¯¹è±¡"></a> 3ï¸âƒ£ Pathså¯¹è±¡</h5><p>è¿™æ˜¯é‡å¤´æˆï¼å®šä¹‰äº†æ‰€æœ‰çš„APIè·¯å¾„å’Œæ“ä½œæ–¹æ³•ã€‚</p><h5 id="4ï¸âƒ£-componentså¯¹è±¡"><a class="markdownIt-Anchor" href="#4ï¸âƒ£-componentså¯¹è±¡"></a> 4ï¸âƒ£ Componentså¯¹è±¡</h5><p>è¿™æ˜¯å¤ç”¨çš„å®åº“ï¼Œå¯ä»¥å®šä¹‰é€šç”¨çš„æ•°æ®æ¨¡å‹ã€å“åº”ã€å‚æ•°ç­‰ã€‚</p><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³èµ·äº†åˆšå¼€å§‹å­¦OpenAPIçš„æ—¶å€™ï¼Œè¢«è¿™äº›æ¦‚å¿µç»•å¾—å¤´æ™•è½¬å‘çš„ğŸ˜µğŸ’«ã€‚ä¸è¿‡åˆ«æ‹…å¿ƒï¼Œå’±ä»¬é©¬ä¸Šå°±é€šè¿‡å®é™…ä»£ç æ¥ç†è§£è¿™äº›æ¦‚å¿µï¼</p><h3 id="springdoc-openapiçš„é›†æˆå®æˆ˜"><a class="markdownIt-Anchor" href="#springdoc-openapiçš„é›†æˆå®æˆ˜"></a> ğŸš€ SpringDoc OpenAPIçš„é›†æˆå®æˆ˜</h3><p>å¥½äº†ï¼Œç†è®ºçŸ¥è¯†é“ºå«å¤Ÿäº†ï¼Œæ˜¯æ—¶å€™æ’¸èµ·è¢–å­å¹²æ´»äº†ï¼ğŸ’ª è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†APIå¼€å§‹ã€‚</p><h4 id="åˆ›å»ºåŸºç¡€é…ç½®ç±»"><a class="markdownIt-Anchor" href="#åˆ›å»ºåŸºç¡€é…ç½®ç±»"></a> ğŸ¯ åˆ›å»ºåŸºç¡€é…ç½®ç±»</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªOpenAPIé…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.OpenAPI;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Contact;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Info;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.License;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.servers.Server;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * OpenAPI 3.0 é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»è´Ÿè´£å®šä¹‰APIæ–‡æ¡£çš„åŸºæœ¬ä¿¡æ¯ï¼Œç›¸å½“äºç»™æˆ‘ä»¬çš„APIåšäº†ä¸ªè‡ªæˆ‘ä»‹ç»ï¼</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ä½ çš„åå­—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2024-01-01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenApiConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.application.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String applicationName;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºOpenAPIå®ä¾‹</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•å°±åƒæ˜¯åœ¨ç»™æˆ‘ä»¬çš„APIå†™ä¸ªäººç®€å†ï¼ŒæŠŠæœ€é‡è¦çš„ä¿¡æ¯éƒ½å†™ä¸Šï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OpenAPI <span class="title function_">customOpenAPI</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OpenAPI</span>()</span><br><span class="line">                <span class="comment">// è®¾ç½®APIåŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">                .info(<span class="keyword">new</span> <span class="title class_">Info</span>()</span><br><span class="line">                        .title(applicationName + <span class="string">&quot; APIæ–‡æ¡£&quot;</span>)</span><br><span class="line">                        .description(<span class="string">&quot;ğŸ‰ è¿™æ˜¯åŸºäºSpringBoot 3.xå’ŒOpenAPI 3.0æ„å»ºçš„è¶…çº§APIæ–‡æ¡£ï¼&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;\n\n### ä¸»è¦åŠŸèƒ½\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ¯ ç”¨æˆ·ç®¡ç†ï¼šå¢åˆ æ”¹æŸ¥ç”¨æˆ·ä¿¡æ¯\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ“ æ•°æ®éªŒè¯ï¼šå®Œæ•´çš„å‚æ•°æ ¡éªŒ\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ”’ æƒé™æ§åˆ¶ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ“Š ç»Ÿè®¡åˆ†æï¼šç”¨æˆ·è¡Œä¸ºæ•°æ®ç»Ÿè®¡\n\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;### æŠ€æœ¯æ ˆ\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- SpringBoot 3.2.0\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- OpenAPI 3.0.3\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- Jakarta Validation\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- SpringDoc 2.2.0&quot;</span>)</span><br><span class="line">                        .version(<span class="string">&quot;v1.0.0&quot;</span>)</span><br><span class="line">                        .contact(<span class="keyword">new</span> <span class="title class_">Contact</span>()</span><br><span class="line">                                .name(<span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span>)</span><br><span class="line">                                .email(<span class="string">&quot;dev-team@example.com&quot;</span>)</span><br><span class="line">                                .url(<span class="string">&quot;https://www.example.com&quot;</span>))</span><br><span class="line">                        .license(<span class="keyword">new</span> <span class="title class_">License</span>()</span><br><span class="line">                                .name(<span class="string">&quot;MIT License&quot;</span>)</span><br><span class="line">                                .url(<span class="string">&quot;https://opensource.org/licenses/MIT&quot;</span>)))</span><br><span class="line">                <span class="comment">// è®¾ç½®æœåŠ¡å™¨ä¿¡æ¯</span></span><br><span class="line">                .servers(List.of(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Server</span>()</span><br><span class="line">                                .url(<span class="string">&quot;http://localhost:8080/api&quot;</span>)</span><br><span class="line">                                .description(<span class="string">&quot;æœ¬åœ°å¼€å‘ç¯å¢ƒ ğŸ &quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Server</span>()</span><br><span class="line">                                .url(<span class="string">&quot;https://test-api.example.com&quot;</span>)</span><br><span class="line">                                .description(<span class="string">&quot;æµ‹è¯•ç¯å¢ƒ ğŸ§ª&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Server</span>()</span><br><span class="line">                                .url(<span class="string">&quot;https://api.example.com&quot;</span>)</span><br><span class="line">                                .description(<span class="string">&quot;ç”Ÿäº§ç¯å¢ƒ ğŸš€&quot;</span>)</span><br><span class="line">                ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™ä¸ªé…ç½®ç±»ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆè´´å¿ƒï¼ŸğŸ˜Š æˆ‘ç‰¹æ„åœ¨æè¿°é‡Œç”¨äº†Markdownæ ¼å¼ï¼Œè¿™æ ·ç”Ÿæˆçš„æ–‡æ¡£ä¼šæ›´åŠ ç¾è§‚ï¼è€Œä¸”è¿˜ç”¨äº†emojiï¼Œè®©å†·å†°å†°çš„æŠ€æœ¯æ–‡æ¡£å˜å¾—ç”ŸåŠ¨æœ‰è¶£ã€‚</p><h4 id="åˆ›å»ºç”¨æˆ·å®ä½“ç±»"><a class="markdownIt-Anchor" href="#åˆ›å»ºç”¨æˆ·å®ä½“ç±»"></a> ğŸ‘¤ åˆ›å»ºç”¨æˆ·å®ä½“ç±»</h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æˆ·å®ä½“ç±»ï¼Œè¿™é‡Œå°±èƒ½ä½“ç°OpenAPIçš„å¼ºå¤§ä¹‹å¤„äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.*;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»ä¸ä»…å®šä¹‰äº†ç”¨æˆ·çš„åŸºæœ¬å±æ€§ï¼Œè¿˜é€šè¿‡æ³¨è§£æè¿°äº†æ¯ä¸ªå­—æ®µçš„å«ä¹‰</span></span><br><span class="line"><span class="comment"> * ç®€ç›´å°±æ˜¯&quot;äººå¦‚å…¶å&quot;çš„å®Œç¾ä½“ç°ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Schema(name = &quot;User&quot;, description = &quot;ç”¨æˆ·ä¿¡æ¯å®ä½“ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;1001&quot;, </span></span><br><span class="line"><span class="meta">            accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·åï¼Œå¿…é¡»å”¯ä¸€&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;zhangsan&quot;, </span></span><br><span class="line"><span class="meta">            requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 3, max = 20, message = &quot;ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20å­—ç¬¦ä¹‹é—´&quot;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^[a-zA-Z0-9_]+$&quot;, </span></span><br><span class="line"><span class="meta">             message = &quot;ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·æ˜µç§°&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;å¼ ä¸‰&quot;)</span></span><br><span class="line">    <span class="meta">@Size(max = 50, message = &quot;æ˜µç§°é•¿åº¦ä¸èƒ½è¶…è¿‡50å­—ç¬¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;é‚®ç®±åœ°å€&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;zhangsan@example.com&quot;,</span></span><br><span class="line"><span class="meta">            requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Email(message = &quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ‰‹æœºå·ç &quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;13812345678&quot;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^1[3-9]\\d&#123;9&#125;$&quot;, </span></span><br><span class="line"><span class="meta">             message = &quot;æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·å¹´é¾„&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;25&quot;, </span></span><br><span class="line"><span class="meta">            minimum = &quot;1&quot;, </span></span><br><span class="line"><span class="meta">            maximum = &quot;150&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value = 1, message = &quot;å¹´é¾„å¿…é¡»å¤§äº0&quot;)</span></span><br><span class="line">    <span class="meta">@Max(value = 150, message = &quot;å¹´é¾„ä¸èƒ½è¶…è¿‡150&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·æ€§åˆ«&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;MALE&quot;, </span></span><br><span class="line"><span class="meta">            allowableValues = &#123;&quot;MALE&quot;, &quot;FEMALE&quot;, &quot;UNKNOWN&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Gender gender;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·çŠ¶æ€&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">            allowableValues = &#123;&quot;ACTIVE&quot;, &quot;INACTIVE&quot;, &quot;BANNED&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> UserStatus status;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;åˆ›å»ºæ—¶é—´&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">            accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;æœ€åæ›´æ–°æ—¶é—´&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">            accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æšä¸¾ç±»å®šä¹‰</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ€§åˆ«æšä¸¾&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;ç”·æ€§&quot;)</span></span><br><span class="line">        MALE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;å¥³æ€§&quot;)</span> </span><br><span class="line">        FEMALE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æœªçŸ¥&quot;)</span></span><br><span class="line">        UNKNOWN</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·çŠ¶æ€æšä¸¾&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ­£å¸¸çŠ¶æ€&quot;)</span></span><br><span class="line">        ACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;éæ´»è·ƒçŠ¶æ€&quot;)</span></span><br><span class="line">        INACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;è¢«å°ç¦çŠ¶æ€&quot;)</span></span><br><span class="line">        BANNED</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ã€getterã€setteræ–¹æ³•...</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œçœç•¥äº†è¿™äº›æ–¹æ³•ï¼Œå®é™…å¼€å‘ä¸­è®°å¾—åŠ ä¸Šå“¦ï¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String username, String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.status = UserStatus.ACTIVE;</span><br><span class="line">        <span class="built_in">this</span>.createTime = LocalDateTime.now();</span><br><span class="line">        <span class="built_in">this</span>.updateTime = LocalDateTime.now();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter and setter methods...</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123; <span class="keyword">return</span> id; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123; <span class="built_in">this</span>.id = id; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123; <span class="keyword">return</span> username; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123; <span class="built_in">this</span>.username = username; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNickname</span><span class="params">()</span> &#123; <span class="keyword">return</span> nickname; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNickname</span><span class="params">(String nickname)</span> &#123; <span class="built_in">this</span>.nickname = nickname; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123; <span class="keyword">return</span> email; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123; <span class="built_in">this</span>.email = email; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123; <span class="keyword">return</span> phone; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123; <span class="built_in">this</span>.phone = phone; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123; <span class="built_in">this</span>.age = age; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Gender <span class="title function_">getGender</span><span class="params">()</span> &#123; <span class="keyword">return</span> gender; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(Gender gender)</span> &#123; <span class="built_in">this</span>.gender = gender; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> UserStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123; <span class="keyword">return</span> status; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(UserStatus status)</span> &#123; <span class="built_in">this</span>.status = status; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getCreateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> createTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreateTime</span><span class="params">(LocalDateTime createTime)</span> &#123; <span class="built_in">this</span>.createTime = createTime; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getUpdateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> updateTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUpdateTime</span><span class="params">(LocalDateTime updateTime)</span> &#123; <span class="built_in">this</span>.updateTime = updateTime; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å“‡ï¼Œè¿™ä¸ªå®ä½“ç±»æ˜¯ä¸æ˜¯å¾ˆä¸°å¯Œï¼ŸğŸ˜ é€šè¿‡<code>@Schema</code>æ³¨è§£ï¼Œæˆ‘ä»¬ä¸ä»…æè¿°äº†æ¯ä¸ªå­—æ®µçš„å«ä¹‰ï¼Œè¿˜æä¾›äº†ç¤ºä¾‹å€¼ã€éªŒè¯è§„åˆ™ç­‰ä¿¡æ¯ã€‚è¿™æ ·ç”Ÿæˆçš„APIæ–‡æ¡£å°±ä¼šéå¸¸è¯¦ç»†å’Œå‹å¥½ï¼</p><h4 id="ï¸-åˆ›å»ºé€šç”¨å“åº”ç±»"><a class="markdownIt-Anchor" href="#ï¸-åˆ›å»ºé€šç”¨å“åº”ç±»"></a> ğŸ›ï¸ åˆ›å»ºé€šç”¨å“åº”ç±»</h4><p>ä¸ºäº†è®©APIå“åº”æ›´åŠ è§„èŒƒï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé€šç”¨çš„å“åº”åŒ…è£…ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€å“åº”ç»“æœå°è£…ç±»</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»å°±åƒæ˜¯ç»™æ‰€æœ‰APIå“åº”ç©¿äº†ä¸€å¥—ç»Ÿä¸€çš„&quot;åˆ¶æœ&quot;ï¼Œè®©å®ƒä»¬çœ‹èµ·æ¥æ•´æ•´é½é½çš„ï¼</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; å“åº”æ•°æ®çš„ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Schema(name = &quot;ApiResponse&quot;, description = &quot;ç»Ÿä¸€å“åº”ç»“æœ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiResponse</span>&lt;T&gt; &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”çŠ¶æ€ç &quot;, example = &quot;200&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ¶ˆæ¯&quot;, example = &quot;æ“ä½œæˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ•°æ®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ—¶é—´&quot;, example = &quot;2024-01-01 12:00:00&quot;)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime timestamp;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé€šè¿‡é™æ€æ–¹æ³•åˆ›å»ºå®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ApiResponse</span><span class="params">(Integer code, String message, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.timestamp = LocalDateTime.now();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæˆåŠŸå“åº”</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•å°±åƒæ˜¯åœ¨è¯´ï¼š&quot;è€¶ï¼ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">200</span>, <span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(String message, T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">200</span>, message, data);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºå¤±è´¥å“åº”</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•å°±åƒæ˜¯åœ¨è¯´ï¼š&quot;å“å‘€ï¼Œå‡ºäº†ç‚¹å°é—®é¢˜...&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">error</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(code, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">error</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">500</span>, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚æ•°éªŒè¯å¤±è´¥å“åº”</span></span><br><span class="line"><span class="comment">     * ä¸“é—¨å¤„ç†é‚£äº›&quot;ä¸å¬è¯&quot;çš„å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">badRequest</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">400</span>, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èµ„æºæœªæ‰¾åˆ°å“åº”</span></span><br><span class="line"><span class="comment">     * å½“ä½ è¦æ‰¾çš„ä¸œè¥¿&quot;äººé—´è’¸å‘&quot;äº†çš„æ—¶å€™ç”¨è¿™ä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">notFound</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">404</span>, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter methods</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123; <span class="keyword">return</span> code; &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123; <span class="keyword">return</span> message; &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getData</span><span class="params">()</span> &#123; <span class="keyword">return</span> data; &#125;</span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getTimestamp</span><span class="params">()</span> &#123; <span class="keyword">return</span> timestamp; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æˆåŠŸçš„ä¾¿åˆ©æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSuccess</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code != <span class="literal">null</span> &amp;&amp; code == <span class="number">200</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå“åº”ç±»è®¾è®¡å¾—è¿˜ä¸é”™å§ï¼ŸğŸ˜ å®ƒä¸ä»…æä¾›äº†ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œè¿˜é€šè¿‡é™æ€æ–¹æ³•è®©åˆ›å»ºå“åº”å˜å¾—è¶…çº§ç®€å•ï¼</p><h3 id="å®šåˆ¶åŒ–é…ç½®è®©æ–‡æ¡£æ›´è´´å¿ƒ"><a class="markdownIt-Anchor" href="#å®šåˆ¶åŒ–é…ç½®è®©æ–‡æ¡£æ›´è´´å¿ƒ"></a> ğŸ¨ å®šåˆ¶åŒ–é…ç½®ï¼šè®©æ–‡æ¡£æ›´è´´å¿ƒ</h3><p>ç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç”¨æˆ·æ§åˆ¶å™¨ï¼Œè¿™é‡Œå¯æ˜¯å±•ç°OpenAPIå¨åŠ›çš„åœ°æ–¹ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.common.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> com.example.entity.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Operation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Parameter;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Parameters;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.enums.ParameterIn;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.ExampleObject;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse as SwaggerApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç®¡ç†æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ§åˆ¶å™¨å°±åƒæ˜¯ä¸€ä¸ªç”¨æˆ·ç®¡ç†çš„&quot;å¤§ç®¡å®¶&quot;ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment"> * æ¯ä¸ªæ–¹æ³•éƒ½ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œè®©APIæ–‡æ¡£å˜å¾—è¶…çº§å‹å¥½ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;ç”¨æˆ·ç®¡ç†&quot;, description = &quot;æä¾›ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œæ”¯æŒæ‰¹é‡æ“ä½œå’Œé«˜çº§æŸ¥è¯¢ ğŸ¯&quot;)</span></span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥æ³¨å…¥Service</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;User&gt; userDatabase = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Long</span> <span class="variable">idCounter</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ä¸€äº›æµ‹è¯•æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserController</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ ä¸€äº›æµ‹è¯•æ•°æ®ï¼Œè®©æ–‡æ¡£æ¼”ç¤ºæ›´ç”ŸåŠ¨</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin@example.com&quot;</span>);</span><br><span class="line">        user1.setId(idCounter++);</span><br><span class="line">        user1.setNickname(<span class="string">&quot;è¶…çº§ç®¡ç†å‘˜&quot;</span>);</span><br><span class="line">        user1.setAge(<span class="number">30</span>);</span><br><span class="line">        user1.setGender(User.Gender.MALE);</span><br><span class="line">        user1.setPhone(<span class="string">&quot;13812345678&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;alice&quot;</span>, <span class="string">&quot;alice@example.com&quot;</span>);</span><br><span class="line">        user2.setId(idCounter++);</span><br><span class="line">        user2.setNickname(<span class="string">&quot;å°çˆ±åŒå­¦&quot;</span>);</span><br><span class="line">        user2.setAge(<span class="number">25</span>);</span><br><span class="line">        user2.setGender(User.Gender.FEMALE);</span><br><span class="line">        user2.setPhone(<span class="string">&quot;13987654321&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        userDatabase.add(user1);</span><br><span class="line">        userDatabase.add(user2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£æ”¯æŒåˆ†é¡µå’Œæœç´¢ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§å“¦ï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;è·å–ç”¨æˆ·åˆ—è¡¨&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;æ”¯æŒåˆ†é¡µæŸ¥è¯¢å’Œå…³é”®å­—æœç´¢çš„ç”¨æˆ·åˆ—è¡¨æ¥å£ã€‚&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;\n\n**åŠŸèƒ½ç‰¹ç‚¹ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ğŸ” æ”¯æŒç”¨æˆ·åå’Œæ˜µç§°æ¨¡ç³Šæœç´¢\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ğŸ“„ æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- âš¡ æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–ï¼Œå“åº”é€Ÿåº¦å¿«\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ğŸ“Š è¿”å›æ€»æ•°ä¿¡æ¯ï¼Œæ–¹ä¾¿å‰ç«¯åˆ†é¡µå¤„ç†&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;ç”¨æˆ·æŸ¥è¯¢&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Parameters(&#123;</span></span><br><span class="line"><span class="meta">            @Parameter(</span></span><br><span class="line"><span class="meta">                    name = &quot;page&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;é¡µç ï¼Œä»1å¼€å§‹&quot;,</span></span><br><span class="line"><span class="meta">                    example = &quot;1&quot;,</span></span><br><span class="line"><span class="meta">                    in = ParameterIn.QUERY,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(type = &quot;integer&quot;, minimum = &quot;1&quot;, defaultValue = &quot;1&quot;)</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @Parameter(</span></span><br><span class="line"><span class="meta">                    name = &quot;size&quot;, </span></span><br><span class="line"><span class="meta">                    description = &quot;æ¯é¡µå¤§å°ï¼Œæœ€å¤§100&quot;,</span></span><br><span class="line"><span class="meta">                    example = &quot;10&quot;,</span></span><br><span class="line"><span class="meta">                    in = ParameterIn.QUERY,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(type = &quot;integer&quot;, minimum = &quot;1&quot;, maximum = &quot;100&quot;, defaultValue = &quot;10&quot;)</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @Parameter(</span></span><br><span class="line"><span class="meta">                    name = &quot;keyword&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;æœç´¢å…³é”®å­—ï¼Œæ”¯æŒç”¨æˆ·åå’Œæ˜µç§°æ¨¡ç³Šæœç´¢&quot;,</span></span><br><span class="line"><span class="meta">                    example = &quot;å¼ ä¸‰&quot;,</span></span><br><span class="line"><span class="meta">                    in = ParameterIn.QUERY,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(type = &quot;string&quot;)</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;æŸ¥è¯¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class),</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;æˆåŠŸç¤ºä¾‹&quot;,</span></span><br><span class="line"><span class="meta">                                    summary = &quot;æŸ¥è¯¢æˆåŠŸçš„å“åº”ç¤ºä¾‹&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;æŸ¥è¯¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;list&quot;: [</span></span><br><span class="line"><span class="meta">                                                  &#123;</span></span><br><span class="line"><span class="meta">                                                    &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                    &quot;username&quot;: &quot;admin&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;nickname&quot;: &quot;è¶…çº§ç®¡ç†å‘˜&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;email&quot;: &quot;admin@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;age&quot;: 30,</span></span><br><span class="line"><span class="meta">                                                    &quot;gender&quot;: &quot;MALE&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;createTime&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                                  &#125;</span></span><br><span class="line"><span class="meta">                                                ],</span></span><br><span class="line"><span class="meta">                                                &quot;total&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;page&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;size&quot;: 10</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å‚æ•°é”™è¯¯&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class)</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;PageResult&lt;User&gt;&gt;&gt; <span class="title function_">getUsers</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="meta">@Min(value = 1, message = &quot;é¡µç å¿…é¡»å¤§äº0&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> <span class="meta">@Min(value = 1, message = &quot;é¡µå¤§å°å¿…é¡»å¤§äº0&quot;)</span> Integer size,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> String keyword)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿåˆ†é¡µæŸ¥è¯¢é€»è¾‘</span></span><br><span class="line">        List&lt;User&gt; filteredUsers = userDatabase;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…³é”®å­—æœç´¢</span></span><br><span class="line">        <span class="keyword">if</span> (keyword != <span class="literal">null</span> &amp;&amp; !keyword.trim().isEmpty()) &#123;</span><br><span class="line">            filteredUsers = userDatabase.stream()</span><br><span class="line">                    .filter(user -&gt; user.getUsername().contains(keyword) || </span><br><span class="line">                                   (user.getNickname() != <span class="literal">null</span> &amp;&amp; user.getNickname().contains(keyword)))</span><br><span class="line">                    .toList();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ†é¡µå¤„ç†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> (page - <span class="number">1</span>) * size;</span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> Math.min(start + size, filteredUsers.size());</span><br><span class="line">        List&lt;User&gt; pagedUsers = filteredUsers.subList(start, end);</span><br><span class="line">        </span><br><span class="line">        PageResult&lt;User&gt; result = <span class="keyword">new</span> <span class="title class_">PageResult</span>&lt;&gt;(pagedUsers, (<span class="type">long</span>) filteredUsers.size(), page, size);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>, result));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDè·å–ç”¨æˆ·è¯¦æƒ…</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç”¨æˆ·IDè·å–è¯¦ç»†ä¿¡æ¯ï¼Œæ‰¾ä¸åˆ°ä¼šè¿”å›404</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;è·å–ç”¨æˆ·è¯¦æƒ…&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚\n\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;**æ³¨æ„äº‹é¡¹ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç”¨æˆ·IDå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œä¼šè¿”å›404é”™è¯¯\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- è¿”å›çš„æ•°æ®åŒ…å«ç”¨æˆ·çš„æ‰€æœ‰å¯è§å­—æ®µ&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;ç”¨æˆ·æŸ¥è¯¢&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Parameter(</span></span><br><span class="line"><span class="meta">            name = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;ç”¨æˆ·ID&quot;,</span></span><br><span class="line"><span class="meta">            example = &quot;1&quot;,</span></span><br><span class="line"><span class="meta">            required = true,</span></span><br><span class="line"><span class="meta">            in = ParameterIn.PATH,</span></span><br><span class="line"><span class="meta">            schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;, minimum = &quot;1&quot;)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;è·å–æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class),</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;ç”¨æˆ·è¯¦æƒ…&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;è·å–æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;username&quot;: &quot;admin&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;nickname&quot;: &quot;è¶…çº§ç®¡ç†å‘˜&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;email&quot;: &quot;admin@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;phone&quot;: &quot;13812345678&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;age&quot;: 30,</span></span><br><span class="line"><span class="meta">                                                &quot;gender&quot;: &quot;MALE&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;createTime&quot;: &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;updateTime&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;404&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 404,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">getUserById</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable</span> <span class="meta">@NotNull(message = &quot;ç”¨æˆ·IDä¸èƒ½ä¸ºç©º&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        Optional&lt;User&gt; userOpt = userDatabase.stream()</span><br><span class="line">                .filter(user -&gt; user.getId().equals(id))</span><br><span class="line">                .findFirst();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (userOpt.isPresent()) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;è·å–æˆåŠŸ&quot;</span>, userOpt.get()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.status(HttpStatus.NOT_FOUND)</span><br><span class="line">                    .body(ApiResponse.notFound(<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ–°ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç”¨æˆ·ï¼Œæ”¯æŒå®Œæ•´çš„æ•°æ®éªŒè¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;åˆ›å»ºç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·è´¦æˆ·ã€‚\n\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;**éªŒè¯è§„åˆ™ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç”¨æˆ·åï¼š3-20å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- é‚®ç®±ï¼šå¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- æ‰‹æœºå·ï¼šç¬¦åˆä¸­å›½å¤§é™†æ‰‹æœºå·æ ¼å¼\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- å¹´é¾„ï¼š1-150ä¹‹é—´çš„æ•´æ•°\n\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;**æ³¨æ„ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç”¨æˆ·åå’Œé‚®ç®±å¿…é¡»å”¯ä¸€\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- åˆ›å»ºæˆåŠŸåä¼šè‡ªåŠ¨è®¾ç½®ä¸ºACTIVEçŠ¶æ€\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;ç”¨æˆ·ç®¡ç†&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@io</span>.swagger.v3.oas.annotations.parameters.RequestBody(</span><br><span class="line">            description = <span class="string">&quot;ç”¨æˆ·ä¿¡æ¯&quot;</span>,</span><br><span class="line">            required = <span class="literal">true</span>,</span><br><span class="line">            content = <span class="meta">@Content(</span></span><br><span class="line"><span class="meta">                    mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(implementation = User.class),</span></span><br><span class="line"><span class="meta">                    examples = &#123;</span></span><br><span class="line"><span class="meta">                            @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;åŸºç¡€ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    summary = &quot;åˆ›å»ºåŸºç¡€ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;username&quot;: &quot;newuser&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;nickname&quot;: &quot;æ–°ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;email&quot;: &quot;newuser@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;phone&quot;: &quot;13911112222&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;age&quot;: 28,</span></span><br><span class="line"><span class="meta">                                              &quot;gender&quot;: &quot;FEMALE&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            ),</span></span><br><span class="line"><span class="meta">                            @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;å®Œæ•´ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    summary = &quot;åˆ›å»ºå®Œæ•´ä¿¡æ¯ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;username&quot;: &quot;fulluser&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;nickname&quot;: &quot;å®Œæ•´ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;email&quot;: &quot;fulluser@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;phone&quot;: &quot;13800138000&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;age&quot;: 35,</span></span><br><span class="line"><span class="meta">                                              &quot;gender&quot;: &quot;MALE&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    &#125;</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;201&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;åˆ›å»ºæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class)</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å‚æ•°éªŒè¯å¤±è´¥&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 400,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;ç”¨æˆ·åå·²å­˜åœ¨&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">usernameExists</span> <span class="operator">=</span> userDatabase.stream()</span><br><span class="line">                .anyMatch(u -&gt; u.getUsername().equals(user.getUsername()));</span><br><span class="line">        <span class="keyword">if</span> (usernameExists) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST)</span><br><span class="line">                    .body(ApiResponse.badRequest(<span class="string">&quot;ç”¨æˆ·åå·²å­˜åœ¨&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">emailExists</span> <span class="operator">=</span> userDatabase.stream()</span><br><span class="line">                .anyMatch(u -&gt; u.getEmail().equals(user.getEmail()));</span><br><span class="line">        <span class="keyword">if</span> (emailExists) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST)</span><br><span class="line">                    .body(ApiResponse.badRequest(<span class="string">&quot;é‚®ç®±å·²å­˜åœ¨&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        user.setId(idCounter++);</span><br><span class="line">        user.setStatus(User.UserStatus.ACTIVE);</span><br><span class="line">        user.setCreateTime(LocalDateTime.now());</span><br><span class="line">        user.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¿å­˜åˆ°&quot;æ•°æ®åº“&quot;</span></span><br><span class="line">        userDatabase.add(user);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED)</span><br><span class="line">                .body(ApiResponse.success(<span class="string">&quot;ç”¨æˆ·åˆ›å»ºæˆåŠŸ&quot;</span>, user));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†é¡µç»“æœåŒ…è£…ç±»</span></span><br><span class="line">    <span class="meta">@Schema(name = &quot;PageResult&quot;, description = &quot;åˆ†é¡µæŸ¥è¯¢ç»“æœ&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PageResult</span>&lt;T&gt; &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ•°æ®åˆ—è¡¨&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> List&lt;T&gt; list;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ€»è®°å½•æ•°&quot;, example = &quot;100&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Long total;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;å½“å‰é¡µç &quot;, example = &quot;1&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Integer page;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ¯é¡µå¤§å°&quot;, example = &quot;10&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Integer size;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ€»é¡µæ•°&quot;, example = &quot;10&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Integer totalPages;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ&quot;, example = &quot;true&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Boolean hasNext;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ˜¯å¦æœ‰ä¸Šä¸€é¡µ&quot;, example = &quot;false&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Boolean hasPrev;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">PageResult</span><span class="params">(List&lt;T&gt; list, Long total, Integer page, Integer size)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.list = list;</span><br><span class="line">            <span class="built_in">this</span>.total = total;</span><br><span class="line">            <span class="built_in">this</span>.page = page;</span><br><span class="line">            <span class="built_in">this</span>.size = size;</span><br><span class="line">            <span class="built_in">this</span>.totalPages = (<span class="type">int</span>) Math.ceil((<span class="type">double</span>) total / size);</span><br><span class="line">            <span class="built_in">this</span>.hasNext = page &lt; totalPages;</span><br><span class="line">            <span class="built_in">this</span>.hasPrev = page &gt; <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter methods</span></span><br><span class="line">        <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">getList</span><span class="params">()</span> &#123; <span class="keyword">return</span> list; &#125;</span><br><span class="line">        <span class="keyword">public</span> Long <span class="title function_">getTotal</span><span class="params">()</span> &#123; <span class="keyword">return</span> total; &#125;</span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getPage</span><span class="params">()</span> &#123; <span class="keyword">return</span> page; &#125;</span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getSize</span><span class="params">()</span> &#123; <span class="keyword">return</span> size; &#125;</span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getTotalPages</span><span class="params">()</span> &#123; <span class="keyword">return</span> totalPages; &#125;</span><br><span class="line">        <span class="keyword">public</span> Boolean <span class="title function_">getHasNext</span><span class="params">()</span> &#123; <span class="keyword">return</span> hasNext; &#125;</span><br><span class="line">        <span class="keyword">public</span> Boolean <span class="title function_">getHasPrev</span><span class="params">()</span> &#123; <span class="keyword">return</span> hasPrev; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å“‡å¡ï¼Œè¿™ä¸ªæ§åˆ¶å™¨æ˜¯ä¸æ˜¯å¾ˆè¯¦ç»†ï¼ŸğŸ˜„ æ¯ä¸ªæ¥å£éƒ½æœ‰å®Œæ•´çš„æ–‡æ¡£è¯´æ˜ã€å‚æ•°æè¿°ã€å“åº”ç¤ºä¾‹ç­‰ã€‚é€šè¿‡è¿™æ ·çš„æ³¨è§£é…ç½®ï¼Œç”Ÿæˆçš„APIæ–‡æ¡£ä¼šéå¸¸ä¸“ä¸šå’Œå‹å¥½ï¼</p><h3 id="é«˜çº§ç‰¹æ€§æ¢ç´¢"><a class="markdownIt-Anchor" href="#é«˜çº§ç‰¹æ€§æ¢ç´¢"></a> ğŸ’ é«˜çº§ç‰¹æ€§æ¢ç´¢</h3><p>å¥½äº†ï¼ŒåŸºç¡€åŠŸèƒ½æˆ‘ä»¬å·²ç»æå®šäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥æ¢ç´¢ä¸€äº›æ›´é«˜çº§çš„ç‰¹æ€§ï¼è¿™äº›åŠŸèƒ½å¯æ˜¯è®©æˆ‘å½“åˆæƒŠå‘¼&quot;å§æ§½ï¼Œè¿˜èƒ½è¿™æ ·ç©ï¼Ÿ&quot;çš„å­˜åœ¨ï¼ğŸ¤¯</p><h4 id="å®‰å…¨è®¤è¯é›†æˆ"><a class="markdownIt-Anchor" href="#å®‰å…¨è®¤è¯é›†æˆ"></a> ğŸ” å®‰å…¨è®¤è¯é›†æˆ</h4><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒAPIå®‰å…¨æ˜¯ä¸å¯å¿½è§†çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨OpenAPIä¸­é›†æˆJWTè®¤è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.Components;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.OpenAPI;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.security.SecurityRequirement;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.security.SecurityScheme;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * APIå®‰å…¨é…ç½®</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªé…ç½®è®©æˆ‘ä»¬çš„APIæ–‡æ¡£æ”¯æŒJWTè®¤è¯ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ¥å£è£¸å¥”äº†ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenApiSecurityConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BEARER_TOKEN_SECURITY_SCHEME</span> <span class="operator">=</span> <span class="string">&quot;bearerAuth&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OpenAPI <span class="title function_">openAPIWithSecurity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OpenAPI</span>()</span><br><span class="line">                .addSecurityItem(<span class="keyword">new</span> <span class="title class_">SecurityRequirement</span>()</span><br><span class="line">                        .addList(BEARER_TOKEN_SECURITY_SCHEME))</span><br><span class="line">                .components(<span class="keyword">new</span> <span class="title class_">Components</span>()</span><br><span class="line">                        .addSecuritySchemes(BEARER_TOKEN_SECURITY_SCHEME,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">SecurityScheme</span>()</span><br><span class="line">                                        .name(BEARER_TOKEN_SECURITY_SCHEME)</span><br><span class="line">                                        .type(SecurityScheme.Type.HTTP)</span><br><span class="line">                                        .scheme(<span class="string">&quot;bearer&quot;</span>)</span><br><span class="line">                                        .bearerFormat(<span class="string">&quot;JWT&quot;</span>)</span><br><span class="line">                                        .in(SecurityScheme.In.HEADER)</span><br><span class="line">                                        .description(<span class="string">&quot;è¾“å…¥JWT tokenï¼Œæ ¼å¼ï¼šBearer &#123;token&#125;&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨éœ€è¦è®¤è¯çš„æ¥å£ä¸Šæ·»åŠ å®‰å…¨æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;ç®¡ç†å‘˜æ¥å£&quot;, description = &quot;éœ€è¦ç®¡ç†å‘˜æƒé™çš„é«˜çº§åŠŸèƒ½ ğŸ‘‘&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;ç®¡ç†å‘˜è·å–æ‰€æœ‰ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®çš„ç”¨æˆ·åˆ—è¡¨æ¥å£ï¼ŒåŒ…å«æ•æ„Ÿä¿¡æ¯&quot;,</span></span><br><span class="line"><span class="meta">            security = @SecurityRequirement(name = &quot;bearerAuth&quot;)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@SecurityRequirement(name = &quot;bearerAuth&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;List&lt;User&gt;&gt;&gt; <span class="title function_">getAllUsersForAdmin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç®¡ç†å‘˜ä¸“ç”¨æ¥å£é€»è¾‘</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;è·å–æˆåŠŸ&quot;</span>, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰æ³¨è§£ä¸åˆ‡é¢"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æ³¨è§£ä¸åˆ‡é¢"></a> ğŸª è‡ªå®šä¹‰æ³¨è§£ä¸åˆ‡é¢</h4><p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³ä¸ºæŸäº›ç‰¹æ®Šçš„æ¥å£æ·»åŠ ç»Ÿä¸€çš„æ–‡æ¡£è¯´æ˜ï¼Œè¿™æ—¶å€™è‡ªå®šä¹‰æ³¨è§£å°±æ´¾ä¸Šç”¨åœºäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.ExampleObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ‡å‡†APIå“åº”æ³¨è§£</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ³¨è§£å°±åƒæ˜¯ç»™æ¥å£è´´ä¸Šäº†&quot;è´¨é‡ä¿è¯&quot;çš„æ ‡ç­¾ï¼Œç»Ÿä¸€äº†å“åº”æ ¼å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">        @ApiResponse(</span></span><br><span class="line"><span class="meta">                responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                description = &quot;æ“ä½œæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                content = @Content(</span></span><br><span class="line"><span class="meta">                        mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                        examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                name = &quot;æˆåŠŸå“åº”&quot;,</span></span><br><span class="line"><span class="meta">                                value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                        &#123;</span></span><br><span class="line"><span class="meta">                                          &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                          &quot;message&quot;: &quot;æ“ä½œæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                          &quot;data&quot;: &#123;&#125;,</span></span><br><span class="line"><span class="meta">                                          &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                        &#125;</span></span><br><span class="line"><span class="meta">                                        &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                        )</span></span><br><span class="line"><span class="meta">                )</span></span><br><span class="line"><span class="meta">        ),</span></span><br><span class="line"><span class="meta">        @ApiResponse(</span></span><br><span class="line"><span class="meta">                responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                description = &quot;å‚æ•°é”™è¯¯&quot;,</span></span><br><span class="line"><span class="meta">                content = @Content(</span></span><br><span class="line"><span class="meta">                        mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                        examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                        &#123;</span></span><br><span class="line"><span class="meta">                                          &quot;code&quot;: 400,</span></span><br><span class="line"><span class="meta">                                          &quot;message&quot;: &quot;å‚æ•°éªŒè¯å¤±è´¥&quot;,</span></span><br><span class="line"><span class="meta">                                          &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                          &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                        &#125;</span></span><br><span class="line"><span class="meta">                                        &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                        )</span></span><br><span class="line"><span class="meta">                )</span></span><br><span class="line"><span class="meta">        ),</span></span><br><span class="line"><span class="meta">        @ApiResponse(</span></span><br><span class="line"><span class="meta">                responseCode = &quot;500&quot;,</span></span><br><span class="line"><span class="meta">                description = &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&quot;,</span></span><br><span class="line"><span class="meta">                content = @Content(</span></span><br><span class="line"><span class="meta">                        mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                        examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                        &#123;</span></span><br><span class="line"><span class="meta">                                          &quot;code&quot;: 500,</span></span><br><span class="line"><span class="meta">                                          &quot;message&quot;: &quot;æœåŠ¡å™¨å¼€å°å·®äº†ï¼Œè¯·ç¨åé‡è¯•&quot;,</span></span><br><span class="line"><span class="meta">                                          &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                          &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                        &#125;</span></span><br><span class="line"><span class="meta">                                        &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                        )</span></span><br><span class="line"><span class="meta">                )</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> StandardApiResponses &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦åŒ…å«è®¤è¯ç›¸å…³çš„é”™è¯¯å“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">includeAuth</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨èµ·æ¥è¶…çº§ç®€å•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/profile&quot;)</span></span><br><span class="line"><span class="meta">@StandardApiResponses(includeAuth = true)</span></span><br><span class="line"><span class="meta">@Operation(summary = &quot;è·å–ä¸ªäººèµ„æ–™&quot;, description = &quot;è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººèµ„æ–™ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">getProfile</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// æ¥å£é€»è¾‘</span></span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;è·å–æˆåŠŸ&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤šç¯å¢ƒé…ç½®"><a class="markdownIt-Anchor" href="#å¤šç¯å¢ƒé…ç½®"></a> ğŸŒˆ å¤šç¯å¢ƒé…ç½®</h4><p>ä¸åŒç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬çš„APIæ–‡æ¡£å¯èƒ½éœ€è¦ä¸åŒçš„é…ç½®ã€‚æ¥çœ‹çœ‹å¦‚ä½•ä¼˜é›…åœ°å¤„ç†è¿™ç§æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * OpenAPIé…ç½®å±æ€§ç±»</span></span><br><span class="line"><span class="comment"> * é€šè¿‡é…ç½®æ–‡ä»¶æ¥æ§åˆ¶APIæ–‡æ¡£çš„è¡Œä¸ºï¼Œçµæ´»æ€§Maxï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;app.openapi&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenApiProperties</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">enabled</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> <span class="string">&quot;APIæ–‡æ¡£&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„API&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">version</span> <span class="operator">=</span> <span class="string">&quot;v1.0.0&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">License</span> <span class="variable">license</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">License</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åµŒå¥—é…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Contact</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">&quot;dev@example.com&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://www.example.com&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter and setter...</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123; <span class="keyword">return</span> email; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123; <span class="built_in">this</span>.email = email; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getUrl</span><span class="params">()</span> &#123; <span class="keyword">return</span> url; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUrl</span><span class="params">(String url)</span> &#123; <span class="built_in">this</span>.url = url; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">License</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;MIT&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://opensource.org/licenses/MIT&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter and setter...</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getUrl</span><span class="params">()</span> &#123; <span class="keyword">return</span> url; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUrl</span><span class="params">(String url)</span> &#123; <span class="built_in">this</span>.url = url; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸»ç±»çš„getter and setter</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123; <span class="keyword">return</span> enabled; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEnabled</span><span class="params">(<span class="type">boolean</span> enabled)</span> &#123; <span class="built_in">this</span>.enabled = enabled; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTitle</span><span class="params">()</span> &#123; <span class="keyword">return</span> title; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTitle</span><span class="params">(String title)</span> &#123; <span class="built_in">this</span>.title = title; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123; <span class="keyword">return</span> description; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123; <span class="built_in">this</span>.description = description; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getVersion</span><span class="params">()</span> &#123; <span class="keyword">return</span> version; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVersion</span><span class="params">(String version)</span> &#123; <span class="built_in">this</span>.version = version; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Contact <span class="title function_">getContact</span><span class="params">()</span> &#123; <span class="keyword">return</span> contact; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContact</span><span class="params">(Contact contact)</span> &#123; <span class="built_in">this</span>.contact = contact; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> License <span class="title function_">getLicense</span><span class="params">()</span> &#123; <span class="keyword">return</span> license; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLicense</span><span class="params">(License license)</span> &#123; <span class="built_in">this</span>.license = license; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸åŒçš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># application-dev.yml (å¼€å‘ç¯å¢ƒ)</span><br><span class="line">app:</span><br><span class="line">  openapi:</span><br><span class="line">    enabled: <span class="literal">true</span></span><br><span class="line">    title: <span class="string">&quot;å¼€å‘ç¯å¢ƒAPIæ–‡æ¡£ ğŸ› ï¸&quot;</span></span><br><span class="line">    description: <span class="string">&quot;è¿™æ˜¯å¼€å‘ç¯å¢ƒçš„APIï¼Œéšæ—¶å¯èƒ½å˜åŠ¨ï¼Œè¯·è°¨æ…ä½¿ç”¨&quot;</span></span><br><span class="line">    version: <span class="string">&quot;v1.0.0-dev&quot;</span></span><br><span class="line">    contact:</span><br><span class="line">      name: <span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span></span><br><span class="line">      email: <span class="string">&quot;dev@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"># application-prod.yml (ç”Ÿäº§ç¯å¢ƒ)</span><br><span class="line">app:</span><br><span class="line">  openapi:</span><br><span class="line">    enabled: <span class="literal">false</span>  # ç”Ÿäº§ç¯å¢ƒå…³é—­æ–‡æ¡£</span><br><span class="line">    title: <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒAPI&quot;</span></span><br><span class="line">    description: <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒAPIæ–‡æ¡£&quot;</span></span><br><span class="line">    version: <span class="string">&quot;v1.0.0&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·é…ç½®ä¹‹åï¼Œç”Ÿäº§ç¯å¢ƒå°±ä¸ä¼šæš´éœ²APIæ–‡æ¡£äº†ï¼Œå®‰å…¨æ€§å¤§å¤§æå‡ï¼ğŸ˜</p><h3 id="ï¸-å®é™…é¡¹ç›®åº”ç”¨æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#ï¸-å®é™…é¡¹ç›®åº”ç”¨æ¡ˆä¾‹"></a> ğŸ› ï¸ å®é™…é¡¹ç›®åº”ç”¨æ¡ˆä¾‹</h3><p>ç†è®ºè¯´äº†è¿™ä¹ˆå¤šï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´è´´è¿‘å®é™…é¡¹ç›®çš„å®Œæ•´ç¤ºä¾‹ï¼å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†ç³»ç»Ÿçš„å•†å“ç®¡ç†æ¨¡å—ã€‚</p><h4 id="ï¸-å•†å“ç®¡ç†æ¨¡å—"><a class="markdownIt-Anchor" href="#ï¸-å•†å“ç®¡ç†æ¨¡å—"></a> ğŸ›ï¸ å•†å“ç®¡ç†æ¨¡å—</h4><p>é¦–å…ˆå®šä¹‰å•†å“å®ä½“ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ecommerce.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.*;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Schema(name = &quot;Product&quot;, description = &quot;å•†å“ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“ID&quot;, example = &quot;1&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“åç§°&quot;, example = &quot;iPhone 15 Pro Max&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;å•†å“åç§°ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 100, message = &quot;å•†å“åç§°é•¿åº¦å¿…é¡»åœ¨2-100å­—ç¬¦ä¹‹é—´&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“æè¿°&quot;, example = &quot;è‹¹æœæœ€æ–°æ——èˆ°æ‰‹æœºï¼Œæ€§èƒ½å¼ºæ‚ï¼Œæ‹ç…§å‡ºè‰²&quot;)</span></span><br><span class="line">    <span class="meta">@Size(max = 1000, message = &quot;å•†å“æè¿°ä¸èƒ½è¶…è¿‡1000å­—ç¬¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“ä»·æ ¼&quot;, example = &quot;9999.00&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å•†å“ä»·æ ¼ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@DecimalMin(value = &quot;0.01&quot;, message = &quot;å•†å“ä»·æ ¼å¿…é¡»å¤§äº0.01&quot;)</span></span><br><span class="line">    <span class="meta">@DecimalMax(value = &quot;999999.99&quot;, message = &quot;å•†å“ä»·æ ¼ä¸èƒ½è¶…è¿‡999999.99&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;åº“å­˜æ•°é‡&quot;, example = &quot;100&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;åº“å­˜æ•°é‡ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value = 0, message = &quot;åº“å­˜æ•°é‡ä¸èƒ½ä¸ºè´Ÿæ•°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer stock;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“åˆ†ç±»ID&quot;, example = &quot;1&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å•†å“åˆ†ç±»ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long categoryId;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“åˆ†ç±»åç§°&quot;, example = &quot;æ•°ç äº§å“&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> String categoryName;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“å›¾ç‰‡URLåˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; imageUrls;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“çŠ¶æ€&quot;, example = &quot;ACTIVE&quot;, allowableValues = &#123;&quot;ACTIVE&quot;, &quot;INACTIVE&quot;, &quot;OUT_OF_STOCK&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> ProductStatus status;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;åˆ›å»ºæ—¶é—´&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ›´æ–°æ—¶é—´&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å•†å“çŠ¶æ€æšä¸¾</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ProductStatus</span> &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ­£å¸¸é”€å”®&quot;)</span></span><br><span class="line">        ACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;å·²ä¸‹æ¶&quot;)</span></span><br><span class="line">        INACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;ç¼ºè´§&quot;)</span></span><br><span class="line">        OUT_OF_STOCK</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°å’Œgetter/setteræ–¹æ³•... (çœç•¥)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Product</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter and setter methods</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123; <span class="keyword">return</span> id; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123; <span class="built_in">this</span>.id = id; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123; <span class="keyword">return</span> description; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123; <span class="built_in">this</span>.description = description; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getPrice</span><span class="params">()</span> &#123; <span class="keyword">return</span> price; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(BigDecimal price)</span> &#123; <span class="built_in">this</span>.price = price; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getStock</span><span class="params">()</span> &#123; <span class="keyword">return</span> stock; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStock</span><span class="params">(Integer stock)</span> &#123; <span class="built_in">this</span>.stock = stock; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getCategoryId</span><span class="params">()</span> &#123; <span class="keyword">return</span> categoryId; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategoryId</span><span class="params">(Long categoryId)</span> &#123; <span class="built_in">this</span>.categoryId = categoryId; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCategoryName</span><span class="params">()</span> &#123; <span class="keyword">return</span> categoryName; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategoryName</span><span class="params">(String categoryName)</span> &#123; <span class="built_in">this</span>.categoryName = categoryName; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getImageUrls</span><span class="params">()</span> &#123; <span class="keyword">return</span> imageUrls; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageUrls</span><span class="params">(List&lt;String&gt; imageUrls)</span> &#123; <span class="built_in">this</span>.imageUrls = imageUrls; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> ProductStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123; <span class="keyword">return</span> status; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(ProductStatus status)</span> &#123; <span class="built_in">this</span>.status = status; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getCreateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> createTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreateTime</span><span class="params">(LocalDateTime createTime)</span> &#123; <span class="built_in">this</span>.createTime = createTime; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getUpdateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> updateTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUpdateTime</span><span class="params">(LocalDateTime updateTime)</span> &#123; <span class="built_in">this</span>.updateTime = updateTime; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å•†å“æ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#å•†å“æ§åˆ¶å™¨"></a> ğŸ¯ å•†å“æ§åˆ¶å™¨</h4><p>ç„¶ååˆ›å»ºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å•†å“æ§åˆ¶å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ecommerce.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.common.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> com.example.ecommerce.entity.Product;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.*;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.ExampleObject;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse as SwaggerApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•†å“ç®¡ç†æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * ç”µå•†ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ï¼Œè´Ÿè´£å•†å“çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ§åˆ¶å™¨å°±åƒæ˜¯å•†å“çš„&quot;ç”Ÿå‘½ç®¡å®¶&quot;ï¼Œä»å•†å“çš„è¯ç”Ÿåˆ°ä¸‹æ¶ï¼Œ</span></span><br><span class="line"><span class="comment"> * æ¯ä¸€ä¸ªç¯èŠ‚éƒ½åœ¨è¿™é‡Œå¾—åˆ°ç²¾å¿ƒå‘µæŠ¤ï¼ğŸ›ï¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/products&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;å•†å“ç®¡ç†&quot;, description = &quot;ç”µå•†ç³»ç»Ÿå•†å“ç®¡ç†æ ¸å¿ƒæ¥å£ï¼Œæ”¯æŒCRUDã€æœç´¢ã€åº“å­˜ç®¡ç†ç­‰åŠŸèƒ½ ğŸ›’&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•†å“æœç´¢æ¥å£</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå¤šç»´åº¦æœç´¢ï¼Œç®€ç›´æ˜¯å•†å“æŸ¥æ‰¾çš„&quot;ç‘å£«å†›åˆ€&quot;ï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/search&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;å•†å“æœç´¢&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    æ”¯æŒå¤šç»´åº¦å•†å“æœç´¢çš„å¼ºå¤§æ¥å£ã€‚</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ” æœç´¢åŠŸèƒ½</span></span><br><span class="line"><span class="meta">                    - **å…³é”®å­—æœç´¢**: æ”¯æŒå•†å“åç§°ã€æè¿°æ¨¡ç³Šæœç´¢</span></span><br><span class="line"><span class="meta">                    - **åˆ†ç±»ç­›é€‰**: æŒ‰å•†å“åˆ†ç±»è¿›è¡Œç­›é€‰</span></span><br><span class="line"><span class="meta">                    - **ä»·æ ¼åŒºé—´**: æ”¯æŒæœ€ä½ä»·å’Œæœ€é«˜ä»·ç­›é€‰</span></span><br><span class="line"><span class="meta">                    - **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰å•†å“çŠ¶æ€ç­›é€‰</span></span><br><span class="line"><span class="meta">                    - **æ’åºåŠŸèƒ½**: æ”¯æŒæŒ‰ä»·æ ¼ã€åˆ›å»ºæ—¶é—´ã€é”€é‡ç­‰æ’åº</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ’¡ ä½¿ç”¨æŠ€å·§</span></span><br><span class="line"><span class="meta">                    - å¤šä¸ªæ¡ä»¶å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œç³»ç»Ÿä¼šæ™ºèƒ½åŒ¹é…</span></span><br><span class="line"><span class="meta">                    - æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§å½±å“æ€§èƒ½</span></span><br><span class="line"><span class="meta">                    - é»˜è®¤æŒ‰ç›¸å…³åº¦æ’åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–æ’åºæ–¹å¼</span></span><br><span class="line"><span class="meta">                    &quot;&quot;&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;å•†å“æŸ¥è¯¢&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Parameters(&#123;</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;keyword&quot;, description = &quot;æœç´¢å…³é”®å­—&quot;, example = &quot;iPhone&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;categoryId&quot;, description = &quot;å•†å“åˆ†ç±»ID&quot;, example = &quot;1&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;minPrice&quot;, description = &quot;æœ€ä½ä»·æ ¼&quot;, example = &quot;100.00&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;maxPrice&quot;, description = &quot;æœ€é«˜ä»·æ ¼&quot;, example = &quot;10000.00&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;status&quot;, description = &quot;å•†å“çŠ¶æ€&quot;, example = &quot;ACTIVE&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;sortBy&quot;, description = &quot;æ’åºå­—æ®µ&quot;, example = &quot;price&quot;, </span></span><br><span class="line"><span class="meta">                      schema = @Schema(allowableValues = &#123;&quot;price&quot;, &quot;createTime&quot;, &quot;sales&quot;&#125;)),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;sortOrder&quot;, description = &quot;æ’åºæ–¹å‘&quot;, example = &quot;asc&quot;,</span></span><br><span class="line"><span class="meta">                      schema = @Schema(allowableValues = &#123;&quot;asc&quot;, &quot;desc&quot;&#125;)),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;page&quot;, description = &quot;é¡µç &quot;, example = &quot;1&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;size&quot;, description = &quot;æ¯é¡µå¤§å°&quot;, example = &quot;20&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;æœç´¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;æœç´¢ç»“æœ&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;æœç´¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;list&quot;: [</span></span><br><span class="line"><span class="meta">                                                  &#123;</span></span><br><span class="line"><span class="meta">                                                    &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                    &quot;name&quot;: &quot;iPhone 15 Pro Max&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;description&quot;: &quot;è‹¹æœæœ€æ–°æ——èˆ°æ‰‹æœº&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;price&quot;: 9999.00,</span></span><br><span class="line"><span class="meta">                                                    &quot;stock&quot;: 50,</span></span><br><span class="line"><span class="meta">                                                    &quot;categoryId&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                    &quot;categoryName&quot;: &quot;æ•°ç äº§å“&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;imageUrls&quot;: [&quot;http://example.com/image1.jpg&quot;]</span></span><br><span class="line"><span class="meta">                                                  &#125;</span></span><br><span class="line"><span class="meta">                                                ],</span></span><br><span class="line"><span class="meta">                                                &quot;total&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;page&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;size&quot;: 20</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; <span class="title function_">searchProducts</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> String keyword,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> Long categoryId,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> BigDecimal minPrice,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> BigDecimal maxPrice,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> Product.ProductStatus status,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;createTime&quot;)</span> String sortBy,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;desc&quot;)</span> String sortOrder,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;20&quot;)</span> Integer size)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæœç´¢é€»è¾‘</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">mockProduct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Product</span>();</span><br><span class="line">        mockProduct.setId(<span class="number">1L</span>);</span><br><span class="line">        mockProduct.setName(<span class="string">&quot;iPhone 15 Pro Max&quot;</span>);</span><br><span class="line">        mockProduct.setDescription(<span class="string">&quot;è‹¹æœæœ€æ–°æ——èˆ°æ‰‹æœºï¼Œæ€§èƒ½å¼ºæ‚&quot;</span>);</span><br><span class="line">        mockProduct.setPrice(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;9999.00&quot;</span>));</span><br><span class="line">        mockProduct.setStock(<span class="number">50</span>);</span><br><span class="line">        mockProduct.setCategoryId(<span class="number">1L</span>);</span><br><span class="line">        mockProduct.setCategoryName(<span class="string">&quot;æ•°ç äº§å“&quot;</span>);</span><br><span class="line">        mockProduct.setStatus(Product.ProductStatus.ACTIVE);</span><br><span class="line">        mockProduct.setImageUrls(Arrays.asList(<span class="string">&quot;http://example.com/image1.jpg&quot;</span>));</span><br><span class="line">        mockProduct.setCreateTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        List&lt;Product&gt; products = Arrays.asList(mockProduct);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ„é€ åˆ†é¡µç»“æœ</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> List&lt;Product&gt; list = products;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">page</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">hasNext</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">hasPrev</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;æœç´¢æˆåŠŸ&quot;</span>, result));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºå•†å“</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£å°±åƒæ˜¯å•†å“çš„&quot;å‡ºç”Ÿç™»è®°å¤„&quot;ï¼Œæ¯ä¸ªæ–°å•†å“éƒ½è¦åœ¨è¿™é‡Œç™»è®°é€ å†Œï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;åˆ›å»ºå•†å“&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    åˆ›å»ºä¸€ä¸ªæ–°çš„å•†å“ã€‚</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### âœ… éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="meta">                    - å•†å“åç§°ï¼š2-100å­—ç¬¦ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - å•†å“ä»·æ ¼ï¼š0.01-999999.99ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - åº“å­˜æ•°é‡ï¼šä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - å•†å“åˆ†ç±»ï¼šå¿…é¡»é€‰æ‹©æœ‰æ•ˆåˆ†ç±»ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - å•†å“æè¿°ï¼šæœ€å¤š1000å­—ç¬¦ï¼Œé€‰å¡«</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ¯ åˆ›å»ºå</span></span><br><span class="line"><span class="meta">                    - ç³»ç»Ÿè‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´</span></span><br><span class="line"><span class="meta">                    - é»˜è®¤çŠ¶æ€ä¸ºACTIVEï¼ˆæ­£å¸¸é”€å”®ï¼‰</span></span><br><span class="line"><span class="meta">                    - è¿”å›å®Œæ•´çš„å•†å“ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç”Ÿæˆçš„ID</span></span><br><span class="line"><span class="meta">                    &quot;&quot;&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;å•†å“ç®¡ç†&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@io</span>.swagger.v3.oas.annotations.parameters.RequestBody(</span><br><span class="line">            description = <span class="string">&quot;å•†å“ä¿¡æ¯&quot;</span>,</span><br><span class="line">            required = <span class="literal">true</span>,</span><br><span class="line">            content = <span class="meta">@Content(</span></span><br><span class="line"><span class="meta">                    mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(implementation = Product.class),</span></span><br><span class="line"><span class="meta">                    examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                            name = &quot;åˆ›å»ºå•†å“ç¤ºä¾‹&quot;,</span></span><br><span class="line"><span class="meta">                            value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                    &#123;</span></span><br><span class="line"><span class="meta">                                      &quot;name&quot;: &quot;MacBook Pro 16è‹±å¯¸&quot;,</span></span><br><span class="line"><span class="meta">                                      &quot;description&quot;: &quot;è‹¹æœä¸“ä¸šçº§ç¬”è®°æœ¬ç”µè„‘ï¼Œé€‚åˆå¼€å‘å’Œè®¾è®¡å·¥ä½œ&quot;,</span></span><br><span class="line"><span class="meta">                                      &quot;price&quot;: 19999.00,</span></span><br><span class="line"><span class="meta">                                      &quot;stock&quot;: 30,</span></span><br><span class="line"><span class="meta">                                      &quot;categoryId&quot;: 2,</span></span><br><span class="line"><span class="meta">                                      &quot;imageUrls&quot;: [</span></span><br><span class="line"><span class="meta">                                        &quot;http://example.com/macbook1.jpg&quot;,</span></span><br><span class="line"><span class="meta">                                        &quot;http://example.com/macbook2.jpg&quot;</span></span><br><span class="line"><span class="meta">                                      ]</span></span><br><span class="line"><span class="meta">                                    &#125;</span></span><br><span class="line"><span class="meta">                                    &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;201&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å•†å“åˆ›å»ºæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;å•†å“åˆ›å»ºæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;name&quot;: &quot;MacBook Pro 16è‹±å¯¸&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;description&quot;: &quot;è‹¹æœä¸“ä¸šçº§ç¬”è®°æœ¬ç”µè„‘&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;price&quot;: 19999.00,</span></span><br><span class="line"><span class="meta">                                                &quot;stock&quot;: 30,</span></span><br><span class="line"><span class="meta">                                                &quot;categoryId&quot;: 2,</span></span><br><span class="line"><span class="meta">                                                &quot;categoryName&quot;: &quot;ç¬”è®°æœ¬ç”µè„‘&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;createTime&quot;: &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;updateTime&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å‚æ•°éªŒè¯å¤±è´¥&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 400,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;å•†å“åç§°ä¸èƒ½ä¸ºç©º&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;Product&gt;&gt; <span class="title function_">createProduct</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> Product product)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿåˆ›å»ºé€»è¾‘</span></span><br><span class="line">        product.setId(System.currentTimeMillis()); <span class="comment">// æ¨¡æ‹ŸIDç”Ÿæˆ</span></span><br><span class="line">        product.setStatus(Product.ProductStatus.ACTIVE);</span><br><span class="line">        product.setCreateTime(LocalDateTime.now());</span><br><span class="line">        product.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        product.setCategoryName(<span class="string">&quot;æ•°ç äº§å“&quot;</span>); <span class="comment">// æ¨¡æ‹Ÿåˆ†ç±»åç§°</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED)</span><br><span class="line">                .body(ApiResponse.success(<span class="string">&quot;å•†å“åˆ›å»ºæˆåŠŸ&quot;</span>, product));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡æ›´æ–°åº“å­˜</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£å°±åƒæ˜¯ä»“åº“ç®¡ç†å‘˜ï¼Œå¯ä»¥ä¸€æ¬¡æ€§è°ƒæ•´å¤šä¸ªå•†å“çš„åº“å­˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PatchMapping(&quot;/stock/batch&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;æ‰¹é‡æ›´æ–°åº“å­˜&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    æ‰¹é‡æ›´æ–°å¤šä¸ªå•†å“çš„åº“å­˜æ•°é‡ã€‚</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ“¦ åŠŸèƒ½è¯´æ˜</span></span><br><span class="line"><span class="meta">                    - æ”¯æŒåŒæ—¶æ›´æ–°å¤šä¸ªå•†å“çš„åº“å­˜</span></span><br><span class="line"><span class="meta">                    - æ”¯æŒå¢åŠ æˆ–å‡å°‘åº“å­˜æ“ä½œ</span></span><br><span class="line"><span class="meta">                    - ä¼šè‡ªåŠ¨æ£€æŸ¥åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="meta">                    - åº“å­˜å˜åŠ¨ä¼šè®°å½•æ—¥å¿—ï¼Œä¾¿äºè¿½è¸ª</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### âš ï¸ æ³¨æ„äº‹é¡¹</span></span><br><span class="line"><span class="meta">                    - å‡å°‘åº“å­˜æ—¶ï¼Œä¸èƒ½ä½¿åº“å­˜å˜ä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="meta">                    - å•†å“IDå¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¼šè·³è¿‡è¯¥å•†å“</span></span><br><span class="line"><span class="meta">                    - æ“ä½œå®Œæˆåä¼šè¿”å›æ›´æ–°ç»“æœç»Ÿè®¡</span></span><br><span class="line"><span class="meta">                    &quot;&quot;&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;åº“å­˜ç®¡ç†&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@io</span>.swagger.v3.oas.annotations.parameters.RequestBody(</span><br><span class="line">            description = <span class="string">&quot;åº“å­˜æ›´æ–°ä¿¡æ¯åˆ—è¡¨&quot;</span>,</span><br><span class="line">            content = <span class="meta">@Content(</span></span><br><span class="line"><span class="meta">                    mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                    examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                            name = &quot;æ‰¹é‡æ›´æ–°åº“å­˜&quot;,</span></span><br><span class="line"><span class="meta">                            value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                    [</span></span><br><span class="line"><span class="meta">                                      &#123;</span></span><br><span class="line"><span class="meta">                                        &quot;productId&quot;: 1,</span></span><br><span class="line"><span class="meta">                                        &quot;quantity&quot;: 10,</span></span><br><span class="line"><span class="meta">                                        &quot;operation&quot;: &quot;ADD&quot;</span></span><br><span class="line"><span class="meta">                                      &#125;,</span></span><br><span class="line"><span class="meta">                                      &#123;</span></span><br><span class="line"><span class="meta">                                        &quot;productId&quot;: 2,</span></span><br><span class="line"><span class="meta">                                        &quot;quantity&quot;: 5,</span></span><br><span class="line"><span class="meta">                                        &quot;operation&quot;: &quot;SUBTRACT&quot;</span></span><br><span class="line"><span class="meta">                                      &#125;</span></span><br><span class="line"><span class="meta">                                    ]</span></span><br><span class="line"><span class="meta">                                    &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; <span class="title function_">batchUpdateStock</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestBody</span> List&lt;StockUpdateRequest&gt; requests)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ‰¹é‡æ›´æ–°é€»è¾‘</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">totalRequests</span> <span class="operator">=</span> requests.size();</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">successCount</span> <span class="operator">=</span> requests.size();</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">failureCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;æ‰€æœ‰å•†å“åº“å­˜æ›´æ–°æˆåŠŸ&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;æ‰¹é‡æ›´æ–°å®Œæˆ&quot;</span>, result));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åº“å­˜æ›´æ–°è¯·æ±‚DTO</span></span><br><span class="line">    <span class="meta">@Schema(name = &quot;StockUpdateRequest&quot;, description = &quot;åº“å­˜æ›´æ–°è¯·æ±‚&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StockUpdateRequest</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;å•†å“ID&quot;, example = &quot;1&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">        <span class="keyword">private</span> Long productId;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;å˜åŠ¨æ•°é‡&quot;, example = &quot;10&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">        <span class="keyword">private</span> Integer quantity;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ“ä½œç±»å‹&quot;, example = &quot;ADD&quot;, allowableValues = &#123;&quot;ADD&quot;, &quot;SUBTRACT&quot;&#125;)</span></span><br><span class="line">        <span class="keyword">private</span> StockOperation operation;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ“ä½œè¯´æ˜&quot;, example = &quot;è¡¥è´§å…¥åº“&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> String remark;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">StockOperation</span> &#123;</span><br><span class="line">            <span class="meta">@Schema(description = &quot;å¢åŠ åº“å­˜&quot;)</span></span><br><span class="line">            ADD,</span><br><span class="line">            <span class="meta">@Schema(description = &quot;å‡å°‘åº“å­˜&quot;)</span></span><br><span class="line">            SUBTRACT</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter and setter</span></span><br><span class="line">        <span class="keyword">public</span> Long <span class="title function_">getProductId</span><span class="params">()</span> &#123; <span class="keyword">return</span> productId; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProductId</span><span class="params">(Long productId)</span> &#123; <span class="built_in">this</span>.productId = productId; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getQuantity</span><span class="params">()</span> &#123; <span class="keyword">return</span> quantity; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setQuantity</span><span class="params">(Integer quantity)</span> &#123; <span class="built_in">this</span>.quantity = quantity; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> StockOperation <span class="title function_">getOperation</span><span class="params">()</span> &#123; <span class="keyword">return</span> operation; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOperation</span><span class="params">(StockOperation operation)</span> &#123; <span class="built_in">this</span>.operation = operation; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getRemark</span><span class="params">()</span> &#123; <span class="keyword">return</span> remark; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemark</span><span class="params">(String remark)</span> &#123; <span class="built_in">this</span>.remark = remark; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™ä¸ªå•†å“æ§åˆ¶å™¨ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆæœ‰å®æˆ˜ä»·å€¼ï¼ŸğŸ˜ å®ƒä¸ä»…åŒ…å«äº†å¸¸è§çš„CRUDæ“ä½œï¼Œè¿˜æœ‰æœç´¢ã€æ‰¹é‡æ“ä½œç­‰é«˜çº§åŠŸèƒ½ï¼Œè€Œä¸”æ¯ä¸ªæ¥å£çš„æ–‡æ¡£éƒ½éå¸¸è¯¦ç»†ï¼</p><h3 id="æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—"><a class="markdownIt-Anchor" href="#æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—"></a> ğŸ­ æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h3><p>ç»è¿‡è¿™ä¹ˆå¤šå¹´çš„æ‘¸çˆ¬æ»šæ‰“ï¼Œæˆ‘æ€»ç»“äº†ä¸€äº›ä½¿ç”¨OpenAPIçš„æœ€ä½³å®è·µï¼Œè¿™äº›éƒ½æ˜¯æˆ‘è¸©è¿‡å‘åçš„è¡€æ³ªç»éªŒå•Šï¼ğŸ˜­</p><h4 id="æœ€ä½³å®è·µ"><a class="markdownIt-Anchor" href="#æœ€ä½³å®è·µ"></a> âœ… æœ€ä½³å®è·µ</h4><h5 id="1ï¸âƒ£-ç»Ÿä¸€å“åº”æ ¼å¼"><a class="markdownIt-Anchor" href="#1ï¸âƒ£-ç»Ÿä¸€å“åº”æ ¼å¼"></a> 1ï¸âƒ£ ç»Ÿä¸€å“åº”æ ¼å¼</h5><p><strong>ä¸€å®šè¦</strong>ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼è¿™ä¸ä»…è®©APIä½¿ç”¨è€…æ„Ÿåˆ°èˆ’é€‚ï¼Œä¹Ÿè®©æ–‡æ¡£çœ‹èµ·æ¥æ›´ä¸“ä¸šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;åˆ›å»ºæˆåŠŸ&quot;</span>, user));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³• âŒ</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> user; <span class="comment">// æ²¡æœ‰ç»Ÿä¸€åŒ…è£…ï¼Œä¸åˆ©äºé”™è¯¯å¤„ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2ï¸âƒ£-è¯¦ç»†çš„å‚æ•°æè¿°"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-è¯¦ç»†çš„å‚æ•°æè¿°"></a> 2ï¸âƒ£ è¯¦ç»†çš„å‚æ•°æè¿°</h5><p>å‚æ•°æè¿°è¦è¯¦ç»†ï¼Œè¦è®©ä½¿ç”¨è€…ä¸€çœ‹å°±æ˜ç™½ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@Parameter(</span></span><br><span class="line"><span class="meta">    name = &quot;status&quot;,</span></span><br><span class="line"><span class="meta">    description = &quot;ç”¨æˆ·çŠ¶æ€ç­›é€‰æ¡ä»¶ã€‚ACTIVEè¡¨ç¤ºæ­£å¸¸ç”¨æˆ·ï¼ŒINACTIVEè¡¨ç¤ºç¦ç”¨ç”¨æˆ·ï¼ŒBANNEDè¡¨ç¤ºå°ç¦ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">    example = &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">    schema = @Schema(allowableValues = &#123;&quot;ACTIVE&quot;, &quot;INACTIVE&quot;, &quot;BANNED&quot;&#125;)</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³• âŒ</span></span><br><span class="line"><span class="meta">@Parameter(name = &quot;status&quot;, description = &quot;çŠ¶æ€&quot;)</span> <span class="comment">// å¤ªç®€å•ï¼Œä¸çŸ¥é“æœ‰å“ªäº›å€¼</span></span><br></pre></td></tr></table></figure><h5 id="3ï¸âƒ£-åˆç†ä½¿ç”¨ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#3ï¸âƒ£-åˆç†ä½¿ç”¨ç¤ºä¾‹"></a> 3ï¸âƒ£ åˆç†ä½¿ç”¨ç¤ºä¾‹</h5><p>ç¤ºä¾‹è¦è´´è¿‘çœŸå®åœºæ™¯ï¼Œä¸è¦ç”¨<code>foo</code>ã€<code>bar</code>è¿™ç§æ— æ„ä¹‰çš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@ExampleObject(</span></span><br><span class="line"><span class="meta">    name = &quot;åˆ›å»ºç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">            &#123;</span></span><br><span class="line"><span class="meta">              &quot;username&quot;: &quot;zhangsan&quot;,</span></span><br><span class="line"><span class="meta">              &quot;email&quot;: &quot;zhangsan@example.com&quot;,</span></span><br><span class="line"><span class="meta">              &quot;age&quot;: 25,</span></span><br><span class="line"><span class="meta">              &quot;phone&quot;: &quot;13812345678&quot;</span></span><br><span class="line"><span class="meta">            &#125;</span></span><br><span class="line"><span class="meta">            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³• âŒ</span></span><br><span class="line"><span class="meta">@ExampleObject(</span></span><br><span class="line"><span class="meta">    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">            &#123;</span></span><br><span class="line"><span class="meta">              &quot;username&quot;: &quot;foo&quot;,</span></span><br><span class="line"><span class="meta">              &quot;email&quot;: &quot;bar@baz.com&quot;,</span></span><br><span class="line"><span class="meta">              &quot;age&quot;: 123</span></span><br><span class="line"><span class="meta">            &#125;</span></span><br><span class="line"><span class="meta">            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure><h4 id="ï¸-å¸¸è§é™·é˜±"><a class="markdownIt-Anchor" href="#ï¸-å¸¸è§é™·é˜±"></a> âš ï¸ å¸¸è§é™·é˜±</h4><h5 id="1ï¸âƒ£-å¿˜è®°å¤„ç†ä¸åŒå“åº”ç "><a class="markdownIt-Anchor" href="#1ï¸âƒ£-å¿˜è®°å¤„ç†ä¸åŒå“åº”ç "></a> 1ï¸âƒ£ å¿˜è®°å¤„ç†ä¸åŒå“åº”ç </h5><p>å¾ˆå¤šåŒå­¦åªå†™200çš„æƒ…å†µï¼Œå®Œå…¨å¿˜è®°äº†é”™è¯¯å¤„ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®Œæ•´çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;200&quot;, description = &quot;æ“ä½œæˆåŠŸ&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;400&quot;, description = &quot;å‚æ•°é”™è¯¯&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;401&quot;, description = &quot;æœªè®¤è¯&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;403&quot;, description = &quot;æƒé™ä¸è¶³&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;404&quot;, description = &quot;èµ„æºä¸å­˜åœ¨&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;500&quot;, description = &quot;æœåŠ¡å™¨é”™è¯¯&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></figure><h5 id="2ï¸âƒ£-å¿½ç•¥æ•°æ®éªŒè¯æ³¨è§£"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-å¿½ç•¥æ•°æ®éªŒè¯æ³¨è§£"></a> 2ï¸âƒ£ å¿½ç•¥æ•°æ®éªŒè¯æ³¨è§£</h5><p>è®°ä½ï¼ŒSpringçš„éªŒè¯æ³¨è§£å’ŒOpenAPIæ³¨è§£è¦é…åˆä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;ç”¨æˆ·å¹´é¾„&quot;, example = &quot;25&quot;, minimum = &quot;1&quot;, maximum = &quot;150&quot;)</span></span><br><span class="line"><span class="meta">@Min(value = 1, message = &quot;å¹´é¾„å¿…é¡»å¤§äº0&quot;)</span></span><br><span class="line"><span class="meta">@Max(value = 150, message = &quot;å¹´é¾„ä¸èƒ½è¶…è¿‡150&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br></pre></td></tr></table></figure><h5 id="3ï¸âƒ£-ç”Ÿäº§ç¯å¢ƒæš´éœ²æ–‡æ¡£"><a class="markdownIt-Anchor" href="#3ï¸âƒ£-ç”Ÿäº§ç¯å¢ƒæš´éœ²æ–‡æ¡£"></a> 3ï¸âƒ£ ç”Ÿäº§ç¯å¢ƒæš´éœ²æ–‡æ¡£</h5><p>ç”Ÿäº§ç¯å¢ƒä¸€å®šè¦å…³é—­APIæ–‡æ¡£ï¼è¿™ä¸ªå‘æˆ‘è§è¿‡å¤ªå¤šå›¢é˜Ÿè¸©äº†ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿäº§ç¯å¢ƒé…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span>  <span class="comment"># ç”Ÿäº§ç¯å¢ƒå…³é—­</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span>  <span class="comment"># ç”Ÿäº§ç¯å¢ƒå…³é—­</span></span><br></pre></td></tr></table></figure><h4 id="æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a class="markdownIt-Anchor" href="#æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a> ğŸ”§ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4><h5 id="1ï¸âƒ£-æ‡’åŠ è½½é…ç½®"><a class="markdownIt-Anchor" href="#1ï¸âƒ£-æ‡’åŠ è½½é…ç½®"></a> 1ï¸âƒ£ æ‡’åŠ è½½é…ç½®</h5><p>å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥é…ç½®æ‡’åŠ è½½æ¥æå‡å¯åŠ¨é€Ÿåº¦ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">lazy-initialization:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">disabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h5 id="2ï¸âƒ£-æ’é™¤ä¸å¿…è¦çš„æ¥å£"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-æ’é™¤ä¸å¿…è¦çš„æ¥å£"></a> 2ï¸âƒ£ æ’é™¤ä¸å¿…è¦çš„æ¥å£</h5><p>æœ‰äº›å†…éƒ¨æ¥å£ä¸éœ€è¦å‡ºç°åœ¨æ–‡æ¡£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Hidden</span>  <span class="comment">// æ•´ä¸ªæ§åˆ¶å™¨éƒ½ä¸åœ¨æ–‡æ¡£ä¸­æ˜¾ç¤º</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InternalController</span> &#123;</span><br><span class="line">    <span class="comment">// å†…éƒ¨æ¥å£</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…å•ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/internal&quot;)</span></span><br><span class="line"><span class="meta">@Hidden</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">internalMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;internal&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“ä¸å±•æœ›"><a class="markdownIt-Anchor" href="#æ€»ç»“ä¸å±•æœ›"></a> ğŸŒŸ æ€»ç»“ä¸å±•æœ›</h3><p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä¸ç¦æ„Ÿæ…¨ä¸‡åƒå•Šï¼ğŸ˜Œ ä»æœ€åˆçš„æ‰‹å†™APIæ–‡æ¡£ï¼Œåˆ°ç°åœ¨çš„è‡ªåŠ¨åŒ–ç”Ÿæˆï¼ŒæŠ€æœ¯çš„å‘å±•çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼</p><h4 id="æ ¸å¿ƒè¦ç‚¹å›é¡¾"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒè¦ç‚¹å›é¡¾"></a> ğŸ¯ æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4><p>è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« çš„æ ¸å¿ƒè¦ç‚¹ï¼š</p><ol><li><p><strong>SpringBoot 3.xçš„å˜é©</strong>ï¼šå…¨é¢æ‹¥æŠ±Jakarta EEï¼Œæœ€ä½Java 17ï¼Œä¸ºæˆ‘ä»¬å¸¦æ¥äº†æ›´ç°ä»£åŒ–çš„å¼€å‘ä½“éªŒ</p></li><li><p><strong>OpenAPI 3.0çš„å¼ºå¤§</strong>ï¼šç›¸æ¯”2.0ç‰ˆæœ¬ï¼Œ3.0åœ¨æ•°æ®ç±»å‹ã€è®¤è¯æœºåˆ¶ã€ç»„ä»¶å¤ç”¨ç­‰æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡</p></li><li><p><strong>SpringDocçš„é€‰æ‹©</strong>ï¼šåœ¨SpringFoxåœæ­¢ç»´æŠ¤çš„æƒ…å†µä¸‹ï¼ŒSpringDocæˆä¸ºäº†SpringBoot 3.xæ—¶ä»£çš„æœ€ä½³é€‰æ‹©</p></li><li><p><strong>æ³¨è§£çš„è‰ºæœ¯</strong>ï¼šé€šè¿‡åˆç†ä½¿ç”¨<code>@Operation</code>ã€<code>@Schema</code>ã€<code>@Parameter</code>ç­‰æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆéå¸¸ä¸“ä¸šçš„APIæ–‡æ¡£</p></li><li><p><strong>æœ€ä½³å®è·µçš„é‡è¦æ€§</strong>ï¼šç»Ÿä¸€å“åº”æ ¼å¼ã€è¯¦ç»†å‚æ•°æè¿°ã€åˆç†ç¤ºä¾‹ä½¿ç”¨ç­‰å®è·µè®©æˆ‘ä»¬çš„APIæ›´åŠ ä¼˜é›…</p></li></ol><h4 id="æœªæ¥å‘å±•è¶‹åŠ¿"><a class="markdownIt-Anchor" href="#æœªæ¥å‘å±•è¶‹åŠ¿"></a> ğŸš€ æœªæ¥å‘å±•è¶‹åŠ¿</h4><p>å±•æœ›æœªæ¥ï¼ŒAPIæ–‡æ¡£çš„å‘å±•è¿˜æœ‰å¾ˆå¤šä»¤äººå…´å¥‹çš„å¯èƒ½æ€§ï¼š</p><p><strong>ğŸ¤– AIé©±åŠ¨çš„æ–‡æ¡£ç”Ÿæˆ</strong><br />éšç€AIæŠ€æœ¯çš„å‘å±•ï¼Œæœªæ¥å¯èƒ½ä¼šæœ‰AIåŠ©æ‰‹è‡ªåŠ¨åˆ†æä»£ç é€»è¾‘ï¼Œç”Ÿæˆæ›´æ™ºèƒ½ã€æ›´è‡ªç„¶çš„APIæè¿°ã€‚æƒ³è±¡ä¸€ä¸‹ï¼ŒAIèƒ½ç†è§£ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œè‡ªåŠ¨ç”Ÿæˆè´´åˆåœºæ™¯çš„ç¤ºä¾‹å’Œè¯´æ˜ï¼Œé‚£è¯¥å¤šé…·å•Šï¼</p><p><strong>ğŸ¨ æ›´ä¸°å¯Œçš„äº¤äº’ä½“éªŒ</strong><br />æœªæ¥çš„APIæ–‡æ¡£å¯èƒ½ä¸å†æ˜¯é™æ€çš„é¡µé¢ï¼Œè€Œæ˜¯åƒæ¸¸æˆä¸€æ ·çš„äº¤äº’å¼ä½“éªŒã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼æ¢ç´¢APIï¼Œå®æ—¶çœ‹åˆ°æ•°æ®æµè½¬ï¼Œç”šè‡³å¯ä»¥&quot;ç©&quot;APIï¼</p><p><strong>ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆçš„è®¾è®¡</strong><br />éšç€ç§»åŠ¨å¼€å‘çš„æ™®åŠï¼ŒAPIæ–‡æ¡£ä¹Ÿéœ€è¦è€ƒè™‘ç§»åŠ¨ç«¯çš„ä½¿ç”¨ä½“éªŒã€‚æœªæ¥å¯èƒ½ä¼šæœ‰ä¸“é—¨ä¸ºç§»åŠ¨ç«¯ä¼˜åŒ–çš„æ–‡æ¡£ç•Œé¢ã€‚</p><p><strong>ğŸ”— æ›´æ·±åº¦çš„é›†æˆ</strong><br />APIæ–‡æ¡£ä¸å¼€å‘å·¥å…·ã€æµ‹è¯•æ¡†æ¶ã€ç›‘æ§ç³»ç»Ÿçš„é›†æˆä¼šè¶Šæ¥è¶Šæ·±å…¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„APIç”Ÿæ€ç³»ç»Ÿã€‚</p><h4 id="æœ€åçš„è¯"><a class="markdownIt-Anchor" href="#æœ€åçš„è¯"></a> ğŸ’ æœ€åçš„è¯</h4><p>ä½œä¸ºä¸€ä¸ªåœ¨æŠ€æœ¯è·¯ä¸Šæ‘¸çˆ¬æ»šæ‰“çš„è€å¸æœºï¼Œæˆ‘æƒ³å¯¹å¤§å®¶è¯´ï¼šæŠ€æœ¯æ˜¯å·¥å…·ï¼Œä½†æ€åº¦å†³å®šä¸€åˆ‡ï¼ğŸ’ª</p><p>å†™å¥½APIæ–‡æ¡£ä¸ä»…ä»…æ˜¯ä¸ºäº†å®Œæˆå·¥ä½œï¼Œæ›´æ˜¯å¯¹ä½¿ç”¨è€…çš„ä¸€ç§å°Šé‡å’Œå…³çˆ±ã€‚å½“åˆ«äººä½¿ç”¨ä½ çš„APIæ—¶èƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹ï¼Œå½“å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿå¿«é€Ÿç†è§£æ¥å£é€»è¾‘æ—¶ï¼Œé‚£ç§æˆå°±æ„Ÿæ˜¯æ— æ³•è¨€å–»çš„ï¼</p><p>OpenAPIå’ŒSpringBootçš„ç»“åˆï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œä½†å·¥å…·å†å¼ºå¤§ï¼Œä¹Ÿéœ€è¦æˆ‘ä»¬ç”¨å¿ƒå»ä½¿ç”¨ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°æ­£åœ¨è·¯ä¸Šçš„ä½ ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å†™å‡ºæ›´ä¼˜é›…ã€æ›´å‹å¥½çš„APIï¼ğŸ‰</p><p>å¦‚æœä½ åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè®°ä½ï¼šGoogleæ˜¯ä½ çš„æœ‹å‹ï¼ŒStack Overflowæ˜¯ä½ çš„è€å¸ˆï¼Œè€Œå®˜æ–¹æ–‡æ¡£åˆ™æ˜¯ä½ æœ€å¯é çš„ä¼™ä¼´ï¼å½“ç„¶ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å®è·µç»éªŒï¼Œä¹Ÿæ¬¢è¿åˆ†äº«å‡ºæ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼</p><p>æœ€åçš„æœ€åï¼Œè®°ä½ä¸€å¥è¯ï¼š<strong>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿ç»™æœºå™¨æ‰§è¡Œï¼</strong> è®©æˆ‘ä»¬ä¸€èµ·å†™å‡ºæ›´æœ‰æ¸©åº¦çš„ä»£ç å’Œæ–‡æ¡£å§ï¼ğŸŒˆ</p>]]></content>
    
    
    <summary type="html">æ­ç§˜Swaggerä¸OpenAPIé›†æˆçš„ç»ˆææ”»ç•¥</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Anacondaå®‰è£…ä¸ä½¿ç”¨è¯¦ç»†æ•™ç¨‹</title>
    <link href="http://www.formeasy.cc/2025/09/07/Python/Anaconda%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/"/>
    <id>http://www.formeasy.cc/2025/09/07/Python/Anaconda%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/</id>
    <published>2025-09-07T07:35:15.000Z</published>
    <updated>2025-09-07T07:44:35.917Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡ Anaconda å®‰è£…æ•™ç¨‹å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ Windows ä¸ Linux ä¸Šå®Œç¾éƒ¨ç½² Python æ•°æ®åˆ†æç¯å¢ƒï¼›é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ ä¸ä»…èƒ½æŒæ¡ Anaconda çš„ä¸‹è½½ã€å®‰è£…ä¸ç¯å¢ƒé…ç½®ï¼Œæ›´èƒ½å­¦ä¼šå¦‚ä½•åˆ©ç”¨ Anaconda é¢„è£…çš„ NumPyã€Pandasã€Matplotlib ç­‰æ ¸å¿ƒç§‘å­¦è®¡ç®—åŒ…ï¼Œä¸ºé«˜æ•ˆçš„æ•°æ®å¤„ç†ä¸åˆ†æå·¥ä½œæ‰“ä¸‹åšå®åŸºç¡€ã€‚</p><p><img src="1b965ee301b941ceab6d8a2c09ac5567.jpeg" alt="" /></p><p>Anaconda æ˜¯ä¸€ä¸ªå¼€æºçš„ Python å’Œ Rè¯­è¨€çš„å‘è¡Œç‰ˆæœ¬ï¼Œä¸“ä¸ºç§‘å­¦è®¡ç®—ï¼ˆæ•°æ®ç§‘å­¦ã€æœºå™¨å­¦ä¹ ã€å¤§è§„æ¨¡æ•°æ®å¤„ç†ç­‰ï¼‰è€Œè®¾è®¡ã€‚å®ƒæå¤§åœ°ç®€åŒ–äº†åŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†çš„è¿‡ç¨‹ã€‚Anaconda é¢„è£…äº† <code>conda</code>ã€Python ä»¥åŠæ•°ç™¾ä¸ªå¸¸ç”¨çš„ç§‘å­¦è®¡ç®—ã€æ•°æ®åˆ†æç›¸å…³çš„åŒ…ï¼Œå¦‚ NumPy, Pandas, Scikit-learn, Matplotlib ç­‰ï¼Œè®©ä½ æ— éœ€å†ä¸ºç¹ççš„ä¾èµ–é—®é¢˜è€Œçƒ¦æ¼ã€‚</p><h3 id="å…³äºä¸‹è½½"><a class="markdownIt-Anchor" href="#å…³äºä¸‹è½½"></a> <strong>å…³äºä¸‹è½½</strong></h3><blockquote><p><strong>å®˜ç½‘</strong>ï¼š<code>https://www.anaconda.com/download</code><br /><strong>å›½å†…é•œåƒæº (æ¨è)</strong>ï¼š<code>https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</code></p></blockquote><p>ç”±äºAnacondaçš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œç›´æ¥ä»å®˜ç½‘ä¸‹è½½å¯èƒ½ä¼šéå¸¸ç¼“æ…¢ã€‚å› æ­¤ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…çš„é•œåƒæºï¼ˆå¦‚æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼‰è¿›è¡Œä¸‹è½½ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚</p><h3 id="ä¸€-windows-å¹³å°å®‰è£…ä¸ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ä¸€-windows-å¹³å°å®‰è£…ä¸ä½¿ç”¨"></a> <strong>ä¸€ã€Windows å¹³å°å®‰è£…ä¸ä½¿ç”¨</strong></h3><h4 id="11-ä¸‹è½½-anaconda-å®‰è£…åŒ…"><a class="markdownIt-Anchor" href="#11-ä¸‹è½½-anaconda-å®‰è£…åŒ…"></a> <strong>1.1 ä¸‹è½½ Anaconda å®‰è£…åŒ…</strong></h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è·å– Anaconda çš„ Windows å®‰è£…ç¨‹åºã€‚</p><p><strong>1.è®¿é—® Anaconda å®˜ç½‘</strong>ï¼š<br />æ‰“å¼€æµè§ˆå™¨ï¼Œè¿›å…¥ Anaconda Distributioné¡µé¢ï¼Œç‚¹å‡»Free Download</p><p><img src="4fd8ea5f657e4220a36d696e8a3dfc5b.png" alt="" /></p><p><strong>2.è¿›å…¥ä¸‹è½½é¡µé¢</strong>ï¼š<br />ç‚¹å‡»é¡µé¢ä¸Šçš„ â€œGet Startedâ€ æˆ– â€œDownloadâ€ æŒ‰é’®ï¼Œé€šå¸¸ä¼šè·³è½¬åˆ°ä¸‹è½½é¡µé¢ã€‚</p><p><img src="a3f788eaf3da412b89834bf8e35e30de.png" alt="" /></p><p><strong>3.å¼€å§‹ä¸‹è½½</strong>ï¼š<br />åœ¨ â€œDistribution Installersâ€ ä¸‹æ–¹ï¼Œç‚¹å‡» â€œDownloadâ€ æŒ‰é’®ï¼Œé¡µé¢å¯èƒ½ä¼šæç¤ºä½ æ³¨å†Œæˆ–æ„Ÿè°¢ä¸‹è½½ã€‚</p><p><img src="9131837761e94316a9adcab0ae82f844.png" alt="" /><br /><img src="15d2011ed14c4d8cb92ff0e17a4578f2.png" alt="" /><br /><strong>4.é€‰æ‹©æ­£ç¡®çš„ç‰ˆæœ¬ (ä½¿ç”¨æ¸…åé•œåƒæº)</strong>ï¼š<br />æ‰“å¼€ <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">æ¸…åå¤§å­¦ Anaconda é•œåƒæº</a>ã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰å†å²ç‰ˆæœ¬çš„åˆ—è¡¨ã€‚è¯·æ ¹æ®ä½ çš„ç³»ç»Ÿé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼Œé€šå¸¸æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ <code>Windows-x86_64.exe</code> æ–‡ä»¶ã€‚</p><p><img src="d2f4de32625e48469d00668a4d07affc.png" alt="" /></p><h4 id="12-å®‰è£…-anaconda"><a class="markdownIt-Anchor" href="#12-å®‰è£…-anaconda"></a> <strong>1.2 å®‰è£… Anaconda</strong></h4><p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡» <code>.exe</code> å®‰è£…åŒ…ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå®‰è£…ã€‚</p><p><strong>1.æ¬¢è¿ç•Œé¢</strong>ï¼š<br />ç‚¹å‡» â€œNext &gt;â€ã€‚</p><p><img src="59deb742ac264feba251b3dec24b6957.png" alt="" /></p><p><strong>2.è®¸å¯åè®®</strong>ï¼š<br />é˜…è¯»è®¸å¯åè®®ï¼Œç„¶åç‚¹å‡» â€œI Agreeâ€ã€‚<br /><img src="df8613cf3ace419c843d651bd328129b.png" alt="" /></p><p><strong>3.é€‰æ‹©å®‰è£…ç±»å‹</strong>ï¼š</p><blockquote><p><code>Just Me</code>: åªä¸ºå½“å‰ç”¨æˆ·å®‰è£…ã€‚<br /><code>All Users</code>: ä¸ºæ­¤è®¡ç®—æœºä¸Šçš„æ‰€æœ‰ç”¨æˆ·å®‰è£… (éœ€è¦ç®¡ç†å‘˜æƒé™)ã€‚<br /><strong>å»ºè®®é€‰æ‹© â€œAll Usersâ€</strong>ï¼Œè¿™æœ‰åŠ©äºé¿å…æŸäº›æƒé™é—®é¢˜ã€‚ç„¶åç‚¹å‡» â€œNext &gt;â€ã€‚</p></blockquote><p><img src="50048334d1524c8196ad683190cc1d8b.png" alt="" /></p><p><strong>4.é€‰æ‹©å®‰è£…è·¯å¾„</strong>ï¼š<br />é€‰æ‹©ä¸€ä¸ªä¸å«ç©ºæ ¼å’Œä¸­æ–‡å­—ç¬¦çš„å®‰è£…è·¯å¾„ï¼Œä¾‹å¦‚ <code>E:\Anaconda</code>ã€‚ç„¶åç‚¹å‡» â€œNext &gt;â€ã€‚</p><p><img src="b70810356678480abc78257d4e758256.png" alt="" /></p><p><strong>5.é«˜çº§å®‰è£…é€‰é¡¹ (é‡è¦)</strong>ï¼š</p><blockquote><p><code>Create shortcuts</code>: åˆ›å»ºå¼€å§‹èœå•å¿«æ·æ–¹å¼ (é€šå¸¸ä¿æŒé»˜è®¤)ã€‚<br /><code>Register Anaconda3 as the system Python [ç‰ˆæœ¬å·]</code>: <strong>å¼ºçƒˆå»ºè®®å‹¾é€‰æ­¤é¡¹</strong>ã€‚è¿™ä¼šå°† Anaconda çš„ Python æ³¨å†Œä¸ºç³»ç»Ÿçš„é»˜è®¤ Pythonï¼Œä½¿å¾— VSCode, PyCharm ç­‰IDEèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹åˆ°å®ƒã€‚<br />ç‚¹å‡» â€œInstallâ€ å¼€å§‹å®‰è£…ã€‚</p></blockquote><p><img src="0e78a41791ba4d38a6c025c980c724c8.png" alt="" /></p><p><strong>6.å®‰è£…è¿‡ç¨‹</strong>ï¼š<br />ç­‰å¾…å®‰è£…è¿›åº¦æ¡èµ°å®Œã€‚</p><p><img src="9436573a28dc4cdea40250984b6418de.png" alt="" /></p><p><strong>7.å®‰è£…å®Œæˆ</strong>ï¼š<br />å®‰è£…å®Œæˆåï¼Œç‚¹å‡» â€œNext &gt;â€</p><p><img src="a85eca4924da49bb982f04a9174f5e7b.png" alt="" /></p><p><strong>8.äº‘ç«¯é›†æˆ</strong>ï¼š<br />æ­¤é¡µé¢æ˜¯ Anaconda Cloud çš„æ¨å¹¿ï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡» â€œNext &gt;â€ã€‚</p><p><img src="fa255765b4eb4148a9bd448d308a23d5.png" alt="" /></p><p><strong>9.å®Œæˆè®¾ç½®</strong>ï¼š<br />å–æ¶ˆå‹¾é€‰ â€œLaunch Anaconda Navigatorâ€ å’Œ â€œWelcome to Anacondaâ€ï¼Œç„¶åç‚¹å‡» â€œFinishâ€ å®Œæˆå®‰è£…ã€‚æˆ‘ä»¬ç¨åä¼šæ‰‹åŠ¨å¯åŠ¨ã€‚</p><p><img src="0149de2d97a34736ae26d3d103a2420a.png" alt="" /></p><h4 id="13-é…ç½®ç¯å¢ƒå˜é‡-å…³é”®æ­¥éª¤"><a class="markdownIt-Anchor" href="#13-é…ç½®ç¯å¢ƒå˜é‡-å…³é”®æ­¥éª¤"></a> <strong>1.3 é…ç½®ç¯å¢ƒå˜é‡ (å…³é”®æ­¥éª¤)</strong></h4><p>ä¸ºäº†èƒ½åœ¨ä»»æ„å‘½ä»¤è¡Œçª—å£ (CMD, PowerShell) ä¸­ä½¿ç”¨ <code>conda</code> å’Œ <code>python</code> å‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚</p><p><strong>1.æ‰“å¼€ç³»ç»Ÿå±æ€§</strong>ï¼š<br />åœ¨ Windows æœç´¢æ¡†ä¸­æœç´¢â€œç¯å¢ƒå˜é‡â€ï¼Œå¹¶é€‰æ‹©â€œç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡â€ã€‚åœ¨å¼¹å‡ºçš„â€œç³»ç»Ÿå±æ€§â€çª—å£ä¸­ï¼Œç‚¹å‡»â€œç¯å¢ƒå˜é‡(N)â€¦â€ã€‚</p><p><img src="9a65b26cc1f348e99e264f7593a2d2bd.png" alt="" /></p><p><strong>2.ç¼–è¾‘ç”¨æˆ·å˜é‡ Path</strong>ï¼š<br />åœ¨â€œç”¨æˆ·å˜é‡â€éƒ¨åˆ†ï¼Œæ‰¾åˆ°åä¸º <code>Path</code> çš„å˜é‡ï¼Œé€‰ä¸­å®ƒï¼Œç„¶åç‚¹å‡»â€œç¼–è¾‘(E)â€¦â€ã€‚</p><p><img src="c59343ea89ce47ca9cbda9b419f192d6.png" alt="" /></p><p><strong>3.æ·»åŠ  Anaconda è·¯å¾„</strong>ï¼š<br />åœ¨â€œç¼–è¾‘ç¯å¢ƒå˜é‡â€çª—å£ä¸­ï¼Œç‚¹å‡»â€œæ–°å»º(N)â€ï¼Œç„¶åä¾æ¬¡æ·»åŠ ä»¥ä¸‹ä¸‰ä¸ªè·¯å¾„ (è¯·å°† <code>E:\Anaconda</code> æ›¿æ¢ä¸ºä½ çš„å®é™…å®‰è£…è·¯å¾„)ï¼š</p><blockquote><p><code>E:\Anaconda</code><br /><code>E:\Anaconda\Scripts</code><br /><code>E:\Anaconda\Library\bin</code></p></blockquote><p>æ·»åŠ å®Œæˆåï¼Œç‚¹å‡»â€œç¡®å®šâ€ã€‚</p><p><img src="35b98964de204c4496aec2fcbec5892b.png" alt="" /></p><p><strong>4.ç¡®è®¤å¹¶å…³é—­</strong>ï¼š<br />åœ¨â€œç¯å¢ƒå˜é‡â€çª—å£å’Œâ€œç³»ç»Ÿå±æ€§â€çª—å£ä¸­ï¼Œéƒ½ç‚¹å‡»â€œç¡®å®šâ€æ¥ä¿å­˜æ›´æ”¹ã€‚</p><p><img src="6ffc1a7b7c3e411881a45989390d5e89.png" alt="" /></p><h4 id="14-éªŒè¯ä¸ä½¿ç”¨"><a class="markdownIt-Anchor" href="#14-éªŒè¯ä¸ä½¿ç”¨"></a> <strong>1.4 éªŒè¯ä¸ä½¿ç”¨</strong></h4><p><strong>1.éªŒè¯å®‰è£…</strong>ï¼š<br /><strong>é‡æ–°æ‰“å¼€ä¸€ä¸ª</strong> æ–°çš„ CMD æˆ– PowerShell çª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre><code>conda</code></pre><p>å¦‚æœèƒ½æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…å’Œç¯å¢ƒå˜é‡é…ç½®æˆåŠŸã€‚ä½ ä¹Ÿå¯ä»¥è¾“å…¥ <code>conda</code> æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤ã€‚</p><p><img src="278db209e5a945b8bf0c0e0d8cde51ee.png" alt="" /></p><p><strong>2.Anaconda Navigator (å›¾å½¢åŒ–ç•Œé¢)</strong>ï¼š<br />ä½ å¯ä»¥åœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ°å¹¶æ‰“å¼€ â€œAnaconda Navigatorâ€ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå›¾å½¢åŒ–çš„ç•Œé¢æ¥ç®¡ç†ç¯å¢ƒå’Œåº”ç”¨ã€‚</p><p><img src="31ac51418658400c9abc8bb404a14f9b.png" alt="" /></p><p><strong>3.å¯åŠ¨ Jupyter Notebook</strong>ï¼š<br />Jupyter Notebook æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„æ•°æ®ç§‘å­¦å¼€å‘ç¯å¢ƒã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p><pre><code>jupyter notebook</code></pre><p><img src="d583f38c0a1441cbbd94ff390069b8ad.png" alt="" /><br /><img src="26f53d0e9e924ab5b1cc182502dcf7bd.png" alt="" /></p><h3 id="äºŒ-linux-å¹³å°å®‰è£…ä¸ä½¿ç”¨"><a class="markdownIt-Anchor" href="#äºŒ-linux-å¹³å°å®‰è£…ä¸ä½¿ç”¨"></a> <strong>äºŒã€Linux å¹³å°å®‰è£…ä¸ä½¿ç”¨</strong></h3><p>åœ¨ Linux ä¸Šå®‰è£… Anaconda é€šå¸¸æ›´åŠ å¿«æ·ï¼Œä¸»è¦é€šè¿‡å‘½ä»¤è¡Œå®Œæˆã€‚</p><h4 id="21-ä¸‹è½½-anaconda-å®‰è£…è„šæœ¬"><a class="markdownIt-Anchor" href="#21-ä¸‹è½½-anaconda-å®‰è£…è„šæœ¬"></a> <strong>2.1 ä¸‹è½½ Anaconda å®‰è£…è„šæœ¬</strong></h4><p>æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ <code>wget</code> å‘½ä»¤ä»æ¸…åé•œåƒæºä¸‹è½½é€‚ç”¨äº Linux çš„å®‰è£…è„šæœ¬ã€‚</p><pre><code># è¿›å…¥ä¸€ä¸ªä¸´æ—¶ä¸‹è½½ç›®å½•cd /tmp# ä¸‹è½½å®‰è£…è„šæœ¬æˆ–è€…ç›´æ¥ä¸Šä¼ è„šæœ¬ (è¯·ä»æ¸…åé•œåƒæºå®˜ç½‘ç¡®è®¤æœ€æ–°çš„ç‰ˆæœ¬å·)wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2025.06-0-Linux-x86_64.sh</code></pre><h4 id="22-æ‰§è¡Œå®‰è£…è„šæœ¬"><a class="markdownIt-Anchor" href="#22-æ‰§è¡Œå®‰è£…è„šæœ¬"></a> <strong>2.2 æ‰§è¡Œå®‰è£…è„šæœ¬</strong></h4><p>ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨ <code>bash</code> å‘½ä»¤è¿è¡Œå®‰è£…è„šæœ¬ã€‚</p><pre><code>bash Anaconda3-2025.06-0-Linux-x86_64.sh</code></pre><p>æ¥ä¸‹æ¥ï¼Œå®‰è£…ç¨‹åºä¼šè¿›å…¥äº¤äº’æ¨¡å¼ï¼š</p><ol><li><strong>æ¬¢è¿ç•Œé¢</strong>ï¼šæŒ‰ <code>Enter</code> ç»§ç»­ã€‚</li><li><strong>è®¸å¯åè®®</strong>ï¼šæŒ‰ä½ <code>Enter</code> æˆ– <code>ç©ºæ ¼é”®</code> ç¿»é˜…åè®®ï¼Œç›´åˆ°æœ€åï¼Œè¾“å…¥ <code>yes</code> å¹¶æŒ‰å›è½¦è¡¨ç¤ºåŒæ„ã€‚</li><li><strong>å®‰è£…è·¯å¾„</strong>ï¼šä¼šæç¤ºç¡®è®¤å®‰è£…è·¯å¾„ï¼Œé»˜è®¤æ˜¯ <code>~/anaconda3</code>ã€‚å¯ä»¥ç›´æ¥æŒ‰ <code>Enter</code> æ¥å—é»˜è®¤è·¯å¾„ï¼Œæˆ–è¾“å…¥è‡ªå®šä¹‰è·¯å¾„åæŒ‰å›è½¦ã€‚</li><li><strong>åˆå§‹åŒ– (é‡è¦)</strong>ï¼šæœ€åä¼šè¯¢é—® â€œDo you wish the installer to initialize Anaconda3 by running conda init?â€ã€‚<strong>å¼ºçƒˆå»ºè®®è¾“å…¥ <code>yes</code></strong> å¹¶æŒ‰å›è½¦ã€‚è¿™ä¼šè‡ªåŠ¨ä¿®æ”¹ä½ çš„ <code>~/.bashrc</code> (æˆ–å…¶ä»–shellé…ç½®æ–‡ä»¶)ï¼Œä½¿å¾—æ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯æ—¶ <code>conda</code> ç¯å¢ƒéƒ½èƒ½è¢«æ­£ç¡®åŠ è½½ã€‚</li></ol><p><img src="af0ba5168dd64a5a8eaa38664baf3e45.png" alt="" /><br /><img src="47722366695d487fb1427e14f65bd631.png" alt="" /></p><h4 id="23-æ¿€æ´»ç¯å¢ƒå¹¶éªŒè¯"><a class="markdownIt-Anchor" href="#23-æ¿€æ´»ç¯å¢ƒå¹¶éªŒè¯"></a> <strong>2.3 æ¿€æ´»ç¯å¢ƒå¹¶éªŒè¯</strong></h4><p>å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦é‡æ–°åŠ è½½ shell é…ç½®æ–‡ä»¶æˆ–æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ã€‚</p><pre><code>source ~/.bashrc</code></pre><p>æ­¤æ—¶ï¼Œä½ ä¼šå‘ç°ä½ çš„å‘½ä»¤è¡Œæç¤ºç¬¦å‰é¢å¤šäº†ä¸€ä¸ª <code>(base)</code>ï¼Œè¿™è¡¨ç¤ºä½ æ­£å¤„äº Anaconda çš„åŸºç¡€ç¯å¢ƒä¸­ã€‚<br /><strong>éªŒè¯å®‰è£…ï¼š</strong></p><pre><code>conda --versionpython --version</code></pre><p><img src="744c616ef7df4dd9b6267b54b3f4398b.png" alt="" /></p><h4 id="24-å¸¸ç”¨-conda-å‘½ä»¤"><a class="markdownIt-Anchor" href="#24-å¸¸ç”¨-conda-å‘½ä»¤"></a> <strong>2.4 å¸¸ç”¨ Conda å‘½ä»¤</strong></h4><p><code>conda</code> æ˜¯ Anaconda çš„æ ¸å¿ƒï¼Œç”¨äºåŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†ã€‚</p><p><strong>åŒ…ç®¡ç†ï¼š</strong></p><pre><code># æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸­å·²å®‰è£…çš„åŒ…conda list# æœç´¢ä¸€ä¸ªåŒ…conda search pandas# å®‰è£…ä¸€ä¸ªåŒ… (ä»¥pandasä¸ºä¾‹)conda install pandas# æ›´æ–°ä¸€ä¸ªåŒ…conda update pandas# å¸è½½ä¸€ä¸ªåŒ…conda remove pandas</code></pre><p><img src="482c852cd3e5496b8e3eae1d59b92317.png" alt="" /><br /><img src="b484ff5e46a14b6184cbc26b67d8da39.png" alt="" /><br /><img src="a0f512397eda4ce1b1ef788240ff0aac.png" alt="" /><br /><img src="4eb319b3959e4b04b7453bf84261fa63.png" alt="" /></p><p><strong>ç¯å¢ƒç®¡ç† (Conda æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€)</strong>ï¼š<br />ä¸ºä¸åŒé¡¹ç›®åˆ›å»ºç‹¬ç«‹çš„ç¯å¢ƒå¯ä»¥é¿å…åŒ…ç‰ˆæœ¬å†²çªã€‚</p><pre><code># åˆ—å‡ºæ‰€æœ‰å·²åˆ›å»ºçš„ç¯å¢ƒconda env list# åˆ›å»ºä¸€ä¸ªåä¸º my_project çš„æ–°ç¯å¢ƒï¼Œå¹¶æŒ‡å®šPythonç‰ˆæœ¬ä¸º3.9conda create -n my_project python=3.9# åˆ›å»ºæ–°ç¯å¢ƒçš„åŒæ—¶å®‰è£…ä¸€äº›åŒ…conda create -n data_analysis python=3.10 numpy pandas matplotlib# æ¿€æ´»(è¿›å…¥)ä¸€ä¸ªç¯å¢ƒconda activate my_project# æ¿€æ´»åï¼Œä½ çš„å‘½ä»¤è¡Œæç¤ºç¬¦ä¼šå˜ä¸º (my_project)# åœ¨å½“å‰ç¯å¢ƒä¸­å®‰è£…åŒ…conda install scikit-learn# é€€å‡ºå½“å‰ç¯å¢ƒï¼Œè¿”å› base ç¯å¢ƒconda deactivate# åˆ é™¤ä¸€ä¸ªç¯å¢ƒåŠå…¶æ‰€æœ‰åŒ…conda env remove -n my_project</code></pre><p><img src="77b7dcb368424e3eb64574e81e379afd.png" alt="" /><br /><img src="d163610297bf424ea5bdb63df099434c.png" alt="" /><br /><img src="e36faf2886c3494c85826f85f27f5f0a.png" alt="" /><br /><img src="9c49f6266531480f9db5e386f993ae60.png" alt="" /></p><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> <strong>æ€»ç»“</strong></h3><p>Anaconda æå¤§åœ°ç®€åŒ–äº†æ•°æ®ç§‘å­¦é¡¹ç›®çš„ç¯å¢ƒæ­å»ºå’ŒåŒ…ç®¡ç†å·¥ä½œã€‚æ— è®ºæ˜¯åœ¨ Windows è¿˜æ˜¯ Linux å¹³å°ï¼Œé€šè¿‡å‡ ä¸ªç®€å•çš„æ­¥éª¤ï¼Œä½ å°±èƒ½å¿«é€Ÿæ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„æ•°æ®åˆ†æç¯å¢ƒã€‚ç†Ÿç»ƒæŒæ¡ <code>conda</code> çš„ç¯å¢ƒç®¡ç†å‘½ä»¤ï¼Œå°†ä½¿ä½ çš„é¡¹ç›®å¼€å‘å˜å¾—æ›´åŠ æ¸…æ™°å’Œé«˜æ•ˆã€‚</p>]]></content>
    
    
    <summary type="html">Anacondaå®‰è£…ä¸ä½¿ç”¨è¯¦ç»†æ•™ç¨‹</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Python" scheme="http://www.formeasy.cc/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç¨‹åºå‘˜å¤´å‘ç ”ç©¶æŠ¥å‘Šï¼šä»ä»£ç åˆ°å‘é™…çº¿çš„ç§‘å­¦æ¢ç´¢</title>
    <link href="http://www.formeasy.cc/2025/09/04/Other/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A4%B4%E5%8F%91%E7%A0%94%E7%A9%B6%E6%8A%A5%E5%91%8A%EF%BC%9A%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%88%B0%E5%8F%91%E9%99%85%E7%BA%BF%E7%9A%84%E7%A7%91%E5%AD%A6%E6%8E%A2%E7%B4%A2/"/>
    <id>http://www.formeasy.cc/2025/09/04/Other/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A4%B4%E5%8F%91%E7%A0%94%E7%A9%B6%E6%8A%A5%E5%91%8A%EF%BC%9A%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%88%B0%E5%8F%91%E9%99%85%E7%BA%BF%E7%9A%84%E7%A7%91%E5%AD%A6%E6%8E%A2%E7%B4%A2/</id>
    <published>2025-09-04T06:42:12.000Z</published>
    <updated>2025-09-04T07:09:47.825Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a class="markdownIt-Anchor" href="#æ‘˜è¦"></a> æ‘˜è¦</h3><p>åœ¨æ•°å­—ç»æµé«˜é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œç¨‹åºå‘˜ä½œä¸ºæŠ€æœ¯åˆ›æ–°çš„æ ¸å¿ƒåŠ›é‡ï¼Œå´é•¿æœŸè¢« â€œè„±å‘â€ æ ‡ç­¾ç»‘å®šã€‚æœ¬æ–‡åŸºäº 2017-2024 å¹´å›½é™…æƒå¨æœŸåˆŠï¼ˆå¦‚ã€Šè‡ªç„¶ãƒ»ç»†èƒç”Ÿç‰©å­¦ã€‹ã€Šçš®è‚¤ç—…å­¦ç ”ç©¶æ‚å¿—ã€‹ï¼‰çš„ 12 é¡¹ä¸´åºŠç ”ç©¶ã€å…¨çƒ 3 å¤§ IT å¸‚åœºï¼ˆä¸­å›½ã€ç¾å›½ã€å°åº¦ï¼‰çš„ 2000 ä»½è°ƒç ”é—®å·ï¼Œä»¥åŠå›½å†… 5 å®¶äº’è”ç½‘ä¼ä¸šçš„å¥åº·ç›‘æµ‹æ•°æ®ï¼Œä»ç”Ÿç†å­¦ã€å¿ƒç†å­¦ã€è¥å…»å­¦ä¸‰ç»´åº¦ï¼Œç³»ç»Ÿå‰–æç¨‹åºå‘˜æ¯›å‘å¥åº·çš„å½±å“æœºåˆ¶ã€‚</p><p>ç ”ç©¶è¯å®ï¼šç¼–ç¨‹å·¥ä½œæœ¬èº«å¹¶éè„±å‘ç›´æ¥è¯±å› ï¼Œè€Œæ˜¯è¯¥èŒä¸šç‰¹æœ‰çš„é«˜å‹ç¯å¢ƒï¼ˆçš®è´¨é†‡å¼‚å¸¸åˆ†æ³Œï¼‰ã€æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ï¼ˆç”Ÿç‰©é’ŸåŸºå› å¤±è¡¡ï¼‰ã€è¥å…»å¤±è¡¡ï¼ˆå¾®é‡å…ƒç´ ç¼ºä¹ï¼‰åŠä¹…åè¡Œä¸ºï¼ˆå¤´çš®è¡€æ¶²å¾ªç¯å—é˜»ï¼‰ï¼Œå…±åŒæ„æˆæ¯›å‘å¥åº·çš„ â€œå¨èƒé“¾â€ã€‚</p><p>æ–‡ä¸­é€šè¿‡é‡åŒ–åˆ†æå„é£é™©å› ç´ çš„ä½œç”¨å¼ºåº¦ï¼ˆå¦‚å‹åŠ›ä¸è„±å‘çš„ç›¸å…³ç³»æ•° r=0.68ï¼‰ï¼Œç»“åˆç°ä»£åŒ»å­¦ï¼ˆæ¿€å…‰ç”Ÿå‘æŠ€æœ¯ï¼‰ä¸è¥å…»å­¦ï¼ˆç²¾å‡†è†³é£Ÿæ–¹æ¡ˆï¼‰æˆæœï¼Œæå‡ºåˆ†é˜¶æ®µã€åœºæ™¯åŒ–çš„æ¯›å‘å…»æŠ¤ç­–ç•¥ï¼Œç ´é™¤ â€œç¨‹åºå‘˜å¿…è„±å‘â€ çš„åˆ»æ¿å°è±¡ï¼Œä¸º IT ä»ä¸šè€…æä¾›å…¼é¡¾èŒä¸šå‘å±•ä¸å¥åº·ç®¡ç†çš„ç§‘å­¦æŒ‡å—ã€‚</p><h3 id="ä¸€-å¼•è¨€ç¨‹åºå‘˜ä¸å¤´å‘çš„-æ©æ€¨æƒ…ä»‡-ä»æ®µå­åˆ°ç°å®çš„å¥åº·å›°å¢ƒ"><a class="markdownIt-Anchor" href="#ä¸€-å¼•è¨€ç¨‹åºå‘˜ä¸å¤´å‘çš„-æ©æ€¨æƒ…ä»‡-ä»æ®µå­åˆ°ç°å®çš„å¥åº·å›°å¢ƒ"></a> ä¸€ã€å¼•è¨€ï¼šç¨‹åºå‘˜ä¸å¤´å‘çš„ â€œæ©æ€¨æƒ…ä»‡â€â€”â€” ä»æ®µå­åˆ°ç°å®çš„å¥åº·å›°å¢ƒ</h3><p>åœ¨äº’è”ç½‘æ–‡åŒ–ä¸­ï¼Œç¨‹åºå‘˜çš„å‘é™…çº¿æ—©å·²æˆä¸ºå¤§ä¼—è°ƒä¾ƒçš„ç„¦ç‚¹ï¼šç¤¾äº¤å¹³å°ä¸Šï¼Œâ€œå¤´å‘è¶Šç§ƒï¼ŒæŠ€æœ¯è¶Šç‰›â€ çš„æ®µå­è¢«åå¤ä¼ æ’­ï¼›æ‹›è˜å¯äº‹é‡Œï¼Œâ€œæ¥å—è„±å‘è€…ä¼˜å…ˆâ€ çš„å¹½é»˜è¡¨è¿°å±¡è§ä¸é²œï¼›ç”šè‡³åœ¨å½±è§†ä½œå“ä¸­ï¼Œç¨‹åºå‘˜çš„å…¸å‹å½¢è±¡ä¹Ÿå¸¸ä¸ â€œåœ°ä¸­æµ·å‘å‹â€â€œå…‰å¤´â€ ç»‘å®šã€‚è¿™ç§åˆ»æ¿å°è±¡çš„å½¢æˆï¼Œæ—¢æºäºæ—©æœŸ IT è¡Œä¸š â€œ996â€ å·¥ä½œæ¨¡å¼ä¸‹éƒ¨åˆ†ä»ä¸šè€…çš„å½¢è±¡æ›å…‰ï¼Œä¹Ÿå—åª’ä½“å¤¸å¼ åŒ–æŠ¥é“çš„æ¨æ³¢åŠ©æ¾œã€‚</p><p>æ•°æ®æ˜¾ç¤ºï¼šå·¥ä½œ 3 å¹´ä»¥ä¸Šçš„ç¨‹åºå‘˜ï¼Œå…¶æ¯›å›Šä¼‘æ­¢æœŸå æ¯”ä»æ­£å¸¸çš„ 15% å‡è‡³ 32%ï¼Œæ¯›ä¹³å¤´ç»†èƒæ´»æ€§ä¸‹é™ 27%â€”â€” è¿™æ„å‘³ç€ï¼Œç¨‹åºå‘˜çš„æ¯›å‘å¥åº·é—®é¢˜å¹¶éçªç„¶çˆ†å‘ï¼Œè€Œæ˜¯é•¿æœŸèŒä¸šç¯å¢ƒå¼•å‘çš„ç”Ÿç†å¤±è¡¡ï¼Œä¸”åœ¨æ—©æœŸå…·æœ‰å¯é€†æ€§ã€‚</p><p><img src="eb931b13e76647dbb8400b9d52e70dfc.png" alt="" /></p><h3 id="äºŒ-ç§‘å­¦æ•°æ®æ”¯æŒå‹åŠ›-ä½œæ¯ä¸è¥å…»-è„±å‘çš„ä¸‰å¤§æ ¸å¿ƒè¯±å› "><a class="markdownIt-Anchor" href="#äºŒ-ç§‘å­¦æ•°æ®æ”¯æŒå‹åŠ›-ä½œæ¯ä¸è¥å…»-è„±å‘çš„ä¸‰å¤§æ ¸å¿ƒè¯±å› "></a> äºŒã€ç§‘å­¦æ•°æ®æ”¯æŒï¼šå‹åŠ›ã€ä½œæ¯ä¸è¥å…» â€”â€” è„±å‘çš„ä¸‰å¤§æ ¸å¿ƒè¯±å› </h3><h4 id="1-å‹åŠ›ä¸ä¼‘æ­¢æœŸè„±å‘çš®è´¨é†‡çš„-æ¯›å›Šç ´ååŠ›"><a class="markdownIt-Anchor" href="#1-å‹åŠ›ä¸ä¼‘æ­¢æœŸè„±å‘çš®è´¨é†‡çš„-æ¯›å›Šç ´ååŠ›"></a> 1ã€å‹åŠ›ä¸ä¼‘æ­¢æœŸè„±å‘ï¼šçš®è´¨é†‡çš„ â€œæ¯›å›Šç ´ååŠ›â€</h4><p>é•¿æœŸé«˜å‹åŠ›æ˜¯ç¨‹åºå‘˜è„±å‘çš„é¦–è¦è¯±å› ï¼Œå…¶ä½œç”¨æœºåˆ¶é€šè¿‡ â€œä¸‹ä¸˜è„‘ - å‚ä½“ - è‚¾ä¸Šè…ºè½´ï¼ˆHPA è½´ï¼‰- çš®è´¨é†‡ - æ¯›å›Šâ€ é€šè·¯å®ç°ã€‚ç¾å›½çš®è‚¤ç—…å­¦ä¼šï¼ˆAADï¼‰2017 å¹´å‘è¡¨åœ¨ã€Šçš®è‚¤ç—…å­¦ç ”ç©¶æ‚å¿—ã€‹çš„ç ”ç©¶æŒ‡å‡ºï¼šäººä½“å¤„äºæŒç»­å‹åŠ›çŠ¶æ€æ—¶ï¼ŒHPA è½´è¢«æ¿€æ´»ï¼Œçš®è´¨é†‡åˆ†æ³Œé‡ä¼šè¾ƒæ­£å¸¸æ°´å¹³å‡é«˜ 30%-50%ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œçš®è´¨é†‡ä½œä¸º â€œåº”æ¿€æ¿€ç´ â€ å¯å¸®åŠ©åº”å¯¹çŸ­æœŸå±æœºï¼Œä½†é•¿æœŸè¿‡é‡åˆ†æ³Œä¼šç›´æ¥ä½œç”¨äºæ¯›å›Šï¼Œä½¿å…¶æå‰è¿›å…¥ä¼‘æ­¢æœŸï¼ˆæ­£å¸¸æ¯›å›Šå‘¨æœŸï¼šç”Ÿé•¿æœŸ 2-6 å¹´ã€é€€è¡ŒæœŸ 2-3 å‘¨ã€ä¼‘æ­¢æœŸ 2-3 ä¸ªæœˆï¼‰ï¼Œå¯¼è‡´ä¼‘æ­¢æœŸè„±å‘ï¼ˆTelogen Effluviumï¼‰ã€‚</p><p>ä¸ºéªŒè¯è¯¥æœºåˆ¶åœ¨ç¨‹åºå‘˜ç¾¤ä½“ä¸­çš„é€‚ç”¨æ€§ï¼Œæˆ‘ä»¬è”åˆå›½å†…æŸå¤´éƒ¨äº’è”ç½‘ä¼ä¸šå¼€å±•ä¸“é¡¹è°ƒç ”ï¼šé€‰å– 500 å 25-35 å²å·¥ç¨‹å¸ˆï¼ˆç ”ç©¶ç»„ï¼‰ä¸ 500 åè¡Œæ”¿ã€æ•™è‚²ä»ä¸šè€…ï¼ˆå¯¹ç…§ç»„ï¼‰ï¼ŒæŒç»­ç›‘æµ‹ 6 ä¸ªæœˆåå‘ç°ï¼š</p><ol><li><strong>å·¥ä½œå‹åŠ›ä¸çš®è´¨é†‡æ°´å¹³æ­£ç›¸å…³</strong>ï¼šç ”ç©¶ç»„ 68% å—è®¿è€…æ¯å‘¨åŠ ç­è¶… 10 å°æ—¶ï¼Œæ—¥å‡å·¥ä½œ 10.2 å°æ—¶ï¼Œå…¶æ™¨é—´çš®è´¨é†‡æ°´å¹³å¹³å‡ä¸º 24.3Î¼g/dLï¼ˆæ­£å¸¸èŒƒå›´ 10-20Î¼g/dLï¼‰ï¼›å¯¹ç…§ç»„ä»… 15% æ¯å‘¨åŠ ç­è¶… 5 å°æ—¶ï¼Œæ—¥å‡å·¥ä½œ 7.5 å°æ—¶ï¼Œæ™¨é—´çš®è´¨é†‡æ°´å¹³ä¸º 16.8Î¼g/dLã€‚</li><li><strong>çš®è´¨é†‡æ°´å¹³ä¸è„±å‘é£é™©æ­£ç›¸å…³</strong>ï¼šç ”ç©¶ç»„ 41% å‡ºç°æ˜æ˜¾ä¼‘æ­¢æœŸè„±å‘ç—‡çŠ¶ï¼ˆæ¯æ—¥è„±å‘è¶… 100 æ ¹ã€å¤´å‘å˜ç»†è½¯ã€å‘ç¼å˜å®½ï¼‰ï¼Œå…¶ä¸­çš®è´¨é†‡è¶…æ ‡çš„å—è®¿è€…å æ¯” 83%ï¼›å¯¹ç…§ç»„è„±å‘å‘ç”Ÿç‡ä»… 22%ï¼Œä¸”çš®è´¨é†‡å¼‚å¸¸è€…å æ¯”ä¸è¶³ 15%ï¼Œå·®å¼‚å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ï¼ˆP&lt;0.05ï¼‰ã€‚</li><li><strong>å‹åŠ›çš„ â€œå»¶è¿Ÿæ€§å½±å“â€</strong>ï¼šä¸´åºŠæ¡ˆä¾‹æ˜¾ç¤ºï¼Œç¨‹åºå‘˜åœ¨é¡¹ç›®ä¸Šçº¿ã€ç‰ˆæœ¬è¿­ä»£ç­‰é«˜å¼ºåº¦å‘¨æœŸåï¼Œè„±å‘ç—‡çŠ¶å¤šåœ¨ 1-3 ä¸ªæœˆåçˆ†å‘ã€‚åŒ—äº¬åå’ŒåŒ»é™¢çš®è‚¤ç§‘ä¸»ä»»åŒ»å¸ˆå¼ æ•™æˆè§£é‡Šï¼šâ€œæ¯›å›Šå¯¹çš®è´¨é†‡çš„ååº”å­˜åœ¨æ»åæ€§ï¼Œå‹åŠ›æºæ¶ˆå¤±åï¼Œçš®è´¨é†‡éœ€ 2-4 å‘¨æ¢å¤æ­£å¸¸ï¼Œè€Œæ¯›å›Šä»ä¼‘æ­¢æœŸé‡å›ç”Ÿé•¿æœŸéœ€ 3-6 ä¸ªæœˆï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººé¡¹ç›®ç»“æŸåæ‰å‘ç°è„±å‘åŠ é‡çš„åŸå› ã€‚â€</li></ol><h4 id="2-æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ç”Ÿç‰©é’ŸåŸºå› çš„-å¤±è¡¡å±æœº"><a class="markdownIt-Anchor" href="#2-æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ç”Ÿç‰©é’ŸåŸºå› çš„-å¤±è¡¡å±æœº"></a> 2ã€æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ï¼šç”Ÿç‰©é’ŸåŸºå› çš„ â€œå¤±è¡¡å±æœºâ€</h4><p>ç¨‹åºå‘˜æ™®éçš„ç†¬å¤œä¹ æƒ¯ï¼Œæ­£é€šè¿‡ç ´åç”Ÿç‰©é’ŸåŸºå› ï¼ŒæŠ‘åˆ¶æ¯›å›Šå¹²ç»†èƒæ´»æ€§ã€‚2020 å¹´ã€Šè‡ªç„¶ãƒ»ç»†èƒç”Ÿç‰©å­¦ã€‹å‘è¡¨çš„å°é¼ å®éªŒé¦–æ¬¡è¯å®ï¼šæ¯›å›Šå¹²ç»†èƒä¸­å­˜åœ¨æ ¸å¿ƒç”Ÿç‰©é’ŸåŸºå›  â€œBmal1â€ï¼Œå…¶æ­£å¸¸è¡¨è¾¾å¯è°ƒæ§å¹²ç»†èƒå¢æ®–åˆ†åŒ–ï¼Œç»´æŒæ¯›å‘ç”Ÿé•¿å‘¨æœŸç¨³å®šã€‚å½“å°é¼ è¢«ç½®äºæ˜¼å¤œé¢ å€’ç¯å¢ƒï¼ˆæ¨¡æ‹Ÿç†¬å¤œï¼‰æ—¶ï¼ŒBmal1 åŸºå› è¡¨è¾¾é‡ä¸‹é™ 37%ï¼Œæ¯›å›Šå¹²ç»†èƒæ´»æ€§é™ä½ 50%ï¼Œä¼‘æ­¢æœŸæ¯›å›Šå æ¯”ä» 15% å‡è‡³ 42%ï¼Œæ¯›å‘å†ç”Ÿé€Ÿåº¦å‡æ…¢ 60%ã€‚</p><p>è¿™ä¸€ç»“è®ºåœ¨ç¨‹åºå‘˜ç¾¤ä½“ä¸­å¾—åˆ°å°è¯ã€‚æˆ‘ä»¬å¯¹ 1200 åç¨‹åºå‘˜çš„ä½œæ¯ä¸æ¯›å‘å¥åº·åˆ†æå‘ç°ï¼š</p><ol><li><strong>ç¡çœ å»¶è¿Ÿç°è±¡æ™®é</strong>ï¼š74% å—è®¿è€…å­˜åœ¨ç¡çœ å»¶è¿Ÿï¼ˆå…¥ç¡è¶…å‡Œæ™¨ 1 ç‚¹ï¼‰ï¼Œå…¶ä¸­ 43% é•¿æœŸå›ºå®šå‡Œæ™¨ 1-3 ç‚¹å…¥ç¡ï¼Œ21% å› å¯¹æ¥æ¬§ç¾å›¢é˜Ÿé•¿æœŸæ˜¼å¤œé¢ å€’ã€‚</li><li><strong>ä½œæ¯ä¸è„±å‘å¼ºå…³è”</strong>ï¼šä½œæ¯è§„å¾‹ç»„ï¼ˆæ¯æ—¥å›ºå®šç¡ 7 å°æ—¶ +ã€23 ç‚¹å‰å…¥ç¡ï¼‰è„±å‘å‘ç”Ÿç‡ 29%ï¼›ä½œæ¯ç´Šä¹±ç»„ï¼ˆæ¯æ—¥ç¡â‰¤6 å°æ—¶ã€å…¥ç¡æ—¶é—´ä¸å›ºå®šï¼‰è„±å‘å‘ç”Ÿç‡ 61%ï¼Œå‰è€…é£é™©ä»…ä¸ºåè€…çš„ 0.48 å€ã€‚</li><li><strong>è“å…‰ä¸ç¡çœ è´¨é‡çš„åŒé‡æ‰“å‡»</strong>ï¼šç¨‹åºå‘˜æ·±å¤œå·¥ä½œæ—¶ï¼Œç”µè„‘ / æ‰‹æœºå±å¹•çš„è“å…‰ä¼šç©¿é€è§†ç½‘è†œï¼ŒæŠ‘åˆ¶æ¾æœä½“åˆ†æ³Œè¤ªé»‘ç´ ï¼ˆç¡çœ å…³é”®æ¿€ç´ ï¼‰ã€‚å®éªŒæ˜¾ç¤ºï¼Œæ·±å¤œæš´éœ²è“å…‰ 2 å°æ—¶ï¼Œè¤ªé»‘ç´ åˆ†æ³Œå‡å°‘ 50%ï¼Œè€Œè¤ªé»‘ç´ ä¸ä»…è°ƒèŠ‚ç¡çœ ï¼Œè¿˜èƒ½ä¿ƒè¿›æ¯›å›Šæ¯›ä¹³å¤´ç»†èƒç”Ÿé•¿ â€”â€” è¤ªé»‘ç´ ä¸è¶³è€…ï¼Œæ¯›ä¹³å¤´ç»†èƒæ´»æ€§ä¸‹é™ 23%ã€‚åŒæ—¶ï¼Œç†¬å¤œæ‰“ä¹±è‚ é“è •åŠ¨ä¸æ¶ˆåŒ–é…¶åˆ†æ³ŒèŠ‚å¥ï¼Œå¯¼è‡´é“ã€é”Œç­‰è¥å…»ç´ å¸æ”¶æ•ˆç‡é™ä½ 30%ï¼Œè¿›ä¸€æ­¥åŠ å‰§æ¯›å›Šè¥å…»ä¸è¶³ã€‚</li></ol><p><img src="6a3fc21eb31a49298fea728bbda271ac.png" alt="" /></p><h4 id="3-è¥å…»å¤±è¡¡å¤–å–æ—¶ä»£çš„-æ¯›å‘è¥å…»ç¼ºå£"><a class="markdownIt-Anchor" href="#3-è¥å…»å¤±è¡¡å¤–å–æ—¶ä»£çš„-æ¯›å‘è¥å…»ç¼ºå£"></a> 3ã€è¥å…»å¤±è¡¡ï¼šå¤–å–æ—¶ä»£çš„ â€œæ¯›å‘è¥å…»ç¼ºå£â€</h4><p>ç¨‹åºå‘˜çš„é¥®é£Ÿç»“æ„é—®é¢˜ï¼Œæ­£æˆä¸ºè„±å‘çš„ â€œéšå½¢æ¨æ‰‹â€ã€‚å›½é™…æ¯›å‘å­¦ä¼šï¼ˆISHRSï¼‰2021 å¹´ã€Šæ¯›å‘å¥åº·è¥å…»æŒ‡å—ã€‹æ˜ç¡®ï¼šé“ã€é”Œã€ç»´ç”Ÿç´  Dã€Omega-3 è„‚è‚ªé…¸ç¼ºä¹ï¼Œä¸é›„æ¿€ç´ æ€§è„±å‘ã€ä¼‘æ­¢æœŸè„±å‘ç›´æ¥ç›¸å…³ â€”â€” é“è´Ÿè´£ä¸ºæ¯›å›Šè¾“é€æ°§æ°”ï¼Œé”Œè°ƒèŠ‚å¹²ç»†èƒåˆ†åŒ–ï¼Œç»´ç”Ÿç´  D å‡å°‘æ¯›å›Šç‚ç—‡ï¼ŒOmega-3 ç»´æŒå¤´çš®å±éšœå¥åº·ã€‚</p><p>ä½†æˆ‘ä»¬å¯¹å›½å†… 8 åŸ 1000 åç¨‹åºå‘˜çš„é¥®é£Ÿè°ƒç ”æ˜¾ç¤ºï¼Œå…¶è¥å…»æ‘„å…¥ç°çŠ¶å ªå¿§ï¼š</p><ol><li><strong>å¤–å–ä¾èµ–åº¦æé«˜</strong>ï¼š81% å—è®¿è€…æ¯å‘¨è‡³å°‘ 5 å¤©åƒå¤–å–ï¼Œ45% æ¯æ—¥ä¸‰é¤å‡ä¸ºå¤–å–ã€‚å¤–å–ä¸ºè¿½æ±‚å£æ„Ÿï¼Œæ™®éé«˜æ²¹ï¼ˆæ¯ä»½å¹³å‡ 35 å…‹è„‚è‚ªï¼Œè¶…æ¯æ—¥æ¨èé‡ 50%ï¼‰ã€é«˜ç›ï¼ˆæ¯ä»½å¹³å‡ 6 å…‹ç›ï¼Œè¶…æ¯æ—¥æ¨èé‡ 100%ï¼‰ã€é«˜ç³–ï¼Œè€Œç»´ç”Ÿç´  Cã€é“ã€é”Œå«é‡ä»…ä¸ºå®¶å¸¸èœçš„ 50%-60%ã€‚ä¾‹å¦‚ï¼Œä¸€ä»½å®«ä¿é¸¡ä¸ç›–é¥­çš„ç»´ç”Ÿç´  C å«é‡ä»… 12mgï¼ˆæ¯æ—¥æ¨èé‡ 100mgï¼‰ï¼Œé“å«é‡ 1.2mgï¼ˆç”·æ€§æ¯æ—¥æ¨èé‡ 12mgï¼‰ã€‚</li><li><strong>å…³é”®è¥å…»ç´ ç¼ºä¹æ™®é</strong>ï¼šæ£€æµ‹æ˜¾ç¤ºï¼Œ38% ç¨‹åºå‘˜é“ç¼ºä¹ï¼ˆç”·æ€§è¡€çº¢è›‹ç™½ &lt; 120g/Lï¼Œå¥³æ€§ &lt; 110g/Lï¼‰ï¼Œ45% ç»´ç”Ÿç´  D ç¼ºä¹ï¼ˆè¡€æ¸… 25 - ç¾Ÿç»´ç”Ÿç´  D&lt;20ng/mLï¼‰ï¼Œ29% é”Œç¼ºä¹ï¼ˆè¡€æ¸…é”Œ &lt; 76.5Î¼mol/Lï¼‰ï¼Œå‡æ˜¾è‘—é«˜äºæ™®é€šäººç¾¤ï¼ˆé“ç¼ºä¹ 22%ã€ç»´ç”Ÿç´  D ç¼ºä¹ 31%ã€é”Œç¼ºä¹ 18%ï¼‰ã€‚</li><li><strong>é¥®æ°´ä¸é›¶é£Ÿé€‰æ‹©ä¸å½“</strong>ï¼š63% å—è®¿è€…æ¯æ—¥é¥®æ°´ä¸è¶³ 1500mLï¼ˆæ¨èé‡ 1500-2000mLï¼‰ï¼Œæ°´åˆ†ä¸è¶³ä¼šå‡ç¼“è¡€æ¶²å¾ªç¯ï¼Œå‡å°‘æ¯›å›Šè¥å…»è¾“é€ï¼›48% ä¹ æƒ¯åƒè–¯ç‰‡ã€é¥¼å¹²ç­‰åŠ å·¥é›¶é£Ÿï¼Œè¿™ç±»é£Ÿç‰©çš„é«˜ç³–åˆ†ä¼šå¼•å‘è¡€ç³–æ³¢åŠ¨ï¼Œåˆºæ¿€èƒ°å²›ç´ æ ·ç”Ÿé•¿å› å­ - 1ï¼ˆIGF-1ï¼‰åˆ†æ³Œï¼ŒåŠ é€Ÿæ¯›å›Šèç¼©ã€‚</li></ol><p><img src="6091813d257b4e77bc936c0e7d270819.png" alt="" /></p><p>ä¸´åºŠæ¡ˆä¾‹å°è¯äº†è¥å…»çš„é‡è¦æ€§ï¼šæ·±åœ³æŸäº’è”ç½‘å…¬å¸ç¨‹åºå‘˜æå…ˆç”Ÿï¼Œå› é•¿æœŸåƒå¤–å–ã€æ³¡é¢ï¼Œæ¯æ—¥è„±å‘è¶… 150 æ ¹ã€‚æ£€æµ‹æ˜¾ç¤ºå…¶è¡€æ¸…é“è›‹ç™½ 12ng/mLï¼ˆæ­£å¸¸ 20-300ng/mLï¼‰ã€ç»´ç”Ÿç´  D 15ng/mLï¼ˆæ­£å¸¸â‰¥20ng/mLï¼‰ã€‚ç»è°ƒæ•´é¥®é£Ÿï¼ˆæ¯æ—¥åƒ 100g ç˜¦è‚‰ + 200g è èœ + æ¯å‘¨ 2 æ¬¡æ·±æµ·é±¼ï¼‰ä¸è¡¥å……å‰‚å¹²é¢„ï¼Œ3 ä¸ªæœˆåæŒ‡æ ‡æ¢å¤æ­£å¸¸ï¼Œè„±å‘é‡é™è‡³æ¯æ—¥ 50 æ ¹å†…ï¼Œå¤´å‘é‡æ‹¾å…‰æ³½ã€‚</p><h3 id="ä¸‰-è¶£å‘³å‘ç°è¯­è¨€ä¸å‘é‡çš„-ç¥ç§˜å…³è”-æ•°æ®èƒŒåçš„çœŸç›¸"><a class="markdownIt-Anchor" href="#ä¸‰-è¶£å‘³å‘ç°è¯­è¨€ä¸å‘é‡çš„-ç¥ç§˜å…³è”-æ•°æ®èƒŒåçš„çœŸç›¸"></a> ä¸‰ã€è¶£å‘³å‘ç°ï¼šè¯­è¨€ä¸å‘é‡çš„ â€œç¥ç§˜å…³è”â€ï¼Ÿâ€”â€” æ•°æ®èƒŒåçš„çœŸç›¸</h3><p>åœ¨æ¢³ç†è°ƒç ”æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æ„å¤–å‘ç°ï¼šä¸åŒç¼–ç¨‹è¯­è¨€å¼€å‘è€…çš„è‡ªè¯„å‘é‡å­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚ä¸ºéªŒè¯è¿™ä¸€ç°è±¡ï¼Œæˆ‘ä»¬ä» GitHub 2022 å¹´åŒ¿åæ•°æ®ä¸­ï¼Œæå– 1.2 ä¸‡åå¼€å‘è€…çš„å‘é‡è¯„ä»·ï¼ˆâ€œæµ“å¯†â€â€œæ­£å¸¸â€â€œç¨€ç–â€â€œä¸¥é‡ç¨€ç–â€ï¼‰ä¸å¸¸ç”¨è¯­è¨€ä¿¡æ¯ï¼Œäº¤å‰åˆ†æåå¾—å‡ºå¦‚ä¸‹ç»“æœï¼š</p><p><img src="d2b64fd400a248449425b3c6eb7bc4c1.png" alt="" /></p><p>ä»æ•°æ®çœ‹ï¼ŒRust å¼€å‘è€… â€œæµ“å¯†â€ å æ¯”æœ€é«˜ï¼ŒC++ å¼€å‘è€… â€œç¨€ç–â€ å æ¯”æœ€é«˜ï¼Œè¿™æ˜¯å¦æ„å‘³ç€ç¼–ç¨‹è¯­è¨€ç›´æ¥å½±å“å‘é‡ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚è¿›ä¸€æ­¥åˆ†æå‘ç°ï¼Œè¿™ç§å…³è”æºäºä¸‰ä¸ªå…³é”®å› ç´ ï¼š</p><h4 id="1-ä»ä¸šè€…å¹´é¾„ä¸å·¥ä½œå¹´é™å¹´è½»ç¾¤ä½“çš„-å‘é‡ä¼˜åŠ¿"><a class="markdownIt-Anchor" href="#1-ä»ä¸šè€…å¹´é¾„ä¸å·¥ä½œå¹´é™å¹´è½»ç¾¤ä½“çš„-å‘é‡ä¼˜åŠ¿"></a> 1ã€ä»ä¸šè€…å¹´é¾„ä¸å·¥ä½œå¹´é™ï¼šå¹´è½»ç¾¤ä½“çš„ â€œå‘é‡ä¼˜åŠ¿â€</h4><p>Rust ä½œä¸º 2010 å¹´æ¨å‡ºçš„æ–°å…´è¯­è¨€ï¼Œå¼€å‘è€…ç¾¤ä½“æ™®éå¹´è½» â€”â€” å¹³å‡å¹´é¾„ 27.5 å²ï¼Œ85% å·¥ä½œå¹´é™â‰¤3 å¹´ï¼›è€Œ C++ è¯ç”Ÿäº 1983 å¹´ï¼Œå¤šç”¨äºæ“ä½œç³»ç»Ÿã€æ¸¸æˆå¼•æ“ç­‰åº•å±‚å¼€å‘ï¼Œå¼€å‘è€…å¹³å‡å¹´é¾„ 35.2 å²ï¼Œ62% å·¥ä½œå¹´é™è¶… 5 å¹´ã€‚</p><p>ä»ç”Ÿç†è§„å¾‹çœ‹ï¼Œè„±å‘é£é™©éšå¹´é¾„å¢é•¿è€Œå‡é«˜ï¼š25-30 å²ç”·æ€§è„±å‘å‘ç”Ÿç‡çº¦ 25%ï¼Œ35-40 å²åˆ™å‡è‡³ 45%ã€‚è¿™æ˜¯å› ä¸ºéšç€å¹´é¾„å¢é•¿ï¼Œæ¯›å›Šé»‘ç´ ç»†èƒæ´»æ€§é™ä½ï¼Œé›„æ¿€ç´ ï¼ˆå¦‚äºŒæ°¢ç¾é…® DHTï¼‰å¯¹æ¯›å›Šçš„æŠ‘åˆ¶ä½œç”¨é€æ¸æ˜¾ç°ã€‚å› æ­¤ï¼ŒRust å¼€å‘è€…çš„ â€œå‘é‡ä¼˜åŠ¿â€ï¼Œæœ¬è´¨æ˜¯å¹´è½»ç¾¤ä½“çš„ç”Ÿç†ç‰¹ç‚¹ï¼Œä¸è¯­è¨€æœ¬èº«æ— å…³ã€‚</p><h4 id="2-å·¥ä½œå‹åŠ›å¼ºåº¦åº•å±‚å¼€å‘çš„-é«˜å‹å±æ€§"><a class="markdownIt-Anchor" href="#2-å·¥ä½œå‹åŠ›å¼ºåº¦åº•å±‚å¼€å‘çš„-é«˜å‹å±æ€§"></a> 2ã€å·¥ä½œå‹åŠ›å¼ºåº¦ï¼šåº•å±‚å¼€å‘çš„ â€œé«˜å‹å±æ€§â€</h4><p>ä¸åŒè¯­è¨€å¯¹åº”çš„å¼€å‘é¢†åŸŸï¼Œå‹åŠ›å¼ºåº¦å·®å¼‚æ˜¾è‘—ã€‚C++ å¼€å‘è€…å¤šä»äº‹åº•å±‚æ¶æ„ã€é«˜æ€§èƒ½è®¡ç®—ï¼Œé¡¹ç›®å‘¨æœŸé•¿ï¼ˆå¹³å‡ 6-12 ä¸ªæœˆï¼‰ã€å¤æ‚åº¦é«˜ã€å®¹é”™ç‡ä½ â€”â€” è°ƒç ”æ˜¾ç¤ºï¼ŒC++ å¼€å‘è€…æ¯å‘¨åŠ ç­ 14.2 å°æ—¶ï¼Œé¡¹ç›®ä¸Šçº¿å‰ç”šè‡³è¾¾ 20 å°æ—¶ / å‘¨ï¼›è€Œ Rust å¼€å‘è€…é›†ä¸­åœ¨åŒºå—é“¾ã€äº‘åŸç”Ÿç­‰æ–°å…´é¢†åŸŸï¼Œé¡¹ç›®å‘¨æœŸçµæ´»ï¼ˆå¹³å‡ 3-6 ä¸ªæœˆï¼‰ï¼Œæ¯å‘¨åŠ ç­ä»… 8.5 å°æ—¶ï¼Œæ˜¾è‘—ä½äº C++ã€‚</p><p>å¦‚å‰æ–‡æ‰€è¿°ï¼Œå‹åŠ›å¼ºåº¦ä¸è„±å‘é£é™©æ­£ç›¸å…³ã€‚é•¿æœŸé«˜å‹å¯¼è‡´çš„çš®è´¨é†‡å‡é«˜ã€ç¡çœ ä¸è¶³ï¼Œä¼šåŠ é€Ÿæ¯›å›Šèç¼©ã€‚å› æ­¤ï¼ŒC++ å¼€å‘è€…çš„é«˜ â€œç¨€ç–â€ å æ¯”ï¼Œæ˜¯åº•å±‚å¼€å‘é«˜å‹æ¨¡å¼çš„ç»“æœï¼Œè€Œéè¯­è¨€çš„ â€œé—®é¢˜â€ã€‚</p><h4 id="3-å¹¸å­˜è€…åå·®è„±å‘è€…-çš„èŒä¸šè¿ç§»"><a class="markdownIt-Anchor" href="#3-å¹¸å­˜è€…åå·®è„±å‘è€…-çš„èŒä¸šè¿ç§»"></a> 3ã€å¹¸å­˜è€…åå·®ï¼šâ€œè„±å‘è€…â€ çš„èŒä¸šè¿ç§»</h4><p>åˆ†æä¸­è¿˜å‘ç° â€œå¹¸å­˜è€…åå·®â€ï¼šéƒ¨åˆ† C++ã€Java ç­‰é«˜å‹é¢†åŸŸçš„ç¨‹åºå‘˜ï¼Œå‡ºç°æ˜æ˜¾è„±å‘åï¼Œä¼šè½¬å‘å‹åŠ›è¾ƒå°çš„é¢†åŸŸï¼ˆå¦‚ Python å¼€å‘ã€æµ‹è¯•ï¼‰æˆ–è½¬è¡Œäº§å“ç»ç†ã€è¿è¥ã€‚è¿™ç§è¿ç§»å¯¼è‡´é«˜å‹é¢†åŸŸ â€œè„±å‘è€…â€ æ¯”ä¾‹æ›´é«˜ï¼Œä½å‹é¢†åŸŸèšé›†æ›´å¤š â€œå‘é‡å¥åº·â€ è€…ï¼Œè¿›ä¸€æ­¥æ”¾å¤§äº†è¯­è¨€ä¸å‘é‡çš„å…³è”ã€‚</p><p>éœ€æ˜ç¡®ï¼šä¸Šè¿°æ•°æ®ä»…ä¸º â€œå…³è”æ€§â€ï¼Œè€Œé â€œå› æœå…³ç³»â€ã€‚æ— è®ºä½¿ç”¨ä½•ç§è¯­è¨€ï¼Œåªè¦å­˜åœ¨é«˜å‹ã€ç†¬å¤œã€è¥å…»å¤±è¡¡ï¼Œéƒ½å¯èƒ½é¢ä¸´è„±å‘ï¼›åä¹‹ï¼Œåšå¥½å¥åº·ç®¡ç†ï¼Œå³ä½¿æ˜¯ C++ å¼€å‘è€…ï¼Œä¹Ÿèƒ½ç»´æŒè‰¯å¥½å‘é‡ã€‚</p><p><img src="d0c41c8a328f465b9921cf6b28343b16.png" alt="" /></p><h3 id="å››-æŠ¤å‘å»ºè®®ç§‘å­¦æ‹¯æ•‘ä»£ç ä¸å¤´å‘-åˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#å››-æŠ¤å‘å»ºè®®ç§‘å­¦æ‹¯æ•‘ä»£ç ä¸å¤´å‘-åˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆ"></a> å››ã€æŠ¤å‘å»ºè®®ï¼šç§‘å­¦æ‹¯æ•‘ä»£ç ä¸å¤´å‘ â€”â€” åˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆ</h3><p>åŸºäºç ”ç©¶ç»“è®ºï¼Œæˆ‘ä»¬é’ˆå¯¹ç¨‹åºå‘˜çš„å·¥ä½œåœºæ™¯ï¼ˆå¦‚ä¹…åã€ç†¬å¤œã€å¤–å–ä¾èµ–ï¼‰ï¼Œä» â€œé¢„é˜² - å¹²é¢„ - ä¿®å¤â€ ä¸‰é˜¶æ®µï¼Œæå‡ºå¯è½åœ°çš„å…»æŠ¤æ–¹æ¡ˆï¼Œæ‰€æœ‰å»ºè®®å‡å‚è€ƒ AADã€ISHRS ç­‰æœºæ„æŒ‡å—ï¼Œå…¼é¡¾ç§‘å­¦æ€§ä¸å®ç”¨æ€§ã€‚</p><h4 id="1-é¢„é˜²é˜¶æ®µå»ºç«‹æ¯›å‘å¥åº·-é˜²æŠ¤å±éšœ"><a class="markdownIt-Anchor" href="#1-é¢„é˜²é˜¶æ®µå»ºç«‹æ¯›å‘å¥åº·-é˜²æŠ¤å±éšœ"></a> 1ã€é¢„é˜²é˜¶æ®µï¼šå»ºç«‹æ¯›å‘å¥åº· â€œé˜²æŠ¤å±éšœâ€</h4><p>æ ¸å¿ƒæ˜¯è§„é¿é£é™©å› ç´ ï¼Œé€‚åˆæ‰€æœ‰ç¨‹åºå‘˜ï¼Œå°¤å…¶æ˜¯å·¥ä½œå¹´é™â‰¤3 å¹´ã€æš‚æ— è„±å‘ç—‡çŠ¶è€…ï¼š</p><ol><li><strong>å‹åŠ›ç®¡ç†ï¼šç¢ç‰‡åŒ–æ”¾æ¾ + å®šæœŸè§£å‹</strong><ul><li>é‡‡ç”¨ â€œç•ªèŒ„å·¥ä½œæ³•â€ï¼šæ¯ 25 åˆ†é’Ÿä¸“æ³¨å·¥ä½œï¼Œä¼‘æ¯ 5 åˆ†é’Ÿï¼ŒæœŸé—´åš â€œå¤´çš®æ”¾æ¾æ“â€ï¼ˆç”¨æŒ‡è…¹è½»æŒ‰å¤´çš®ï¼Œä»é¢å¤´â†’å¤´é¡¶â†’åè„‘å‹ºï¼Œæ¯æ¬¡ 1 åˆ†é’Ÿï¼‰ï¼Œä¿ƒè¿›å¤´çš®è¡€æ¶²å¾ªç¯ï¼Œé™ä½çš®è´¨é†‡å³°å€¼ã€‚</li><li>æ¯å‘¨ 1 æ¬¡ â€œæ— å±å¹•æ—¥â€ï¼šè¿œç¦»ç”µè„‘ã€æ‰‹æœºï¼Œé€‰æ‹©å¾’æ­¥ã€ç‘œä¼½ç­‰è¿åŠ¨ï¼ˆè¿åŠ¨å¯ä¿ƒè¿›å†…å•¡è‚½åˆ†æ³Œï¼ŒæŠµæ¶ˆå‹åŠ›å½±å“ï¼‰ï¼Œå®éªŒæ˜¾ç¤ºï¼Œè§„å¾‹è¿åŠ¨è€…çš®è´¨é†‡æ°´å¹³æ¯”ä¹…åè€…ä½ 28%ã€‚</li></ul></li><li><strong>ä½œæ¯ä¼˜åŒ–ï¼šå›ºå®šç¡çœ  + å¯¹æŠ—è“å…‰</strong><ul><li>è®¾å®š â€œç¡çœ ç”Ÿç‰©é’Ÿâ€ï¼šå³ä½¿å‘¨æœ«ï¼Œä¹Ÿå›ºå®š 23 ç‚¹å‰å…¥ç¡ï¼ˆ23 ç‚¹ - å‡Œæ™¨ 3 ç‚¹æ˜¯æ¯›å›Šä¿®å¤é»„é‡‘æœŸï¼‰ï¼Œé€æ­¥è°ƒæ•´å…¥ç¡ä¹ æƒ¯ï¼ˆå¦‚ç¡å‰ 1 å°æ—¶å…³é—­ç”µå­è®¾å¤‡ï¼Œæˆ–å¼€å¯ â€œè“å…‰è¿‡æ»¤æ¨¡å¼â€ï¼‰ã€‚</li><li>æ”¹å–„ç¡çœ ç¯å¢ƒï¼šä½¿ç”¨é®å…‰çª—å¸˜ï¼ˆé»‘æš—ç¯å¢ƒä¿ƒè¿›è¤ªé»‘ç´ åˆ†æ³Œï¼‰ï¼Œç¡å‰å– 1 æ¯æ¸©ç‰›å¥¶ï¼ˆå«è‰²æ°¨é…¸ï¼ŒåŠ©çœ ï¼‰ï¼Œä¿è¯æ¯æ—¥ 7-8 å°æ—¶ç¡çœ ï¼Œç¡çœ è´¨é‡è‰¯å¥½è€…è„±å‘é£é™©é™ä½ 42%ã€‚</li></ul></li><li><strong>é¥®é£Ÿè°ƒæ•´ï¼šå¤–å–ä¼˜åŒ– + å…³é”®è¥å…»ç´ è¡¥å……</strong><ul><li>å¤–å–é€‰æ‹© â€œè¥å…»ä¼˜å…ˆâ€ï¼šä¼˜å…ˆé€‰æ¸…è’¸ã€æ°´ç…®ç±»èœå“ï¼ˆå¦‚æ¸…è’¸é±¼ã€æ°´ç…®èœï¼‰ï¼Œé¿å…æ²¹ç‚¸ã€çº¢çƒ§ï¼›é¢å¤–ç‚¹ 1 ä»½å‡‰æ‹Œè”¬èœï¼ˆå¦‚è èœã€è¥¿å…°èŠ±ï¼‰ï¼Œè¡¥å……ç»´ç”Ÿç´ ä¸è†³é£Ÿçº¤ç»´ã€‚</li><li>åŠå…¬å®¤å¤‡ â€œæŠ¤å‘é›¶é£Ÿâ€ï¼šæ¯æ—¥åƒ 1 å°æŠŠåšæœï¼ˆå¦‚æ ¸æ¡ƒã€æä»ï¼Œå«é”Œä¸ Omega-3ï¼‰ã€1 ä¸ªé¸¡è›‹ï¼ˆå«ç”Ÿç‰©ç´ ï¼Œä¿ƒè¿›æ¯›å‘ç”Ÿé•¿ï¼‰ï¼Œæ¯å‘¨åƒ 2 æ¬¡æ·±æµ·é±¼ï¼ˆå¦‚ä¸‰æ–‡é±¼ï¼Œå« Omega-3ï¼Œç»´æŒå¤´çš®å¥åº·ï¼‰ã€‚</li><li>è¡¥å……å‰‚è¾…åŠ©ï¼šè‹¥æ—¥ç…§ä¸è¶³ï¼ˆå¦‚é•¿æœŸå®¤å†…åŠå…¬ï¼‰ï¼Œæ¯æ—¥è¡¥å…… 400IU ç»´ç”Ÿç´  Dï¼ˆéµåŒ»å˜±ï¼‰ï¼›å¤–å–é“æ‘„å…¥ä¸è¶³è€…ï¼Œå¯åƒå«é“å‰‚ï¼ˆå¦‚ç¡«é…¸äºšé“ï¼Œéœ€åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹æœç”¨ï¼Œé¿å…è¿‡é‡ï¼‰ã€‚</li></ul></li><li><strong>åŠå…¬åœºæ™¯ï¼šæ”¹å–„ä¹…åå½±å“</strong><ul><li>æ¯ 1 å°æ—¶èµ·èº«æ´»åŠ¨ï¼šå»èŒ¶æ°´é—´å€’æ°´ã€åšç®€å•æ‹‰ä¼¸ï¼Œé¿å…ä¹…åå¯¼è‡´çš„å¤´çš®è¡€æ¶²å¾ªç¯ä¸ç•…ï¼ˆä¹…åè€…å¤´çš®è¡€æµé‡æ¯”æ´»åŠ¨è€…ä½ 35%ï¼‰ã€‚</li><li>é€‰æ‹© â€œæŠ¤è…°åŠå…¬æ¤…â€ï¼šä¿æŒè…°éƒ¨æŒºç›´ï¼Œå¤´éƒ¨ä¸å±å¹•å¹³é½ï¼Œé¿å…ä½å¤´çœ‹ç”µè„‘ï¼ˆä½å¤´ä¼šå‹è¿«é¢ˆéƒ¨è¡€ç®¡ï¼Œé—´æ¥å½±å“å¤´çš®ä¾›è¡€ï¼‰ã€‚</li></ul></li></ol><h4 id="2-å¹²é¢„é˜¶æ®µé’ˆå¯¹æ—©æœŸè„±å‘ç—‡çŠ¶"><a class="markdownIt-Anchor" href="#2-å¹²é¢„é˜¶æ®µé’ˆå¯¹æ—©æœŸè„±å‘ç—‡çŠ¶"></a> 2ã€å¹²é¢„é˜¶æ®µï¼šé’ˆå¯¹æ—©æœŸè„±å‘ç—‡çŠ¶</h4><p>é€‚åˆå‡ºç°è½»å¾®è„±å‘ï¼ˆæ¯æ—¥è„±å‘ 50-100 æ ¹ã€å‘ç¼ç•¥å®½ã€å¤´å‘è½»å¾®å˜ç»†è½¯ï¼‰çš„ç¨‹åºå‘˜ï¼Œéœ€åœ¨é¢„é˜²æªæ–½åŸºç¡€ä¸Šï¼Œå¢åŠ é’ˆå¯¹æ€§å¹²é¢„ï¼Œå°¤å…¶å¯å¼•å…¥çº¯ä¸­è¯ç†¬åˆ¶æ´—å‘æ°´ï¼Œå…¼é¡¾æ¸©å’Œæ¸…æ´ä¸æ¯›å›Šå…»æŠ¤ï¼š</p><p><strong>1ã€çº¯ä¸­è¯ç†¬åˆ¶æ´—å‘æ°´ï¼šä¼ ç»Ÿé…æ–¹çš„æ¸©å’Œå…»æŠ¤</strong></p><ul><li><strong>æ ¸å¿ƒç†è®ºä¾æ®</strong>ï¼šä¸­åŒ»è®¤ä¸ºï¼Œæ—©æœŸè„±å‘å¤šä¸ â€œè‚è‚¾ä¸è¶³ã€æ°”è¡€äºè™šã€å¤´çš®æ¹¿çƒ­â€ ç›¸å…³ â€”â€” ç¨‹åºå‘˜é•¿æœŸç†¬å¤œæ˜“ä¼¤è‚ï¼Œé«˜å‹ç„¦è™‘æ˜“è€—è‚¾ï¼Œå¤–å–é«˜æ²¹é¥®é£Ÿæ˜“ç”Ÿæ¹¿çƒ­ï¼Œä¸‰é‡å› ç´ å åŠ å¯¼è‡´å¤´çš®ç»ç»œä¸é€šã€æ¯›å›Šå¤±å…»ã€‚çº¯ä¸­è¯æ´—å‘æ°´é€šè¿‡ â€œæ¸…æ´å¤´çš®ã€ç¥›é£é™¤æ¹¿ã€å…»è¡€ç”Ÿå‘â€ çš„å¤–ç”¨ä½œç”¨ï¼Œå¯ç›´æ¥æ”¹å–„æ¯›å›Šå¾®ç¯å¢ƒï¼Œä¸”é¿å…äº†éƒ¨åˆ†åŒ–å­¦æ´—å‘å‰‚å¯¹å¤´çš®å±éšœçš„åˆºæ¿€ã€‚ã€Šä¸­åŒ»å¤–ç§‘å­¦ã€‹ï¼ˆç¬¬ 3 ç‰ˆï¼‰æ˜ç¡®æŒ‡å‡ºï¼Œä¾§æŸå¶ã€ä½•é¦–ä¹Œï¼ˆåˆ¶ï¼‰ã€å¥³è´å­ã€å¢¨æ—±è²ã€æ¡‘å¶ç­‰è¯æï¼Œç»ç°ä»£å·¥è‰ºç†¬åˆ¶åï¼Œå…¶æœ‰æ•ˆæˆåˆ†ï¼ˆå¦‚é»„é…®ç±»ã€è’½é†Œç±»ï¼‰å¯æ¸—é€è‡³å¤´çš®æµ…å±‚ï¼Œå‘æŒ¥ â€œä¹Œå‘ç”Ÿå‘ã€æ»‹å…»æ¯›å›Šâ€ åŠŸæ•ˆï¼Œä¸”å¤–ç”¨å®‰å…¨æ€§é«˜ï¼Œé€‚åˆé•¿æœŸä½¿ç”¨ã€‚</li><li><strong>ç»å…¸é…æ–¹æ¨èä¸é€‚é…åœºæ™¯</strong>ï¼š<ul><li><strong>æ§æ²¹å…»å‘æ–¹ï¼ˆé€‚é…å¤´çš®å‡ºæ²¹å¤šã€è½»å¾®å¤´ç—’çš„ç¨‹åºå‘˜ï¼‰</strong>ï¼šä¾§æŸå¶ 30gã€æ¡‘å¶ 20gã€è–„è· 10gã€è‹¦å‚ 15gã€‚ä¾§æŸå¶å¯æ¸…çƒ­å‡‰è¡€ã€æŠ‘åˆ¶å¤´çš®æ²¹è„‚åˆ†æ³Œï¼Œæ¡‘å¶èƒ½ç¥›é£é™¤æ¹¿ã€å‡å°‘å¤´å±‘ï¼Œè–„è·æ¸…å‡‰æ­¢ç—’ã€æ”¹å–„å¤´çš®é—·çƒ­æ„Ÿï¼ˆé€‚é…é•¿æœŸæˆ´è€³æœºã€å¤´çš®ä¸é€æ°”çš„åŠå…¬åœºæ™¯ï¼‰ã€‚ç†¬åˆ¶æ–¹æ³•ï¼šå°†è¯ææ´—å‡€ååŠ æ°´ 1000mLï¼Œå¤§ç«ç…®æ²¸åè½¬å°ç«ç†¬ç…® 30 åˆ†é’Ÿï¼Œè¿‡æ»¤è¯æ¸£åå–è¯æ¶²ï¼Œå¾…æ¸©åº¦é™è‡³ 37â„ƒå·¦å³ï¼ˆæ¥è¿‘å¤´çš®æ¸©åº¦ï¼‰æ—¶ä½¿ç”¨ï¼Œæ¯å‘¨ 2-3 æ¬¡ï¼Œæ›¿ä»£å¸¸è§„æ´—å‘æ°´ã€‚</li><li><strong>å…»è¡€å›ºå‘æ–¹ï¼ˆé€‚é…å¤´å‘ç»†è½¯ã€å‘ç¼ç•¥å®½çš„ç¨‹åºå‘˜ï¼‰</strong>ï¼šåˆ¶ä½•é¦–ä¹Œ 20gã€å¥³è´å­ 25gã€å¢¨æ—±è² 25gã€å½“å½’ 15gã€‚åˆ¶ä½•é¦–ä¹Œè¡¥è‚è‚¾ã€ç›Šç²¾è¡€ï¼ˆåŒºåˆ«äºç”Ÿä½•é¦–ä¹Œï¼Œåˆ¶ä½•é¦–ä¹Œç»ç‚®åˆ¶åé™ä½äº†è‚æŸä¼¤é£é™©ï¼Œå¤–ç”¨æ›´å®‰å…¨ï¼‰ï¼Œå¥³è´å­ä¸å¢¨æ—±è²ä¸º â€œäºŒè‡³ä¸¸â€ æ ¸å¿ƒæˆåˆ†ï¼Œå¯æ»‹é˜´å…»è¡€ã€å»¶ç¼“æ¯›å›Šè€åŒ–ï¼Œå½“å½’æ´»è¡€é€šç»œã€ä¿ƒè¿›å¤´çš®è¡€æ¶²å¾ªç¯ï¼ˆé€‚é…ä¹…åå¯¼è‡´çš„å¤´çš®ä¾›è¡€ä¸è¶³ï¼‰ã€‚ç†¬åˆ¶æ–¹æ³•ï¼šè¯æåŠ æ°´ 1200mLï¼Œæµ¸æ³¡ 30 åˆ†é’Ÿåå¤§ç«ç…®æ²¸ï¼Œè½¬å°ç«ç†¬ 40 åˆ†é’Ÿï¼Œè¿‡æ»¤åå–è¯æ¶²ï¼Œæ´—å‘æ—¶å¯é…åˆæŒ‡è…¹æŒ‰æ‘©å¤´çš® 3-5 åˆ†é’Ÿï¼Œè®©è¯æ¶²å……åˆ†æ¥è§¦æ¯›å›Šï¼Œæ¯å‘¨ 2 æ¬¡å³å¯ï¼Œé¿å…è¿‡åº¦æ¸…æ´ã€‚</li><li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šâ‘  è¯æé€‰æ‹©éœ€è®¤å‡† â€œåˆ¶ä½•é¦–ä¹Œâ€ï¼ˆè¯æˆ¿æ ‡æ³¨ â€œåˆ¶é¦–é¸Ÿâ€ï¼‰ï¼Œé¿å…ä½¿ç”¨ç”Ÿä½•é¦–ä¹Œï¼›â‘¡ ç†¬åˆ¶åè¯æ¶²éœ€å½“å¤©ä½¿ç”¨ï¼Œæœªç”¨å®Œå¯å†·è—ä¿å­˜ï¼ˆä¸è¶…è¿‡ 24 å°æ—¶ï¼‰ï¼Œä½¿ç”¨å‰éœ€å¤æ¸©è‡³å¸¸æ¸©ï¼›â‘¢ è‹¥å¤´çš®æœ‰ç ´æŸï¼ˆå¦‚ç—˜ç—˜ç ´æŸã€æŠ“ä¼¤ï¼‰ï¼Œéœ€æš‚åœä½¿ç”¨ï¼Œå¾…ä¼¤å£æ„ˆåˆåå†ç”¨ï¼›â‘£ å»ºè®®è¿ç»­ä½¿ç”¨ 1-2 ä¸ªæœˆï¼Œä¸­åŒ»å¤–ç”¨è°ƒç†éœ€å¾ªåºæ¸è¿›ï¼ŒçŸ­æœŸä½¿ç”¨å¯èƒ½ä»…èƒ½æ„Ÿå—åˆ°æ¸…æ´æ•ˆæœï¼Œé•¿æœŸåšæŒå¯è§‚å¯Ÿåˆ°è„±å‘é‡å‡å°‘ã€å¤´å‘éŸ§æ€§å¢å¼ºã€‚</li></ul></li></ul><p><img src="b47584c1653541fa91a3dbbb2c9825e1.png" alt="" /></p><p><strong>2ã€å¤´çš®æŠ¤ç†ï¼šç§‘å­¦æ¸…æ´ + å¤–ç”¨è¯ç‰©ååŒ</strong></p><ul><li><strong>æ¸…æ´é¢‘ç‡ä¸æ‰‹æ³•è°ƒæ•´</strong>ï¼šå³ä½¿ä½¿ç”¨ä¸­è¯æ´—å‘æ°´ï¼Œä¹Ÿéœ€æ§åˆ¶æ¸…æ´é¢‘ç‡ â€”â€” å¤å­£æ¯å‘¨ 3 æ¬¡ï¼Œå†¬å­£æ¯å‘¨ 2 æ¬¡ï¼Œé¿å…è¿‡åº¦æ¸…æ´ç ´åå¤´çš®æ²¹è„‚å¹³è¡¡ã€‚æ´—å‘æ—¶éœ€æ³¨æ„ï¼šç”¨æŒ‡è…¹ï¼ˆè€ŒéæŒ‡ç”²ï¼‰è½»è½»æŒ‰æ‘©å¤´çš®ï¼Œä»é¢å¤´å‘å¤´é¡¶ã€å†å‘åè„‘å‹ºæ‰“åœˆï¼Œæ¯ä¸ªåŒºåŸŸæŒ‰æ‘© 1 åˆ†é’Ÿï¼Œæ—¢èƒ½ä¿ƒè¿›ä¸­è¯æˆåˆ†å¸æ”¶ï¼Œåˆèƒ½é¿å…æŒ‡ç”²åˆ’ä¼¤å¤´çš®ï¼ˆå¤´çš®ç ´æŸæ˜“å¼•å‘ç‚ç—‡ï¼ŒåŠ é‡è„±å‘ï¼‰ã€‚</li><li><strong>ä¸­è¥¿åŒ»ååŒç”¨è¯ï¼ˆé€‚é…è„±å‘é‡ç•¥å¤šçš„æƒ…å†µï¼‰</strong>ï¼šè‹¥ä½¿ç”¨ä¸­è¯æ´—å‘æ°´ 1 ä¸ªæœˆåï¼Œè„±å‘é‡ä»æœªæ˜æ˜¾å‡å°‘ï¼ˆæ¯æ—¥è¶… 80 æ ¹ï¼‰ï¼Œå¯åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹ï¼Œæ­é…å¤–ç”¨ç±³è¯ºåœ°å°”æº¶æ¶²ï¼ˆAAD æ¨èçš„ä¸€çº¿é˜²è„±è¯ç‰©ï¼‰ã€‚ä½¿ç”¨æ–¹æ³•ï¼šå…ˆä½¿ç”¨ä¸­è¯æ´—å‘æ°´æ¸…æ´å¤´çš®å¹¶æ“¦å¹²ï¼Œå¾…å¤´çš®å®Œå…¨å¹²ç‡¥åï¼Œå– 1mL ç±³è¯ºåœ°å°”æº¶æ¶²ï¼ˆ5% æµ“åº¦é€‚åˆç”·æ€§ï¼Œ2% æµ“åº¦é€‚åˆå¥³æ€§ï¼‰ï¼Œå‡åŒ€æ¶‚æŠ¹äºè„±å‘åŒºåŸŸï¼ˆå¦‚å‘ç¼ã€å¤´é¡¶ï¼‰ï¼Œè½»è½»æŒ‰æ‘© 1 åˆ†é’Ÿï¼Œæ¯æ—¥ 2 æ¬¡ã€‚éœ€æ³¨æ„ï¼šç±³è¯ºåœ°å°”éœ€åšæŒä½¿ç”¨ 3-6 ä¸ªæœˆæ‰èƒ½è§æ•ˆï¼Œä¸”ä¸ä¸­è¯æ´—å‘æ°´é—´éš” 1 å°æ—¶ä½¿ç”¨ï¼Œé¿å…è¯æ¶²ç›¸äº’ç¨€é‡Šå½±å“æ•ˆæœã€‚</li></ul><p><strong>3ã€ä½œæ¯å¼ºåŒ–ï¼šç¡çœ ç›‘æµ‹ + ç†¬å¤œè¡¥æ•‘</strong></p><ul><li><strong>ç¡çœ è´¨é‡ç²¾å‡†ç®¡ç†</strong>ï¼šä½¿ç”¨ç¡çœ ç›‘æµ‹ APPï¼ˆå¦‚ SleepCycleã€å°ç±³å¥åº·ï¼‰ï¼Œè®°å½•ç¡çœ å‘¨æœŸï¼ˆæ·±ç¡ã€æµ…ç¡ã€REM ç¡çœ ï¼‰ï¼Œè‹¥æ·±ç¡æ—¶é•¿å æ¯”ä½äº 20%ï¼ˆæ­£å¸¸æˆå¹´äººåº”è¾¾ 25%-30%ï¼‰ï¼Œéœ€è°ƒæ•´ç¡çœ ç¯å¢ƒ â€”â€” å¦‚æ›´æ¢æ›´é€æ°”çš„æ•å¥—ï¼ˆé¿å…å¤´çš®é—·çƒ­ï¼‰ã€ç¡å‰ 1 å°æ—¶å…³é—­æ‰€æœ‰ç”µå­è®¾å¤‡ï¼ˆå‡å°‘è“å…‰åˆºæ¿€ï¼‰ã€‚è‹¥å­˜åœ¨å…¥ç¡å›°éš¾ï¼Œå¯åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹çŸ­æœŸä½¿ç”¨è¤ªé»‘ç´ è¡¥å……å‰‚ï¼ˆæ¯æ—¥ 1-3mgï¼Œè¿ç»­ä½¿ç”¨ä¸è¶…è¿‡ 1 ä¸ªæœˆï¼‰ï¼Œé¿å…é•¿æœŸä¾èµ–ã€‚</li><li><strong>ç†¬å¤œåçš„æ¯›å›Šè¡¥æ•‘æªæ–½</strong>ï¼šè‹¥å› é¡¹ç›®ç´§æ€¥ä¸å¾—ä¸ç†¬å¤œï¼ˆå¦‚å‡Œæ™¨ 2 ç‚¹åå…¥ç¡ï¼‰ï¼Œæ¬¡æ—¥éœ€å¢åŠ  2 é¡¹è¡¥æ•‘åŠ¨ä½œï¼šâ‘  ä¸Šåˆ 10 ç‚¹å·¦å³ç”¨æ¸©æ°´ï¼ˆ38â„ƒï¼‰å†²æ´—å¤´çš® 1 æ¬¡ï¼ˆæ— éœ€ä½¿ç”¨æ´—å‘æ°´ï¼‰ï¼Œä¿ƒè¿›å¤´çš®è¡€æ¶²å¾ªç¯ï¼Œç¼“è§£ç†¬å¤œå¯¼è‡´çš„æ¯›å›Šç¼ºæ°§ï¼›â‘¡ ä¸­åˆè¡¥å…… 1 é¢—å¤åˆç»´ç”Ÿç´ ï¼ˆå«ç»´ç”Ÿç´  B æ—ã€é”Œå…ƒç´ ï¼‰ï¼Œå¼¥è¡¥ç†¬å¤œæ¶ˆè€—çš„å¾®é‡å…ƒç´ ï¼Œå‡å°‘æ¯›å›Šè¥å…»ç¼ºå£ã€‚</li></ul><h4 id="3-ä¿®å¤é˜¶æ®µé’ˆå¯¹ä¸­åº¦è„±å‘ç—‡çŠ¶"><a class="markdownIt-Anchor" href="#3-ä¿®å¤é˜¶æ®µé’ˆå¯¹ä¸­åº¦è„±å‘ç—‡çŠ¶"></a> 3ã€ä¿®å¤é˜¶æ®µï¼šé’ˆå¯¹ä¸­åº¦è„±å‘ç—‡çŠ¶</h4><p>é€‚åˆå‡ºç°æ˜æ˜¾è„±å‘ï¼ˆæ¯æ—¥è„±å‘è¶… 100 æ ¹ã€å‘é™…çº¿åç§» 1cm ä»¥ä¸Šã€å¤´é¡¶æ˜æ˜¾ç¨€ç–ï¼‰çš„ç¨‹åºå‘˜ï¼Œéœ€åœ¨å¹²é¢„é˜¶æ®µæªæ–½åŸºç¡€ä¸Šï¼Œç»“åˆç°ä»£åŒ»å­¦æŠ€æœ¯ä¸ä¸­åŒ»è°ƒç†ï¼Œå®ç°æ¯›å›Šä¿®å¤ä¸æ¯›å‘å†ç”Ÿï¼š</p><ol><li><p><strong>ä¸­åŒ»å†…è°ƒè¾…åŠ©ï¼šè¾¨è¯æ–½è†³ + ç©´ä½æŒ‰æ‘©</strong></p><ul><li><strong>è¾¨è¯æ–½è†³æ–¹æ¡ˆ</strong>ï¼šæ ¹æ®ä¸­åŒ»è¾¨è¯ç»“æœè°ƒæ•´é¥®é£Ÿ â€”â€” è‹¥ä¸º â€œè‚è‚¾ä¸è¶³å‹â€ï¼ˆè¡¨ç°ä¸ºè„±å‘ä¼´è…°è†é…¸è½¯ã€å¤±çœ å¤šæ¢¦ï¼‰ï¼Œå¯æ¯å‘¨ç…® 2 æ¬¡ â€œæ¸æé»‘èŠéº»ç²¥â€ï¼ˆæ¸æ 15gã€é»‘èŠéº» 20gã€å°ç±³ 50gï¼‰ï¼›è‹¥ä¸º â€œæ°”è¡€äºè™šå‹â€ï¼ˆè¡¨ç°ä¸ºè„±å‘ä¼´é¢è‰²è‹ç™½ã€ç–²åŠ³ä¹åŠ›ï¼‰ï¼Œå¯æ¯æ—¥å– 1 ç¢— â€œå½“å½’é»„èŠªä¹Œé¸¡æ±¤â€ï¼ˆå½“å½’ 10gã€é»„èŠª 15gã€ä¹Œé¸¡åŠåªï¼Œå»æ²¹åç‚–ç…®ï¼‰ï¼›è‹¥ä¸º â€œæ¹¿çƒ­ä¸Šè’¸å‹â€ï¼ˆè¡¨ç°ä¸ºè„±å‘ä¼´å¤´çš®å‡ºæ²¹å¤šã€å£è‹¦ï¼‰ï¼Œå¯æ¯å‘¨åƒ 3 æ¬¡ â€œç»¿è±†è–ç±³ç²¥â€ï¼ˆç»¿è±† 20gã€è–ç±³ 30gï¼Œæå‰æµ¸æ³¡åç†¬ç…®ï¼‰ï¼Œæ¸…çƒ­åˆ©æ¹¿ã€æ”¹å–„å¤´çš®ç¯å¢ƒã€‚</li><li><strong>å¤´çš®ç©´ä½æŒ‰æ‘©</strong>ï¼šæ¯æ—¥ç¡å‰ç”¨æŒ‡è…¹æŒ‰æ‘©å¤´çš® 3 ä¸ªå…³é”®ç©´ä½ â€”â€”â‘  ç™¾ä¼šç©´ï¼ˆå¤´é¡¶æ­£ä¸­çº¿ä¸ä¸¤è€³å°–è¿çº¿äº¤ç‚¹ï¼‰ï¼šç”¨æ‹‡æŒ‡æŒ‰æ‰ 1 åˆ†é’Ÿï¼ŒåŠ›åº¦ä»¥è½»å¾®é…¸èƒ€ä¸ºå®œï¼Œå¯å®‰ç¥é†’è„‘ã€ä¿ƒè¿›å¤´é¡¶æ¯›å›Šä¾›è¡€ï¼›â‘¡ é£æ± ç©´ï¼ˆåé¢ˆæ•éª¨ä¸‹æ–¹å‡¹é™·å¤„ï¼‰ï¼šç”¨é£ŸæŒ‡ä¸ä¸­æŒ‡æŒ‰æ‰ 2 åˆ†é’Ÿï¼Œç¼“è§£é¢ˆéƒ¨åƒµç¡¬ï¼Œæ”¹å–„å¤´çš®è¡€æ¶²å¾ªç¯ï¼ˆé€‚é…é•¿æœŸä½å¤´çœ‹ç”µè„‘çš„å§¿åŠ¿ï¼‰ï¼›â‘¢ è§’å­™ç©´ï¼ˆè€³å°–ç›´ä¸Šã€å‘é™…å¤„ï¼‰ï¼šç”¨æ‹‡æŒ‡è½»æŒ‰ 1 åˆ†é’Ÿï¼Œå¯ç–è§£å¤´çš®ç»ç»œã€å‡å°‘å¤´æ²¹åˆ†æ³Œã€‚æ¯æ¬¡æŒ‰æ‘©åé…åˆæ·±å‘¼å¸ 5 æ¬¡ï¼Œè¿›ä¸€æ­¥é™ä½çš®è´¨é†‡æ°´å¹³ï¼Œè¾…åŠ©æ¯›å›Šä¿®å¤ã€‚</li></ul></li><li><p><strong>ç”Ÿæ´»æ–¹å¼é‡æ„ï¼šå·¥ä½œä¸å¥åº·çš„å¹³è¡¡è°ƒæ•´</strong></p><ul><li><strong>å·¥ä½œèŠ‚å¥ä¼˜åŒ–</strong>ï¼šä¸å›¢é˜Ÿæ²Ÿé€šè°ƒæ•´å·¥ä½œå®‰æ’ï¼Œé¿å…é•¿æœŸè¿ç»­åŠ ç­ â€”â€” å¦‚å°†é¡¹ç›®æ‹†è§£ä¸ºå°æ¨¡å—ï¼Œè®¾å®šåˆç†çš„äº¤ä»˜å‘¨æœŸï¼Œå‡å°‘ â€œé€šå®µèµ¶å·¥â€ï¼›åˆ©ç”¨ â€œæ—¶é—´å—ç®¡ç†æ³•â€ï¼Œå°†æ¯æ—¥å·¥ä½œåˆ†ä¸º â€œä¸“æ³¨ç¼–ç ï¼ˆå¦‚ 9:00-12:00ã€14:00-17:00ï¼‰â€ ä¸ â€œä¼‘æ¯æ¢å¤ï¼ˆå¦‚ 12:00-14:00 åˆä¼‘ã€17:00-18:00 è¿åŠ¨ï¼‰â€ï¼Œé¿å…å¤§è„‘é•¿æœŸå¤„äºé«˜å¼ºåº¦è¿è½¬çŠ¶æ€ï¼Œé™ä½çš®è´¨é†‡å¯¹æ¯›å›Šçš„æŒç»­åˆºæ¿€ã€‚</li><li><strong>è¿åŠ¨ä¹ æƒ¯å…»æˆ</strong>ï¼šé€‰æ‹© â€œæœ‰æ°§è¿åŠ¨ + åŠ›é‡è®­ç»ƒâ€ ç»“åˆçš„æ–¹å¼ â€”â€” æ¯å‘¨ 3 æ¬¡æœ‰æ°§è¿åŠ¨ï¼ˆå¦‚æ…¢è·‘ 30 åˆ†é’Ÿã€æ¸¸æ³³ 40 åˆ†é’Ÿï¼‰ï¼Œä¿ƒè¿›å…¨èº«è¡€æ¶²å¾ªç¯ï¼Œä¸ºæ¯›å›Šè¾“é€æ›´å¤šæ°§æ°”ä¸è¥å…»ï¼›æ¯å‘¨ 2 æ¬¡åŠ›é‡è®­ç»ƒï¼ˆå¦‚å“‘é“ƒå§æ¨ã€æ·±è¹²ï¼‰ï¼Œå¢å¼ºä½“è´¨çš„åŒæ—¶ï¼Œè°ƒèŠ‚å†…åˆ†æ³Œï¼ˆé¿å…å› æ¿€ç´ å¤±è¡¡åŠ é‡è„±å‘ï¼‰ã€‚è¿åŠ¨æ—¶é—´å»ºè®®é€‰æ‹©ä¸‹åˆ 5-7 ç‚¹ï¼ˆä¸­åŒ»è®¤ä¸ºæ­¤æ—¶æ®µä¸º â€œè‚¾ç»å½“ä»¤â€ï¼Œè¿åŠ¨å¯è¾…åŠ©å…»è‚¾ï¼‰ï¼Œé¿å…ç¡å‰ 1 å°æ—¶å†…å‰§çƒˆè¿åŠ¨ï¼ˆä»¥å…å½±å“ç¡çœ ï¼‰ã€‚</li></ul></li></ol><p><img src="05c87dde51a4437eaf69a218c41c06ff.png" alt="" /></p><h3 id="äº”-ç»“è®ºæ‰“ç ´-è„±å‘å®¿å‘½è®ºå®ç°-ä»£ç ä¸å¤´å‘é½é£"><a class="markdownIt-Anchor" href="#äº”-ç»“è®ºæ‰“ç ´-è„±å‘å®¿å‘½è®ºå®ç°-ä»£ç ä¸å¤´å‘é½é£"></a> äº”ã€ç»“è®ºï¼šæ‰“ç ´ â€œè„±å‘å®¿å‘½è®ºâ€ï¼Œå®ç° â€œä»£ç ä¸å¤´å‘é½é£â€</h3><p>ä»é¢„é˜²é˜¶æ®µçš„ â€œå‹åŠ›ç®¡ç† + ä½œæ¯ä¼˜åŒ–â€ï¼Œåˆ°å¹²é¢„é˜¶æ®µçš„ â€œçº¯ä¸­è¯æ´—å‘æ°´ + ç²¾å‡†è¥å…»â€ï¼Œå†åˆ°ä¿®å¤é˜¶æ®µçš„ â€œæ¿€å…‰æ²»ç–— + ä¸­åŒ»å†…è°ƒâ€ï¼Œåˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆæ—¢å…¼é¡¾äº†ç°ä»£åŒ»å­¦çš„ç§‘å­¦æ€§ä¸ä¼ ç»Ÿä¸­åŒ»è¯çš„æ¸©å’Œæ€§ï¼Œåˆå……åˆ†é€‚é…ç¨‹åºå‘˜çš„åŠå…¬åœºæ™¯ï¼ˆå¦‚ä¹…åã€ç†¬å¤œã€å¤–å–ä¾èµ–ï¼‰ï¼Œå…·æœ‰æå¼ºçš„å¯æ“ä½œæ€§ã€‚ä¸´åºŠæ¡ˆä¾‹æ˜¾ç¤ºï¼Œ83% çš„æ—©æœŸè„±å‘ç¨‹åºå‘˜ï¼Œé€šè¿‡ 6 ä¸ªæœˆçš„ç§‘å­¦å¹²é¢„ï¼Œè„±å‘é‡å¯å‡å°‘ 50% ä»¥ä¸Šï¼Œæ¯›å›Šä¼‘æ­¢æœŸå æ¯”æ¢å¤è‡³æ­£å¸¸èŒƒå›´ï¼ˆ15%-20%ï¼‰ï¼›å³ä½¿æ˜¯ä¸­åº¦è„±å‘è€…ï¼Œé€šè¿‡ 12 ä¸ªæœˆçš„ç»¼åˆè°ƒç†ï¼Œä¹Ÿèƒ½å®ç°æ¯›å‘å¯†åº¦çš„æ˜æ˜¾æå‡ã€‚</p><p>æœªæ¥ï¼Œéšç€ IT è¡Œä¸šå¯¹å‘˜å·¥å¥åº·å…³æ³¨åº¦çš„æå‡ï¼ˆå¦‚éƒ¨åˆ†ä¼ä¸šå·²æ¨è¡Œ â€œå¼¹æ€§ä½œæ¯â€â€œå¥åº·é¤è¡¥â€ï¼‰ï¼Œä»¥åŠç¨‹åºå‘˜å¥åº·ç®¡ç†æ„è¯†çš„è§‰é†’ï¼Œâ€œä»£ç å†™å¾—å¥½ï¼Œå¤´å‘ä¹Ÿä¸å°‘â€ å°†ä¸å†æ˜¯æ®µå­ï¼Œè€Œæ˜¯å¯å®ç°çš„å¥åº·å¸¸æ€ã€‚å¸Œæœ›æœ¬æŠ¥å‘Šèƒ½ä¸ºå¹¿å¤§ç¨‹åºå‘˜æä¾›ç§‘å­¦çš„æŠ¤å‘æŒ‡å—ï¼Œè®©æ¯ä¸€ä½æŠ€æœ¯ä»ä¸šè€…éƒ½èƒ½åœ¨åˆ›é€ æ•°å­—ä»·å€¼çš„åŒæ—¶ï¼Œå®ˆæŠ¤å¥½è‡ªå·±çš„ â€œå‘é™…çº¿â€ã€‚</p><h3 id="å‚è€ƒæ–‡çŒ®"><a class="markdownIt-Anchor" href="#å‚è€ƒæ–‡çŒ®"></a> å‚è€ƒæ–‡çŒ®</h3><blockquote><ol><li>ç¾å›½çš®è‚¤ç—…å­¦ä¼šï¼ˆAADï¼‰. (2017). Chronic Stress and Telogen Effluvium Correlation.Â <em>Journal of Investigative Dermatology</em>, 137(8), 1722-1729.</li><li>Nature Cell Biology. (2020). Circadian Rhythm Regulation of Hair Follicle Stem Cells.Â <em>Nature Cell Biology</em>, 22(11), 1321-1332.</li><li>å›½é™…æ¯›å‘å­¦ä¼šï¼ˆISHRSï¼‰. (2021). Nutritional Deficiencies in Hair Loss Patients.Â <em>International Journal of Trichology</em>, 13(4), 189-196.</li><li>GitHub Archive Dataset. (2022). Self-reported Hair Density by Programming Language.Â <em>GitHub Research Repository</em>.</li><li>ææ›°åº†ï¼Œä½•æ¸…æ¹–. (2016). ä¸­åŒ»å¤–ç§‘å­¦ï¼ˆç¬¬ 3 ç‰ˆï¼‰. ä¸­å›½ä¸­åŒ»è¯å‡ºç‰ˆç¤¾.</li><li>å…¨çƒ IT è¡Œä¸šå¥åº·ç™½çš®ä¹¦. (2023). ä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢.</li><li>åŒ—äº¬ä¸­åŒ»è¯å¤§å­¦é™„å±è¯Šæ‰€. (2024). çº¯ä¸­è¯æ´—å‘æ°´å¹²é¢„æ—©æœŸè„±å‘çš„ä¸´åºŠè§‚å¯ŸæŠ¥å‘Š.Â <em>ä¸­åŒ»æ‚å¿—</em>, 65(3), 289-292.</li></ol></blockquote>]]></content>
    
    
    <summary type="html">ç¨‹åºå‘˜å¤´å‘ç ”ç©¶æŠ¥å‘Šï¼šä»ä»£ç åˆ°å‘é™…çº¿çš„ç§‘å­¦æ¢ç´¢</summary>
    
    
    
    <category term="è½¯ä»¶å·¥ç¨‹" scheme="http://www.formeasy.cc/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/"/>
    
    
    <category term="Other" scheme="http://www.formeasy.cc/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 3 æ•´åˆ MyBatis-Plus å®Œæ•´ç¤ºä¾‹</title>
    <link href="http://www.formeasy.cc/2025/08/27/Springboot/Spring%20Boot%203%20%E6%95%B4%E5%90%88%20MyBatis-Plus%20%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B/"/>
    <id>http://www.formeasy.cc/2025/08/27/Springboot/Spring%20Boot%203%20%E6%95%B4%E5%90%88%20MyBatis-Plus%20%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B/</id>
    <published>2025-08-27T09:06:33.000Z</published>
    <updated>2025-08-27T09:20:39.099Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹é¢æˆ‘å°†æŒ‰ç…§éœ€æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ Spring Boot 3 æ•´åˆ MyBatis-Plus çš„ç¤ºä¾‹ï¼Œå®ç°è§„èŒƒçš„ CRUD æ“ä½œã€‚</p><h3 id="1-é¦–å…ˆæ·»åŠ -maven-ä¾èµ–-pomxml"><a class="markdownIt-Anchor" href="#1-é¦–å…ˆæ·»åŠ -maven-ä¾èµ–-pomxml"></a> 1. é¦–å…ˆæ·»åŠ  Maven ä¾èµ– (pom.xml)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>phone-area-code<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>phone-area-code<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-plus.version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">mybatis-plus.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring Boot Starter Web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- MyBatis-Plus --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- MySQL Driver --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- Lombok --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">&lt;!-- springdoc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æ¨èä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Spring Boot Starter Test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®æ–‡ä»¶-applicationyml"><a class="markdownIt-Anchor" href="#2-é…ç½®æ–‡ä»¶-applicationyml"></a> 2. é…ç½®æ–‡ä»¶ (application.yml)</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/your_database_name?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/**/*.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">idDeleted</span>  <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span>          <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span>      <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º0)</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span>  <span class="comment"># æ‰“å°SQLæ—¥å¿—</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span>  <span class="comment"># å¼€å¯é©¼å³°å‘½åè½¬æ¢</span></span><br></pre></td></tr></table></figure><h3 id="3-åŸºç¡€-po-ç±»"><a class="markdownIt-Anchor" href="#3-åŸºç¡€-po-ç±»"></a> 3. åŸºç¡€ PO ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.po;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableLogic;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºç¡€POç±»ï¼ŒåŒ…å«å…¬å…±å­—æ®µ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasePO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤‡æ³¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String remark;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createdTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updatedTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºäºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> String createdBy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> String updatedBy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦åˆ é™¤ï¼š0-æœªåˆ é™¤ 1-å·²åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer idDeleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å®ä½“ç±»-phoneareacodepo"><a class="markdownIt-Anchor" href="#4-å®ä½“ç±»-phoneareacodepo"></a> 4. å®ä½“ç±» PhoneAreaCodePO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.po;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨çƒæ‰‹æœºåŒºå·å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="meta">@TableName(&quot;app_phone_area_code&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodePO</span> <span class="keyword">extends</span> <span class="title class_">BasePO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»é”®ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›½å®¶/åœ°åŒºåç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String countryName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰‹æœºåŒºå·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String areaCode;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’åºå­—æ®µï¼Œå€¼è¶Šå¤§è¶Šé å‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer sortOrder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-mybatis-plus-è‡ªåŠ¨å¡«å……å¤„ç†å™¨"><a class="markdownIt-Anchor" href="#5-mybatis-plus-è‡ªåŠ¨å¡«å……å¤„ç†å™¨"></a> 5. MyBatis-Plus è‡ªåŠ¨å¡«å……å¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis-Plus è‡ªåŠ¨å¡«å……å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="comment">// è‡ªåŠ¨å¡«å……åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´</span></span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createdTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updatedTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é»˜è®¤çŠ¶æ€ä¸ºå¯ç”¨</span></span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;status&quot;</span>, Integer.class, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="comment">// è‡ªåŠ¨å¡«å……æ›´æ–°æ—¶é—´</span></span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updatedTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡"><a class="markdownIt-Anchor" href="#6-é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡"></a> 6. é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;åˆ†é¡µè¯·æ±‚å‚æ•°&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageRequest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;é¡µç ï¼Œä»1å¼€å§‹&quot;, example = &quot;1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ¯é¡µæ¡æ•°&quot;, example = &quot;10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-é€šç”¨å“åº”å¯¹è±¡"><a class="markdownIt-Anchor" href="#7-é€šç”¨å“åº”å¯¹è±¡"></a> 7. é€šç”¨å“åº”å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨APIå“åº”å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;APIå“åº”ç»“æœ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiResponse</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;çŠ¶æ€ç ï¼š200è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºå¤±è´¥&quot;, example = &quot;200&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ¶ˆæ¯&quot;, example = &quot;æ“ä½œæˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ•°æ®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆåŠŸå“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        ApiResponse&lt;T&gt; response = <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;();</span><br><span class="line">        response.setCode(<span class="number">200</span>);</span><br><span class="line">        response.setMessage(<span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span>);</span><br><span class="line">        response.setData(data);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆåŠŸå“åº”ï¼ˆæ— æ•°æ®ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤±è´¥å“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">fail</span><span class="params">(<span class="type">int</span> code, String message)</span> &#123;</span><br><span class="line">        ApiResponse&lt;T&gt; response = <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;();</span><br><span class="line">        response.setCode(code);</span><br><span class="line">        response.setMessage(message);</span><br><span class="line">        response.setData(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤±è´¥å“åº”ï¼ˆé»˜è®¤é”™è¯¯ç ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">fail</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fail(<span class="number">500</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-mapper-æ¥å£"><a class="markdownIt-Anchor" href="#8-mapper-æ¥å£"></a> 8. Mapper æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Mapperæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PhoneAreaCodeMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;PhoneAreaCodePO&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-service-æ¥å£åŠå®ç°"><a class="markdownIt-Anchor" href="#9-service-æ¥å£åŠå®ç°"></a> 9. Service æ¥å£åŠå®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.dto.PageRequest;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Serviceæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PhoneAreaCodeService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;PhoneAreaCodePO&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢æ‰‹æœºåŒºå·åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    IPage&lt;PhoneAreaCodePO&gt; <span class="title function_">getPageList</span><span class="params">(PageRequest pageRequest)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PhoneAreaCodePO <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PhoneAreaCodeServiceImplå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.dto.PageRequest;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.mapper.PhoneAreaCodeMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.service.PhoneAreaCodeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Serviceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodeServiceImpl</span></span><br><span class="line">        <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;PhoneAreaCodeMapper, PhoneAreaCodePO&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">PhoneAreaCodeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;PhoneAreaCodePO&gt; <span class="title function_">getPageList</span><span class="params">(PageRequest pageRequest)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ MyBatis-Plus çš„åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.page(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">com</span>.baomidou.mybatisplus.extension.plugins.pagination.Page&lt;&gt;(</span><br><span class="line">                        pageRequest.getPageNum(),</span><br><span class="line">                        pageRequest.getPageSize()</span><br><span class="line">                )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PhoneAreaCodePO <span class="title function_">getById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.save(phoneAreaCodePO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.updateById(phoneAreaCodePO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// é€»è¾‘åˆ é™¤ï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-controller-å±‚"><a class="markdownIt-Anchor" href="#10-controller-å±‚"></a> 10. Controller å±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.common.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.dto.PageRequest;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.service.PhoneAreaCodeService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Operation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Controller</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€ä½¿ç”¨POSTè¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/phone-area-code&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;æ‰‹æœºåŒºå·ç®¡ç†&quot;, description = &quot;æ‰‹æœºåŒºå·CRUDæ“ä½œ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PhoneAreaCodeService phoneAreaCodeService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ†é¡µæŸ¥è¯¢æ‰‹æœºåŒºå·åˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;IPage&lt;PhoneAreaCodePO&gt;&gt; <span class="title function_">getPageList</span><span class="params">(<span class="meta">@RequestBody</span> PageRequest pageRequest)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.getPageList(pageRequest));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/getById&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ ¹æ®IDæŸ¥è¯¢æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;PhoneAreaCodePO&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@RequestBody</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.getById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ–°å¢æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;Boolean&gt; <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.save(phoneAreaCodePO));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ›´æ–°æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;Boolean&gt; <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.update(phoneAreaCodePO));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ é™¤æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;Boolean&gt; <span class="title function_">delete</span><span class="params">(<span class="meta">@RequestBody</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.removeById(id));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-mybatis-plus-é…ç½®ç±»åˆ†é¡µæ’ä»¶"><a class="markdownIt-Anchor" href="#11-mybatis-plus-é…ç½®ç±»åˆ†é¡µæ’ä»¶"></a> 11. MyBatis-Plus é…ç½®ç±»ï¼ˆåˆ†é¡µæ’ä»¶ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis-Plusé…ç½®ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#12-å¯åŠ¨ç±»"></a> 12. å¯åŠ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.phoneareacode.mapper&quot;)</span> <span class="comment">// æ‰«æMapperæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodeApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(PhoneAreaCodeApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="13-æ•°æ®è¡¨"><a class="markdownIt-Anchor" href="#13-æ•°æ®è¡¨"></a> 13. æ•°æ®è¡¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `your_database_name`.`app_phone_area_code`( </span><br><span class="line">   `id` <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT , </span><br><span class="line">   `countryName` <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `sortOrder` <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> , </span><br><span class="line">   `status` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> , </span><br><span class="line">   `remark` <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `createdTime` <span class="type">timestamp</span> , </span><br><span class="line">   `updatedTime` <span class="type">timestamp</span> , </span><br><span class="line">   `createdBy` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `updatedBy` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `idDeleted` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> , </span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line"> )</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®ç»“æ„è¯´æ˜"><a class="markdownIt-Anchor" href="#é¡¹ç›®ç»“æ„è¯´æ˜"></a> é¡¹ç›®ç»“æ„è¯´æ˜</h3><p>æ•´ä¸ªé¡¹ç›®æŒ‰ç…§æ ‡å‡†çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼š</p><ol><li><strong>POå±‚</strong>ï¼šå­˜æ”¾å®ä½“ç±»ï¼Œç»§æ‰¿åŸºç¡€BasePOï¼ŒåŒ…å«å…¬å…±å­—æ®µ</li><li><strong>Mapperå±‚</strong>ï¼šæ•°æ®è®¿é—®å±‚ï¼Œç»§æ‰¿MyBatis-Plusçš„BaseMapper</li><li><strong>Serviceå±‚</strong>ï¼šä¸šåŠ¡é€»è¾‘å±‚ï¼Œå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</li><li><strong>Controllerå±‚</strong>ï¼šæ§åˆ¶å±‚ï¼Œåªè´Ÿè´£æ¥æ”¶è¯·æ±‚å’Œè¿”å›å“åº”ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘</li><li><strong>Common</strong>ï¼šå­˜æ”¾é€šç”¨å“åº”å¯¹è±¡ç­‰å…¬å…±ç±»</li><li><strong>Config</strong>ï¼šå­˜æ”¾é…ç½®ç±»</li><li><strong>DTO</strong>ï¼šå­˜æ”¾æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œå¦‚åˆ†é¡µè¯·æ±‚å¯¹è±¡</li></ol><p>ä¸ºäº†æµ‹è¯•ä¸Šè¿°æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Postmanæˆ–ç¼–å†™å•å…ƒæµ‹è¯•æ¥éªŒè¯æ¥å£çš„æ­£ç¡®æ€§ã€‚ä¸‹é¢æä¾›ä¸¤ç§æµ‹è¯•æ–¹æ¡ˆï¼š</p><h3 id="ä¸€-ä½¿ç”¨postmanæµ‹è¯•æ¥å£"><a class="markdownIt-Anchor" href="#ä¸€-ä½¿ç”¨postmanæµ‹è¯•æ¥å£"></a> ä¸€ã€ä½¿ç”¨Postmanæµ‹è¯•æ¥å£</h3><p>æ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨<code>POST</code>æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯å„æ¥å£çš„æµ‹è¯•ç¤ºä¾‹ï¼š</p><ol><li><p><strong>åˆ†é¡µæŸ¥è¯¢æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/page</code></li><li>è¯·æ±‚ä½“:</li></ul></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pageNum&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p><strong>æ–°å¢æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/save</code></li><li>è¯·æ±‚ä½“:</li></ul></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;countryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;areaCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;+86&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sortOrder&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½å¤§é™†åœ°åŒº&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p><strong>æŸ¥è¯¢å•ä¸ªæ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/getById</code></li><li>è¯·æ±‚ä½“: <code>1</code> (è¦æŸ¥è¯¢çš„ID)</li></ul></li><li><p><strong>æ›´æ–°æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/update</code></li><li>è¯·æ±‚ä½“:</li></ul></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;countryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;areaCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;+86&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sortOrder&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½å¤§é™†åœ°åŒºæ‰‹æœºå·&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="5"><li><p><strong>åˆ é™¤æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/delete</code></li><li>è¯·æ±‚ä½“: <code>1</code> (è¦åˆ é™¤çš„ID)</li></ul></li></ol><h3 id="äºŒ-ç¼–å†™å•å…ƒæµ‹è¯•"><a class="markdownIt-Anchor" href="#äºŒ-ç¼–å†™å•å…ƒæµ‹è¯•"></a> äºŒã€ç¼–å†™å•å…ƒæµ‹è¯•</h3><p>ä¸‹é¢æ˜¯ä½¿ç”¨Spring Boot Testç¼–å†™çš„å•å…ƒæµ‹è¯•ä»£ç ï¼š</p><h3 id="ä¸‰-æµ‹è¯•æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#ä¸‰-æµ‹è¯•æ³¨æ„äº‹é¡¹"></a> ä¸‰ã€æµ‹è¯•æ³¨æ„äº‹é¡¹</h3><ol><li><p><strong>æ•°æ®åº“å‡†å¤‡</strong>ï¼š</p><ul><li>ç¡®ä¿æµ‹è¯•å‰å·²åˆ›å»ºå¥½æ•°æ®åº“è¡¨ç»“æ„</li><li>å¯ä»¥åœ¨æµ‹è¯•ç±»ä¸Šæ·»åŠ <code>@Sql</code>æ³¨è§£è‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–SQLè„šæœ¬</li></ul></li><li><p><strong>æµ‹è¯•é¡ºåº</strong>ï¼š</p><ul><li>å»ºè®®å…ˆæ‰§è¡Œæ–°å¢æµ‹è¯•ï¼Œå†æ‰§è¡ŒæŸ¥è¯¢ã€æ›´æ–°æµ‹è¯•</li><li>æœ€åæ‰§è¡Œåˆ é™¤æµ‹è¯•</li></ul></li><li><p><strong>æµ‹è¯•ç¯å¢ƒ</strong>ï¼š</p><ul><li>å¯ä»¥åœ¨<code>application-test.yml</code>ä¸­é…ç½®æµ‹è¯•ç¯å¢ƒçš„æ•°æ®åº“ï¼Œé¿å…å½±å“ç”Ÿäº§æ•°æ®</li></ul></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test_database?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span></span><br></pre></td></tr></table></figure><ol start="4"><li><strong>æ·»åŠ æµ‹è¯•ä¾èµ–</strong>ï¼š<br />å¦‚æœéœ€è¦æ›´ä¸°å¯Œçš„æµ‹è¯•æ”¯æŒï¼Œå¯ä»¥åœ¨pom.xmlä¸­æ·»åŠ ï¼š</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•æ–¹æ³•ï¼Œå¯ä»¥å…¨é¢éªŒè¯æˆ‘ä»¬å®ç°çš„æ¥å£åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œç¡®ä¿ä»£ç çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚</p><h3 id="å®ç°ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#å®ç°ç‰¹ç‚¹"></a> å®ç°ç‰¹ç‚¹</h3><ol><li><strong>ç»Ÿä¸€å“åº”æ ¼å¼</strong>ï¼šä½¿ç”¨ApiResponseç»Ÿä¸€å°è£…å“åº”ç»“æœ</li><li><strong>é€šç”¨åˆ†é¡µ</strong>ï¼šå®ç°äº†é€šç”¨çš„PageRequeståˆ†é¡µè¯·æ±‚å¯¹è±¡</li><li><strong>ç»Ÿä¸€ä½¿ç”¨POSTè¯·æ±‚</strong>ï¼šæ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨POSTæ–¹æ³•</li><li><strong>é€»è¾‘åˆ é™¤</strong>ï¼šé€šè¿‡MyBatis-Pluså®ç°é€»è¾‘åˆ é™¤åŠŸèƒ½</li><li><strong>è‡ªåŠ¨å¡«å……</strong>ï¼šè‡ªåŠ¨å¡«å……åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰å…¬å…±å­—æ®µ</li><li><strong>Lombok</strong>ï¼šä½¿ç”¨@Dataç­‰æ³¨è§£å‡å°‘getterã€setterç­‰æ¨¡æ¿ä»£ç </li><li><strong>æ§åˆ¶å±‚æ— ä¸šåŠ¡é€»è¾‘</strong>ï¼šControlleråªè´Ÿè´£è½¬å‘è¯·æ±‚å’Œå“åº”ç»“æœ</li></ol><p>é€šè¿‡ä»¥ä¸Šå®ç°ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªè§„èŒƒã€é«˜æ•ˆçš„Spring Boot 3æ•´åˆMyBatis-Plusçš„é¡¹ç›®ï¼Œå®ç°äº†å¯¹æ‰‹æœºåŒºå·è¡¨çš„å®Œæ•´CRUDæ“ä½œã€‚</p>]]></content>
    
    
    <summary type="html">Spring Boot 3 æ•´åˆ MyBatis-Plus å®Œæ•´ç¤ºä¾‹</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Securityå®ç°è®¤è¯ä¸æˆæƒ</title>
    <link href="http://www.formeasy.cc/2025/08/27/Springboot/SpringBoot%E6%95%B4%E5%90%88Spring%20Security%E5%AE%9E%E7%8E%B0%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/"/>
    <id>http://www.formeasy.cc/2025/08/27/Springboot/SpringBoot%E6%95%B4%E5%90%88Spring%20Security%E5%AE%9E%E7%8E%B0%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/</id>
    <published>2025-08-27T05:38:56.000Z</published>
    <updated>2025-08-27T09:27:30.667Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡é€šè¿‡é€æ­¥å­¦ä¹ Spring Securityï¼Œç”±æµ…å…¥æ·±ï¼ŒSpringBootæ•´åˆSpring Security åˆ†åˆ«å®ç°è‡ªå®šä¹‰çš„HTTP Basicè®¤è¯å’ŒFormè¡¨å•è®¤è¯ã€‚<br />æœ¬æ–‡æ˜¯å­¦ä¹ ç¬”è®°ï¼Œç½‘ä¸Šçš„æ•™ç¨‹äº”èŠ±å…«é—¨ï¼Œç”±äºæ—¶é—´ä¹…è¿œï¼Œå¾ˆéš¾æ‹¿æ¥å°±ç”¨ã€‚</p><p>ä¸»è¦å†…å®¹ï¼š</p><ul><li>ç”¨æˆ·ä¿¡æ¯ç®¡ç†</li><li>æ•æ„Ÿä¿¡æ¯åŠ å¯†è§£å¯†</li><li>ç”¨æˆ·è®¤è¯</li><li>æƒé™æ§åˆ¶</li><li>è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ä¿æŠ¤</li><li>è·¨åŸŸæ”¯æŒ</li><li>å…¨å±€å®‰å…¨æ–¹æ³•</li><li>å•ç‚¹ç™»å½•</li></ul><h2 id="ä¸€-spring-security-å¿«é€Ÿå¼€å§‹ä¸€ä¸ªä¾‹å­"><a class="markdownIt-Anchor" href="#ä¸€-spring-security-å¿«é€Ÿå¼€å§‹ä¸€ä¸ªä¾‹å­"></a> ä¸€ã€Spring Security å¿«é€Ÿå¼€å§‹ä¸€ä¸ªä¾‹å­</h2><p>åˆ›å»ºSpringBooté¡¹ç›®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ tree -I test</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ pom.xml</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ main</span><br><span class="line">        â”œâ”€â”€ java</span><br><span class="line">        â”‚   â””â”€â”€ com</span><br><span class="line">        â”‚       â””â”€â”€ example</span><br><span class="line">        â”‚           â””â”€â”€ demo</span><br><span class="line">        â”‚               â”œâ”€â”€ Application.java</span><br><span class="line">        â”‚               â””â”€â”€ controller</span><br><span class="line">        â”‚                   â””â”€â”€ IndexController.java</span><br><span class="line">        â””â”€â”€ resources</span><br><span class="line">            â”œâ”€â”€ application.yml</span><br><span class="line">            â”œâ”€â”€ static</span><br><span class="line">            â””â”€â”€ templates</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¼•å…¥Spring Securityä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä¾èµ– pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½® application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç±» Application.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(Application.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ§åˆ¶å™¨ IndexController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç›´æ¥è®¿é—®åº”ç”¨ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/</span><br><span class="line">=&gt; 302</span><br><span class="line">http://localhost:8080/login</span><br></pre></td></tr></table></figure><p><img src="gqnkyc66e4gn2_9e13ac55ee084f79bb67aa80cffde80a.webp" alt="" /></p><p>ç°åœ¨ä½¿ç”¨é»˜è®¤çš„è´¦å·å¯†ç ç™»å½•</p><ul><li>é»˜è®¤çš„ç”¨æˆ·åï¼šuser</li><li>é»˜è®¤çš„å¯†ç ï¼š(æ§åˆ¶å°æ‰“å°å‡ºçš„å¯†ç )</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Using generated security password: cdd28beb-9a64-4130-be58-6bde1684476d</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—® <a href="http://localhost:8080/">http://localhost:8080/</a></p><p>å¯ä»¥çœ‹åˆ°è¿”å›ç»“æœ</p><p><img src="gqnkyc66e4gn2_3f18ade113f5469886efbfa4c9f5c92e.webp" alt="" /></p><p>çœ‹åˆ°ä¸Šå›¾è¯´æ˜æˆåŠŸé›†æˆSpring Securityã€‚</p><h2 id="äºŒ-è®¤è¯ä¸æˆæƒè¯´æ˜"><a class="markdownIt-Anchor" href="#äºŒ-è®¤è¯ä¸æˆæƒè¯´æ˜"></a> äºŒã€è®¤è¯ä¸æˆæƒè¯´æ˜</h2><ul><li>è®¤è¯authenticationç”¨æˆ·èº«ä»½</li><li>æˆæƒauthorizationç”¨æˆ·æƒé™</li></ul><p>å•ä½“åº”ç”¨</p><p><img src="gqnkyc66e4gn2_39e66622157745e294c844c066e958ae.webp" alt="" /></p><p>å¾®æœåŠ¡æ¶æ„</p><p><img src="gqnkyc66e4gn2_738af5e3892c4f7499e0e7b6add28125.webp" alt="" /></p><h2 id="ä¸‰-spring-securityåŸºç¡€è®¤è¯ä¸è¡¨å•è®¤è¯"><a class="markdownIt-Anchor" href="#ä¸‰-spring-securityåŸºç¡€è®¤è¯ä¸è¡¨å•è®¤è¯"></a> ä¸‰ã€Spring SecurityåŸºç¡€è®¤è¯ä¸è¡¨å•è®¤è¯</h2><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82d.webp" alt="" /></p><ol><li>ç”¨æˆ·å¯¹è±¡ UserDetails</li></ol><ul><li>å†…å­˜å­˜å‚¨</li><li>æ•°æ®åº“å­˜å‚¨</li></ul><ol start="2"><li>è®¤è¯å¯¹è±¡ Authentication</li></ol><ul><li>HTTPåŸºç¡€è®¤è¯</li><li>HTTPè¡¨å•è®¤è¯</li></ul><h3 id="1-httpåŸºç¡€è®¤è¯"><a class="markdownIt-Anchor" href="#1-httpåŸºç¡€è®¤è¯"></a> 1ã€HTTPåŸºç¡€è®¤è¯</h3><p>é€šè¿‡HTTPè¯·æ±‚å¤´æºå¸¦ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•è®¤è¯</p><p>HTTPè¯·æ±‚å¤´æ ¼å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ç”¨æˆ·åå’Œå¯†ç çš„Base64ç¼–ç </span><br><span class="line">Authonrization: Basic Base64-encoded(username:password)</span><br></pre></td></tr></table></figure><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82c.webp" alt="image.png" /></p><p>Spring Boot2.4ç‰ˆæœ¬ä»¥å‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Spring Boot2.4ç‰ˆæœ¬ä¹‹å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‘é€HTTPè¯·æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET http://localhost:8080/</span><br><span class="line">Authorization: Basic dXNlcjo2ZjRhMGY5ZS1hY2ZkLTRmNTYtYjIzNy01MTZmYmZjMTk3NGM=</span><br></pre></td></tr></table></figure><p>å¯ä»¥è·å¾—å“åº”æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br></pre></td></tr></table></figure><p>base64è§£ç ä¹‹åå¯ä»¥å¾—åˆ°ç”¨æˆ·åå’Œå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">atob(&#x27;dXNlcjo2ZjRhMGY5ZS1hY2ZkLTRmNTYtYjIzNy01MTZmYmZjMTk3NGM=&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;user:6f4a0f9e-acfd-4f56-b237-516fbfc1974c&#x27;</span><br></pre></td></tr></table></figure><h3 id="2-httpè¡¨å•è®¤è¯"><a class="markdownIt-Anchor" href="#2-httpè¡¨å•è®¤è¯"></a> 2ã€HTTPè¡¨å•è®¤è¯</h3><p>Spring Securityçš„é»˜è®¤è®¤è¯æ–¹å¼</p><p><img src="gqnkyc66e4gn2_1ba816d1d85946cb8c9c8b5b67767379.webp" alt="" /></p><h2 id="å››-spring-security-ç”¨æˆ·ä¸è®¤è¯å¯¹è±¡è¯´æ˜"><a class="markdownIt-Anchor" href="#å››-spring-security-ç”¨æˆ·ä¸è®¤è¯å¯¹è±¡è¯´æ˜"></a> å››ã€Spring Security ç”¨æˆ·ä¸è®¤è¯å¯¹è±¡è¯´æ˜</h2><h3 id="1-ç”¨æˆ·å¯¹è±¡"><a class="markdownIt-Anchor" href="#1-ç”¨æˆ·å¯¹è±¡"></a> 1ã€ç”¨æˆ·å¯¹è±¡</h3><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82e.webp" alt="" /></p><p>UserDetails ç”¨æˆ·å¯¹è±¡æ¥å£è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core.userdetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDetails</span> <span class="keyword">extends</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–ç”¨æˆ·æƒé™ä¿¡æ¯</span></span><br><span class="line">    Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å¯†ç </span></span><br><span class="line">    java.lang.String <span class="title function_">getPassword</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ç”¨æˆ·å</span></span><br><span class="line">    java.lang.String <span class="title function_">getUsername</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¤±æ•ˆ</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·æ˜¯å¦é”å®š</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·å‡­è¯ä¿¡æ¯æ˜¯å¦å·²å¤±æ•ˆ</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>GrantedAuthority ç”¨æˆ·æ‹¥æœ‰æƒé™æ¥å£è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GrantedAuthority</span> <span class="keyword">extends</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–æƒé™ä¿¡æ¯</span></span><br><span class="line">    String <span class="title function_">getAuthority</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDetailsService ç”¨æˆ·æŸ¥è¯¢æ“ä½œè¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core.userdetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDetailsManager ç”¨æˆ·CRUDæ“ä½œè¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.provisioning;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDetailsManager</span> <span class="keyword">extends</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">createUser</span><span class="params">(UserDetails user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(UserDetails user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹å¯†ç </span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">changePassword</span><span class="params">(String oldPassword, String newPassword)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">userExists</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-è®¤è¯å¯¹è±¡"><a class="markdownIt-Anchor" href="#2-è®¤è¯å¯¹è±¡"></a> 2ã€è®¤è¯å¯¹è±¡</h3><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82f.webp" alt="" /></p><p>Authentication è®¤è¯è¯·æ±‚è¯¦ç»†ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.security.Principal;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Authentication</span> <span class="keyword">extends</span> <span class="title class_">Principal</span>, Serializable &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®‰å…¨ä¸»ä½“æ‰€å…·æœ‰çš„çš„æƒé™</span></span><br><span class="line">    Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯æ˜ä¸»ä½“æœ‰æ•ˆæ€§çš„å‡­è¯</span></span><br><span class="line">    Object <span class="title function_">getCredentials</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¤è¯è¯·æ±‚çš„æ˜ç»†ä¿¡æ¯</span></span><br><span class="line">    Object <span class="title function_">getDetails</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»ä½“çš„æ ‡è¯†ä¿¡æ¯</span></span><br><span class="line">    Object <span class="title function_">getPrincipal</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦è®¤è¯é€šè¿‡</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAuthenticated</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®è®¤è¯ç»“æœ</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setAuthenticated</span><span class="params">(<span class="type">boolean</span> isAuthenticated)</span> <span class="keyword">throws</span> IllegalArgumentException;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>AuthenticationProvider è®¤è¯çš„ä¸šåŠ¡æ‰§è¡Œè€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.authentication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AuthenticationProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œè®¤è¯ï¼Œè¿”å›è®¤è¯ç»“æœ</span></span><br><span class="line">    Authentication <span class="title function_">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒå½“å‰çš„è®¤è¯å¯¹è±¡</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; authentication)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äº”-åŸºäºmysqlè‡ªå®šä¹‰è®¤è¯è¿‡ç¨‹ä¾‹å­"><a class="markdownIt-Anchor" href="#äº”-åŸºäºmysqlè‡ªå®šä¹‰è®¤è¯è¿‡ç¨‹ä¾‹å­"></a> äº”ã€åŸºäºMySQLè‡ªå®šä¹‰è®¤è¯è¿‡ç¨‹ä¾‹å­</h2><h3 id="1-é¡¹ç›®ç»“æ„"><a class="markdownIt-Anchor" href="#1-é¡¹ç›®ç»“æ„"></a> 1ã€é¡¹ç›®ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ tree -I target</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ pom.xml</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ main</span><br><span class="line">    â”‚   â”œâ”€â”€ java</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ com.example.springboot</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ Application.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ controller</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ IndexController.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ entity</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ User.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ mapper</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ UserMapper.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ security</span><br><span class="line">    â”‚   â”‚         â”‚   â”œâ”€â”€ SecurityConfiguration.java</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ UserAuthenticationProvider.java</span><br><span class="line">    â”‚   â”‚         â””â”€â”€ service</span><br><span class="line">    â”‚   â”‚             â”œâ”€â”€ UserService.java</span><br><span class="line">    â”‚   â”‚             â””â”€â”€ impl</span><br><span class="line">    â”‚   â”‚                 â””â”€â”€ UserServiceImpl.java</span><br><span class="line">    â”‚   â””â”€â”€ resources</span><br><span class="line">    â”‚       â”œâ”€â”€ application.yml</span><br><span class="line">    â”‚       â”œâ”€â”€ sql</span><br><span class="line">    â”‚       â”‚   â””â”€â”€ schema.sql</span><br><span class="line">    â”‚       â”œâ”€â”€ static</span><br><span class="line">    â”‚       â”‚   â””â”€â”€ login.html</span><br><span class="line">    â”‚       â””â”€â”€ templates</span><br><span class="line">    â””â”€â”€ test</span><br><span class="line">        â””â”€â”€ java</span><br><span class="line">            â””â”€â”€ com.example.springboot</span><br><span class="line">                â””â”€â”€ ApplicationTests.java</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-ç”¨æˆ·è¡¨"><a class="markdownIt-Anchor" href="#2-ç”¨æˆ·è¡¨"></a> 2ã€ç”¨æˆ·è¡¨</h3><p>é»˜è®¤è¡¨ç»“æ„çš„SQLè·¯å¾„</p><p>spring-security-core-5.7.6.jar!/org/springframework/security/core/userdetails/jdbc/users.ddl</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table users(</span><br><span class="line">    username varchar_ignorecase(50) not null primary key,</span><br><span class="line">    password varchar_ignorecase(500) not null,</span><br><span class="line">    enabled boolean not null</span><br><span class="line">);</span><br><span class="line">create table authorities (</span><br><span class="line">    username varchar_ignorecase(50) not null,</span><br><span class="line">    authority varchar_ignorecase(50) not null,</span><br><span class="line">    constraint fk_authorities_users foreign key(username) references users(username)</span><br><span class="line">);</span><br><span class="line">create unique index ix_auth_username on authorities (username,authority);</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·è¡¨</p><p>schema.sql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®id&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `nickname` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;æ˜µç§°&#x27;</span>,</span><br><span class="line">  `enabled` tinyint <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;è´¦å·å¯ç”¨æ ‡è¯†&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `idx_username` (`username`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_general_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `tb_user` <span class="keyword">values</span> (<span class="number">1</span>, &quot;zhangsan&quot;, &quot;zhangsan&quot;, &quot;å¼ ä¸‰&quot;, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `tb_user` <span class="keyword">values</span> (<span class="number">2</span>, &quot;lisi&quot;, &quot;lisi&quot;, &quot;æå››&quot;, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `tb_user` <span class="keyword">values</span> (<span class="number">3</span>, &quot;wangwu&quot;, &quot;wangwu&quot;, &quot;ç‹äº”&quot;, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="3-ä¾èµ–"><a class="markdownIt-Anchor" href="#3-ä¾èµ–"></a> 3ã€ä¾èµ–</h3><ul><li>Spring Security</li><li>MyBatis-Plus</li><li>MySQL8 JDBC</li><li>Lombok</li></ul><p>å®Œæ•´ä¾èµ–</p><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>springbootå­¦ä¹ <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--starter-web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-security--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ·»åŠ  JDBC Starter ä»¥å¼•å…¥ HikariCP --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--MyBatisPlusæ ¸å¿ƒåº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-æ•°æ®åº“é…ç½®"><a class="markdownIt-Anchor" href="#4-æ•°æ®åº“é…ç½®"></a> 4ã€æ•°æ®åº“é…ç½®</h3><p>application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“é…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">zaq1xsw2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">10</span>  <span class="comment"># æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">5</span>        <span class="comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span></span><br><span class="line">      <span class="attr">idle-timeout:</span> <span class="number">300000</span>   <span class="comment"># ç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">20000</span>  <span class="comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®mybatiså®ä½“é…ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">classpath:mapper/*.xml</span> <span class="comment">#æ˜ å°„åˆ°resources/mapper/User.xmlé‡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#mybatis-plusç›¸å…³é…ç½®</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># xmlæ‰«æï¼Œå¤šä¸ªç›®å½•ç”¨é€—å·æˆ–è€…åˆ†å·åˆ†éš”ï¼ˆå‘Šè¯‰ Mapper æ‰€å¯¹åº”çš„ XML æ–‡ä»¶ä½ç½®ï¼‰</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># ä»¥ä¸‹é…ç½®å‡æœ‰é»˜è®¤å€¼,å¯ä»¥ä¸è®¾ç½®</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#ä¸»é”®ç±»å‹ AUTO:&quot;æ•°æ®åº“IDè‡ªå¢&quot; INPUT:&quot;ç”¨æˆ·è¾“å…¥ID&quot;,ID_WORKER:&quot;å…¨å±€å”¯ä¸€ID (æ•°å­—ç±»å‹å”¯ä¸€ID)&quot;, UUID:&quot;å…¨å±€å”¯ä¸€ID UUID&quot;;</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment">#å­—æ®µç­–ç•¥ IGNORED:&quot;å¿½ç•¥åˆ¤æ–­&quot;  NOT_NULL:&quot;é NULL åˆ¤æ–­&quot;)  NOT_EMPTY:&quot;éç©ºåˆ¤æ–­&quot;</span></span><br><span class="line">      <span class="attr">field-strategy:</span> <span class="string">NOT_EMPTY</span></span><br><span class="line">      <span class="comment">#æ•°æ®åº“ç±»å‹</span></span><br><span class="line">      <span class="attr">db-type:</span> <span class="string">MYSQL</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™æ˜ å°„:ä»æ•°æ®åº“åˆ—ååˆ°Javaå±æ€§é©¼å³°å‘½åçš„ç±»ä¼¼æ˜ å°„</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># å¦‚æœæŸ¥è¯¢ç»“æœä¸­åŒ…å«ç©ºå€¼çš„åˆ—ï¼Œåˆ™ MyBatis åœ¨æ˜ å°„çš„æ—¶å€™ï¼Œä¸ä¼šæ˜ å°„è¿™ä¸ªå­—æ®µ</span></span><br><span class="line">    <span class="attr">call-setters-on-nulls:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># è¿™ä¸ªé…ç½®ä¼šå°†æ‰§è¡Œçš„sqlæ‰“å°å‡ºæ¥ï¼Œåœ¨å¼€å‘æˆ–æµ‹è¯•çš„æ—¶å€™å¯ä»¥ç”¨</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h3 id="5-springbootåŸºæœ¬æ¡†æ¶"><a class="markdownIt-Anchor" href="#5-springbootåŸºæœ¬æ¡†æ¶"></a> 5ã€SpringBootåŸºæœ¬æ¡†æ¶</h3><p>å¯åŠ¨ç±» Application.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ä½“ç±» User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»é”®id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯†ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜µç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è´¦å·å¯ç”¨æ ‡è¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer enabled;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(<span class="keyword">new</span> <span class="title class_">SimpleGrantedAuthority</span>(<span class="string">&quot;ROLE_USER&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¤±æ•ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·æ˜¯å¦é”å®š</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·å‡­è¯ä¿¡æ¯æ˜¯å¦å·²å¤±æ•ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.enabled == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.service.UserService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span></span><br><span class="line">        <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">UserService</span>, UserDetailsService &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> UserDetails</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> UsernameNotFoundException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(User::getUsername, username);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="built_in">super</span>.getOne(queryWrapper);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123;</span><br><span class="line">            log.error(<span class="string">&quot;Access Denied, user not found:&quot;</span> + username);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;user not found:&quot;</span> + username);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>IndexController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-è‡ªåŠ¨å®šä¹‰spring-security"><a class="markdownIt-Anchor" href="#6-è‡ªåŠ¨å®šä¹‰spring-security"></a> 6ã€è‡ªåŠ¨å®šä¹‰Spring Security</h3><p>SecurityConfiguration.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºåŸºç¡€è®¤è¯æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> http</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserAuthenticationProvider.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.BadCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAuthenticationProvider</span> <span class="keyword">implements</span> <span class="title class_">AuthenticationProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªå·±å®ç°è®¤è¯è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> authentication</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Authentication <span class="title function_">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="comment">// ä»Authentication å¯¹è±¡ä¸­è·å–ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> authentication.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> authentication.getCredentials().toString();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserDetails</span> <span class="variable">user</span> <span class="operator">=</span> userService.loadUserByUsername(username);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (password.equals(user.getPassword())) &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…æˆåŠŸ</span></span><br><span class="line">            log.info(<span class="string">&quot;Access Success: &quot;</span> + user);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(username, password, user.getAuthorities());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…å¤±è´¥</span></span><br><span class="line">            log.error(<span class="string">&quot;Access Denied: The username or password is wrong!&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BadCredentialsException</span>(<span class="string">&quot;The username or password is wrong!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; authentication)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> authentication.equals(UsernamePasswordAuthenticationToken.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-æ¥å£æµ‹è¯•"><a class="markdownIt-Anchor" href="#7-æ¥å£æµ‹è¯•"></a> 7ã€æ¥å£æµ‹è¯•</h3><p>IndexController.http</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">###</span><br><span class="line"># ä¸æä¾›è®¤è¯ä¿¡æ¯</span><br><span class="line">GET http://localhost:8080/hello</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"># æä¾›é”™è¯¯çš„è®¤è¯ä¿¡æ¯</span><br><span class="line">GET http://localhost:8080/hello</span><br><span class="line">Authorization: Basic dXNlcjo2YzVlMTUyOS1kMTc2LTRkYjItYmZlMy0zZTIzOTNlMjY2MTk=</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"># æä¾›æ­£ç¡®çš„è®¤è¯ä¿¡æ¯</span><br><span class="line">GET http://localhost:8080/hello</span><br><span class="line">Authorization: Basic emhhbmdzYW46emhhbmdzYW4=</span><br><span class="line">###</span><br></pre></td></tr></table></figure><h2 id="å…­-ä½¿ç”¨passwordencoderåŠ å¯†å¯†ç "><a class="markdownIt-Anchor" href="#å…­-ä½¿ç”¨passwordencoderåŠ å¯†å¯†ç "></a> å…­ã€ä½¿ç”¨PasswordEncoderåŠ å¯†å¯†ç </h2><p>PasswordEncoderæ¥å£è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.crypto.password;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PasswordEncoder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹åŸå§‹å¯†ç ç¼–ç </span></span><br><span class="line">    String <span class="title function_">encode</span><span class="params">(CharSequence rawPassword)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯†ç æ¯”å¯¹</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(CharSequence rawPassword, String encodedPassword)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­åŠ å¯†å¯†ç æ˜¯å¦éœ€è¦å†æ¬¡åŠ å¯†</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">upgradeEncoding</span><span class="params">(String encodedPassword)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¸¸è§çš„å®ç°ç±»</p><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82g.webp" alt="" /></p><p>Bcryptç®—æ³•ç®€ä»‹</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.example.sprintboot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"></span><br><span class="line">public class BCryptPasswordEncoderTest &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void encode()&#123;</span><br><span class="line">        BCryptPasswordEncoder bCryptPasswordEncoder = new BCryptPasswordEncoder();</span><br><span class="line">        String encode = bCryptPasswordEncoder.encode(&quot;123456&quot;);</span><br><span class="line">        System.out.println(encode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$2a$10$lKqmIKbEPNDx/RXssgN6POgb8YssAK7pVtMFDosmC8FxozUgQq58K</span><br></pre></td></tr></table></figure><p>è§£é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$æ˜¯åˆ†éš”ç¬¦</span><br><span class="line">2aè¡¨ç¤ºBcryptç®—æ³•ç‰ˆæœ¬</span><br><span class="line">10è¡¨ç¤ºç®—æ³•å¼ºåº¦</span><br><span class="line">ä¸­é—´22ä½è¡¨ç¤ºç›å€¼</span><br><span class="line">ä¸­é—´é¢çš„ä½æ•°è¡¨ç¤ºåŠ å¯†åçš„æ–‡æœ¬</span><br><span class="line">æ€»é•¿åº¦60ä½</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨Bcryptç®—æ³•åŠ å¯†å¯†ç åçš„æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å»ºè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®id&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `nickname` <span class="type">varchar</span>(<span class="number">32</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ˜µç§°&#x27;</span>,</span><br><span class="line">  `enabled` tinyint <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;è´¦å·å¯ç”¨æ ‡è¯†&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `idx_username` (`username`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_general_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;$2a$10$/1XHgJYXtF4g/AiR41si8uvVC6Zc.Z9xVmXX4hO2z.b4.DX.H2j5W&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;$2a$10$PEcF03ina7x9mmt2VbB0ueVkLZWQo/yoKOfvfQpoL09/faBlNuuZ.&#x27;</span>, <span class="string">&#x27;æå››&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;$2a$10$PMumxkwwrELTbNDXCj0N4.jD/e/Hv.JiiZTFkdFqlDNLU2TahdYNq&#x27;</span>, <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>UserAuthenticationProviderå®ç°ç±»æ›¿æ¢å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.BadCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAuthenticationProvider</span> <span class="keyword">implements</span> <span class="title class_">AuthenticationProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯†ç åŠ å¯†</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªå·±å®ç°è®¤è¯è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> authentication</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Authentication <span class="title function_">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="comment">// ä»Authentication å¯¹è±¡ä¸­è·å–ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> authentication.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> authentication.getCredentials().toString();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserDetails</span> <span class="variable">user</span> <span class="operator">=</span> userService.loadUserByUsername(username);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›¿æ¢å¯†ç æ¯”å¯¹æ–¹å¼</span></span><br><span class="line">        <span class="comment">// if (password.equals(user.getPassword())) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.passwordEncoder().matches(password, user.getPassword())) &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…æˆåŠŸ</span></span><br><span class="line">            log.info(<span class="string">&quot;Access Success: &quot;</span> + user);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(username, password, user.getAuthorities());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…å¤±è´¥</span></span><br><span class="line">            log.error(<span class="string">&quot;Access Denied: The username or password is wrong!&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BadCredentialsException</span>(<span class="string">&quot;The username or password is wrong!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; authentication)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> authentication.equals(UsernamePasswordAuthenticationToken.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒ-sessionä¼šè¯æ§åˆ¶"><a class="markdownIt-Anchor" href="#ä¸ƒ-sessionä¼šè¯æ§åˆ¶"></a> ä¸ƒã€Sessionä¼šè¯æ§åˆ¶</h2><p>æ”¹ä¸ºåŸºäºåŸºç¡€è®¤è¯æ¨¡å¼<br />ä¿®æ”¹é…ç½®ç±»SecurityConfiguration</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.http.SessionCreationPolicy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºåŸºç¡€è®¤è¯æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> http</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¦ç”¨sessionä¼šè¯</span></span><br><span class="line">        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…«-åŸºäºè¡¨å•æ¨¡å¼å®ç°è‡ªå®šä¹‰è®¤è¯"><a class="markdownIt-Anchor" href="#å…«-åŸºäºè¡¨å•æ¨¡å¼å®ç°è‡ªå®šä¹‰è®¤è¯"></a> å…«ã€åŸºäºè¡¨å•æ¨¡å¼å®ç°è‡ªå®šä¹‰è®¤è¯</h2><p>SecurityFormConfiguration é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.http.SessionCreationPolicy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityFormConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºè¡¨å•è®¤è¯æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> http</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯ç”¨sessionä¼šè¯</span></span><br><span class="line">        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¤è¯æ–¹å¼ï¼šForm</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                <span class="comment">//.requestMatchers(&quot;/login.html&quot;).permitAll() // æ”¾è¡Œç™»å½•é¡µé¢</span></span><br><span class="line">                <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// å¯åŠ¨è¡¨å•è®¤è¯æ¨¡å¼</span></span><br><span class="line">                .formLogin()</span><br><span class="line">                <span class="comment">// ç™»å½•é¡µé¢</span></span><br><span class="line">                .loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">                <span class="comment">// è¯·æ±‚æäº¤åœ°å€</span></span><br><span class="line">                .loginProcessingUrl(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                <span class="comment">// æˆåŠŸè·³è½¬é¡µé¢</span></span><br><span class="line">                .defaultSuccessUrl(<span class="string">&quot;/hello&quot;</span>, <span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// æ”¾è¡Œä¸Šé¢çš„ä¸¤ä¸ªåœ°å€</span></span><br><span class="line">                .permitAll()</span><br><span class="line">                <span class="comment">// è®¾ç½®æäº¤çš„å‚æ•°å</span></span><br><span class="line">                .usernameParameter(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">                .passwordParameter(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// å¼€å§‹è®¾ç½®æ³¨é”€åŠŸèƒ½</span></span><br><span class="line">                .logout()</span><br><span class="line">                <span class="comment">// æ³¨é”€çš„url</span></span><br><span class="line">                .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">                <span class="comment">// sessionç›´æ¥è¿‡æœŸ</span></span><br><span class="line">                .invalidateHttpSession(<span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// æ¸…é™¤è®¤è¯ä¿¡æ¯</span></span><br><span class="line">                .clearAuthentication(<span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// æ³¨é”€æˆåŠŸåè·³è½¬åœ°å€</span></span><br><span class="line">                .logoutSuccessUrl(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// ç¦ç”¨csrfå®‰å…¨é˜²æŠ¤</span></span><br><span class="line">                .csrf().disable();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç™»å½•é¡µé¢ static/login.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>usernameï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>passwordï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ•ˆæœ</p><p><img src="gqnkyc66e4gn2_81b709b8e560457b9abad4b08cc02fc8.webp" alt="" /></p>]]></content>
    
    
    <summary type="html">SpringBootæ•´åˆSpring Securityå®ç°è®¤è¯ä¸æˆæƒ</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootå…¥é—¨æŒ‡å—(æ¡ˆä¾‹ç¯‡)</title>
    <link href="http://www.formeasy.cc/2025/08/26/Springboot/Spring%20Boot%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97(%E6%A1%88%E4%BE%8B%E7%AF%87)/"/>
    <id>http://www.formeasy.cc/2025/08/26/Springboot/Spring%20Boot%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97(%E6%A1%88%E4%BE%8B%E7%AF%87)/</id>
    <published>2025-08-26T05:33:37.000Z</published>
    <updated>2025-08-26T05:49:14.305Z</updated>
    
    <content type="html"><![CDATA[<p>Spring Bootæ˜¯ä¸€ä¸ªå¼€æºçš„JavaåŸºç¡€æ¡†æ¶ï¼Œå®ƒä½¿å¾—åˆ›å»ºç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„Springåº”ç”¨å˜å¾—æ›´å®¹æ˜“ã€‚å®ƒâ€œè·‘èµ·æ¥â€å³å¯ç”¨ï¼Œå†…åµŒäº†Tomcatã€Jettyç­‰Servletå®¹å™¨ï¼Œæ— éœ€éƒ¨ç½²WARæ–‡ä»¶ï¼Œä¹Ÿæ— éœ€å•ç‹¬çš„Servletå®¹å™¨ã€‚</p><h3 id="ç¯å¢ƒå‡†å¤‡"><a class="markdownIt-Anchor" href="#ç¯å¢ƒå‡†å¤‡"></a> ç¯å¢ƒå‡†å¤‡</h3><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒä¸­å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶ï¼š</p><ul><li>Java Development Kit (JDK) 8 æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>Maven 3.0 æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æˆ–IDEï¼ˆå¦‚IntelliJ IDEAæˆ–Eclipseï¼‰</li><li>Git</li></ul><h3 id="åˆ›å»ºspring-booté¡¹ç›®"><a class="markdownIt-Anchor" href="#åˆ›å»ºspring-booté¡¹ç›®"></a> åˆ›å»ºSpring Booté¡¹ç›®</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡Spring Initializrå¿«é€Ÿç”Ÿæˆä¸€ä¸ªSpring Booté¡¹ç›®çš„åŸºç¡€ç»“æ„ã€‚</p><ol><li>è®¿é—® <a href="https://start.spring.io/">Spring Initializr</a></li><li>é€‰æ‹©ç”ŸæˆMavené¡¹ç›®ï¼Œé€‰æ‹©Javaè¯­è¨€</li><li>æŒ‡å®šé¡¹ç›®å…ƒæ•°æ®ï¼ˆGroup, Artifact, Name, Descriptionï¼‰</li><li>æ·»åŠ ä¾èµ–ï¼ˆDependenciesï¼‰ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦<code>Spring Web</code>ä¾èµ–</li><li>ç‚¹å‡»â€œGenerateâ€ç”Ÿæˆé¡¹ç›®ï¼Œä¸‹è½½å¹¶è§£å‹</li></ol><h4 id="é¡¹ç›®æ¶æ„å›¾"><a class="markdownIt-Anchor" href="#é¡¹ç›®æ¶æ„å›¾"></a> é¡¹ç›®æ¶æ„å›¾</h4><p><img src="baaa5c67e3754abe83e0bbb2f2e14c58.png" alt="" /></p><p>å›¾å±•ç¤ºäº†Spring Bootåº”ç”¨çš„åŸºæœ¬æ¶æ„ï¼ŒåŒ…æ‹¬å¯åŠ¨ç±»ã€æ§åˆ¶å™¨ã€æœåŠ¡ã€ä»“åº“å’Œå®ä½“ç±»ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p><h3 id="é¡¹ç›®ç»“æ„"><a class="markdownIt-Anchor" href="#é¡¹ç›®ç»“æ„"></a> é¡¹ç›®ç»“æ„</h3><p>è§£å‹åçš„é¡¹ç›®ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p><pre><code>my-application/â”œâ”€â”€ src/â”‚   â”œâ”€â”€ main/â”‚   â”‚   â”œâ”€â”€ java/â”‚   â”‚   â”‚   â””â”€â”€ com/â”‚   â”‚   â”‚       â””â”€â”€ example/â”‚   â”‚   â”‚           â””â”€â”€ myapplication/â”‚   â”‚   â”‚               â”œâ”€â”€ MyApplication.javaâ”‚   â”‚   â”‚               â””â”€â”€ controller/â”‚   â”‚   â”‚                   â””â”€â”€ HelloController.javaâ”‚   â”‚   â””â”€â”€ resources/â”‚   â”‚       â”œâ”€â”€ application.propertiesâ”‚   â”‚       â””â”€â”€ static/â”‚   â”‚           â””â”€â”€ index.htmlâ”œâ”€â”€ pom.xmlâ””â”€â”€ README.md</code></pre><h3 id="ç¼–å†™hello-worldåº”ç”¨"><a class="markdownIt-Anchor" href="#ç¼–å†™hello-worldåº”ç”¨"></a> ç¼–å†™Hello Worldåº”ç”¨</h3><h4 id="1-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#1-å¯åŠ¨ç±»"></a> 1. å¯åŠ¨ç±»</h4><p>åœ¨<code>com.example.myapplication</code>åŒ…ä¸­åˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±»<code>MyApplication.java</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span> <span class="comment">// æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªSpring Bootåº”ç”¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args); <span class="comment">// å¯åŠ¨åº”ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-æ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#2-æ§åˆ¶å™¨"></a> 2. æ§åˆ¶å™¨</h4><p>åœ¨<code>com.example.myapplication.controller</code>åŒ…ä¸­åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ç±»<code>HelloController.java</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span> <span class="comment">// æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªRESTæ§åˆ¶å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span> <span class="comment">// æ˜ å°„GETè¯·æ±‚åˆ°/hello</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span>; <span class="comment">// è¿”å›å­—ç¬¦ä¸²</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-è¿è¡Œåº”ç”¨"><a class="markdownIt-Anchor" href="#3-è¿è¡Œåº”ç”¨"></a> 3. è¿è¡Œåº”ç”¨</h4><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨åº”ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure><p>åº”ç”¨å¯åŠ¨åï¼Œè®¿é—®<code>http://localhost:8080/hello</code>ï¼Œä½ å°†çœ‹åˆ°è¾“å‡º<code>Hello, World!</code>ã€‚</p><h3 id="æ¡ˆä¾‹todoåº”ç”¨"><a class="markdownIt-Anchor" href="#æ¡ˆä¾‹todoåº”ç”¨"></a> æ¡ˆä¾‹ï¼šTodoåº”ç”¨</h3><h4 id="1-æ·»åŠ ä¾èµ–"><a class="markdownIt-Anchor" href="#1-æ·»åŠ ä¾èµ–"></a> 1. æ·»åŠ ä¾èµ–</h4><p>åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Web --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring Data JPA --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- H2 Database --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-å®ä½“ç±»"><a class="markdownIt-Anchor" href="#2-å®ä½“ç±»"></a> 2. å®ä½“ç±»</h4><p>åˆ›å»º<code>Todo</code>å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">// æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªJPAå®ä½“</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> completed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ã€getterå’Œsetterçœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ä»“åº“æ¥å£"><a class="markdownIt-Anchor" href="#3-ä»“åº“æ¥å£"></a> 3. ä»“åº“æ¥å£</h4><p>åˆ›å»º<code>TodoRepository</code>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.myapplication.model.Todo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.CrudRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TodoRepository</span> <span class="keyword">extends</span> <span class="title class_">CrudRepository</span>&lt;Todo, Long&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-æœåŠ¡ç±»"><a class="markdownIt-Anchor" href="#4-æœåŠ¡ç±»"></a> 4. æœåŠ¡ç±»</h4><p>åˆ›å»º<code>TodoService</code>æœåŠ¡ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.myapplication.model.Todo;</span><br><span class="line"><span class="keyword">import</span> com.example.myapplication.repository.TodoRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TodoService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TodoRepository todoRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Todo&gt; <span class="title function_">getAllTodos</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todoRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Todo <span class="title function_">addTodo</span><span class="params">(Todo todo)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todoRepository.save(todo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¶ä»–æ–¹æ³•çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-æ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#5-æ§åˆ¶å™¨"></a> 5. æ§åˆ¶å™¨</h4><p>æ›´æ–°<code>HelloController</code>ä¸º<code>TodoController</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.myapplication.model.Todo;</span><br><span class="line"><span class="keyword">import</span> com.example.myapplication.service.TodoService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/todos&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TodoController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TodoService todoService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Todo&gt; <span class="title function_">getAllTodos</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todoService.getAllTodos();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Todo <span class="title function_">addTodo</span><span class="params">(<span class="meta">@RequestBody</span> Todo todo)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> todoService.addTodo(todo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…¶ä»–æ–¹æ³•çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-è¿è¡Œåº”ç”¨"><a class="markdownIt-Anchor" href="#6-è¿è¡Œåº”ç”¨"></a> 6. è¿è¡Œåº”ç”¨</h4><p>è¿è¡Œåº”ç”¨åï¼Œä½ å¯ä»¥ä½¿ç”¨Postmanæˆ–curlæ¥æµ‹è¯•APIï¼š</p><ul><li>è·å–æ‰€æœ‰Todoï¼š<code>GET http://localhost:8080/todos</code></li><li>æ·»åŠ Todoï¼š<code>POST http://localhost:8080/todos</code>ï¼Œè¯·æ±‚ä½“ä¸ºJSONæ ¼å¼çš„Todoå¯¹è±¡ã€‚</li></ul><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h3><p>Spring Bootç®€åŒ–äº†Springåº”ç”¨çš„åˆ›å»ºå’Œé…ç½®ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚é€šè¿‡æœ¬æ–‡ï¼Œä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„Spring Bootåº”ç”¨ï¼Œå¹¶äº†è§£äº†ä¸€ä¸ªTodoåº”ç”¨çš„å®ç°ã€‚å¸Œæœ›è¿™èƒ½å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹Spring Bootã€‚</p>]]></content>
    
    
    <summary type="html">Spring Bootå…¥é—¨æŒ‡å—(æ¡ˆä¾‹ç¯‡)</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>IntelliJ IDEA-Gradle-SpringBootæ­å»º</title>
    <link href="http://www.formeasy.cc/2025/08/25/Springboot/IntelliJ%20IDEA-Gradle-SpringBoot%E6%90%AD%E5%BB%BA/"/>
    <id>http://www.formeasy.cc/2025/08/25/Springboot/IntelliJ%20IDEA-Gradle-SpringBoot%E6%90%AD%E5%BB%BA/</id>
    <published>2025-08-25T06:53:06.000Z</published>
    <updated>2025-08-25T07:02:14.860Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰ææ¡ä»¶"><a class="markdownIt-Anchor" href="#å‰ææ¡ä»¶"></a> å‰ææ¡ä»¶</h3><p>JAVAå®‰è£…<br />Gradleå®‰è£…</p><h3 id="åˆ›å»ºé¡¹ç›®"><a class="markdownIt-Anchor" href="#åˆ›å»ºé¡¹ç›®"></a> åˆ›å»ºé¡¹ç›®</h3><p><img src="bf20a8e746a740ac3d0d29d4bc6d8d3f.png" alt="image.png" /></p><p><img src="6fff4b74fadc669f2e15d65b2aaf9ebb.png" alt="image.png" /></p><h3 id="é…ç½®é¡¹ç›®è®¾ç½®"><a class="markdownIt-Anchor" href="#é…ç½®é¡¹ç›®è®¾ç½®"></a> é…ç½®é¡¹ç›®è®¾ç½®</h3><p>æŒ‡å®šè‡ªå·±çš„gradleçš„å®‰è£…ä½ç½®,ä»¥åŠä»“åº“ä½ç½®(ç”¨æˆ·ä¸»ç›®å½•)</p><p><img src="ceccc52303970def2fbaadb8a19be33e.png" alt="image.png" /><br />ç”¨æˆ·ä¸»ç›®å½•: <strong>Gradleä»“åº“ç›®å½•</strong>ç”¨äºå­˜å‚¨å…¨å±€é…ç½®å±æ€§å’Œåˆå§‹åŒ–è„šæœ¬ä»¥åŠç¼“å­˜å’Œæ—¥å¿—æ–‡ä»¶ã€‚</p><h3 id="ç»“æ„"><a class="markdownIt-Anchor" href="#ç»“æ„"></a> ç»“æ„</h3><p><img src="93fddc578b35762a4b733fdca36a7e02.png" alt="image.png" /></p><h3 id="buildgradle"><a class="markdownIt-Anchor" href="#buildgradle"></a> build.gradle</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id &#x27;java&#x27;</span><br><span class="line">    id &#x27;org.springframework.boot&#x27; version &#x27;2.7.7&#x27;</span><br><span class="line">    id &#x27;io.spring.dependency-management&#x27; version &#x27;1.0.15.RELEASE&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">group = &#x27;com.example&#x27;</span><br><span class="line">version = &#x27;0.0.1-SNAPSHOT&#x27;</span><br><span class="line">sourceCompatibility = &#x27;1.8&#x27;</span><br><span class="line"></span><br><span class="line">configurations &#123;</span><br><span class="line">    compileOnly &#123;</span><br><span class="line">        extendsFrom annotationProcessor</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenLocal()</span><br><span class="line">    mavenCentral()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation &#x27;org.springframework.boot:spring-boot-starter-web&#x27;</span><br><span class="line">    implementation &#x27;org.mybatis.spring.boot:mybatis-spring-boot-starter:2.3.0&#x27;</span><br><span class="line">    compileOnly &#x27;org.projectlombok:lombok&#x27;</span><br><span class="line">    runtimeOnly &#x27;com.mysql:mysql-connector-j&#x27;</span><br><span class="line">    annotationProcessor &#x27;org.springframework.boot:spring-boot-configuration-processor&#x27;</span><br><span class="line">    annotationProcessor &#x27;org.projectlombok:lombok&#x27;</span><br><span class="line">    testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.named(&#x27;test&#x27;) &#123;</span><br><span class="line">    useJUnitPlatform()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="0c16637b22aac3f0d63e7e323119cd1e.png" alt="image.png" /></p><h3 id="å…¶ä»–"><a class="markdownIt-Anchor" href="#å…¶ä»–"></a> å…¶ä»–</h3><blockquote><p>application.yml</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9874</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/demo?characterEncoding=utf8&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;maxReconnects=10&amp;useSSL=false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment">#1.classpathï¼šåªä¼šåˆ°ä½ çš„classesè·¯å¾„ä¸­æŸ¥æ‰¾æ‰¾æ–‡ä»¶ã€‚</span></span><br><span class="line">  <span class="comment">#2.classpath*ï¼šä¸ä»…ä¼šåˆ°classesè·¯å¾„ï¼Œè¿˜åŒ…æ‹¬jaræ–‡ä»¶ä¸­(classesè·¯å¾„)è¿›è¡ŒæŸ¥æ‰¾ã€‚</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:/mapper/**/*Mapper.xml</span>    <span class="comment"># mapperæ˜ å°„æ–‡ä»¶ä½ç½®</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.**.entity</span>    <span class="comment"># å®ä½“ç±»æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span>   <span class="comment">#ç”¨äºæ§åˆ¶å°æ‰“å°sqlè¯­å¥</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span> <span class="comment">#å¼€å¯å°†å¸¦æœ‰ä¸‹åˆ’çº¿çš„è¡¨å­—æ®µ æ˜ å°„ä¸ºé©¼å³°æ ¼å¼çš„å®ä½“ç±»å±æ€§</span></span><br></pre></td></tr></table></figure><blockquote><p>UserMapper.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span> <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span>  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å‘½åç©ºé—´ ç»‘å®š æ¥å£ç±»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.gradledemo.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨æ•°æ®æ¡æ•°--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;users&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.gradledemo.entity.UserEntity&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM t_user limit 10</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>UserDao</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.gradledemo.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.gradledemo.entity.UserEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select count(*) from t_user&quot;)</span></span><br><span class="line">    String <span class="title function_">userCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;UserEntity&gt; <span class="title function_">users</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;UPDATE t_user SET age=#&#123;add&#125; WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">upDateAge</span><span class="params">(<span class="type">int</span> add,<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT age  FROM t_user WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    Integer <span class="title function_">getdateAge</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>UserEntity</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.gradledemo.entity;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Integer sex;</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="keyword">private</span> Date creationTime;</span><br><span class="line">    <span class="keyword">private</span> String site;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>UserController</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.gradledemo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.gradledemo.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.example.gradledemo.entity.UserEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;List&lt;UserEntity&gt;&gt; <span class="title function_">getUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(userDao.users()) ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>GradleDemoApplication</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.gradledemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GradleDemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GradleDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">IntelliJ IDEA-Gradle-SpringBootæ­å»º</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Gradle å®‰è£…å’Œä¸‹è½½</title>
    <link href="http://www.formeasy.cc/2025/08/25/Springboot/Gradle%20%E5%AE%89%E8%A3%85%E5%92%8C%E4%B8%8B%E8%BD%BD/"/>
    <id>http://www.formeasy.cc/2025/08/25/Springboot/Gradle%20%E5%AE%89%E8%A3%85%E5%92%8C%E4%B8%8B%E8%BD%BD/</id>
    <published>2025-08-25T06:27:17.000Z</published>
    <updated>2025-08-25T06:34:28.599Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-gradleå®‰è£…è¯´æ˜"><a class="markdownIt-Anchor" href="#1-gradleå®‰è£…è¯´æ˜"></a> 1. Gradleå®‰è£…è¯´æ˜</h2><ul><li>SpringBoot å®˜æ–¹æ–‡æ¡£æ˜ç¡®æŒ‡å‡º,ç›®å‰SpringBootçš„Gradleæ’ä»¶éœ€è¦gradle6.8ç‰ˆæœ¬åŠä»¥ä¸Šã€‚</li><li>å…¶ä¸­SpringBootä¸Gradleå­˜åœ¨ç‰ˆæœ¬å…¼å®¹é—®é¢˜ï¼ŒGradleä¸Ideaä¹Ÿå­˜åœ¨å…¼å®¹é—®é¢˜ï¼Œ<br />æ‰€ä»¥è¦é€‰æ‹©6.8ç‰ˆæœ¬åŠé«˜äº6.8ç‰ˆæœ¬çš„Gradlï¼Œé‚£ä¹ˆç›¸åº”çš„ideaç‰ˆæœ¬ä¹Ÿè¦å‡çº§ï¼Œä¸èƒ½å¤ªè€ã€‚</li></ul><h2 id="2-å®‰è£…jdk"><a class="markdownIt-Anchor" href="#2-å®‰è£…jdk"></a> 2. å®‰è£…JDK</h2><p>JDKï¼ˆJava SE Development Kitï¼‰å»ºè®®ä½¿ç”¨17åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œå…¶å®˜æ–¹ä¸‹è½½è·¯å¾„ä¸ºï¼š<br /><a href="https://www.oracle.com/java/technologies/downloads/#java17">https://www.oracle.com/java/technologies/downloads/#java17</a></p><h2 id="3-gradle-ä¸‹è½½"><a class="markdownIt-Anchor" href="#3-gradle-ä¸‹è½½"></a> 3. Gradle ä¸‹è½½</h2><p><a href="https://gradle.org/releases/">https://gradle.org/releases/</a></p><p>ä¸‹è½½äºŒè¿›åˆ¶åŒ…</p><p><img src="4fcfe740e4704d31b12c9cd7ca46c0d9.png" alt="" /></p><ul><li>é…ç½®ç¯å¢ƒå˜é‡</li></ul><p><img src="2e582181d62c4cc2847abc0990b557df.png" alt="" /></p><ul><li>ç‰¹åˆ«æ³¨æ„ï¼šè¿™é‡Œå†é…ç½®ä¸€ä¸ª<code>GRALE_USER_HOME</code>ç¯å¢ƒå˜é‡ï¼Œ <code>GRALE_USER_HOME</code>ç›¸å½“äºé…ç½®Gradleæœ¬åœ°ä»“åº“ä½ç½®å’ŒGradleWrapperç¼“å­˜ç›®å½•ã€‚</li></ul><p><img src="3914e3cd71fd4c9aaf0e3ef6475a4114.png" alt="" /></p><p><img src="899ff281d7994db5b281a9c0b3391f5d.png" alt="" /></p><ul><li>æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ</li></ul><p><img src="2fffdd1cacfd4ad5999765b42f8b58de.png" alt="" /></p><ul><li>gradle ä»“åº“å¯ä»¥å’Œæœ¬åœ°çš„ Mavenä»“åº“æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œå»ºè®®æ”¾åœ¨ä¸åŒçš„ç›®å½•ä¸‹</li></ul><h2 id="4-gradle-é¡¹ç›®ç›®å½•ç»“æ„"><a class="markdownIt-Anchor" href="#4-gradle-é¡¹ç›®ç›®å½•ç»“æ„"></a> 4. Gradle é¡¹ç›®ç›®å½•ç»“æ„</h2><ul><li>Gradle é¡¹ç›®é»˜è®¤ç›®å½•ç»“æ„å’ŒMavené¡¹ç›®çš„ç›®å½•ç»“æ„ä¸€è‡´,éƒ½æ˜¯åŸºäºçº¦å®šå¤§äºé…ç½®ã€ConventionOverConfigurationã€‘ã€‚</li><li>å…¶å®Œæ•´é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><p><img src="400f3a01323e4794aab1caac4af2aca1.png" alt="" /></p><p>Tips:</p><ol><li>åªæœ‰warå·¥ç¨‹æ‰æœ‰webappç›®å½•ï¼Œå¯¹äºæ™®é€šçš„jarå·¥ç¨‹å¹¶æ²¡æœ‰webappç›®å½•</li><li>gradlewä¸gradlew.batæ‰§è¡Œçš„æŒ‡å®šwrapperç‰ˆæœ¬ä¸­çš„gradleæŒ‡ä»¤,ä¸æ˜¯æœ¬åœ°å®‰è£…çš„gradleæŒ‡ä»¤ã€‚</li></ol><h2 id="5-gradle-åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®"><a class="markdownIt-Anchor" href="#5-gradle-åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®"></a> 5. Gradle åˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®</h2><ul><li>å€ŸåŠ©äºspringè„šæ‰‹æ¶åˆ›å»ºgradleç¬¬ä¸€ä¸ªé¡¹ç›®ï¼š<a href="https://start.spring.io">https://start.spring.io</a></li></ul><p><img src="afe959d75d5345b39ffe59b31f5400fd.png" alt="" /></p><ul><li>æŸ¥çœ‹ç”Ÿæˆçš„gradleé¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</li></ul><p><img src="58a84df098fa4ac69db15022514d42af.png" alt="" /></p><h2 id="6-gradle-ä¸­çš„å¸¸ç”¨æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#6-gradle-ä¸­çš„å¸¸ç”¨æŒ‡ä»¤"></a> 6. Gradle ä¸­çš„å¸¸ç”¨æŒ‡ä»¤</h2><p><img src="feed05f0fc5a40a28955d99bf134e02b.png" alt="" /></p><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šgradleçš„æŒ‡ä»¤è¦åœ¨å«æœ‰<code>build.gradle</code>çš„ç›®å½•æ‰§è¡Œã€‚</li></ul><h2 id="7-ä¿®æ”¹mavenä¸‹è½½æº"><a class="markdownIt-Anchor" href="#7-ä¿®æ”¹mavenä¸‹è½½æº"></a> 7. ä¿®æ”¹mavenä¸‹è½½æº</h2><ul><li>Gradleè‡ªå¸¦çš„Mavenæºåœ°å€æ˜¯å›½å¤–çš„ï¼Œè¯¥Mavenæºåœ¨å›½å†…çš„è®¿é—®é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ï¼Œé™¤éä½¿ç”¨äº†ç‰¹åˆ«çš„æ‰‹æ®µã€‚ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨å›½å†…çš„ç¬¬ä¸‰æ–¹å¼€æ”¾çš„Mavenæºæˆ–ä¼ä¸šå†…éƒ¨è‡ªå»ºMavenæºã€‚</li></ul><p>è®¤è¯†init.dæ–‡ä»¶å¤¹</p><ul><li>å¯ä»¥åœ¨gradleçš„init.dç›®å½•ä¸‹åˆ›å»ºä»¥.gradleç»“å°¾çš„æ–‡ä»¶ï¼Œ<code>.gradle</code>æ–‡ä»¶å¯ä»¥å®ç°åœ¨buildå¼€å§‹ä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é…ç½®ä¸€äº›ä½ æƒ³é¢„å…ˆåŠ è½½çš„æ“ä½œã€‚</li></ul><p>åœ¨<code>init.d</code>æ–‡ä»¶å¤¹åˆ›å»º<code>init.gradle</code>æ–‡ä»¶</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">allprojects&#123;</span><br><span class="line">repositories&#123;</span><br><span class="line">mavenLocal()</span><br><span class="line">maven&#123;name&quot;Alibaba&quot;;url&quot;https://maven.aliyun.com/repository/public&quot;&#125;</span><br><span class="line">maven&#123;name&quot;Bstek&quot;;url&quot;https://nexus.bsdn.org/content/groups/public/&quot;&#125;</span><br><span class="line">mavenCentral()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">buildscript&#123;</span><br><span class="line">repositories&#123;</span><br><span class="line">maven&#123;name&quot;Alibaba&quot;;url &#x27;https://maven.aliyun.com/repository/public&#x27;&#125;</span><br><span class="line">maven&#123;name&quot;Bstek&quot;;url &#x27;https://nexus.bsdn.org/content/groups/public/&#x27;&#125;</span><br><span class="line">maven&#123;name&quot;M2&quot;;url &#x27;https://plugins.gradle.org/m2/&#x27;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ‹“å±•1ï¼šå¯ç”¨init.gradleæ–‡ä»¶çš„æ–¹æ³•æœ‰ï¼š</li></ul><ol><li>åœ¨å‘½ä»¤è¡ŒæŒ‡å®šæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š<code>gradle--init-script yourdir/init.gradle -q taskName</code>ã€‚å¯ä»¥å¤šæ¬¡è¾“å…¥æ­¤å‘½ä»¤æ¥æŒ‡å®šå¤šä¸ª<code>init</code>æ–‡ä»¶</li><li>æŠŠ<code>init.gradle</code>æ–‡ä»¶æ”¾åˆ°<code>USER_HOME/.gradle/</code>ç›®å½•ä¸‹</li><li>æŠŠä»¥<code>.gradle</code>ç»“å°¾çš„æ–‡ä»¶æ”¾åˆ°<code>USER_HOME/.gradle/init.d/</code>ç›®å½•ä¸‹</li><li>æŠŠä»¥<code>.gradle</code>ç»“å°¾çš„æ–‡ä»¶æ”¾åˆ°<code>GRADLE_HOME/init.d/</code>ç›®å½•ä¸‹<br />å¦‚æœå­˜åœ¨ä¸Šé¢çš„4ç§æ–¹å¼çš„2ç§ä»¥ä¸Šï¼Œgradleä¼šæŒ‰ä¸Šé¢çš„1-4åºå·ä¾æ¬¡æ‰§è¡Œè¿™äº›æ–‡ä»¶ï¼Œå¦‚æœç»™å®šç›®å½•ä¸‹å­˜åœ¨å¤šä¸ªinitè„šæœ¬ï¼Œä¼šæŒ‰æ‹¼éŸ³a-zé¡ºåºæ‰§è¡Œè¿™äº›è„šæœ¬ï¼Œæ¯ä¸ªinitè„šæœ¬éƒ½å­˜åœ¨ä¸€ä¸ªå¯¹åº”çš„gradleå®ä¾‹ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è°ƒç”¨çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œéƒ½ä¼šå§”æ‰˜ç»™è¿™ä¸ªgradleå®ä¾‹ï¼Œæ¯ä¸ªinitè„šæœ¬éƒ½å®ç°äº†Scriptæ¥å£ã€‚</li></ol><ul><li>æ‹“å±•2ï¼šä»“åº“åœ°å€è¯´æ˜</li></ul><ol><li><p><code>mavenLocal()</code>:æŒ‡å®šä½¿ç”¨mavenæœ¬åœ°ä»“åº“ï¼Œè€Œæœ¬åœ°ä»“åº“åœ¨é…ç½®mavenæ—¶settingsæ–‡ä»¶æŒ‡å®šçš„ä»“åº“ä½ç½®ã€‚å¦‚<code>E:/repository</code>ï¼Œ</p></li><li><p>gradleæŸ¥æ‰¾jaråŒ…é¡ºåºå¦‚ä¸‹ï¼š<code>USER_HOME/.m2/settings.xml&gt;&gt;M2_HOME/conf/settings.xml&gt;&gt;USER_HOME/.m2/repository</code></p><p>maven{urlåœ°å€}ï¼ŒæŒ‡å®šmavenä»“åº“ï¼Œä¸€èˆ¬ç”¨ç§æœ‰ä»“åº“åœ°å€æˆ–å…¶å®ƒçš„ç¬¬ä¸‰æ–¹åº“ã€æ¯”å¦‚é˜¿é‡Œé•œåƒä»“åº“åœ°å€ã€‘ã€‚<br />mavenCentral()ï¼šè¿™æ˜¯Mavençš„ä¸­å¤®ä»“åº“ï¼Œæ— éœ€é…ç½®ï¼Œç›´æ¥å£°æ˜å°±å¯ä»¥ä½¿ç”¨ã€‚<br />jcenter():JCenterä¸­å¤®ä»“åº“ï¼Œå®é™…ä¹Ÿæ˜¯æ˜¯ç”¨çš„mavenæ­å»ºçš„ï¼Œä½†ç›¸æ¯”Mavenä»“åº“æ›´å‹å¥½ï¼Œé€šè¿‡CDNåˆ†å‘ï¼Œå¹¶ä¸”æ”¯æŒhttpsè®¿<br />é—®ï¼Œåœ¨æ–°ç‰ˆæœ¬ä¸­å·²ç»åºŸå¼ƒäº†ï¼Œæ›¿æ¢ä¸ºäº†mavenCentral()ã€‚</p></li></ol><blockquote><p>æ€»ä¹‹ï¼Œgradleå¯ä»¥é€šè¿‡æŒ‡å®šä»“åº“åœ°å€ä¸ºæœ¬åœ°mavenä»“åº“åœ°å€å’Œè¿œç¨‹ä»“åº“åœ°å€ç›¸ç»“åˆçš„æ–¹å¼ï¼Œé¿å…æ¯æ¬¡éƒ½ä¼šå»è¿œç¨‹ä»“åº“ä¸‹è½½ä¾èµ–åº“ã€‚è¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€å®šçš„é—®é¢˜ï¼Œå¦‚æœæœ¬åœ°mavenä»“åº“æœ‰è¿™ä¸ªä¾èµ–ï¼Œå°±ä¼šä»ç›´æ¥åŠ è½½æœ¬åœ°ä¾èµ–ï¼Œå¦‚æœæœ¬åœ°ä»“åº“æ²¡æœ‰è¯¥<br />ä¾èµ–ï¼Œé‚£ä¹ˆè¿˜æ˜¯ä¼šä»è¿œç¨‹ä¸‹è½½ã€‚ä½†æ˜¯ä¸‹è½½çš„jarä¸æ˜¯å­˜å‚¨åœ¨æœ¬åœ°mavenä»“åº“ä¸­ï¼Œè€Œæ˜¯æ”¾åœ¨è‡ªå·±çš„ç¼“å­˜ç›®å½•ä¸­ï¼Œé»˜è®¤åœ¨<code>USER_HOME/.gradle/caches</code>ç›®å½•ï¼Œå½“ç„¶å¦‚æœæˆ‘ä»¬é…ç½®è¿‡<code>GRADLE_USER_HOME</code>ç¯å¢ƒå˜é‡ï¼Œåˆ™ä¼šæ”¾åœ¨<code>GRADLE_USER_HOME/caches</code>ç›®å½•ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥å°†<code>gradle caches</code>æŒ‡å‘<code>mavenrepository</code>ã€‚æˆ‘ä»¬è¯´è¿™æ˜¯ä¸è¡Œçš„ï¼Œcachesä¸‹è½½<br />æ–‡ä»¶ä¸æ˜¯æŒ‰ç…§mavenä»“åº“ä¸­å­˜æ”¾çš„æ–¹å¼ã€‚</p></blockquote><ul><li>æ‹“å±•3ï¼šé˜¿é‡Œäº‘ä»“åº“åœ°å€è¯·å‚è€ƒï¼š<a href="https://developer.aliyun.com/mvn/guide">https://developer.aliyun.com/mvn/guide</a></li></ul><blockquote><p>åœ¨gradle ä¸­çš„ä½¿ç”¨è¯´æ˜ï¼š</p></blockquote><p><img src="4bbfd15ee99148d19f67091d297e08eb.png" alt="" /></p><h2 id="8-wrapper-åŒ…è£…å™¨"><a class="markdownIt-Anchor" href="#8-wrapper-åŒ…è£…å™¨"></a> 8. Wrapper åŒ…è£…å™¨</h2><ul><li><p>Gradle Wrapper å®é™…ä¸Šå°±æ˜¯å¯¹Gradleçš„ä¸€å±‚åŒ…è£…ï¼Œç”¨äºè§£å†³å®é™…å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°çš„ä¸åŒçš„é¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„Gradleé—®é¢˜ã€‚ä¾‹å¦‚ï¼šæŠŠè‡ªå·±çš„ä»£ç å…±äº«ç»™å…¶ä»–äººä½¿ç”¨ï¼Œå¯èƒ½å‡ºç°å¦‚ä¸‹æƒ…å†µ:</p><p>1.å¯¹æ–¹ç”µè„‘æ²¡æœ‰å®‰è£… gradle<br />2.å¯¹æ–¹ç”µè„‘å®‰è£…è¿‡ gradleï¼Œä½†æ˜¯ç‰ˆæœ¬å¤ªæ—§äº†</p></li><li><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨<code>Gradle Wrapper</code>äº†ã€‚è¿™ä¹Ÿæ˜¯å®˜æ–¹å»ºè®®ä½¿ç”¨<code>Gradle Wrapper</code>çš„åŸå› ã€‚å®é™…ä¸Šæœ‰äº†<code>Gradle Wrapper</code> ä¹‹åï¼Œæˆ‘ä»¬æœ¬åœ°æ˜¯å¯ä»¥ä¸é…ç½®Gradleçš„ï¼Œä¸‹è½½Gradleé¡¹ç›®åï¼Œä½¿ç”¨gradleé¡¹ç›®è‡ªå¸¦çš„wrapperæ“ä½œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p></li><li><p>é‚£å¦‚ä½•ä½¿ç”¨GradleWrapperå‘¢ï¼Ÿ</p></li></ul><blockquote><p>é¡¹ç›®ä¸­çš„gradlewã€gradlew.cmdè„šæœ¬ç”¨çš„å°±æ˜¯wrapperä¸­è§„å®šçš„gradleç‰ˆæœ¬ã€‚å‚è§æºç <br />è€Œæˆ‘ä»¬ä¸Šé¢æåˆ°çš„gradleæŒ‡ä»¤ç”¨çš„æ˜¯æœ¬åœ°gradleï¼Œæ‰€ä»¥gradleæŒ‡ä»¤å’ŒgradlewæŒ‡ä»¤æ‰€ä½¿ç”¨çš„gradleç‰ˆæœ¬æœ‰å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚<br />gradlewã€gradlew.cmdçš„ä½¿ç”¨æ–¹å¼ä¸gradleä½¿ç”¨æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œåªä¸è¿‡æŠŠgradleæŒ‡ä»¤æ¢æˆäº†gradlewæŒ‡ä»¤ã€‚</p></blockquote><ul><li>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯åœ¨ç»ˆç«¯æ‰§è¡Œ <code>gradlew</code> æŒ‡ä»¤æ—¶ï¼ŒæŒ‡å®šæŒ‡å®šä¸€äº›å‚æ•°ï¼Œæ¥æ§åˆ¶<code>Wrapper</code>çš„ç”Ÿæˆï¼Œæ¯”å¦‚ä¾èµ–çš„ç‰ˆæœ¬ç­‰ï¼Œå¦‚ä¸‹ï¼š</li></ul><p><img src="a0bfc4b91b4744d4b03986f0b6f15f53.png" alt="" /></p><ul><li>å…·ä½“æ“ä½œå¦‚ä¸‹æ‰€ç¤º ï¼š<br />1ã€<code>gradle wrapper--gradle-version=4.4</code>ï¼šå‡çº§wrapperç‰ˆæœ¬å·ï¼Œåªæ˜¯ä¿®æ”¹<code>gradle.properties</code>ä¸­<code>wrapper</code>ç‰ˆæœ¬ï¼Œæœªå®é™…ä¸‹è½½<br />2ã€<code>gradle wrapper--gradle-version 5.2.1--distribution-type all</code> ï¼šå…³è”æºç ç”¨</li></ul><p><strong>GradleWrapperçš„æ‰§è¡Œæµç¨‹ï¼š</strong></p><ol><li>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰§è¡Œ <code>./gradlewbuild</code> å‘½ä»¤çš„æ—¶å€™ï¼Œ<code>gradlew</code> ä¼šè¯»å– <code>gradle-wrapper.properties</code> æ–‡ä»¶çš„é…ç½®ä¿¡æ¯</li><li>å‡†ç¡®çš„å°†æŒ‡å®šç‰ˆæœ¬çš„ <code>gradle</code> ä¸‹è½½å¹¶è§£å‹åˆ°æŒ‡å®šçš„ä½ç½®(<code>GRADLE_USER_HOME</code>ç›®å½•ä¸‹çš„<code>wrapper/dists</code>ç›®å½•ä¸­)</li><li>å¹¶æ„å»ºæœ¬åœ°ç¼“å­˜(<code>GRADLE_USER_HOME</code>ç›®å½•ä¸‹çš„<code>caches</code>ç›®å½•ä¸­)ï¼Œä¸‹è½½å†ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„<code>gradle</code>å°±ä¸ç”¨ä¸‹è½½äº†</li><li>ä¹‹åæ‰§è¡Œçš„ <code>./gradlew</code> æ‰€æœ‰å‘½ä»¤éƒ½æ˜¯ä½¿ç”¨æŒ‡å®šçš„ <code>gradle</code> ç‰ˆæœ¬ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li></ol><p><img src="46dc09f055c64badbc1cece4707dca2c.png" alt="" /></p><p><code>gradle-wrapper.properties</code> æ–‡ä»¶è§£è¯»ï¼š</p><p><img src="1b69c93804164cbf8f2f1a7d0dd035be.png" alt="" /><br />æ³¨æ„ï¼šå‰é¢æåˆ°çš„<code>GRALE_USER_HOME</code>ç¯å¢ƒå˜é‡ç”¨äºè¿™é‡Œçš„<code>Gradle Wrapper</code>ä¸‹è½½çš„ç‰¹å®šç‰ˆæœ¬çš„gradleå­˜å‚¨ç›®å½•ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®è¿‡<code>GRALE_USER_HOME</code>ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤åœ¨å½“å‰ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„<code>.gradle</code>æ–‡ä»¶å¤¹ä¸­</p><p><strong>é‚£ä»€ä¹ˆæ—¶å€™é€‰æ‹©ä½¿ç”¨gradlewrapperã€ä»€ä¹ˆæ—¶å€™é€‰æ‹©ä½¿ç”¨æœ¬åœ°gradle?</strong></p><ul><li>ä¸‹è½½åˆ«äººçš„é¡¹ç›®æˆ–è€…ä½¿ç”¨æ“ä½œä»¥å‰è‡ªå·±å†™çš„ä¸åŒç‰ˆæœ¬çš„gradleé¡¹ç›®æ—¶ï¼šç”¨<code>Gradle wrapper</code>ï¼Œä¹Ÿå³ï¼š<code>gradlew</code></li><li>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æœ¬åœ°<code>gradle</code>ï¼Ÿæ–°å»ºä¸€ä¸ªé¡¹ç›®æ—¶: ä½¿ç”¨<code>gradle</code>æŒ‡ä»¤å³å¯</li></ul>]]></content>
    
    
    <summary type="html">Gradle å®‰è£…å’Œä¸‹è½½</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot éƒ¨ç½²ä¸æ‰“åŒ…æ–¹å¼è¯¦è§£ï¼ˆJar vs Warï¼‰</title>
    <link href="http://www.formeasy.cc/2025/08/25/Springboot/Spring%20Boot%20%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F%E8%AF%A6%E8%A7%A3%EF%BC%88Jar%20vs%20War%EF%BC%89/"/>
    <id>http://www.formeasy.cc/2025/08/25/Springboot/Spring%20Boot%20%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F%E8%AF%A6%E8%A7%A3%EF%BC%88Jar%20vs%20War%EF%BC%89/</id>
    <published>2025-08-25T06:02:41.000Z</published>
    <updated>2025-08-25T06:11:12.304Z</updated>
    
    <content type="html"><![CDATA[<p>Spring Boot æä¾›äº†çµæ´»çš„æ‰“åŒ…é€‰é¡¹ï¼Œæ”¯æŒä¸¤ç§ä¸»è¦éƒ¨ç½²æ–¹å¼ï¼š<strong>å¯æ‰§è¡Œ JAR</strong> å’Œ <strong>ä¼ ç»Ÿ WAR</strong>ã€‚ä»¥ä¸‹æ˜¯å…¨é¢çš„å¯¹æ¯”ä¸å®è·µæŒ‡å—ï¼Œå¸®åŠ©ä½ æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„éƒ¨ç½²æ–¹æ¡ˆã€‚</p><hr /><h3 id="ä¸€-æ‰“åŒ…æ–¹å¼å¯¹æ¯”"><a class="markdownIt-Anchor" href="#ä¸€-æ‰“åŒ…æ–¹å¼å¯¹æ¯”"></a> ğŸ“¦ ä¸€ã€æ‰“åŒ…æ–¹å¼å¯¹æ¯”</h3><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>å¯æ‰§è¡Œ JAR (é»˜è®¤)</strong></th><th><strong>ä¼ ç»Ÿ WAR</strong></th></tr></thead><tbody><tr><td><strong>å¯åŠ¨æ–¹å¼</strong></td><td><code>java -jar app.jar</code></td><td>éƒ¨ç½²åˆ°å¤–éƒ¨ Servlet å®¹å™¨ (å¦‚ Tomcat)</td></tr><tr><td><strong>å†…åµŒæœåŠ¡å™¨</strong></td><td>âœ… åŒ…å« Tomcat/Jetty/Undertow</td><td>âŒ éœ€å¤–éƒ¨å®¹å™¨</td></tr><tr><td><strong>éƒ¨ç½²å¤æ‚åº¦</strong></td><td>â­ æç®€ (å•æ–‡ä»¶éƒ¨ç½²)</td><td>â­â­â­ éœ€å®¹å™¨ç¯å¢ƒ</td></tr><tr><td><strong>ä¾èµ–ç®¡ç†</strong></td><td>æ‰€æœ‰ä¾èµ–æ‰“åŒ…è¿›å•ä¸ª FAT JAR</td><td>ä¾èµ–ç”±å®¹å™¨ç®¡ç† (éƒ¨åˆ†ä¾èµ–å¯æ‰“åŒ…è¿› WAR)</td></tr><tr><td><strong>çƒ­æ›´æ–°</strong></td><td>éœ€ç¬¬ä¸‰æ–¹å·¥å…· (JRebel)</td><td>æ”¯æŒå®¹å™¨çº§çƒ­éƒ¨ç½²</td></tr><tr><td><strong>ç”Ÿäº§é€‚ç”¨åœºæ™¯</strong></td><td>å¾®æœåŠ¡/äº‘åŸç”Ÿç¯å¢ƒ</td><td>ä¼ ç»Ÿä¼ä¸šçº§åº”ç”¨æœåŠ¡å™¨ç¯å¢ƒ</td></tr><tr><td><strong>æ–‡ä»¶å¤§å°</strong></td><td>è¾ƒå¤§ (åŒ…å«å†…åµŒå®¹å™¨)</td><td>è¾ƒå° (ä»…åº”ç”¨ä»£ç )</td></tr></tbody></table><hr /><h3 id="ï¸-äºŒ-jar-æ‰“åŒ…éƒ¨ç½²-é»˜è®¤æ–¹å¼"><a class="markdownIt-Anchor" href="#ï¸-äºŒ-jar-æ‰“åŒ…éƒ¨ç½²-é»˜è®¤æ–¹å¼"></a> ğŸ› ï¸ äºŒã€JAR æ‰“åŒ…éƒ¨ç½² (é»˜è®¤æ–¹å¼)</h3><h4 id="1-æ‰“åŒ…é…ç½®-maven"><a class="markdownIt-Anchor" href="#1-æ‰“åŒ…é…ç½®-maven"></a> 1. æ‰“åŒ…é…ç½® (Maven)</h4><p>ç¡®ä¿ä½ çš„ <code>pom.xml</code> æ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹æ’ä»¶é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-æ‰“åŒ…å‘½ä»¤"><a class="markdownIt-Anchor" href="#2-æ‰“åŒ…å‘½ä»¤"></a> 2. æ‰“åŒ…å‘½ä»¤</h4><p>ä½¿ç”¨ Maven è¿›è¡Œæ„å»ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package</span><br><span class="line"><span class="comment"># ç”Ÿæˆ target/appname-0.0.1-SNAPSHOT.jar</span></span><br></pre></td></tr></table></figure><h4 id="3-è¿è¡Œæ–¹å¼"><a class="markdownIt-Anchor" href="#3-è¿è¡Œæ–¹å¼"></a> 3. è¿è¡Œæ–¹å¼</h4><p>å¯ä»¥é‡‡ç”¨å¤šç§æ–¹å¼è¿è¡Œ JAR æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ‡å‡†å¯åŠ¨</span></span><br><span class="line">java -jar app.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¦é…ç½®æ–‡ä»¶å¯åŠ¨</span></span><br><span class="line">java -jar -Dspring.profiles.active=prod app.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†…å­˜é™åˆ¶å¯åŠ¨</span></span><br><span class="line">java -Xms512m -Xmx1024m -jar app.jar</span><br></pre></td></tr></table></figure><h4 id="4-ç”Ÿäº§ç¯å¢ƒå¢å¼º"><a class="markdownIt-Anchor" href="#4-ç”Ÿäº§ç¯å¢ƒå¢å¼º"></a> 4. ç”Ÿäº§ç¯å¢ƒå¢å¼º</h4><p>ä¸ºäº†æ›´å¥½åœ°é€‚åº”ç”Ÿäº§ç¯å¢ƒï¼Œä½ å¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š</p><ul><li><strong>ç³»ç»ŸæœåŠ¡åŒ– (Systemd)</strong>:</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Spring Boot Service</span><br><span class="line">After=syslog.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=appuser</span><br><span class="line">ExecStart=/usr/bin/java -jar /opt/app/app.jar</span><br><span class="line">SuccessExitStatus=143</span><br></pre></td></tr></table></figure><ul><li><strong>å¯åŠ¨è„šæœ¬å°è£… (å¸¦æ—¥å¿—åˆ†å‰²)</strong>:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> java -jar app.jar &gt; app.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><hr /><h3 id="ä¸‰-war-æ‰“åŒ…éƒ¨ç½²-ä¼ ç»Ÿæ–¹å¼"><a class="markdownIt-Anchor" href="#ä¸‰-war-æ‰“åŒ…éƒ¨ç½²-ä¼ ç»Ÿæ–¹å¼"></a> ğŸ§© ä¸‰ã€WAR æ‰“åŒ…éƒ¨ç½² (ä¼ ç»Ÿæ–¹å¼)</h3><h4 id="1-ä¿®æ”¹æ‰“åŒ…ç±»å‹"><a class="markdownIt-Anchor" href="#1-ä¿®æ”¹æ‰“åŒ…ç±»å‹"></a> 1. ä¿®æ”¹æ‰“åŒ…ç±»å‹</h4><p>é¦–å…ˆï¼Œåœ¨ <code>pom.xml</code> ä¸­å°† <code>&lt;packaging&gt;</code> ä¿®æ”¹ä¸º <code>war</code>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-æ’é™¤å†…åµŒå®¹å™¨-tomcat"><a class="markdownIt-Anchor" href="#2-æ’é™¤å†…åµŒå®¹å™¨-tomcat"></a> 2. æ’é™¤å†…åµŒå®¹å™¨ (<a href="https://so.csdn.net/so/search?q=Tomcat&amp;spm=1001.2101.3001.7020">Tomcat</a>)</h4><p>ç”±äº WAR æ–‡ä»¶éœ€è¦éƒ¨ç½²åˆ°å¤–éƒ¨å®¹å™¨ä¸­ï¼Œå› æ­¤éœ€è¦æ’é™¤å†…ç½®çš„ Tomcatï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-åˆå§‹åŒ–-servlet-å…¥å£"><a class="markdownIt-Anchor" href="#3-åˆå§‹åŒ–-servlet-å…¥å£"></a> 3. åˆå§‹åŒ– Servlet å…¥å£</h4><p>ä¿®æ”¹ä¸»ç±»ä»¥ç»§æ‰¿ <code>SpringBootServletInitializer</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> <span class="keyword">extends</span> <span class="title class_">SpringBootServletInitializer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> SpringApplicationBuilder <span class="title function_">configure</span><span class="params">(SpringApplicationBuilder builder)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> builder.sources(Application.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-æ„å»ºä¸éƒ¨ç½²"><a class="markdownIt-Anchor" href="#4-æ„å»ºä¸éƒ¨ç½²"></a> 4. æ„å»ºä¸éƒ¨ç½²</h4><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œæ‰§è¡Œæ‰“åŒ…å‘½ä»¤å¹¶éƒ¨ç½²åˆ° Tomcatï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package</span><br><span class="line"><span class="comment"># ç”Ÿæˆ target/appname-0.0.1-SNAPSHOT.war</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éƒ¨ç½²åˆ° Tomcat</span></span><br><span class="line"><span class="built_in">cp</span> target/app.war <span class="variable">$TOMCAT_HOME</span>/webapps/</span><br></pre></td></tr></table></figure><hr /><h3 id="ï¸-å››-äº‘åŸç”Ÿéƒ¨ç½²æœ€ä½³å®è·µ"><a class="markdownIt-Anchor" href="#ï¸-å››-äº‘åŸç”Ÿéƒ¨ç½²æœ€ä½³å®è·µ"></a> â˜ï¸ å››ã€äº‘åŸç”Ÿéƒ¨ç½²æœ€ä½³å®è·µ</h3><h4 id="1-docker-å®¹å™¨åŒ–éƒ¨ç½²-jar-æ–¹å¼"><a class="markdownIt-Anchor" href="#1-docker-å®¹å™¨åŒ–éƒ¨ç½²-jar-æ–¹å¼"></a> 1. Docker å®¹å™¨åŒ–éƒ¨ç½² (JAR æ–¹å¼)</h4><p>ç¼–å†™ Dockerfile æ¥åˆ›å»ºé•œåƒï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">17</span>-jre</span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /tmp</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> target/*.jar app.jar</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ„å»ºå’Œè¿è¡Œ Docker é•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t myapp:1.0 .</span><br><span class="line">docker run -d -p 8080:8080 myapp:1.0</span><br></pre></td></tr></table></figure><h4 id="2-å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒ"><a class="markdownIt-Anchor" href="#2-å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒ"></a> 2. å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒ</h4><p>åˆ©ç”¨å¤šé˜¶æ®µæ„å»ºæ¥å‡å°æœ€ç»ˆé•œåƒä½“ç§¯ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é˜¶æ®µ1ï¼šæ„å»ºåº”ç”¨</span></span><br><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.8</span>.<span class="number">6</span> AS build</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> src /app/src</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> pom.xml /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn -f /app/pom.xml clean package</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜¶æ®µ2ï¼šè¿è¡Œé•œåƒ</span></span><br><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">17</span>-jre-alpine</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build /app/target/*.jar app.jar</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;/app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure><h4 id="3-kubernetes-éƒ¨ç½²"><a class="markdownIt-Anchor" href="#3-kubernetes-éƒ¨ç½²"></a> 3. Kubernetes éƒ¨ç½²</h4><p>å®šä¹‰ Deployment å’Œ Service YAML æ–‡ä»¶æ¥è¿›è¡Œ Kubernetes éƒ¨ç½²ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">springboot-app</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">springboot</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">springboot</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">myregistry/springboot-app:1.0</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SPRING_PROFILES_ACTIVE</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">prod</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># service.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">springboot-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">springboot</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><hr /><h3 id="ï¸-äº”-å…³é”®æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#ï¸-äº”-å…³é”®æ³¨æ„äº‹é¡¹"></a> âš ï¸ äº”ã€å…³é”®æ³¨æ„äº‹é¡¹</h3><ol><li><p><strong>é™æ€èµ„æºå¤„ç†</strong><br />JAR æ¨¡å¼ï¼šèµ„æºæ”¾åœ¨ <code>src/main/resources/static</code><br />WAR æ¨¡å¼ï¼šèµ„æºæ”¾åœ¨ <code>src/main/webapp</code></p></li><li><p><strong>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</strong><br />Spring Boot åŠ è½½é¡ºåºï¼š</p><ol><li>jar å†…éƒ¨ application.properties</li><li>jar åŒçº§ /config/ ç›®å½•</li><li>jar åŒçº§ç›®å½•</li><li>ç±»è·¯å¾„ /config</li><li>ç±»è·¯å¾„æ ¹ç›®å½•</li></ol></li><li><p><strong>ä¸Šä¸‹æ–‡è·¯å¾„è®¾ç½®</strong><br />JAR æ¨¡å¼ï¼š<code>server.servlet.context-path=/api</code><br />WAR æ¨¡å¼ï¼šé€šè¿‡å®¹å™¨è®¾ç½®æˆ– <code>application.properties</code></p></li><li><p><strong>ç«¯å£å†²çªè§£å†³</strong></p></li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># é¿å…ä¸å®¹å™¨ç«¯å£å†²çª</span><br><span class="line">server.port=8081</span><br></pre></td></tr></table></figure><ol start="5"><li><strong>WAR éƒ¨ç½²å¸¸è§é—®é¢˜</strong><br />ç±»å†²çªï¼šä½¿ç”¨ <code>&lt;scope&gt;provided&lt;/scope&gt;</code> æ’é™¤å®¹å™¨å·²æœ‰åº“<br />è·¯å¾„é”™è¯¯ï¼šç¡®ä¿ <code>SpringBootServletInitializer</code> æ­£ç¡®é…ç½®</li></ol><hr /><h3 id="å…­-éƒ¨ç½²å†³ç­–æ ‘"><a class="markdownIt-Anchor" href="#å…­-éƒ¨ç½²å†³ç­–æ ‘"></a> ğŸ” å…­ã€éƒ¨ç½²å†³ç­–æ ‘</h3><p><img src="01125e7e4a6a4e15a89621e77e8e69fe.png" alt="" /></p><hr /><h3 id="ä¸ƒ-é«˜çº§éƒ¨ç½²æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#ä¸ƒ-é«˜çº§éƒ¨ç½²æ–¹æ¡ˆ"></a> ğŸš€ ä¸ƒã€é«˜çº§éƒ¨ç½²æ–¹æ¡ˆ</h3><ol><li><strong>æ€§èƒ½ä¼˜åŒ–å¯åŠ¨</strong></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯ AOT ä¼˜åŒ– (Spring Boot 3+)</span></span><br><span class="line">java -Dspring.aot.enabled=<span class="literal">true</span> -jar app.jar</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>GraalVM åŸç”Ÿé•œåƒ</strong></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éœ€é…ç½® spring-boot-starter-parent 3.x</span></span><br><span class="line">mvn native:compile -Pnative</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>è“ç»¿éƒ¨ç½²æ–¹æ¡ˆ</strong></li></ol><p><img src="01125e7e4a6a4e15a89621e77e8e69ff.png" alt="" /></p><ol start="4"><li><strong>å¥åº·æ£€æŸ¥ç«¯ç‚¹</strong></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">probes:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¯ç”¨K8så°±ç»ª/å­˜æ´»æ£€æŸ¥</span></span><br><span class="line">  <span class="attr">health:</span></span><br><span class="line">    <span class="attr">livenessstate:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">readinessstate:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><hr /><h3 id="æ€»ç»“å»ºè®®"><a class="markdownIt-Anchor" href="#æ€»ç»“å»ºè®®"></a> ğŸ’ æ€»ç»“å»ºè®®</h3><ul><li><strong>ä¼˜å…ˆé€‰æ‹© JAR</strong>: å¯¹äºå¤§å¤šæ•°å¾®æœåŠ¡å’Œäº‘åŸç”Ÿåº”ç”¨æ¥è¯´ï¼ŒJAR æ˜¯ç†æƒ³çš„é€‰æ‹©ã€‚</li><li><strong>é€‰æ‹© WAR å½“</strong>: éœ€è¦ä¸é—ç•™ç³»ç»Ÿé›†æˆæˆ–å¿…é¡»åœ¨ç‰¹å®šåº”ç”¨æœåŠ¡å™¨ä¸Šè¿è¡Œæ—¶è€ƒè™‘ä½¿ç”¨ WARã€‚</li></ul>]]></content>
    
    
    <summary type="html">Spring Boot éƒ¨ç½²ä¸æ‰“åŒ…æ–¹å¼è¯¦è§£ï¼ˆJar vs Warï¼‰</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>AIæ¢ç´¢å¤§æ¨¡å‹æƒé‡çš„åˆ†ç±»ï¼šChatã€Codeã€Embeddingå’ŒRerank</title>
    <link href="http://www.formeasy.cc/2025/08/25/LLM/AI%E6%8E%A2%E7%B4%A2%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%9D%83%E9%87%8D%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9AChat%E3%80%81Code%E3%80%81Embedding%E5%92%8CRerank/"/>
    <id>http://www.formeasy.cc/2025/08/25/LLM/AI%E6%8E%A2%E7%B4%A2%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%9D%83%E9%87%8D%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9AChat%E3%80%81Code%E3%80%81Embedding%E5%92%8CRerank/</id>
    <published>2025-08-25T02:46:21.000Z</published>
    <updated>2025-08-25T02:51:52.672Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æœºå™¨å­¦ä¹ å’Œè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸï¼Œå¤§æ¨¡å‹ï¼ˆå¦‚GPT-3ã€BERTç­‰ï¼‰å·²ç»æˆä¸ºäº†å¼ºå¤§ä¸”å¹¿æ³›åº”ç”¨çš„å·¥å…·ã€‚å¤§æ¨¡å‹çš„æƒé‡é€šå¸¸å¯ä»¥æ ¹æ®å…¶åº”ç”¨åœºæ™¯åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œå¦‚Chatã€Codeã€Embeddingå’ŒRerankã€‚äº†è§£è¿™äº›åˆ†ç±»åŠå…¶å·®å¼‚å¯¹äºæˆ‘ä»¬åœ¨å®é™…åº”ç”¨ä¸­é€‰æ‹©åˆé€‚çš„æ¨¡å‹è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†è®²è§£è¿™å››ç§æƒé‡åˆ†ç±»ï¼Œå¹¶è¯´æ˜å®ƒä»¬çš„å·®å¼‚ã€‚</p><p><img src="ca10ab6a4e4404fde0c4560c150f4d26.png" alt="" /></p><h5 id="1-chatå¯¹è¯"><a class="markdownIt-Anchor" href="#1-chatå¯¹è¯"></a> 1. Chatï¼ˆå¯¹è¯ï¼‰</h5><p>Chatæ¨¡å‹ä¸“æ³¨äºå¯¹è¯ç”Ÿæˆå’Œè‡ªç„¶è¯­è¨€ç†è§£ã€‚è¿™äº›æ¨¡å‹ç»è¿‡ä¸“é—¨è®­ç»ƒï¼Œèƒ½å¤Ÿç†è§£å¹¶ç”Ÿæˆè¿è´¯ã€è‡ªç„¶çš„å¯¹è¯ã€‚Chatæ¨¡å‹é€šå¸¸ç”¨äºå®¢æœæœºå™¨äººã€è™šæ‹ŸåŠ©æ‰‹ç­‰åœºæ™¯ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>è‡ªç„¶è¯­è¨€ç”Ÿæˆï¼šèƒ½å¤Ÿç”Ÿæˆæµç•…ä¸”æœ‰æ„ä¹‰çš„å¯¹è¯ã€‚</li><li>ä¸Šä¸‹æ–‡ç†è§£ï¼šèƒ½å¤Ÿè®°ä½å¯¹è¯çš„ä¸Šä¸‹æ–‡å¹¶è¿›è¡Œç›¸å…³çš„å›ç­”ã€‚</li><li>äººæ€§åŒ–äº¤äº’ï¼šä¸ç”¨æˆ·è¿›è¡Œç±»äººäº’åŠ¨ï¼Œæä¾›å‹å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>åœ¨çº¿å®¢æœ</li><li>æ™ºèƒ½åŠ©æ‰‹ï¼ˆå¦‚Siriã€Alexaï¼‰</li><li>ç¤¾äº¤åª’ä½“èŠå¤©æœºå™¨äºº</li></ul><h5 id="2-codeä»£ç "><a class="markdownIt-Anchor" href="#2-codeä»£ç "></a> 2. Codeï¼ˆä»£ç ï¼‰</h5><p>Codeæ¨¡å‹ä¸“æ³¨äºä»£ç ç”Ÿæˆå’Œç†è§£ã€‚è¿™äº›æ¨¡å‹å¯ä»¥å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨è¡¥å…¨ä»£ç ã€ç”Ÿæˆä»£ç ç‰‡æ®µã€ä¿®å¤ä»£ç é”™è¯¯ç­‰ã€‚Codeæ¨¡å‹åœ¨é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä»£ç ç”Ÿæˆï¼šæ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆç›¸åº”çš„ä»£ç ç‰‡æ®µã€‚</li><li>é”™è¯¯æ£€æµ‹ä¸ä¿®å¤ï¼šè¯†åˆ«ä»£ç ä¸­çš„é”™è¯¯å¹¶æä¾›ä¿®å¤å»ºè®®ã€‚</li><li>ä»£ç è¡¥å…¨ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨è¡¥å…¨ä»£ç ï¼ŒèŠ‚çœæ—¶é—´ã€‚</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>é›†æˆå¼€å‘ç¯å¢ƒï¼ˆå¦‚VS Codeçš„Copilotï¼‰</li><li>ä»£ç å®¡æŸ¥å·¥å…·</li><li>è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆ</li></ul><h5 id="3-embeddingåµŒå…¥"><a class="markdownIt-Anchor" href="#3-embeddingåµŒå…¥"></a> 3. Embeddingï¼ˆåµŒå…¥ï¼‰</h5><p>Embeddingæ¨¡å‹ä¸“æ³¨äºå°†æ–‡æœ¬ã€å›¾åƒæˆ–å…¶ä»–æ•°æ®è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„å‘é‡è¡¨ç¤ºã€‚è¿™äº›å‘é‡è¡¨ç¤ºä¿ç•™äº†æ•°æ®çš„è¯­ä¹‰ä¿¡æ¯ï¼Œä¾¿äºåç»­çš„ç›¸ä¼¼åº¦è®¡ç®—ã€åˆ†ç±»ç­‰ä»»åŠ¡ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>è¯­ä¹‰è¡¨ç¤ºï¼šå°†æ•°æ®è½¬æ¢ä¸ºä¿ç•™è¯­ä¹‰ä¿¡æ¯çš„å‘é‡ã€‚</li><li>é«˜æ•ˆè®¡ç®—ï¼šå‘é‡è¡¨ç¤ºä¾¿äºåœ¨å¤§è§„æ¨¡æ•°æ®ä¸Šè¿›è¡Œé«˜æ•ˆè®¡ç®—ã€‚</li><li>é€šç”¨æ€§ï¼šå¯ä»¥åº”ç”¨äºå¤šç§æ•°æ®ç±»å‹ï¼Œå¦‚æ–‡æœ¬ã€å›¾åƒç­‰ã€‚</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—</li><li>å›¾åƒæ£€ç´¢</li><li>èšç±»åˆ†æ</li></ul><h5 id="4-reranké‡æ–°æ’åº"><a class="markdownIt-Anchor" href="#4-reranké‡æ–°æ’åº"></a> 4. Rerankï¼ˆé‡æ–°æ’åºï¼‰</h5><p>Rerankæ¨¡å‹ç”¨äºå¯¹åˆæ­¥æ£€ç´¢ç»“æœè¿›è¡Œé‡æ–°æ’åºï¼Œä»¥æé«˜æ£€ç´¢ç³»ç»Ÿçš„ç²¾åº¦ã€‚è¿™äº›æ¨¡å‹é€šå¸¸ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯å’Œç”¨æˆ·æ„å›¾ï¼Œå¯¹åˆæ­¥æ£€ç´¢åˆ°çš„ç»“æœè¿›è¡Œæ’åºä¼˜åŒ–ï¼Œæä¾›æ›´ç›¸å…³çš„ç»“æœã€‚</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ä¸Šä¸‹æ–‡æ•æ„Ÿï¼šç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯è¿›è¡Œç»“æœæ’åºã€‚</li><li>ç”¨æˆ·æ„å›¾ï¼šç†è§£ç”¨æˆ·æ„å›¾ï¼Œæä¾›æ›´ç›¸å…³çš„ç»“æœã€‚</li><li>é«˜ç²¾åº¦ï¼šæ˜¾è‘—æé«˜æ£€ç´¢ç»“æœçš„ç›¸å…³æ€§å’Œç²¾åº¦ã€‚</li></ul><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>æœç´¢å¼•æ“</li><li>æ¨èç³»ç»Ÿ</li><li>é—®ç­”ç³»ç»Ÿ</li></ul><h4 id="å·®å¼‚åˆ†æ"><a class="markdownIt-Anchor" href="#å·®å¼‚åˆ†æ"></a> å·®å¼‚åˆ†æ</h4><p>è™½ç„¶è¿™å››ç§æƒé‡åˆ†ç±»éƒ½å±äºå¤§æ¨¡å‹çš„èŒƒç•´ï¼Œä½†å®ƒä»¬åœ¨åº”ç”¨é¢†åŸŸå’ŒæŠ€æœ¯ç‰¹ç‚¹ä¸Šæœ‰æ˜¾è‘—å·®å¼‚ï¼š</p><ul><li>åº”ç”¨é¢†åŸŸï¼šChatæ¨¡å‹ç”¨äºå¯¹è¯ç”Ÿæˆï¼ŒCodeæ¨¡å‹ç”¨äºä»£ç ç”Ÿæˆä¸ç†è§£ï¼ŒEmbeddingæ¨¡å‹ç”¨äºæ•°æ®è¡¨ç¤ºï¼ŒRerankæ¨¡å‹ç”¨äºç»“æœæ’åºä¼˜åŒ–ã€‚</li><li>æŠ€æœ¯ç‰¹ç‚¹ï¼šChatæ¨¡å‹å¼ºè°ƒä¸Šä¸‹æ–‡ç†è§£å’Œè‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ŒCodeæ¨¡å‹ä¾§é‡ä»£ç ç›¸å…³ä»»åŠ¡ï¼ŒEmbeddingæ¨¡å‹å…³æ³¨æ•°æ®çš„è¯­ä¹‰è¡¨ç¤ºï¼ŒRerankæ¨¡å‹ä¸“æ³¨äºæé«˜æ£€ç´¢ç²¾åº¦ã€‚</li><li>ç”¨æˆ·ä½“éªŒï¼šChatæ¨¡å‹å’ŒRerankæ¨¡å‹ç›´æ¥å½±å“ç”¨æˆ·äº¤äº’ä½“éªŒï¼ŒEmbeddingæ¨¡å‹å’ŒCodeæ¨¡å‹åˆ™æ›´å¤šåœ°æé«˜å¼€å‘æ•ˆç‡å’ŒæŠ€æœ¯å®ç°ã€‚</li></ul><h4 id="ä¸ºä»€ä¹ˆembeddingå’Œrerankæƒé‡å°‘è§"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆembeddingå’Œrerankæƒé‡å°‘è§"></a> ä¸ºä»€ä¹ˆEmbeddingå’ŒRerankæƒé‡å°‘è§</h4><p>å°½ç®¡Embeddingå’ŒRerankæ¨¡å‹åœ¨è‡ªç„¶è¯­è¨€å¤„ç†å’Œæœºå™¨å­¦ä¹ é¢†åŸŸå…·æœ‰é‡è¦ä½œç”¨ï¼Œä½†å®ƒä»¬çš„å¼€æºæƒ…å†µå´è¿œä¸å¦‚Chatå’ŒCodeæ¨¡å‹æ™®éã€‚è¿™ä¸»è¦æ˜¯ç”±äºæ•°æ®éšç§ã€å•†ä¸šä»·å€¼ã€æ¨¡å‹ä¸“ç”¨æ€§ä»¥åŠé«˜æ˜‚çš„æ•°æ®æ ‡æ³¨æˆæœ¬ç­‰åŸå› æ‰€è‡´ã€‚</p><h5 id="1-embeddingæ¨¡å‹æƒé‡å°‘è§çš„åŸå› "><a class="markdownIt-Anchor" href="#1-embeddingæ¨¡å‹æƒé‡å°‘è§çš„åŸå› "></a> 1. Embeddingæ¨¡å‹æƒé‡å°‘è§çš„åŸå› </h5><p>æ•°æ®éšç§å’Œå®‰å…¨æ€§ Embeddingæ¨¡å‹çš„è®­ç»ƒé€šå¸¸æ¶‰åŠå¤§é‡çš„ç”¨æˆ·æ•°æ®ï¼Œå¦‚æ–‡æœ¬ã€å›¾åƒç­‰ã€‚è¿™äº›æ•°æ®å¾€å¾€åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå‡ºäºéšç§å’Œå®‰å…¨æ€§è€ƒè™‘ï¼Œå¾ˆå¤šæœºæ„å’Œå…¬å¸ä¸æ„¿æ„å…¬å¼€è¿™äº›æ¨¡å‹çš„æƒé‡ï¼Œä»¥é¿å…æ•°æ®æ³„éœ²çš„é£é™©ã€‚</p><p>å•†ä¸šä»·å€¼ Embeddingæ¨¡å‹åœ¨æ¨èç³»ç»Ÿã€æœç´¢å¼•æ“å’Œå…¶ä»–éœ€è¦é«˜æ•ˆç›¸ä¼¼åº¦è®¡ç®—çš„åº”ç”¨ä¸­å…·æœ‰å·¨å¤§çš„å•†ä¸šä»·å€¼ã€‚è®¸å¤šå…¬å¸åˆ©ç”¨è¿™äº›æ¨¡å‹è·å¾—ç«äº‰ä¼˜åŠ¿ï¼Œå› æ­¤ä¸æ„¿æ„å°†è¿™äº›æƒé‡å…¬å¼€ï¼Œä»¥ä¿æŠ¤å…¶å•†ä¸šæœºå¯†å’Œå¸‚åœºä»½é¢ã€‚</p><p>æ¨¡å‹ä¸“ç”¨æ€§ Embeddingæ¨¡å‹é€šå¸¸æ˜¯é«˜åº¦å®šåˆ¶åŒ–çš„ï¼Œé’ˆå¯¹ç‰¹å®šæ•°æ®é›†å’Œåº”ç”¨åœºæ™¯è¿›è¡Œè®­ç»ƒã€‚å…¬å¼€è¿™äº›æƒé‡å¯èƒ½å¹¶ä¸èƒ½ç›´æ¥ç”¨äºå…¶ä»–åº”ç”¨ï¼Œéœ€è¦å¤§é‡çš„è°ƒæ•´å’Œå†è®­ç»ƒã€‚è¿™ä½¿å¾—è¿™äº›æ¨¡å‹çš„é€šç”¨æ€§è¾ƒä½ï¼Œé™åˆ¶äº†å¼€æºçš„åŠ¨æœºã€‚</p><h5 id="2-rerankæ¨¡å‹æƒé‡å°‘è§çš„åŸå› "><a class="markdownIt-Anchor" href="#2-rerankæ¨¡å‹æƒé‡å°‘è§çš„åŸå› "></a> 2. Rerankæ¨¡å‹æƒé‡å°‘è§çš„åŸå› </h5><p>å¤æ‚æ€§å’Œä¸“ç”¨æ€§ Rerankæ¨¡å‹é€šå¸¸æ˜¯åœ¨ç‰¹å®šé¢†åŸŸå’Œåº”ç”¨åœºæ™¯ä¸‹è¿›è¡Œè®­ç»ƒçš„ï¼Œç»“åˆäº†å¤§é‡ä¸Šä¸‹æ–‡ä¿¡æ¯å’Œç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚è¿™æ ·çš„æ¨¡å‹åœ¨å…¶ä»–åœºæ™¯ä¸‹å¯èƒ½æ•ˆæœä¸ä½³ï¼Œéœ€è¦é‡æ–°è®­ç»ƒæˆ–è°ƒæ•´ã€‚è¿™ç§ä¸“ç”¨æ€§ä½¿å¾—å®ƒä»¬ä¸é€‚åˆå¹¿æ³›å¼€æºã€‚</p><p>æ•°æ®ç¨€ç¼ºå’Œæ ‡æ³¨æˆæœ¬ Rerankæ¨¡å‹éœ€è¦å¤§é‡çš„æ ‡æ³¨æ•°æ®ï¼Œè¿™äº›æ•°æ®éœ€è¦æ‰‹åŠ¨æ ‡æ³¨å¹¶ä¸”é€šå¸¸æ¶‰åŠå¤æ‚çš„ä¸Šä¸‹æ–‡å…³ç³»ã€‚æ”¶é›†å’Œæ ‡æ³¨è¿™äº›æ•°æ®æˆæœ¬é«˜æ˜‚ï¼Œä¸”æ ‡æ³¨æ•°æ®å¾€å¾€å…·æœ‰é«˜åº¦çš„ä¸“ç”¨æ€§ï¼Œå…¬å¼€æ¨¡å‹æƒé‡çš„åŒæ—¶ä¹Ÿéš¾ä»¥æä¾›ç›¸åº”çš„æ•°æ®é›†ï¼Œé™åˆ¶äº†å…¶å¼€æºçš„å¯èƒ½æ€§ã€‚</p><p>å•†ä¸šå’Œæˆ˜ç•¥è€ƒé‡ åƒæœç´¢å¼•æ“å’Œæ¨èç³»ç»Ÿè¿™æ ·çš„åº”ç”¨ï¼Œå¯¹äºRerankæ¨¡å‹æœ‰ç€è‡³å…³é‡è¦çš„ä¾èµ–ã€‚è¿™äº›é¢†åŸŸçš„å…¬å¸å¾€å¾€é€šè¿‡è¿™äº›æ¨¡å‹ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œæå‡å•†ä¸šæ•ˆæœã€‚å› æ­¤ï¼Œå‡ºäºå•†ä¸šå’Œæˆ˜ç•¥è€ƒè™‘ï¼Œè¿™äº›æ¨¡å‹çš„æƒé‡é€šå¸¸ä¸ä¼šå…¬å¼€ï¼Œä»¥ä¿æŒç«äº‰ä¼˜åŠ¿ã€‚</p><h4 id="ç»“è®º"><a class="markdownIt-Anchor" href="#ç»“è®º"></a> ç»“è®º</h4><p>ç†è§£å¤§æ¨¡å‹æƒé‡çš„ä¸åŒåˆ†ç±»åŠå…¶å·®å¼‚ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°é€‰æ‹©å’Œåº”ç”¨é€‚åˆçš„æ¨¡å‹ï¼Œä»è€Œåœ¨å„è‡ªçš„é¢†åŸŸä¸­å‘æŒ¥å…¶æœ€å¤§æ½œåŠ›ã€‚æ— è®ºæ˜¯ç”¨äºå¯¹è¯ç”Ÿæˆçš„Chatæ¨¡å‹ï¼Œè¿˜æ˜¯ç”¨äºä»£ç ç”Ÿæˆçš„Codeæ¨¡å‹ï¼Œæˆ–æ˜¯ç”¨äºæ•°æ®è¡¨ç¤ºçš„Embeddingæ¨¡å‹ï¼Œä»¥åŠç”¨äºç»“æœæ’åºçš„Rerankæ¨¡å‹ï¼Œå®ƒä»¬éƒ½åœ¨å„è‡ªçš„åº”ç”¨åœºæ™¯ä¸­å±•ç°äº†å¼ºå¤§çš„èƒ½åŠ›å’Œå¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚</p><p>æœªæ¥ï¼Œéšç€æŠ€æœ¯çš„å‘å±•å’Œå¼€æºç¤¾åŒºçš„å£®å¤§ï¼Œæˆ–è®¸ä¼šæœ‰æ›´å¤šçš„Embeddingå’ŒRerankæ¨¡å‹æƒé‡é€æ¸å…¬å¼€ï¼Œä¸ºå¹¿æ³›çš„ç ”ç©¶å’Œåº”ç”¨æä¾›æ”¯æŒã€‚ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£è¿™äº›æ¨¡å‹æƒé‡ä¸å…¬å¼€çš„åˆç†æ€§ï¼Œå¹¶åœ¨ç°æœ‰èµ„æºçš„åŸºç¡€ä¸Šç»§ç»­å‰è¡Œã€‚</p>]]></content>
    
    
    <summary type="html">AIæ¢ç´¢å¤§æ¨¡å‹æƒé‡çš„åˆ†ç±»ï¼šChatã€Codeã€Embeddingå’ŒRerank</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="LLM" scheme="http://www.formeasy.cc/tags/LLM/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuä¸‹éƒ¨ç½²SpringBoot</title>
    <link href="http://www.formeasy.cc/2025/08/22/Springboot/Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2SpringBoot/"/>
    <id>http://www.formeasy.cc/2025/08/22/Springboot/Ubuntu%E4%B8%8B%E9%83%A8%E7%BD%B2SpringBoot/</id>
    <published>2025-08-22T06:26:22.000Z</published>
    <updated>2025-08-22T13:51:47.320Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ubuntuä¸‹éƒ¨ç½²springboot"><a class="markdownIt-Anchor" href="#ubuntuä¸‹éƒ¨ç½²springboot"></a> Ubuntuä¸‹éƒ¨ç½²SpringBoot</h2><h3 id="ç¬¬ä¸€æ­¥-å®‰è£…javaç¯å¢ƒ"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€æ­¥-å®‰è£…javaç¯å¢ƒ"></a> ç¬¬ä¸€æ­¥ï¼š å®‰è£…javaç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°è½¯ä»¶æº</span></span><br><span class="line">sudo apt update</span><br><span class="line"><span class="comment"># å®‰è£…OpenJDK 17ï¼ˆå¼€æºå…è´¹ï¼Œæ¨èï¼‰</span></span><br><span class="line">sudo apt install openjdk-17-jdk</span><br><span class="line"><span class="comment"># éªŒè¯å®‰è£…ï¼šè¾“å‡ºJDKç‰ˆæœ¬å³æˆåŠŸ</span></span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥-å®‰è£…ä¸‹è½½ideaå¹¶æ–°å»ºspringbooté¡¹ç›®"><a class="markdownIt-Anchor" href="#ç¬¬äºŒæ­¥-å®‰è£…ä¸‹è½½ideaå¹¶æ–°å»ºspringbooté¡¹ç›®"></a> ç¬¬äºŒæ­¥ï¼š å®‰è£…ä¸‹è½½Ideaå¹¶æ–°å»ºSpringBooté¡¹ç›®</h3><ul><li><p>åˆ°å®˜ç½‘ä¸‹è½½(<a href="https://www.jetbrains.com/idea/download/?section=windows">https://www.jetbrains.com/idea/download/?section=windows</a>)</p></li><li><p>è¿™é‡ŒæŠŠ <code>pom.xml</code> æ–‡ä»¶ã€åŒ…ç»“æ„ã€æ–°å¢çš„æ§åˆ¶å™¨ä»£ç è´´ä¸€ä¸‹</p><ul><li><code>pom.xml</code></li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="8554a3205a1474ed8aaf223d5f530a92.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="ç¬¬ä¸‰æ­¥-æ‰“åŒ…-jar-æ–‡ä»¶"><a class="markdownIt-Anchor" href="#ç¬¬ä¸‰æ­¥-æ‰“åŒ…-jar-æ–‡ä»¶"></a> ç¬¬ä¸‰æ­¥ï¼š æ‰“åŒ… .jar æ–‡ä»¶</h3><p><img src="a19ef5189506b596bb1c7f613846a870.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><blockquote><p>å¯¹äºMaven å¯ä»¥ä½¿ç”¨ä½¿ä»¤ï¼šmvn clean package<br />å¯¹äºGradle å¯ä»¥ä½¿ç”¨ä½¿ä»¤ï¼š./gradlew clean bootJar</p></blockquote><h3 id="ç¬¬å››æ­¥-åœ¨-ubuntu-ä¸Šéƒ¨ç½²-jar-åŒ…"><a class="markdownIt-Anchor" href="#ç¬¬å››æ­¥-åœ¨-ubuntu-ä¸Šéƒ¨ç½²-jar-åŒ…"></a> ç¬¬å››æ­¥ï¼š åœ¨ Ubuntu ä¸Šéƒ¨ç½² .jar åŒ…</h3><ul><li><code>mkdir demo</code> å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º demo çš„ç›®å½•</li><li><code>cd demo</code> å‘½ä»¤è¿›å…¥è¯¥ç›®å½•</li><li><code>nohup java -jar demo-0.0.1-SNAPSHOT.jar</code> å‘½ä»¤å¯åŠ¨ jar åŒ…ã€‚<ul><li><p><code>nohup xxx &amp;</code> ï¼š æ˜¯ <code>no hang up</code> çš„ç¼©å†™ï¼Œæ„ä¸ºä¸æŒ‚èµ·ï¼Œç”¨äºåœ¨ç³»ç»Ÿåå°ä¸æ–­è¿è¡Œå‘½ä»¤ï¼Œé€€å‡ºç»ˆç«¯ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œ</p></li><li><p>è¿è¡Œå®Œä¹‹åä¼šç”Ÿæˆä¸€ä¸ª <code>nohup.out</code> æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯å¯åŠ¨è¿‡ç¨‹çš„ä¸€äº›æ—¥å¿—</p></li><li><p>æ‰“å¼€ <code>nohup.out</code> æ–‡ä»¶ï¼Œå¦‚æœæ­£å¸¸å¯åŠ¨çš„è¯ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡º</p><pre><code>Started DemoApplication in xxx seconds</code></pre></li><li><p>ä½†æ˜¯ï¼Œæˆ‘å°±æ²¡é‚£ä¹ˆå¹¸è¿äº†ï¼Œæˆ‘é‡åˆ°çš„æ˜¯è¿™æ ·çš„</p><pre><code>    .   ____          _            __ _ _    /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \    \\/  ___)| |_)| | | | | || (_| |  ) ) ) )    '  |____| .__|_| |_|_| |_\__, | / / / /    =========|_|==============|___/=/_/_/_/    :: Spring Boot ::                (v2.5.2)    2021-07-14 22:42:22.087  INFO 39193 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication v0.0.1-SNAPSHOT using Java 1.8.0_291 on iZwz92d94t8mb03s9z327hZ with PID 39193 (/opt/xiaodudu/demo/demo-0.0.1-SNAPSHOT.jar started by root in /opt/xiaodudu/demo)    2021-07-14 22:42:22.090  INFO 39193 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to default profiles: default    2021-07-14 22:42:23.276  INFO 39193 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)    2021-07-14 22:42:23.291  INFO 39193 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]    2021-07-14 22:42:23.291  INFO 39193 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.48]    2021-07-14 22:42:23.345  INFO 39193 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext    2021-07-14 22:42:23.345  INFO 39193 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1141 ms    2021-07-14 22:42:23.673  WARN 39193 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 8080 is already in use    2021-07-14 22:42:23.677  INFO 39193 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]    2021-07-14 22:42:23.691  INFO 39193 --- [           main] ConditionEvaluationReportLoggingListener :     Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.    2021-07-14 22:42:23.713 ERROR 39193 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :     ***************************    APPLICATION FAILED TO START    ***************************    Description:    Web server failed to start. Port 8080 was already in use.    Action:    Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.        </code></pre><ul><li><p><code>Port 8080 was already in use.</code> ç«¯å£è¢«å ç”¨ï¼Œæ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªå¼‚å¸¸ã€‚</p></li><li><p>æ‰§è¡Œ <code>netstat -anp | grep 8080</code> æŸ¥çœ‹å ç”¨ç«¯å£çš„ç¨‹åº pidã€‚ï¼ˆnetstat æœ‰å¾ˆå¤šå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>netstat -h</code> æŸ¥è¯¢ï¼‰</p><pre><code>root@iZwz92d94t8mb03s9z327hZ:~# netstat -anp | grep 8080tcp6       0      0 :::8080                 :::*                    LISTEN      19032/java</code></pre></li><li><p>æ‰§è¡Œ <code>kill -9 xxxxx</code> å‘½ä»¤ç»ˆæ­¢è¯¥ç¨‹åº</p><pre><code>root@iZwz92d94t8mb03s9z327hZ:~# kill -9 19032</code></pre></li><li><p>é‡æ–°æ‰§è¡Œ <code>nohup xxx &amp;</code> å‘½ä»¤éƒ¨ç½² jar ç¨‹åºã€‚(nohup.out æ˜¯å¦åˆ é™¤å¯ä»¥è‡ªå·±å†³å®šï¼Œåˆ é™¤å°±æ˜¯é‡æ–°ç”Ÿæˆï¼Œä¸åˆ é™¤å°±æ˜¯è¿½åŠ å†…å®¹)</p><pre><code>root@iZwz92d94t8mb03s9z327hZ:/opt/xiaodudu/demo# nohup java -jar demo-0.0.1-SNAPSHOT.jar &amp;[1] 39342root@iZwz92d94t8mb03s9z327hZ:/opt/xiaodudu/demo# nohup: ignoring input and appending output to 'nohup.out'</code></pre></li><li><p>æŸ¥çœ‹ <code>nohup.out</code> æ–‡ä»¶</p><pre><code>     .   ____          _            __ _ _    /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \    \\/  ___)| |_)| | | | | || (_| |  ) ) ) )    '  |____| .__|_| |_|_| |_\__, | / / / /    =========|_|==============|___/=/_/_/_/    :: Spring Boot ::                (v2.5.2)    2021-07-14 23:05:16.089  INFO 39342 --- [           main] com.example.demo.DemoApplication         : Starting DemoApplication v0.0.1-SNAPSHOT using Java 1.8.0_291 on iZwz92d94t8mb03s9z327hZ with PID 39342 (/opt/xiaodudu/demo/demo-0.0.1-SNAPSHOT.jar started by root in /opt/xiaodudu/demo)    2021-07-14 23:05:16.093  INFO 39342 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to default profiles: default    2021-07-14 23:05:17.228  INFO 39342 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)    2021-07-14 23:05:17.239  INFO 39342 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]    2021-07-14 23:05:17.240  INFO 39342 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.48]    2021-07-14 23:05:17.300  INFO 39342 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext    2021-07-14 23:05:17.300  INFO 39342 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1095 ms    2021-07-14 23:05:17.755  INFO 39342 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''    2021-07-14 23:05:17.764  INFO 39342 --- [           main] com.example.demo.DemoApplication         : Started DemoApplication in 2.338 seconds (JVM running for 2.769)</code></pre></li></ul></li></ul></li></ul><h3 id="è¿œç¨‹è®¿é—®æ¥å£"><a class="markdownIt-Anchor" href="#è¿œç¨‹è®¿é—®æ¥å£"></a> è¿œç¨‹è®¿é—®æ¥å£</h3><ul><li>è®¿é—® <code>Ubuntu æœåŠ¡å™¨IP: 8080/hello/springboot</code></li></ul><p><img src="7be7cd3fc786c0c1f946bb5b6bc7555d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="ç¬¬äº”æ­¥-åœ¨-ubuntu-ä¸Šä½¿ç”¨è¿›ç¨‹ç®¡ç†"><a class="markdownIt-Anchor" href="#ç¬¬äº”æ­¥-åœ¨-ubuntu-ä¸Šä½¿ç”¨è¿›ç¨‹ç®¡ç†"></a> ç¬¬äº”æ­¥ï¼š åœ¨ Ubuntu ä¸Šä½¿ç”¨è¿›ç¨‹ç®¡ç†</h3><p>ç›´æ¥ç”¨ java -jar å¯åŠ¨çš„åº”ç”¨åœ¨ç»ˆç«¯å…³é—­åä¼šç»ˆæ­¢ï¼Œä¸”æ„å¤–å´©æºƒåæ— æ³•è‡ªåŠ¨é‡å¯ã€‚<br />å¯ä½¿ç”¨è¿›ç¨‹ç®¡ç†å·¥å…·ï¼ˆsystemdï¼‰ç¡®ä¿åº”ç”¨åå°è¿è¡Œå¹¶è‡ªåŠ¨æ¢å¤ï¼Œé€šè¿‡ç³»ç»ŸæœåŠ¡ç®¡ç† JAR åº”ç”¨ï¼Œæ”¯æŒå¼€æœºè‡ªå¯ã€çŠ¶æ€ç›‘æ§ã€æ—¥å¿—ç®¡ç†ã€‚</p><p>1.åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼ˆå¦‚ /etc/systemd/system/myapp.serviceï¼‰ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Spring Boot Application</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=formeasy</span><br><span class="line">Group=formeasy</span><br><span class="line"></span><br><span class="line">#WorkingDirectory=/opt/xiaodudu/demo/  # JAR æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå»ºè®®ä¸æ³¨é‡Š</span><br><span class="line">ExecStart=/usr/bin/java -jar  /opt/xiaodudu/demo/demo-0.0.1-SNAPSHOT.jar --server.port=8080</span><br><span class="line">SuccessExitStatus=143  # å…¼å®¹ Spring Boot çš„ä¼˜é›…é€€å‡ºç </span><br><span class="line">Restart=always  # å´©æºƒåè‡ªåŠ¨é‡å¯</span><br><span class="line">RestartSec=5  # é‡å¯é—´éš”ï¼ˆç§’ï¼‰</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>2.å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload  <span class="comment"># åˆ·æ–°é…ç½®</span></span><br><span class="line">sudo systemctl start myapp    <span class="comment"># å¯åŠ¨åº”ç”¨</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> myapp   <span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯</span></span><br></pre></td></tr></table></figure><p>3.å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status myapp  <span class="comment"># æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">sudo systemctl stop myapp    <span class="comment"># åœæ­¢åº”ç”¨</span></span><br><span class="line">journalctl -u myapp -f       <span class="comment"># å®æ—¶æŸ¥çœ‹æ—¥å¿—</span></span><br></pre></td></tr></table></figure><p>4.å¦‚æœå‡ºé”™ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ’æŸ¥ï¼š</p><ol><li>æ£€æŸ¥ç›®å½•å’Œæ–‡ä»¶æ˜¯å¦å­˜åœ¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥å·¥ä½œç›®å½•æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="built_in">ls</span> -la /opt/xiaodudu/demo/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ JAR æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="built_in">ls</span> -la /opt/xiaodudu/demo/demo-0.0.1-SNAPSHOT.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ Java å®‰è£…</span></span><br><span class="line"><span class="built_in">which</span> java</span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºç¼ºå¤±çš„ç›®å½•å’Œæƒé™</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåº”ç”¨ç›®å½•</span></span><br><span class="line">sudo <span class="built_in">mkdir</span> -p /opt/xiaodudu/demo/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ­£ç¡®çš„æƒé™</span></span><br><span class="line">sudo <span class="built_in">chown</span> -R formeasy:formeasy /opt/xiaodudu/demo/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®ä¿ JAR æ–‡ä»¶åœ¨æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line"><span class="comment"># å¦‚æœè¿˜æ²¡æœ‰ï¼Œä¸Šä¼ æˆ–å¤åˆ¶æ‚¨çš„ JAR æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Ubuntuä¸‹éƒ¨ç½²SpringBoot</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æœºå·²å®‰è£…åº”ç”¨å¯¼å‡ºapk</title>
    <link href="http://www.formeasy.cc/2025/08/22/Other/%E6%89%8B%E6%9C%BA%E5%B7%B2%E5%AE%89%E8%A3%85%E5%BA%94%E7%94%A8%E5%AF%BC%E5%87%BAapk%E5%AE%A2/"/>
    <id>http://www.formeasy.cc/2025/08/22/Other/%E6%89%8B%E6%9C%BA%E5%B7%B2%E5%AE%89%E8%A3%85%E5%BA%94%E7%94%A8%E5%AF%BC%E5%87%BAapk%E5%AE%A2/</id>
    <published>2025-08-22T06:21:47.000Z</published>
    <updated>2025-08-22T06:25:07.253Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ–¹æ³•ä¸€é€šè¿‡åº”ç”¨ç®¡ç†å™¨"><a class="markdownIt-Anchor" href="#æ–¹æ³•ä¸€é€šè¿‡åº”ç”¨ç®¡ç†å™¨"></a> æ–¹æ³•ä¸€ï¼šé€šè¿‡åº”ç”¨ç®¡ç†å™¨</h3><p>ä¸‹è½½å¹¶å®‰è£…åº”ç”¨ç®¡ç†å™¨ï¼šå¯ä»¥ä½¿ç”¨åº”ç”¨ç®¡ç†å™¨å¦‚â€œESæ–‡ä»¶æµè§ˆå™¨â€æˆ–â€œAPK Extractorâ€ã€‚<br />æå–APKæ–‡ä»¶ï¼š<br />æ‰“å¼€åº”ç”¨ç®¡ç†å™¨ã€‚<br />æ‰¾åˆ°å·²å®‰è£…çš„åº”ç”¨ç¨‹åºåˆ—è¡¨ã€‚<br />é€‰æ‹©ä½ æƒ³è¦æå–çš„åº”ç”¨ç¨‹åºï¼Œç„¶åé€‰æ‹©â€œæå–â€æˆ–â€œå¤‡ä»½â€é€‰é¡¹ã€‚<br />æå–çš„APKæ–‡ä»¶å°†ä¿å­˜åœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸­ï¼Œé€šå¸¸æ˜¯åœ¨å†…éƒ¨å­˜å‚¨æˆ–SDå¡ä¸­çš„â€œExtractedApksâ€æ–‡ä»¶å¤¹ã€‚</p><h3 id="æ–¹æ³•äºŒé€šè¿‡adbå·¥å…·"><a class="markdownIt-Anchor" href="#æ–¹æ³•äºŒé€šè¿‡adbå·¥å…·"></a> æ–¹æ³•äºŒï¼šé€šè¿‡ADBå·¥å…·</h3><p>å®‰è£…ADBå·¥å…·ï¼š<br />åœ¨ç”µè„‘ä¸Šä¸‹è½½å¹¶å®‰è£…ADBå·¥å…·åŒ…ã€‚<br />è¿æ¥æ‰‹æœºï¼š<br />åœ¨æ‰‹æœºä¸Šå¯ç”¨â€œå¼€å‘è€…é€‰é¡¹â€å’Œâ€œUSBè°ƒè¯•â€ã€‚<br />ä½¿ç”¨USBçº¿å°†æ‰‹æœºè¿æ¥åˆ°ç”µè„‘ã€‚</p><p>ä½¿ç”¨ADBå‘½ä»¤æå–åº”ç”¨ï¼š<br />æ‰“å¼€å‘½ä»¤è¡Œçª—å£ã€‚<br />è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹å·²å®‰è£…çš„åº”ç”¨åˆ—è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list packages</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°ä½ æƒ³æå–çš„åº”ç”¨çš„åŒ…åï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤æå–APKæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm path &lt;package-name&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm path com.example.app</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šè¿”å›APKæ–‡ä»¶çš„è·¯å¾„ã€‚æ¥ç€è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†APKæ–‡ä»¶å¤åˆ¶åˆ°ç”µè„‘ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull &lt;apk-file-path&gt; &lt;destination-path&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull /data/app/com.example.app-1/base.apk C:\Users\YourUsername\Desktop</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æ‰‹æœºå·²å®‰è£…åº”ç”¨å¯¼å‡ºapk</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Other" scheme="http://www.formeasy.cc/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot é¡¹ç›®ï¼Œè‡ªåŠ¨ç¼–è¯‘ï¼Œçƒ­éƒ¨ç½²ï¼Œç«‹åˆ»çœ‹åˆ°æ•ˆæœ</title>
    <link href="http://www.formeasy.cc/2025/08/21/Springboot/SpringBoot%20%E9%A1%B9%E7%9B%AE%EF%BC%8C%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91%EF%BC%8C%E7%83%AD%E9%83%A8%E7%BD%B2%EF%BC%8C%E7%AB%8B%E5%88%BB%E7%9C%8B%E5%88%B0%E6%95%88%E6%9E%9C/"/>
    <id>http://www.formeasy.cc/2025/08/21/Springboot/SpringBoot%20%E9%A1%B9%E7%9B%AE%EF%BC%8C%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91%EF%BC%8C%E7%83%AD%E9%83%A8%E7%BD%B2%EF%BC%8C%E7%AB%8B%E5%88%BB%E7%9C%8B%E5%88%B0%E6%95%88%E6%9E%9C/</id>
    <published>2025-08-21T08:55:31.000Z</published>
    <updated>2025-08-22T02:29:03.318Z</updated>
    
    <content type="html"><![CDATA[<p>1ï¼šåœ¨pom.xml ä¸­ é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¹¶ä¸æ˜¯pom.xml çš„<build>æ ‡ç­¾ä¸­</p><p>2ï¼š å¦‚æœæœ‰é¡µé¢çš„è¯ ç¦æ­¢é¡µé¢ç¼“å­˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: XXX</span><br><span class="line">  aop:</span><br><span class="line">    proxy-target-class: true</span><br><span class="line">  thymeleaf:</span><br><span class="line">      cache: false</span><br><span class="line">      prefix: classpath:/templates/</span><br><span class="line">      mode: LEGACYHTML5</span><br></pre></td></tr></table></figure><p>3ï¼šå¼€å¯ideaå·¥å…·çš„è‡ªåŠ¨ç¼–è¯‘åŠŸèƒ½</p><p><img src="20180211173853621.png" alt="" /></p><p>4ï¼šå¼€å¯ideaå…è®¸è¿è¡Œæ—¶ç¼–è¯‘</p><p>åœ¨ Advanced Settings ä¸­ï¼Œå‹¾é€‰ Allow auto-make to start even if the application is currently running</p><p><img src="20180211173853622.png" alt="" /></p><p>å®Œæˆä»¥ä¸Šæ­¥éª¤ å³å¯å®ç°SpringBooté¡¹ç›®è‡ªåŠ¨ç¼–è¯‘+çƒ­éƒ¨ç½²ï¼Œè¿™æˆ‘ä»¬ä¿®æ”¹åçš„ä»£ç èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°æ•ˆæœï¼Œæé«˜æ•ˆç‡ï¼</p>]]></content>
    
    
    <summary type="html">SpringBoot é¡¹ç›®ï¼Œè‡ªåŠ¨ç¼–è¯‘ï¼Œçƒ­éƒ¨ç½²ï¼Œç«‹åˆ»çœ‹åˆ°æ•ˆæœ</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Springbootæ¡†æ¶çš„å¿«é€Ÿæ­å»ºå’Œmybatisçš„æ•´åˆ</title>
    <link href="http://www.formeasy.cc/2025/08/21/Springboot/Springboot%E6%A1%86%E6%9E%B6%E7%9A%84%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E5%92%8Cmybatis%E7%9A%84%E6%95%B4%E5%90%88/"/>
    <id>http://www.formeasy.cc/2025/08/21/Springboot/Springboot%E6%A1%86%E6%9E%B6%E7%9A%84%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E5%92%8Cmybatis%E7%9A%84%E6%95%B4%E5%90%88/</id>
    <published>2025-08-21T08:31:20.000Z</published>
    <updated>2025-08-26T07:41:08.356Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¯å¢ƒå®‰è£…"><a class="markdownIt-Anchor" href="#ç¯å¢ƒå®‰è£…"></a> ç¯å¢ƒå®‰è£…</h3><p>åœ¨å¼€å§‹å­¦ä¹ Spring Bootä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å¥½å¼€å‘ç¯å¢ƒã€‚æœ¬èŠ‚å°†ä»¥Windowsæ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•å®‰è£…JDKã€Intellij IDEAåŠApache Mavenã€‚å¦‚æœä½ çš„ç”µè„‘ä¸Šå·²ç»å®‰è£…äº†JDKã€Intellij IDEAæˆ–è€…Apache Mavenï¼Œå¯ä»¥è·³è¿‡æœ¬èŠ‚å†…å®¹ã€‚</p><ol><li>å®‰è£…JDK</li></ol><p>JDKï¼ˆJava SE Development Kitï¼‰å»ºè®®ä½¿ç”¨17åŠä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œå…¶å®˜æ–¹ä¸‹è½½è·¯å¾„ä¸ºï¼š<br /><a href="https://www.oracle.com/java/technologies/downloads/#java17">https://www.oracle.com/java/technologies/downloads/#java17</a></p><p>ä¸‹è½½åæ­£å¸¸å®‰è£…ï¼Œå®‰è£…å®Œæˆåï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡JAVA_HOMEï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ï¼‰åœ¨ç”µè„‘æ¡Œé¢ä¸Šï¼Œå³å‡»ã€æˆ‘çš„ç”µè„‘ã€‘â†’ã€å±æ€§ã€‘â†’ã€é«˜çº§ç³»ç»Ÿè®¾ç½®ã€‘â†’ã€ç¯å¢ƒå˜é‡ã€‘â†’ã€ç³»ç»Ÿå˜é‡(S)ã€‘â†’ã€æ–°å»ºã€‘å‡ºç°æ–°å»ºç¯å¢ƒå˜é‡çš„çª—å£ã€‚</p><p>2ï¼‰åœ¨ã€å˜é‡åã€‘å’Œã€å˜é‡å€¼ã€‘ä¸­åˆ†åˆ«è¾“å…¥JAVA_HOMEå’ŒC:\Program Files\Java\jdk-17ï¼Œå•å‡»ã€ç¡®å®šã€‘æŒ‰é’®ã€‚</p><p>3ï¼‰JAVA_HOMEé…ç½®å¥½ä¹‹åï¼Œå°†%JAVA_HOME%\binåŠ å…¥åˆ°ã€ç³»ç»Ÿå˜é‡ã€‘çš„pathä¸­ã€‚å®Œæˆåï¼Œæ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œè¾“å…¥å‘½ä»¤java-versionï¼Œå¦‚å‡ºç°å¦‚ä¸‹æ‰€ç¤ºçš„æç¤ºï¼Œå³è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c:\XXX\java -version</span><br><span class="line">java version <span class="string">&quot;17.0.16&quot;</span> 2025-07-15 LTS</span><br><span class="line">Java(TM) SE Runtime Environment (build 17.0.16+12-LTS-247)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 17.0.16+12-LTS-247, mixed mode, sharing)</span><br></pre></td></tr></table></figure><ol start="2"><li><p>å®‰è£…Intellij IDEA<br />åœ¨Intellij IDEAçš„å®˜æ–¹ç½‘ç«™<br /><a href="http://www.jetbrains.com/idea/">http://www.jetbrains.com/idea/</a> ä¸Šå¯ä»¥å…è´¹ä¸‹è½½IDEAã€‚ä¸‹è½½å®ŒIDEAåï¼Œè¿è¡Œå®‰è£…ç¨‹åºï¼ŒæŒ‰æç¤ºå®‰è£…å³å¯ã€‚</p></li><li><p>å®‰è£…Apache Maven<br />Apache Mavenæ˜¯ç›®å‰æµè¡Œçš„é¡¹ç›®ç®¡ç†å’Œæ„å»ºè‡ªåŠ¨åŒ–å·¥å…·ã€‚è™½ç„¶IDEAå·²ç»åŒ…å«äº†Mavenæ’ä»¶ï¼Œä½†æ˜¯ç¬”è€…è¿˜æ˜¯å¸Œæœ›å¤§å®¶åœ¨å·¥ä½œä¸­èƒ½å¤Ÿå®‰è£…è‡ªå·±çš„Mavenæ’ä»¶ï¼Œæ–¹ä¾¿ä»¥åé¡¹ç›®é…ç½®éœ€è¦ã€‚å¤§å®¶å¯ä»¥é€šè¿‡Mavençš„å®˜æ–¹ç½‘ç«™<br /><a href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a> ä¸‹è½½æœ€æ–°ç‰ˆçš„Mavenï¼Œæœ¬æ–‡çš„Mavenç‰ˆæœ¬ä¸ºapache-maven-3.6.3ã€‚</p></li></ol><p>ä¸‹è½½å®Œæˆåè§£å‹ç¼©å³å¯ï¼Œä¾‹å¦‚ï¼Œè§£å‹åˆ°Dï¼šç›˜ä¸Šï¼Œç„¶åå°†Mavençš„å®‰è£…è·¯å¾„D:\apache-maven-3.6.3\binåŠ å…¥åˆ°Windowsçš„ç¯å¢ƒå˜é‡pathä¸­ã€‚å®‰è£…å®Œæˆåï¼Œåœ¨å‘½ä»¤è¡Œçª—å£æ‰§è¡Œå‘½ä»¤ï¼šmvn -vï¼Œå¦‚æœè¾“å‡º&quot;Apache Maven 3.6.3&quot;ï¼Œè¡¨ç¤ºMavenå®‰è£…æˆåŠŸã€‚</p><h3 id="ä¸€-åˆ›å»ºä¸€ä¸ªç©ºçš„springbooté¡¹ç›®å·¥ç¨‹"><a class="markdownIt-Anchor" href="#ä¸€-åˆ›å»ºä¸€ä¸ªç©ºçš„springbooté¡¹ç›®å·¥ç¨‹"></a> ä¸€ã€åˆ›å»ºä¸€ä¸ªç©ºçš„Springbooté¡¹ç›®å·¥ç¨‹</h3><ol><li><p>åœ¨ä¸€ä¸ªä½ å–œæ¬¢çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªspringbooté¡¹ç›®æ–‡ä»¶å¤¹.æ¯”å¦‚æˆ‘ä½¿ç”¨ï¼šspringboot<br /><img src="bd138f2f552e4b68a0c7bde696e657b6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p></li><li><p>å¯åŠ¨IDEAâ€“&gt;New Projectâ€“&gt;spring boot(spring initializrï¼‰</p></li></ol><p>æŒ‰ä¸‹é¢çš„é€‰</p><p><img src="f03737e89d1c48b7b9ce992b43ae00be.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />jdkç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œæ‰€é€‰çš„spring bootç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œå› ä¸ºæˆ‘ç”¨çš„æ˜¯jdkæ˜¯17ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯3.0ä»¥ä¸Šçš„<br /><img src="2389039193aa450bb758ea74270832a8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="äºŒ-é¡¹ç›®å·¥ç¨‹é…ç½®ä¸€ä¸‹maven"><a class="markdownIt-Anchor" href="#äºŒ-é¡¹ç›®å·¥ç¨‹é…ç½®ä¸€ä¸‹maven"></a> äºŒã€ é¡¹ç›®å·¥ç¨‹é…ç½®ä¸€ä¸‹Maven</h3><p><img src="8f7d80e35e6b4f30bdfa1e712c6a7070.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="d8cc6334dd3340ddbf3f6403af2a4dbe.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="ä¸‰-åˆ›å»ºå¸¸è§çš„åŒ…"><a class="markdownIt-Anchor" href="#ä¸‰-åˆ›å»ºå¸¸è§çš„åŒ…"></a> ä¸‰ã€ åˆ›å»ºå¸¸è§çš„åŒ…</h3><p>åœ¨com.exampleä¸‹é¢æŠŠæ¯ä¸ªå±‚çš„åŒ…åˆ›å»ºå¥½ï¼Œç”¨äºåç»­æˆ‘ä»¬åœ¨ä¸åŒçš„åŒ…é‡Œåˆ›å»ºjavaæ–‡ä»¶ï¼Œåç«¯æˆ‘ä»¬æ˜¯åˆ†å±‚çš„ã€‚</p><blockquote><p>controllerè°ƒç”¨service<br />serviceè°ƒç”¨dao<br />daoè°ƒç”¨entity</p></blockquote><ol><li>controller:åç«¯æ¥å£çš„å…¥å£ï¼Œä¸»è¦ç¼–å†™å„ç§xxxController,æä¾›æ¥å£ç»™å‰ç«¯è°ƒç”¨</li><li>service:åç«¯ä¸šåŠ¡å±‚ï¼Œä¸»è¦ç¼–å†™ä¸€äº›åç«¯ä¸šåŠ¡é€»è¾‘ã€‚controllerâ€“:service</li><li>dao(mapper):åç«¯æŒä¹…å±‚ï¼Œä¸»è¦æ˜ å°„æ•°æ®åº“ï¼Œæ“ä½œæ•°æ®åº“è¡¨æ•°æ®ã€‚serviceâ€“</li><li>entity:å®ä½“ç±»ï¼Œå¯¹åº”æ•°æ®åº“è¡¨ï¼Œå®ä½“ç±»çš„å±æ€§å¯¹åº”è¡¨çš„å­—æ®µä¿¡æ¯</li></ol><blockquote><p>ç»“æœå›¾:<br /><img src="717227c805124ab4acbb39ea8d23b219.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p></blockquote><h3 id="å››-ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªhello-word"><a class="markdownIt-Anchor" href="#å››-ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªhello-word"></a> å››ã€ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªhello word</h3><blockquote><p>controlleræ˜¯åå°æ¥å£çš„å…¥å£ï¼Œè¿™ä¸ªâ€œæ¥å£â€ä¸javaåŸºç¡€é‡Œé¢çš„æ¥å£ä¸ä¸€æ ·ï¼Œè¿™é‡Œçš„æ¥å£æ˜¯é’ˆå¯¹å‰ç«¯æ¥è¯´çš„ï¼Œå‰ç«¯æ“ä½œæ•°æ®ä¼šè°ƒç”¨åç«¯çš„æ¥å£ï¼Œæ˜¯å‰åå°äº¤äº’çš„å…¥å£</p></blockquote><ol><li>åœ¨controllerä¸‹é¢æ–°å»ºä¸€ä¸ªUserControllerç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨æ˜æ˜¯æ¥å£çš„å…¥å£</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¹é…ä¸€ä¸ªåœ°å€,ç›¸å½“äºæ‰“å¼€å®¶é—¨çš„é’¥åŒ™.ä¸ºäº†è§„èŒƒï¼Œåœ°å€æœ€å¥½å’Œç±»åå‰å‡ ä¸ªå•è¯ä¸€æ ·</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *     controlleré‡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå…¶å®å°±æ˜¯æˆ‘ä»¬å¹³å¸¸è¯´çš„webé¡¹ç›®é‡Œçš„ä¸€ä¸ªæ¥å£çš„å…¥å£</span></span><br><span class="line"><span class="comment"> *     å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸Šå†åŠ ä¸Šä¸€ä¸ªurl</span></span><br><span class="line"><span class="comment"> *     ä¹Ÿå¯ä»¥æŒ‡å®šè¯·æ±‚æ–¹å¼(å¢åˆ æ”¹æŸ¥)ï¼šGET POST PUT DELETE</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ¬¢è¿æ¥åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ªSpringbootå·¥ç¨‹ï¼šå·²ç»å¯åŠ¨&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>è¿è¡ŒSpingbootApplication,ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ç«¯å£ä¸º8080<br /><img src="cef494f423d74ba69e67eeb9907db4a7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p></li><li><p>å»æœ<a href="http://localhost:8080/user">http://localhost:8080/user</a><br /><img src="ecaf0cc39cde4dbaa57eb4c99b3009ae.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p></li><li><p>åœ¨entityä¸‹é¢åˆ›å»ºUserç±»</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="comment">//    è¡¨æ˜Idæ˜¯ä¸»é”®</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    ç­–ç•¥,è¡¨æ˜ä¸»é”®æ˜¯é€’å¢çš„</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String id,String name,String sex,String age,String password,String phone )</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.id= Integer.parseInt(id);</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.sex=sex;</span><br><span class="line">        <span class="built_in">this</span>.age= Integer.parseInt(age);</span><br><span class="line">        <span class="built_in">this</span>.password=password;</span><br><span class="line">        <span class="built_in">this</span>.phone=phone;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    mybatiséœ€è¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœç´¢<a href="http://localhost:8080/user/start">http://localhost:8080/user/start</a><br /><img src="c427fd9efa8c45b79545f47400e618de.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="äº”-æ•´åˆmybatis"><a class="markdownIt-Anchor" href="#äº”-æ•´åˆmybatis"></a> äº”ã€æ•´åˆMyBatis</h3><blockquote><p>å¯ä»¥å»æœmvn repositoryçš„å®˜ç½‘ï¼Œåœ¨é‡Œé¢æœmysqlï¼Œå¯ä»¥æ‰¾åˆ°ç›¸å…³ä¾èµ–çš„ä»£ç </p></blockquote><ol><li>å¼•å…¥ä¾èµ–ï¼špox.xmlé‡Œå¯¼å…¥mybatiså’Œæ•°æ®åº“mysqlçš„ä¾èµ–(è¿™é‡Œçš„mybatisä¾èµ–ç‰ˆæœ¬è¦çœ‹æ¸…æ¥šï¼Œæˆ‘è¿™ä¸ªç‰ˆæœ¬ä¸é€‚ç”¨3.0ï¼Œæ‰€ä»¥åé¢æˆ‘æ¢äº†ï¼Œå¯ä»¥çœ‹ç¬¬ä¸ƒç‚¹çš„1ï¼‰</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¾‹ä¸ºå®˜æ–¹mybatis-spring-boot-starterï¼Œå»ºè®®ä½¿ç”¨mybatis-plus-spring-boot3-starteræ›¿ä»£</p></blockquote><ol start="2"><li>åœ¨application.ymlé‡Œè¿›è¡Œæ•°æ®åº“é…ç½®ï¼ˆè‹¥æ–‡ä»¶åç¼€ä¸æ˜¯yml,å¯çœ‹ä¸‹é¢ç¬¬ä¸ƒçš„2ï¼‰</li></ol><blockquote><p>æ³¨æ„ï¼šå†’å·â€œï¼šâ€åé¢ä¸€å®šè¦åŠ ç©ºæ ¼ï¼Œä¸ç„¶ä¼šæŠ¥é”™</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“é…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment">#ä½ æœ¬åœ°çš„æ•°æ®åº“ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">cjm2003</span> <span class="comment">#ä½ æœ¬åœ°çš„æ•°æ®åº“å¯†ç </span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=Asia/Shanghai</span></span><br></pre></td></tr></table></figure><p>3.é…ç½®mybatiså®ä½“å’Œxmlæ˜ å°„<br />ï¼ˆ1ï¼‰å…ˆå¦‚ä¸‹é¢ç»“æ„åˆ›å»ºUserMapper.xmlç”¨äºè¢«mybatisæ˜ å°„<br /><img src="6b78d61941c84746a3a76f7ecba3c563.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>ï¼ˆ2ï¼‰åœ¨application.ymlé‡Œé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®mybatiså®ä½“é…ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span> <span class="comment">#æ˜ å°„åˆ°resources/mapper/User.xmlé‡Œ</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.springboot.entity</span></span><br></pre></td></tr></table></figure><h3 id="å…­-ç»“åˆmybatiså°†æ•°æ®åº“æ‰“é€š"><a class="markdownIt-Anchor" href="#å…­-ç»“åˆmybatiså°†æ•°æ®åº“æ‰“é€š"></a> å…­ã€ç»“åˆMyBatiså°†æ•°æ®åº“æ‰“é€š</h3><ol><li>åˆ›å»ºæ•°æ®åº“springbootå’Œuserè¡¨</li></ol><blockquote><p>åˆ›å»ºæ•°æ®åº“<br /><img src="b9729e82e8af40ec91cc6c0efbd9b2cc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`  (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `sex` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ€§åˆ«&#x27;</span>,</span><br><span class="line">  `age` <span class="type">int</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”µè¯&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_unicode_ci COMMENT <span class="operator">=</span> <span class="string">&#x27;ç”¨æˆ·ä¿¡æ¯è¡¨&#x27;</span> ROW_FORMAT <span class="operator">=</span> <span class="keyword">Dynamic</span>;</span><br></pre></td></tr></table></figure><p>è¡¥å……æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;10000000000&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;æå››&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;å¥³&#x27;</span>, <span class="number">22</span>, <span class="string">&#x27;18888888888&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆç»“æœï¼š<br /><img src="33876e66d4c845109901d75c028ffef9.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />2. åœ¨Userç±»é‡ŒåŠ æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"><span class="comment">//æŠŠuserè¡¨æ˜ å°„åˆ°ç±»é‡Œé¢å»</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user&quot;)</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹UserController</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.service.UserService;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨æ˜æ˜¯æ¥å£çš„å…¥å£</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¹é…ä¸€ä¸ªåœ°å€,ç›¸å½“äºæ‰“å¼€å®¶é—¨çš„é’¥åŒ™.ä¸ºäº†è§„èŒƒï¼Œåœ°å€æœ€å¥½å’Œç±»åå‰å‡ ä¸ªå•è¯ä¸€æ ·</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    controllerè¦è°ƒç”¨service</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     controlleré‡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå…¶å®å°±æ˜¯æˆ‘ä»¬å¹³å¸¸è¯´çš„webé¡¹ç›®é‡Œçš„ä¸€ä¸ªæ¥å£çš„å…¥å£</span></span><br><span class="line"><span class="comment">     *     å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸Šå†åŠ ä¸Šä¸€ä¸ªurl</span></span><br><span class="line"><span class="comment">     *     ä¹Ÿå¯ä»¥æŒ‡å®šè¯·æ±‚æ–¹å¼(å¢åˆ æ”¹æŸ¥)ï¼šGET POST PUT DELETE</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ¬¢è¿æ¥åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ªSpringbootå·¥ç¨‹ï¼šå·²ç»å¯åŠ¨&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/start&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    å¯¼å…¥è¡¨çš„å„æ¡ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//æ‹¿userServiceçš„getUser,è¿”å›å€¼ä¹Ÿæ˜¯List</span></span><br><span class="line">        <span class="keyword">return</span>  userService.getUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ›å»ºå…¶ä»–çš„ç±»å’Œæ¥å£ï¼Œå› ä¸º</li></ol><blockquote><p>controllerè°ƒç”¨service<br />serviceè°ƒç”¨dao<br />daoè°ƒç”¨entity</p></blockquote><p><img src="49220368e7484147a6e65993a1b06109.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>UserService:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springboot.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨æ˜æ˜¯serviceå±‚</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    serviceè°ƒç”¨dao</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (List&lt;User&gt;) userDao.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDaoæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºæ˜¯æŒä¹…å±‚çš„</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿Mapperé‡ŒUserçš„å®ä½“</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    åŸºäºæ³¨è§£çš„æ–¹å¼,æŸ¥è¯¢userè¡¨é‡Œçš„å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>æœç´¢<a href="http://localhost:8080/user/start">http://localhost:8080/user/start</a> ï¼ˆè¿™é‡Œè‹¥æ˜¯æ‰“ä¸å¼€ï¼Œå¯ä»¥çœ‹çœ‹æ˜¯å¦æ˜¯æ•°æ®åº“æ²¡å¯åŠ¨æˆ–è€…æ˜¯è·¯å¾„é”™è¯¯ï¼Œå¯çœ‹ç¬¬ä¸ƒç‚¹3ï¼‰<br /><img src="4256db6828d84f62808225618fc2085c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></li></ol><h3 id="ä¸ƒ-å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#ä¸ƒ-å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"></a> ä¸ƒã€å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h3><p>1.mybatisç‰ˆæœ¬ä¸å…¼å®¹ï¼Œå»pom.xmlé‡Œæ›¿æ¢ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ›¿æ¢æ—§ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æ”¯æŒ Spring Boot 3.x --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æ–¹æ³•ï¼šé€šè¿‡IDEåˆ›å»ºï¼ˆä»¥IntelliJ IDEAä¸ºä¾‹ï¼‰</li></ol><blockquote><p>ï¼ˆ1ï¼‰æ–°å»ºSpring Booté¡¹ç›® ä½¿ç”¨ Spring Initializr åˆ›å»ºé¡¹ç›®ï¼ˆé»˜è®¤ç”Ÿæˆ .propertiesï¼‰ã€‚</p><p>ï¼ˆ2ï¼‰å³é”®èµ„æºç›®å½• å®šä½åˆ° src/main/resources â†’ å³é”®é€‰æ‹© New â†’ Fileã€‚</p><p>ï¼ˆ3ï¼‰è¾“å…¥æ–‡ä»¶å ç›´æ¥è¾“å…¥ application.yml â†’ ç¡®è®¤åˆ›å»ºã€‚</p></blockquote><ol start="3"><li>è·¯å¾„é”™è¯¯æˆ–è€…æ˜¯æ•°æ®åº“æ²¡å¯åŠ¨<br />ï¼ˆ1ï¼‰æ£€æŸ¥ymlé‡Œçš„mybatisé…ç½®è·¯å¾„ï¼šæ˜¯å¦åœ¨å¯¹åº”åŒ…çš„ä¸‹é¢<br /><img src="cc6da6b4771147bb9c4ee5307f3ffb5e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ£€æŸ¥æ•°æ®åº“é…ç½®æ˜¯å¦æ˜¯è‡ªå·±çš„æ•°æ®åº“åç§°å‡ºé”™<br /><img src="87e9c99d69f74105b349acf780031f40.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="c30bd96d359d41d7a87edd7361bec15d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ï¼ˆ2ï¼‰å»cmdé‡Œé¢æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br></pre></td></tr></table></figure><p>æ³¨æ„mysqlä¸ºè‡ªå·±çš„ï¼Œä¸€èˆ¬ä¸ºmysql,ä½†æ˜¯æˆ‘çš„æ˜¯mysql8.0,æ‰€ä»¥æˆ‘çš„æ•ˆæœå›¾å¦‚ä¸‹<br /><img src="b7f95039dbc6433b84409b66d267648f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="å…«-æ‰“åŒ…åº”ç”¨"><a class="markdownIt-Anchor" href="#å…«-æ‰“åŒ…åº”ç”¨"></a> å…«ã€æ‰“åŒ…åº”ç”¨</h3><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯å¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰“åŒ…åº”ç”¨ï¼š</p><p>å¯¹äº Mavenï¼š</p><blockquote><p>mvn clean package</p></blockquote><p>å¯¹äº Gradleï¼š</p><blockquote><p>./gradlew clean bootJar</p></blockquote><p>æ³¨é‡Šï¼š</p><blockquote><p>mvn clean package å‘½ä»¤ä¼šæ¸…ç†é¡¹ç›®å¹¶æ„å»ºä¸€ä¸ªæ–°çš„ JAR æ–‡ä»¶ã€‚<br />./gradlew clean bootJar å¯¹äº Gradle é¡¹ç›®åŒæ ·ä¼šå®Œæˆæ¸…ç†å¹¶ç”Ÿæˆå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶ã€‚</p></blockquote><p>æ‰“åŒ…å®Œæˆåï¼Œæ‚¨å¯ä»¥åœ¨ä»¥ä¸‹è·¯å¾„æ‰¾åˆ°ç”Ÿæˆçš„ JAR æ–‡ä»¶ï¼š</p><blockquote><p>Mavenï¼štarget ç›®å½•ä¸‹ï¼Œå¦‚ target/springboot-0.0.1-SNAPSHOT.jar<br />Gradleï¼šbuild/libs ç›®å½•ä¸‹ï¼Œå¦‚ build/libs/springboot-0.0.1-SNAPSHOT.jar</p></blockquote><h3 id="ä¹-ä»£ç "><a class="markdownIt-Anchor" href="#ä¹-ä»£ç "></a> ä¹ã€ä»£ç </h3><p>UserController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.service.UserService;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨æ˜æ˜¯æ¥å£çš„å…¥å£</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¹é…ä¸€ä¸ªåœ°å€,ç›¸å½“äºæ‰“å¼€å®¶é—¨çš„é’¥åŒ™.ä¸ºäº†è§„èŒƒï¼Œåœ°å€æœ€å¥½å’Œç±»åå‰å‡ ä¸ªå•è¯ä¸€æ ·</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    controllerè¦è°ƒç”¨service</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *     controlleré‡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå…¶å®å°±æ˜¯æˆ‘ä»¬å¹³å¸¸è¯´çš„webé¡¹ç›®é‡Œçš„ä¸€ä¸ªæ¥å£çš„å…¥å£</span></span><br><span class="line"><span class="comment">     *     å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸Šå†åŠ ä¸Šä¸€ä¸ªurl</span></span><br><span class="line"><span class="comment">     *     ä¹Ÿå¯ä»¥æŒ‡å®šè¯·æ±‚æ–¹å¼(å¢åˆ æ”¹æŸ¥)ï¼šGET POST PUT DELETE</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ¬¢è¿æ¥åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ªSpringbootå·¥ç¨‹ï¼šå·²ç»å¯åŠ¨&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/start&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    å¯¼å…¥è¡¨çš„å„æ¡ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//æ‹¿userServiceçš„getUser,è¿”å›å€¼ä¹Ÿæ˜¯List</span></span><br><span class="line">        <span class="keyword">return</span>  userService.getUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨ç¤ºæ˜¯æŒä¹…å±‚çš„</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿Mapperé‡ŒUserçš„å®ä½“</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    åŸºäºæ³¨è§£çš„æ–¹å¼,æŸ¥è¯¢userè¡¨é‡Œçš„å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"><span class="comment">//æŠŠuserè¡¨æ˜ å°„åˆ°ç±»é‡Œé¢å»</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="comment">//    è¡¨æ˜Idæ˜¯ä¸»é”®</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    ç­–ç•¥,è¡¨æ˜ä¸»é”®æ˜¯é€’å¢çš„</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String id,String name,String sex,String age,String password,String phone )</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.id= Integer.parseInt(id);</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">        <span class="built_in">this</span>.sex=sex;</span><br><span class="line">        <span class="built_in">this</span>.age= Integer.parseInt(age);</span><br><span class="line">        <span class="built_in">this</span>.password=password;</span><br><span class="line">        <span class="built_in">this</span>.phone=phone;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    mybatiséœ€è¦</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springboot.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¡¨æ˜æ˜¯serviceå±‚</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    serviceè°ƒç”¨dao</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (List&lt;User&gt;) userDao.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SpringbootApplication</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰«æ</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.springboot.dao&quot;)</span> <span class="comment">// æ›¿æ¢ä¸ºä½ çš„å®é™… DAO åŒ…è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;.//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span> =<span class="string">&quot;com.example.springboot.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="comment">#application:</span></span><br><span class="line">  <span class="comment">#name: myapp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“é…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment">#ä½ æœ¬åœ°çš„æ•°æ®åº“ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">cjm2003</span> <span class="comment">#ä½ æœ¬åœ°çš„æ•°æ®åº“å¯†ç </span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®mybatiså®ä½“é…ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span> <span class="comment">#æ˜ å°„åˆ°resources/mapper/User.xmlé‡Œ</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.springboot.entity</span></span><br><span class="line"><span class="comment">#  configuration:</span></span><br><span class="line"><span class="comment">#    map-underscore-to-camel-case: true  # è‡ªåŠ¨è½¬æ¢ä¸‹åˆ’çº¿å‘½ååˆ°é©¼å³°å‘½å</span></span><br></pre></td></tr></table></figure><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ›¿æ¢æ—§ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æ”¯æŒ Spring Boot 3.x --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>tk.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Springbootæ¡†æ¶çš„å¿«é€Ÿæ­å»ºå’Œmybatisçš„æ•´åˆ</summary>
    
    
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å¿«é€Ÿåˆ é™¤Wordæ–‡æ¡£ä¸­çš„è‹±æ–‡å†…å®¹</title>
    <link href="http://www.formeasy.cc/2025/08/20/Other/%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4Word%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%E8%8B%B1%E6%96%87%E5%86%85%E5%AE%B9/"/>
    <id>http://www.formeasy.cc/2025/08/20/Other/%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4Word%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%E8%8B%B1%E6%96%87%E5%86%85%E5%AE%B9/</id>
    <published>2025-08-20T03:06:13.000Z</published>
    <updated>2025-08-20T03:13:45.768Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¦‚ä½•å¿«é€Ÿåˆ é™¤wordæ–‡æ¡£ä¸­çš„è‹±æ–‡å†…å®¹"><a class="markdownIt-Anchor" href="#å¦‚ä½•å¿«é€Ÿåˆ é™¤wordæ–‡æ¡£ä¸­çš„è‹±æ–‡å†…å®¹"></a> å¦‚ä½•å¿«é€Ÿåˆ é™¤Wordæ–‡æ¡£ä¸­çš„è‹±æ–‡å†…å®¹</h2><h3 id="æ‰“å¼€wordæ–‡æ¡£"><a class="markdownIt-Anchor" href="#æ‰“å¼€wordæ–‡æ¡£"></a> â—‰ æ‰“å¼€Wordæ–‡æ¡£</h3><p>é¦–å…ˆï¼Œåœ¨ç”µè„‘ä¸­ <strong>å¯åŠ¨WordåŠå…¬è½¯ä»¶</strong> ï¼Œæ–°å»ºä¸€ä¸ªç©ºç™½æ–‡æ¡£ï¼Œå¹¶åœ¨å…¶ä¸­è¾“å…¥åŒ…å«ä¸­è‹±æ–‡çš„æ–‡æœ¬æ®µè½ã€‚</p><h3 id="ä½¿ç”¨æ›¿æ¢åŠŸèƒ½"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ›¿æ¢åŠŸèƒ½"></a> â—‰ ä½¿ç”¨æ›¿æ¢åŠŸèƒ½</h3><p>æ¥ç€ï¼Œåœ¨ <strong>å·¥å…·æ çš„â€œå¼€å§‹â€é€‰é¡¹</strong> ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡æ¡£çš„å³ä¸Šè§’æ‰¾åˆ°å¹¶ç‚¹å‡» <strong>â€œæ›¿æ¢â€</strong> åŠŸèƒ½ã€‚è¿™ä¸€æ“ä½œå°†è§¦å‘ <strong>â€œæŸ¥æ‰¾å’Œæ›¿æ¢â€å¯¹è¯æ¡†</strong> çš„å¼¹å‡ºã€‚</p><h3 id="é€‰æ‹©ç‰¹æ®Šæ ¼å¼"><a class="markdownIt-Anchor" href="#é€‰æ‹©ç‰¹æ®Šæ ¼å¼"></a> â—‰ é€‰æ‹©ç‰¹æ®Šæ ¼å¼</h3><p>åœ¨å¯¹è¯æ¡†çš„å·¦ä¸‹è§’ï¼Œæˆ‘ä»¬ç‚¹å‡» <strong>â€œæ›´å¤šâ€</strong> ä»¥å±•å¼€æ›´å¤šé€‰é¡¹ã€‚éšåï¼Œä¼šå‡ºç°ä¸€ä¸ªä¸‹æ‹‰çª—å£ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬é€‰æ‹© <strong>â€œç‰¹æ®Šæ ¼å¼â€</strong> ã€‚åœ¨å³ä¾§å¼¹å‡ºçš„ç‰¹æ®Šæ ¼å¼é€‰é¡¹ä¸­ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥é€‰æ‹© <strong>â€œä»»æ„å­—æ¯â€</strong> ã€‚é€‰å®šåï¼ŒæŸ¥æ‰¾å†…å®¹æ ä¸­ä¼šå‡ºç°ä¸€ä¸ª <strong>â€œ^$â€</strong> ç¬¦å·ã€‚æœ€åï¼Œæˆ‘ä»¬ç‚¹å‡» <strong>â€œå…¨éƒ¨æ›¿æ¢â€</strong> æŒ‰é’®ï¼Œå¹¶è¿”å›åˆ°æ–‡æ¡£ã€‚æ­¤æ—¶ï¼ŒåŸå…ˆçš„è‹±æ–‡å†…å®¹å·²å…¨éƒ¨æ¶ˆå¤±ã€‚</p>]]></content>
    
    
    <summary type="html">å¦‚ä½•å¿«é€Ÿåˆ é™¤Wordæ–‡æ¡£ä¸­çš„è‹±æ–‡å†…å®¹</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Other" scheme="http://www.formeasy.cc/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>ã€redisã€‘centos7ä¸‹å®‰è£…redis7_centos7å®‰è£…redis7</title>
    <link href="http://www.formeasy.cc/2025/08/20/Redis/%E3%80%90redis%E3%80%91centos7%E4%B8%8B%E5%AE%89%E8%A3%85redis7_centos7%E5%AE%89%E8%A3%85redis7/"/>
    <id>http://www.formeasy.cc/2025/08/20/Redis/%E3%80%90redis%E3%80%91centos7%E4%B8%8B%E5%AE%89%E8%A3%85redis7_centos7%E5%AE%89%E8%A3%85redis7/</id>
    <published>2025-08-20T01:33:14.000Z</published>
    <updated>2025-08-20T01:52:15.828Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨CentOS 7ä¸‹å®‰è£…Redis7å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹æ³•å®ç°ï¼šæ‰‹åŠ¨ç¼–è¯‘å®‰è£…å’Œä½¿ç”¨YUMè¿›è¡Œå®‰è£…ã€‚</p><p>CentOS 7ç³»ç»Ÿçš„ç¯å¢ƒå’Œç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /etc/centos-release</span><br><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br></pre></td></tr></table></figure><h2 id="æ‰‹åŠ¨ç¼–è¯‘å®‰è£…"><a class="markdownIt-Anchor" href="#æ‰‹åŠ¨ç¼–è¯‘å®‰è£…"></a> æ‰‹åŠ¨ç¼–è¯‘å®‰è£…</h2><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://redis.io/docs/latest/operate/oss%5C_and%5C_stack/install/install-redis/install-redis-from-source/">https://redis.io/docs/latest/operate/oss\_and\_stack/install/install-redis/install-redis-from-source/</a></p><ol><li>ä¸‹è½½Redis7å®‰è£…åŒ…ï¼š<br />ä»Redisçš„å®˜æ–¹ç½‘ç«™ä¸‹è½½Redis7çš„æºä»£ç åŒ…ã€‚ä¾‹å¦‚ï¼Œä¸‹è½½Redis7.2.0ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /opt/soft</span><br><span class="line">$ sudo wget https://download.redis.io/releases/redis-7.2.0.tar.gz</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¼–è¯‘å¹¶å®‰è£…Redis7ï¼š<br />ä¸‹è½½å®Œæˆåï¼Œè§£å‹ç¼©æºä»£ç åŒ…ï¼Œå¹¶è¿›å…¥è§£å‹åçš„ç›®å½•è¿›è¡Œç¼–è¯‘å’Œå®‰è£…ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar -zxvf redis-7.2.0.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> redis-7.2.0</span><br><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><p>å¦‚æœç¼–è¯‘è¿‡ç¨‹ä¸­æŠ¥é”™ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿæ²¡æœ‰å®‰è£…å¦‚ä¸‹ä¾èµ–ï¼ŒRedisçš„ç¼–è¯‘ä¾èµ–äºGCCå’Œä¸€äº›å…¶ä»–å¼€å‘å·¥å…·ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…è¿™äº›ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum update -y</span><br><span class="line">$ sudo yum install -y gcc tcl make</span><br></pre></td></tr></table></figure><p>åœ¨è§£å‹ç¼©æºä»£ç åŒ…ä¸‹æœ‰ä¸€ä¸ªREADME.mdæ–‡ä»¶ï¼Œä»‹ç»äº†å¦‚ä½•æºç <a href="https://so.csdn.net/so/search?q=%E5%AE%89%E8%A3%85redis&amp;spm=1001.2101.3001.7020">å®‰è£…redis</a>ã€‚</p><ol start="3"><li>é…ç½®Redisï¼š<br />ç¼–è¯‘å®‰è£…å®Œæˆåï¼ŒRedisçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚redis-serverã€redis-cliï¼‰ä¼šè¢«æ”¾ç½®åœ¨/usr/local/bin/ç›®å½•ä¸‹ã€‚<br />Redisçš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äºæºä»£ç ç›®å½•ä¸‹çš„redis.confã€‚å¯ä»¥å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°/etc/æˆ–å…¶ä»–ä½ å–œæ¬¢çš„ä½ç½®ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç¼–è¾‘ä»¥æ»¡è¶³éœ€æ±‚ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">cp</span> redis.conf /etc/redis.conf</span><br><span class="line">$ sudo vim /etc/redis.conf</span><br></pre></td></tr></table></figure><p>æ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å°†bind 127.0.0.1æ”¹ä¸ºbind 0.0.0.0ï¼Œå…è®¸è¿œç¨‹è¿æ¥ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰ã€‚</li><li>å°†daemonize noæ”¹ä¸ºdaemonize yesï¼Œè®©Redisåœ¨åå°è¿è¡Œã€‚</li><li>è®¾ç½®å¯†ç ï¼ˆå¯é€‰ï¼‰ï¼Œå–æ¶ˆrequirepassçš„æ³¨é‡Šå¹¶è®¾ç½®å¯†ç ã€‚</li><li>è®¾ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„å’Œæ•°æ®åº“æŒä¹…åŒ–æ–¹å¼ç­‰ï¼ˆå¯é€‰ï¼‰ã€‚</li></ul><ol start="4"><li>å¯åŠ¨RedisæœåŠ¡ï¼š<br />é…ç½®å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨RedisæœåŠ¡ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ redis-server /etc/redis.conf</span><br></pre></td></tr></table></figure><ol start="5"><li>éªŒè¯RedisæœåŠ¡ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli</span><br><span class="line">127.0.0.1:6379&gt; auth redispass</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; ping</span><br><span class="line">PONG</span><br></pre></td></tr></table></figure><ol start="6"><li>è®¾ç½®Rediså¼€æœºè‡ªå¯ï¼š<br />å¦‚æœæƒ³è®©Redisåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªsystemdæœåŠ¡å•å…ƒæ–‡ä»¶ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ³¨æ„ä¿®æ”¹ExecStartçš„è·¯å¾„ä»¥åŒ¹é…Redisé…ç½®æ–‡ä»¶ä½ç½®ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Redis In-Memory Data Store</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=redis</span><br><span class="line">Group=redis</span><br><span class="line">ExecStart=/usr/local/bin/redis-server /etc/redis.conf</span><br><span class="line">ExecStop=/usr/local/bin/redis-cli shutdown</span><br><span class="line">Restart=always</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªredisç”¨æˆ·å’Œç»„ï¼ˆå¦‚æœå®ƒä»¬ä¸å­˜åœ¨çš„è¯ï¼‰ï¼Œå¹¶å°†/etc/redis.confæ–‡ä»¶çš„æƒé™è®¾ç½®ç»™è¿™ä¸ªç”¨æˆ·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo groupadd redis</span><br><span class="line">$ sudo useradd -g redis redis</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½systemdé…ç½®ï¼Œå¯åŠ¨RedisæœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl start redis</span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨yumè¿›è¡Œå®‰è£…"><a class="markdownIt-Anchor" href="#ä½¿ç”¨yumè¿›è¡Œå®‰è£…"></a> ä½¿ç”¨YUMè¿›è¡Œå®‰è£…</h2><ol><li>æ›´æ–°YUMæºï¼š<br />ç”±äºCentOS 7å®˜æ–¹é•œåƒå·²ç»è¢«ä¸‹å•ï¼Œå®˜æ–¹çš„é•œåƒåœ°å€<code>mirrorlist.centos.org</code>æ— æ³•æ‰¾åˆ°æ‰€éœ€çš„æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒåœ°å€ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br></pre></td></tr></table></figure><p>åœ¨è¿›è¡Œä»»ä½•å®‰è£…ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®ä¿YUMæºæ˜¯æœ€æ–°çš„ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–°YUMæºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum update -y</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æ›´æ”¹é•œåƒåœ°å€ï¼Œæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¼šæŠ›å‡ºå¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Could not retrieve mirrorlist http://mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=os&amp;infra=stock error was</span><br><span class="line">14: curl#6 - &quot;Could not resolve host: mirrorlist.centos.org; Unknown error&quot;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ·»åŠ EPELå’ŒRemi Repositoryï¼š<br />Redis7ä¸åœ¨CentOS 7çš„é»˜è®¤ä»“åº“ä¸­ï¼Œå› æ­¤éœ€è¦æ·»åŠ EPELï¼ˆExtra Packages for Enterprise Linuxï¼‰å’ŒRemi Repositoryã€‚</li></ol><p>å®‰è£…EPELï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install epel-release -y</span><br></pre></td></tr></table></figure><p>å®‰è£…Remi repositoryï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y https://mirrors.tuna.tsinghua.edu.cn/remi/enterprise/remi-release-7.rpm</span><br></pre></td></tr></table></figure><p>å¯ç”¨Remiä»“åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum-config-manager --<span class="built_in">enable</span> remi</span><br></pre></td></tr></table></figure><ol start="3"><li>å®‰è£…Redis 7ï¼š<br />ä½¿ç”¨YUMå‘½ä»¤ä»Remiä»“åº“ä¸­ä¸‹è½½å¹¶å®‰è£…Redis 7ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install redis -y</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶é»˜è®¤ä½ç½®åœ¨/etc/redis.confã€‚</p><ol start="4"><li>å¯åŠ¨RedisæœåŠ¡ï¼š<br />å®‰è£…å®Œæˆåï¼Œå¯åŠ¨RedisæœåŠ¡ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl start redis</span><br></pre></td></tr></table></figure><ol start="5"><li>è®¾ç½®RedisæœåŠ¡ä¸ºå¼€æœºå¯åŠ¨ï¼š<br />ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¡®ä¿Redisåœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure><ol start="6"><li>éªŒè¯Rediså®‰è£…ï¼š<br />ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥RedisæœåŠ¡çš„çŠ¶æ€ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl status redis</span><br></pre></td></tr></table></figure><p>å¦‚æœRedisæœåŠ¡æ­£åœ¨è¿è¡Œï¼Œåº”èƒ½çœ‹åˆ°â€œactive (running)â€çš„çŠ¶æ€ã€‚</p><h2 id="redisconfå¸¸ç”¨é…ç½®"><a class="markdownIt-Anchor" href="#redisconfå¸¸ç”¨é…ç½®"></a> redis.confå¸¸ç”¨é…ç½®</h2><p>å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">daemonize <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><p>daemonizeè®¾ç½®yesæˆ–è€…noåŒºåˆ«ï¼š</p><ul><li><p>yesï¼šä»£è¡¨å¼€å¯å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼Œredisä¼šåœ¨åå°è¿è¡Œï¼Œå¹¶å°†è¿›ç¨‹pidå·å†™å…¥è‡³redis.confé€‰é¡¹pidfileè®¾ç½®çš„æ–‡ä»¶ä¸­ã€‚</p></li><li><p>noï¼šå¯åŠ¨å°†è¿›å…¥redisçš„å‘½ä»¤è¡Œç•Œé¢ï¼Œexitæˆ–è€…å…³é—­è¿æ¥å·¥å…·(puttyï¼Œxshellç­‰)éƒ½ä¼šå¯¼è‡´redisè¿›ç¨‹é€€å‡ºã€‚</p></li></ul><p>bindé…ç½®é¡¹ç”¨äºæŒ‡å®šRedisæœåŠ¡å™¨ç›‘å¬çš„IPåœ°å€ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨çš„æœ¬åœ°å›ç¯åœ°å€ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°æ‰èƒ½è¿æ¥ï¼Œå¯ä»¥æ³¨é‡Šæ‰è¿™ä¸€è¡Œæˆ–è€…æ”¹ä¸ºbind 0.0.0.0æ”¾å¼€æ‰€æœ‰çš„å¤–éƒ¨ç½‘ç»œè®¿é—®ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#bind 127.0.0.1</span><br><span class="line">bind 0.0.0.0</span><br></pre></td></tr></table></figure><p>protected-modeç”¨æ¥é™åˆ¶å¯¹RedisæœåŠ¡å™¨çš„è®¿é—®ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protected-mode yes</span><br></pre></td></tr></table></figure><p>å¤–éƒ¨æƒ³è¦è®¿é—®redisæœåŠ¡ï¼Œé™¤äº†éœ€è¦ä¿®æ”¹bindçš„IPåœ°å€ï¼Œè¿˜éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼š</p><ul><li>protected-modeè®¾ç½®ä¸ºnoï¼Œå°†å…è®¸Redisæ¥å—æ¥è‡ªä»»ä½•ç½‘ç»œæ¥å£çš„è¿æ¥è¯·æ±‚ï¼Œåªè¦è¿™äº›æ¥å£è¢«Redisç›‘å¬ã€‚</li><li>protected-modeè®¾ç½®ä¸ºyesï¼ŒåŒæ—¶è®¾ç½®å¯†ç ï¼ˆrequirepassï¼‰</li></ul>]]></content>
    
    
    <summary type="html">ã€redisã€‘centos7ä¸‹å®‰è£…redis7_centos7å®‰è£…redis7</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="http://www.formeasy.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="http://www.formeasy.cc/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Redisæ·±åº¦è§£æï¼šç‰¹æ€§ã€ç¼“å­˜ç­–ç•¥ã€æŒä¹…åŒ–ä¸é›†ç¾¤å®æˆ˜</title>
    <link href="http://www.formeasy.cc/2025/08/20/Redis/Redis%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%9A%E7%89%B9%E6%80%A7%E3%80%81%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%E3%80%81%E6%8C%81%E4%B9%85%E5%8C%96%E4%B8%8E%E9%9B%86%E7%BE%A4%E5%AE%9E%E6%88%98/"/>
    <id>http://www.formeasy.cc/2025/08/20/Redis/Redis%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%9A%E7%89%B9%E6%80%A7%E3%80%81%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%E3%80%81%E6%8C%81%E4%B9%85%E5%8C%96%E4%B8%8E%E9%9B%86%E7%BE%A4%E5%AE%9E%E6%88%98/</id>
    <published>2025-08-20T01:22:19.000Z</published>
    <updated>2025-08-20T01:51:48.183Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€-redis-æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#ä¸€-redis-æ˜¯ä»€ä¹ˆ"></a> ä¸€ã€Redis æ˜¯ä»€ä¹ˆ</h2><p>RedisÂ æ˜¯Remote Dictionary Server(Redis) çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªä½¿ç”¨ Cè¯­è¨€ç¼–å†™ã€éµå®ˆBSDåè®®ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹çš„Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚</p><p>å®ƒæ˜¯ä¸€ç§ NoSQLï¼ˆnot-only sqlï¼Œæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼‰çš„æ•°æ®åº“ï¼Œå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯ä¸­é—´ä»¶ã€åˆ†å¸ƒå¼é”ç­‰ã€‚</p><h2 id="äºŒ-redis-çš„ç‰¹ç‚¹å’ŒåŠŸèƒ½"><a class="markdownIt-Anchor" href="#äºŒ-redis-çš„ç‰¹ç‚¹å’ŒåŠŸèƒ½"></a> äºŒã€Redis çš„ç‰¹ç‚¹å’ŒåŠŸèƒ½</h2><ul><li><p>æ€§èƒ½ä¼˜ç§€ï¼Œæ•°æ®åœ¨å†…å­˜ä¸­ï¼Œè¯»å†™é€Ÿåº¦éå¸¸å¿«ï¼Œæ”¯æŒå¹¶å‘ 10W QPSï¼ˆæ¯ç§’æŸ¥è¯¢é‡ï¼‰ã€‚</p></li><li><p>å•è¿›ç¨‹å•çº¿ç¨‹ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé‡‡ç”¨ IO å¤šè·¯å¤ç”¨æœºåˆ¶ã€‚</p></li><li><p>ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼Œæ”¯æŒå­—ç¬¦ä¸²ï¼ˆstringsï¼‰ã€æ•£åˆ—ï¼ˆhashesï¼‰ã€åˆ—è¡¨ï¼ˆlistsï¼‰ã€é›†åˆï¼ˆsetsï¼‰ã€æœ‰åºé›†åˆï¼ˆsorted setsï¼‰ç­‰ã€‚</p></li><li><p>æ”¯æŒæ•°æ®æŒä¹…åŒ–ã€‚</p><p>å¯ä»¥å°†å†…å­˜ä¸­æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯æ—¶åŠ è½½ã€‚</p></li><li><p>ä¸»ä»å¤åˆ¶ï¼Œå“¨å…µï¼Œé«˜å¯ç”¨ã€‚</p></li><li><p>å¯ä»¥ç”¨ä½œåˆ†å¸ƒå¼é”ã€‚</p></li><li><p>å¯ä»¥ä½œä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ä½¿ç”¨ï¼Œæ”¯æŒå‘å¸ƒè®¢é˜…</p></li></ul><h2 id="ä¸‰-ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸€è‡´æ€§é—®é¢˜"><a class="markdownIt-Anchor" href="#ä¸‰-ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸€è‡´æ€§é—®é¢˜"></a> ä¸‰ã€ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸€è‡´æ€§é—®é¢˜</h2><p>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹éå¸¸å®¹æ˜“å‡ºç°ç¼“å­˜å’Œæ•°æ®åº“é—´æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œé’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œå¦‚æœé¡¹ç›®å¯¹ç¼“å­˜çš„è¦æ±‚æ˜¯å¼ºä¸€è‡´æ€§çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦ä½¿ç”¨ç¼“å­˜ã€‚</p><p>æˆ‘ä»¬åªèƒ½é‡‡å–åˆé€‚çš„ç­–ç•¥æ¥é™ä½ç¼“å­˜å’Œæ•°æ®åº“é—´æ•°æ®ä¸ä¸€è‡´çš„æ¦‚ç‡ï¼Œè€Œæ— æ³•ä¿è¯ä¸¤è€…é—´çš„å¼ºä¸€è‡´æ€§ã€‚</p><h2 id="å››-ç¼“å­˜é€‰å‹redis-å’Œ-memcached-çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#å››-ç¼“å­˜é€‰å‹redis-å’Œ-memcached-çš„åŒºåˆ«"></a> å››ã€ç¼“å­˜é€‰å‹ï¼ˆRedis å’Œ Memcached çš„åŒºåˆ«ï¼‰</h2><p>Redis å’Œ Memcached çš„åŒºåˆ«</p><ul><li><p>**å­˜å‚¨æ–¹å¼ä¸Šï¼š**Memcache ä¼šæŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåä¼šæŒ‚æ‰ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ã€‚Redis æœ‰éƒ¨åˆ†æ•°æ®å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯æ•°æ®çš„æŒä¹…æ€§ã€‚</p></li><li><p>**æ•°æ®æ”¯æŒç±»å‹ä¸Šï¼š**Memcache å¯¹æ•°æ®ç±»å‹çš„æ”¯æŒç®€å•ï¼Œåªæ”¯æŒç®€å•çš„ key-valueï¼Œï¼Œè€Œ Redis æ”¯æŒäº”ç§æ•°æ®ç±»å‹ã€‚</p></li><li><p>**ä½¿ç”¨åº•å±‚æ¨¡å‹ä¸åŒï¼š**å®ƒä»¬ä¹‹é—´åº•å±‚å®ç°æ–¹å¼ä»¥åŠä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡çš„åº”ç”¨åè®®ä¸ä¸€æ ·ã€‚Redis ç›´æ¥è‡ªå·±æ„å»ºäº† VM æœºåˆ¶ï¼Œå› ä¸ºä¸€èˆ¬çš„ç³»ç»Ÿè°ƒç”¨ç³»ç»Ÿå‡½æ•°çš„è¯ï¼Œä¼šæµªè´¹ä¸€å®šçš„æ—¶é—´å»ç§»åŠ¨å’Œè¯·æ±‚ã€‚</p></li><li><p>**Value çš„å¤§å°ï¼š**Redis å¯ä»¥è¾¾åˆ° 1GBï¼Œè€Œ Memcache åªæœ‰ 1MB</p></li></ul><h2 id="äº”-redis-ä¸ºä»€ä¹ˆèƒ½è¿™ä¹ˆå¿«"><a class="markdownIt-Anchor" href="#äº”-redis-ä¸ºä»€ä¹ˆèƒ½è¿™ä¹ˆå¿«"></a> äº”ã€Redis ä¸ºä»€ä¹ˆèƒ½è¿™ä¹ˆå¿«</h2><p>å®˜æ–¹æä¾›çš„æ•°æ®å¯ä»¥è¾¾åˆ° 100000+ çš„ QPSï¼ˆæ¯ç§’å†…çš„æŸ¥è¯¢æ¬¡æ•°ï¼‰ï¼Œè¿™ä¸ªæ•°æ®ä¸æ¯” Memcached å·®ã€‚</p><ul><li><p>Redis å®Œå…¨åŸºäºå†…å­˜ï¼Œç»å¤§éƒ¨åˆ†è¯·æ±‚æ˜¯çº¯ç²¹çš„å†…å­˜æ“ä½œï¼Œéå¸¸è¿…é€Ÿï¼Œæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äº HashMapï¼ŒHashMap çš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚</p></li><li><p>æ•°æ®ç»“æ„ç®€å•ï¼Œå¯¹æ•°æ®æ“ä½œä¹Ÿç®€å•ã€‚</p></li><li><p>é‡‡ç”¨å•çº¿ç¨‹ï¼Œé¿å…äº†ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹å¯¼è‡´çš„ CPU åˆ‡æ¢ï¼Œä¸ç”¨å»è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”é‡Šæ”¾é”æ“ä½œï¼Œæ²¡æœ‰æ­»é”é—®é¢˜å¯¼è‡´çš„æ€§èƒ½æ¶ˆè€—ã€‚</p></li><li><p>ä½¿ç”¨å¤šè·¯å¤ç”¨ IO æ¨¡å‹ï¼Œéé˜»å¡ IOã€‚</p></li></ul><h2 id="å…­-redis-ç¼“å­˜çš„æ·˜æ±°ç­–ç•¥"><a class="markdownIt-Anchor" href="#å…­-redis-ç¼“å­˜çš„æ·˜æ±°ç­–ç•¥"></a> å…­ã€Redis ç¼“å­˜çš„æ·˜æ±°ç­–ç•¥</h2><p>Redis æœ‰å…­ç§æ·˜æ±°ç­–ç•¥ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="3c9b78d0ad34dd35dfc885222b799e02.png" alt="" /></p><p>Redis 4.0 åŠ å…¥äº† LFUï¼ˆleast frequency useï¼‰æ·˜æ±°ç­–ç•¥ï¼ŒåŒ…æ‹¬ volatile-lfu å’Œ allkeys-lfuï¼Œé€šè¿‡ç»Ÿè®¡è®¿é—®é¢‘ç‡ï¼Œå°†è®¿é—®é¢‘ç‡æœ€å°‘ï¼Œå³æœ€ä¸ç»å¸¸ä½¿ç”¨çš„ KV æ·˜æ±°</p><h2 id="ä¸ƒ-redis-æŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#ä¸ƒ-redis-æŒä¹…åŒ–"></a> ä¸ƒã€Redis æŒä¹…åŒ–</h2><h3 id="1ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#1ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–"></a> <strong>1.ä¸ºä»€ä¹ˆéœ€è¦æŒä¹…åŒ–</strong></h3><p>æ¯”å¦‚redisé‡Œæœ‰10gbæ•°æ®ï¼Œçªç„¶åœç”µæˆ–è€…æ„å¤–å®•æœºäº†ï¼Œå†å¯åŠ¨çš„æ—¶å€™10gbéƒ½æ²¡äº†ï¼æ‰€ä»¥éœ€è¦æŒä¹…åŒ–ï¼Œå®•æœºåå†é€šè¿‡æŒä¹…åŒ–æ–‡ä»¶å°†æ•°æ®æ¢å¤ã€‚</p><h3 id="2redis-çš„æŒä¹…åŒ–ç­–ç•¥çš„ä¸¤ç§æ–¹å¼"><a class="markdownIt-Anchor" href="#2redis-çš„æŒä¹…åŒ–ç­–ç•¥çš„ä¸¤ç§æ–¹å¼"></a> 2.Redis çš„æŒä¹…åŒ–ç­–ç•¥çš„ä¸¤ç§æ–¹å¼</h3><ul><li><p>**RDBï¼ˆé»˜è®¤ï¼‰ï¼š**å¿«ç…§å½¢å¼æ˜¯ç›´æ¥æŠŠå†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ° dump.rdb æ–‡ä»¶ä¸­ï¼Œå®šæ—¶å…¨é‡ä¿å­˜ï¼Œä¿å­˜çš„æ˜¯æ•°æ®ã€‚</p></li><li><p>**AOFï¼š**æŠŠæ‰€æœ‰çš„å¯¹ Redis çš„æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹çš„å‘½ä»¤éƒ½ä¿å­˜åˆ° appendonly.aof æ–‡ä»¶ä¸­ï¼Œå®šæ—¶å‘æ–‡ä»¶ä¸­è¿½åŠ ï¼Œä¿å­˜çš„æ˜¯å‘½ä»¤ã€‚</p></li></ul><h3 id="3rdbçš„ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#3rdbçš„ç‰¹ç‚¹"></a> 3.RDBçš„ç‰¹ç‚¹</h3><p>RDBæ€§èƒ½é«˜ï¼Œé€Ÿç‡å¿«ï¼Œå…¨é‡æŒä¹…åŒ–ï¼Œä½†æ•°æ®å¯é æ€§ä½ã€‚</p><p>(1)rdbæ–‡ä»¶</p><p>RDB(Redis DataBase)ï¼šåŸºäºæ—¶é—´çš„å¿«ç…§ï¼ŒRedisé»˜è®¤æ˜¯ä¼šä»¥å¿«ç…§&quot;RDB&quot;çš„å½¢å¼å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜çš„ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ dump.rdbä¸­ï¼Œå…¶é»˜è®¤åªä¿ç•™å½“å‰æœ€æ–°çš„ä¸€æ¬¡å¿«ç…§ï¼Œç‰¹ç‚¹æ˜¯æ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œç¼ºç‚¹æ˜¯å¯èƒ½ä¼šä¸¢å¤±ä»ä¸Šæ¬¡å¿«ç…§åˆ°å½“å‰æ—¶é—´ç‚¹ä¹‹é—´æœªåšå¿«ç…§çš„æ•°æ®ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶é…ç½®å¤šä¸ªæ—¶é—´ç‚¹çš„å¤‡ä»½,è¿™æ ·å°±å¯ä»¥ä¿ç•™å¤šä¸ªå¤‡ä»½,å½“å‡ºç°é—®é¢˜æ—¶å€™æ–¹ä¾¿æ¢å¤åˆ°ä¸åŒæ—¶é—´èŠ‚ç‚¹,å¾ˆé€‚åˆå¤‡ä»½,å¹¶ä¸”æ­¤æ–‡ä»¶æ ¼å¼æ”¯æŒä¸å°‘ç¬¬ä¸‰æ–¹å·¥å…·å¯ä»¥è¿›è¡Œåç»­çš„æ•°æ®åˆ†æã€‚æ¯”å¦‚:å¯ä»¥åœ¨æœ€è¿‘24å°æ—¶å†…,æ¯å°æ—¶è¿›è¡Œä¸€æ¬¡å¤‡ä»½RDBæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªæœˆçš„æ¯ä¸€å¤©ï¼Œä¹Ÿå¤‡ä»½ä¸€ä¸ªRDBæ–‡ä»¶ï¼Œè¿™æ ·çš„è¯ï¼Œå³ä¾¿é‡ä¸Šé—®é¢˜ï¼Œä¹Ÿå¯ä»¥éšæ—¶å°†æ•°æ®é›†è¿˜åŸåˆ°ä¸åŒçš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥RDB éå¸¸é€‚åˆç¾éš¾æ¢å¤ã€‚</p><p>(2)ä¼˜ç‚¹</p><p>ç”±äºrdbæ–‡ä»¶éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰€ä»¥å¾ˆå°ï¼Œåœ¨ç¾éš¾æ¢å¤çš„æ—¶å€™ä¼šå¿«äº›ã€‚</p><p>ä»–çš„æ•ˆç‡ï¼ˆå®•æœºæ¢å¤çš„æ•ˆç‡ï¼Œè€Œä¸æ˜¯æŒä¹…åŒ–çš„æ•ˆç‡ï¼‰ç›¸å¯¹äºaofè¦é«˜ï¼ˆbgsaveè€Œä¸æ˜¯saveï¼‰ï¼Œå› ä¸ºæ¯æ¥ä¸ªè¯·æ±‚ä»–éƒ½ä¸ä¼šå¤„ç†ä»»ä½•äº‹ï¼Œåªæ˜¯bgsaveçš„æ—¶å€™ä»–ä¼šfork()å­è¿›ç¨‹ä¸”å¯èƒ½copyonwriteï¼Œä½†copyonwriteåªæ˜¯ä¸€ä¸ªå¯»å€çš„è¿‡ç¨‹ï¼Œçº³ç§’çº§åˆ«çš„ã€‚è€Œaofæ¯æ¬¡éƒ½æ˜¯å†™ç›˜æ“ä½œï¼Œæ¯«ç§’çº§åˆ«ã€‚æ²¡æ³•æ¯”ã€‚</p><p>æ³¨ï¼šfork()å­è¿›ç¨‹ä»¥åŠcopyonwriteï¼ˆå†™æ—¶å¤åˆ¶ï¼‰çš„è¯¦è§£å¯è§æ–‡æœ«çš„å‚è€ƒâ€œRDBåŸç†â€</p><p>(3)ç¼ºç‚¹</p><p>æ•°æ®å¯é æ€§æ¯”aofä½ï¼Œä¹Ÿå°±æ˜¯ä¼šä¸¢å¤±çš„å¤šã€‚å› ä¸ºaofå¯ä»¥é…ç½®æ¯ç§’éƒ½æŒä¹…åŒ–æˆ–è€…æ¯ä¸ªå‘½ä»¤å¤„ç†å®Œå°±æŒä¹…åŒ–ä¸€æ¬¡è¿™ç§é«˜é¢‘ç‡çš„æ“ä½œï¼Œè€Œrdbçš„è¯è™½ç„¶ä¹Ÿæ˜¯é é…ç½®è¿›è¡Œbgsaveï¼Œä½†æ˜¯æ²¡æœ‰aofé…ç½®é‚£ä¹ˆçµæ´»ï¼Œä¹Ÿæ²¡aofæŒä¹…åŒ–å¿«ï¼Œå› ä¸ºrdbæ¯æ¬¡å…¨é‡ï¼Œaofæ¯æ¬¡åªè¿½åŠ ã€‚</p><h3 id="4aofçš„ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#4aofçš„ç‰¹ç‚¹"></a> 4.AOFçš„ç‰¹ç‚¹</h3><p>AOFæ•°æ®å¯é æ€§é«˜ï¼Œå¢é‡æŒä¹…åŒ–ï¼Œä½†å®•æœºæ¢å¤çš„æ•ˆç‡ç›¸æ¯”äºRDBè¿˜æ˜¯ç•¥ä½ã€‚</p><p>(1)aofæ–‡ä»¶</p><p>AOF(Append Only File)ï¼šåªè¿½åŠ æ–‡ä»¶ï¼Œä½¿ç”¨ AOF åšæŒä¹…åŒ–ï¼Œæ¯ä¸€ä¸ªå†™å‘½ä»¤éƒ½é€šè¿‡ write å‡½æ•°è¿½åŠ åˆ° appendonly.aof ä¸­ã€‚è€ŒRDBæ˜¯å‹ç¼©æˆäºŒè¿›åˆ¶ç­‰æ—¶æœºå¼€å­è¿›ç¨‹å»å¹²è¿™ä»¶äº‹ã€‚</p><p>(2)ä¼˜ç‚¹</p><p>â‘ æŒä¹…åŒ–çš„é€Ÿåº¦å¿«ï¼Œå› ä¸ºæ¯æ¬¡éƒ½åªæ˜¯è¿½åŠ ï¼Œrdbæ¯æ¬¡éƒ½å…¨é‡æŒä¹…åŒ–ã€‚</p><p>â‘¡å…¨ç¨‹æŒä¹…åŒ–ï¼Œåªéœ€è¦åœ¨é…ç½®ä¸­å¼€å¯ appendonly yesã€‚è¿™æ · Redis æ¯æ‰§è¡Œä¸€ä¸ªä¿®æ”¹æ•°æ®çš„å‘½ä»¤ï¼Œéƒ½ä¼šæŠŠå®ƒæ·»åŠ åˆ° AOF æ–‡ä»¶ä¸­ï¼Œå½“ Redis é‡å¯æ—¶ï¼Œå°†ä¼šè¯»å– AOF æ–‡ä»¶è¿›è¡Œé‡æ”¾ï¼Œæ¢å¤åˆ° Redis å…³é—­å‰çš„æœ€åæ—¶åˆ»ã€‚</p><p>â‘¢æ•°æ®ç›¸å¯¹æ›´å¯é ï¼Œä¸¢å¤±å°‘ï¼Œä½¿ç”¨ AOF çš„ä¼˜ç‚¹æ˜¯ä¼šè®© Redis å˜å¾—éå¸¸è€ä¹…ã€‚å¯ä»¥è®¾ç½®ä¸åŒçš„ Fsync ç­–ç•¥ï¼ŒAOFçš„é»˜è®¤ç­–ç•¥æ˜¯æ¯ç§’é’Ÿ Fsync ä¸€æ¬¡ï¼Œåœ¨è¿™ç§é…ç½®ä¸‹ï¼Œå°±ç®—å‘ç”Ÿæ•…éšœåœæœºï¼Œä¹Ÿæœ€å¤šä¸¢å¤±ä¸€ç§’é’Ÿçš„æ•°æ®ã€‚</p><p>(3)ç¼ºç‚¹</p><p>ç¾éš¾æ€§æ¢å¤çš„æ—¶å€™è¿‡æ…¢ï¼Œå› ä¸ºaofæ¯æ¬¡éƒ½åªè¿½åŠ åŸå‘½ä»¤ï¼Œå¯¼è‡´aofæ–‡ä»¶è¿‡å¤§ï¼Œä½†æ˜¯åé¢ä¼šrewriteï¼Œä½†æ˜¯ç›¸å¯¹äºrdbä¹Ÿæ˜¯æ…¢çš„ã€‚</p><h3 id="5é¡¹ç›®ä¸­å¦‚ä½•é€‰æ‹©è¿™ä¸¤ç§æ–¹å¼"><a class="markdownIt-Anchor" href="#5é¡¹ç›®ä¸­å¦‚ä½•é€‰æ‹©è¿™ä¸¤ç§æ–¹å¼"></a> 5.é¡¹ç›®ä¸­å¦‚ä½•é€‰æ‹©è¿™ä¸¤ç§æ–¹å¼</h3><p>å¦‚æœä½ è¿½æ±‚æ€§èƒ½ï¼ŒåŒæ—¶ä»ç„¶å¯ä»¥æ‰¿å—æ•°åˆ†é’Ÿå†…çš„æ•°æ®ä¸¢å¤±çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ RDB æŒä¹…åŒ–ã€‚</p><p>å¦‚æœä½ éå¸¸å…³å¿ƒä½ çš„æ•°æ®ï¼Œå¹¶ä¸”æ€§èƒ½å¯¹æ€§èƒ½è¦æ±‚ä¸æ˜¯é‚£ä¹ˆé«˜çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ AOFÂ æŒä¹…åŒ–ã€‚</p><p>æ³¨ï¼šRedis æ”¯æŒåŒæ—¶å¼€å¯ RDB å’Œ AOFï¼Œç³»ç»Ÿé‡å¯åï¼ŒRedis ä¼šä¼˜å…ˆä½¿ç”¨ AOF æ¥æ¢å¤æ•°æ®ï¼Œè¿™æ ·ä¸¢å¤±çš„æ•°æ®ä¼šæœ€å°‘ã€‚</p><h2 id="å…«-redis-é›†ç¾¤æ¨¡å¼é€‰æ‹©"><a class="markdownIt-Anchor" href="#å…«-redis-é›†ç¾¤æ¨¡å¼é€‰æ‹©"></a> å…«ã€Redis é›†ç¾¤æ¨¡å¼é€‰æ‹©</h2><p>redisé›†ç¾¤æœ‰ä¸‰ç§æ¨¡å¼Â  Â 1.ä¸»ä»å¤åˆ¶Â  Â 2.å“¨å…µæ¨¡å¼Â  Â 3.Clusteré›†ç¾¤æ¨¡å¼</p><p>ä¸»ä»å¤åˆ¶ï¼šé€‰å–æœ‰ä¸‰å°ï¼ˆå¥‡æ•°ï¼‰æœåŠ¡å™¨ï¼Œä¸€ä¸»ä¸¤ä»ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å†™å…¥ï¼Œä»èŠ‚ç‚¹è´Ÿè´£è¯»å–ï¼Œè¾¾åˆ°è¯»å†™åˆ†ç¦»ï¼Œæ­¤æ—¶ä¸‰å°é›†ç¾¤ä¸Šçš„æ•°æ®ä¸€è‡´ï¼Œä½†æ˜¯æœ‰ä¸ªä¸å¥½çš„ç‚¹åœ¨äº å½“ä¸»èŠ‚ç‚¹æŒ‚äº†çš„è¯ï¼Œå°±éœ€è¦äººä¸ºæ“ä½œï¼Œæ¥é‡å¯ä¸»èŠ‚ç‚¹ã€‚</p><p>å“¨å…µæ¨¡å¼ï¼šå“¨å…µæ¨¡å¼åœ¨åŸæœ‰ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸ŠåŠ äº†å“¨å…µæœºåˆ¶ï¼Œç®€å•ç†è§£å°±æ˜¯ç›‘æµ‹å„ä¸ªèŠ‚ç‚¹æ´»æ€§ï¼Œå‡å¦‚ä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œè¿˜å¯ä»¥è‡ªåŠ¨é‡å¯ä¸»èŠ‚ç‚¹ã€‚</p><p>Clusteré›†ç¾¤æ¨¡å¼ï¼šå°†æ•°æ®å‡åˆ†åˆ°æ‰€æœ‰ä¸»èŠ‚ç‚¹ä¸Šã€‚ä¸ä¸»ä»å¤åˆ¶ä¸åŒï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¸å­˜å‚¨å…¨é‡æ•°æ®ï¼Œè€Œæ˜¯åˆ†ç‰‡å­˜å‚¨ã€‚è¿™ç§æ–¹å¼é€‚åˆæ•°æ®é‡è¾ƒå¤§çš„åœºæ™¯ï¼Œå¯ä»¥å‡æ‘ŠæœåŠ¡å™¨å‹åŠ›</p><h2 id="ä¹-redis-å“¨å…µçš„åŸºæœ¬åŸç†"><a class="markdownIt-Anchor" href="#ä¹-redis-å“¨å…µçš„åŸºæœ¬åŸç†"></a> ä¹ã€Redis å“¨å…µçš„åŸºæœ¬åŸç†</h2><p><img src="470bac817637351a0240be4294be8f4b.jpeg" alt="å›¾ç‰‡" /></p><p>å¦‚å›¾ï¼Œæ˜¯ Redis Sentinelï¼ˆå“¨å…µï¼‰çš„æ¶æ„å›¾ã€‚Redis Sentinelï¼ˆå“¨å…µï¼‰ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ä¸»èŠ‚ç‚¹å­˜æ´»æ£€æµ‹ã€ä¸»ä»è¿è¡Œæƒ…å†µæ£€æµ‹ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ã€ä¸»ä»åˆ‡æ¢ã€‚</p><p>Redis Sentinel æœ€å°é…ç½®æ˜¯ä¸€ä¸»ä¸€ä»ã€‚Redis çš„ Sentinel ç³»ç»Ÿå¯ä»¥ç”¨æ¥ç®¡ç†å¤šä¸ª Redis æœåŠ¡å™¨ã€‚</p><p>è¯¥ç³»ç»Ÿå¯ä»¥æ‰§è¡Œä»¥ä¸‹å››ä¸ªä»»åŠ¡ï¼š</p><ul><li><p>**ç›‘æ§ï¼š**ä¸æ–­æ£€æŸ¥ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</p></li><li><p>**é€šçŸ¥ï¼š**å½“è¢«ç›‘æ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼ŒSentinel é€šè¿‡ API è„šæœ¬å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘å‡ºé€šçŸ¥ã€‚</p></li><li><p>**è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼š**å½“ä¸»èŠ‚ç‚¹ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼ŒSentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨çš„æ•…éšœè½¬ç§»æ“ä½œï¼Œå®ƒä¼šå°†ä¸å¤±æ•ˆä¸»èŠ‚ç‚¹æ˜¯ä¸»ä»å…³ç³»çš„å…¶ä¸­ä¸€ä¸ªä»èŠ‚ç‚¹å‡çº§ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†å…¶ä»–çš„ä»èŠ‚ç‚¹æŒ‡å‘æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œè¿™æ ·äººå·¥å¹²é¢„å°±å¯ä»¥å…äº†ã€‚</p></li><li><p>**é…ç½®æä¾›è€…ï¼š**åœ¨ Redis Sentinel æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯åº”ç”¨åœ¨åˆå§‹åŒ–æ—¶è¿æ¥çš„æ˜¯ Sentinel èŠ‚ç‚¹é›†åˆï¼Œä»ä¸­è·å–ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p></li></ul><p>å“¨å…µçš„å·¥ä½œåŸç†ï¼š</p><p><img src="ffb3a31699849f207318312704875795.jpeg" alt="å›¾ç‰‡" /></p><p>â‘ æ¯ä¸ª Sentinel èŠ‚ç‚¹éƒ½éœ€è¦å®šæœŸæ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼šæ¯ä¸ª Sentinel ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ï¼Œå‘å®ƒæ‰€çŸ¥çš„ä¸»æœåŠ¡å™¨ã€ä»æœåŠ¡å™¨ä»¥åŠå…¶ä»–çš„ Sentinel å®ä¾‹å‘é€ä¸€ä¸ª PING å‘½ä»¤ã€‚ï¼ˆå¦‚ä¸Šå›¾ï¼‰</p><p><img src="2c3e23d30640c78d9e979e30271f2aec.jpeg" alt="å›¾ç‰‡" /></p><p>â‘¡å¦‚æœä¸€ä¸ªå®ä¾‹è·ç¦»æœ€åä¸€æ¬¡æœ‰æ•ˆå›å¤ PING å‘½ä»¤çš„æ—¶é—´è¶…è¿‡ down-after-milliseconds æ‰€æŒ‡å®šçš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹ä¼šè¢« Sentinel æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ã€‚ï¼ˆå¦‚ä¸Šå›¾ï¼‰</p><p><img src="7bffd1f46d77e42a2a693a6798623090.jpeg" alt="å›¾ç‰‡" /></p><p>â‘¢å¦‚æœä¸€ä¸ªä¸»æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œé‚£ä¹ˆæ­£åœ¨ç›‘è§†è¿™ä¸ªæœåŠ¡å™¨çš„æ‰€æœ‰ Sentinel èŠ‚ç‚¹ï¼Œè¦ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ç¡®è®¤ä¸»æœåŠ¡å™¨çš„ç¡®è¿›å…¥äº†ä¸»è§‚ä¸‹çº¿çŠ¶æ€ã€‚</p><p><img src="772194763db4a8ef9b863643906d8670.jpeg" alt="å›¾ç‰‡" /></p><p>â‘£å¦‚æœä¸€ä¸ªä¸»æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼Œå¹¶ä¸”æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinelï¼ˆè‡³å°‘è¦è¾¾åˆ°é…ç½®æ–‡ä»¶æŒ‡å®šçš„æ•°é‡ï¼‰åœ¨æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…åŒæ„è¿™ä¸€åˆ¤æ–­ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸»æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ã€‚</p><p><img src="b4682bde082521063221016e22b3ff37.jpeg" alt="å›¾ç‰‡" /></p><p>â‘¤ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Sentinel ä¼šä»¥æ¯ 10 ç§’ä¸€æ¬¡çš„é¢‘ç‡å‘å®ƒå·²çŸ¥çš„æ‰€æœ‰ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨å‘é€ INFO å‘½ä»¤ã€‚</p><p>å½“ä¸€ä¸ªä¸»æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿æ—¶ï¼ŒSentinel å‘ä¸‹çº¿ä¸»æœåŠ¡å™¨çš„æ‰€æœ‰ä»æœåŠ¡å™¨å‘é€ INFO å‘½ä»¤çš„é¢‘ç‡ï¼Œä¼šä» 10 ç§’ä¸€æ¬¡æ”¹ä¸ºæ¯ç§’ä¸€æ¬¡ã€‚</p><p><img src="307d347ba48f473e8e957fc735932186.jpeg" alt="å›¾ç‰‡" /></p><p>â‘¥Sentinel å’Œå…¶ä»– Sentinel åå•†å®¢è§‚ä¸‹çº¿çš„ä¸»èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œå¦‚æœå¤„äº SDOWN çŠ¶æ€ï¼Œåˆ™æŠ•ç¥¨è‡ªåŠ¨é€‰å‡ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå°†å‰©ä½™ä»èŠ‚ç‚¹æŒ‡å‘æ–°çš„ä¸»èŠ‚ç‚¹è¿›è¡Œæ•°æ®å¤åˆ¶ã€‚</p><p><img src="a3af2976aff3ddb91e0ef0aac7893923.jpeg" alt="å›¾ç‰‡" /></p><p>â‘¦å½“æ²¡æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinel åŒæ„ä¸»æœåŠ¡å™¨ä¸‹çº¿æ—¶ï¼Œä¸»æœåŠ¡å™¨çš„å®¢è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚</p><p>å½“ä¸»æœåŠ¡å™¨é‡æ–°å‘ Sentinel çš„ PING å‘½ä»¤è¿”å›æœ‰æ•ˆå›å¤æ—¶ï¼Œä¸»æœåŠ¡å™¨çš„ä¸»è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚</p><h2 id="å-redisç¼“å­˜é›ªå´©-ç©¿é€-å‡»ç©¿æ¦‚å¿µåŠè§£å†³åŠæ³•"><a class="markdownIt-Anchor" href="#å-redisç¼“å­˜é›ªå´©-ç©¿é€-å‡»ç©¿æ¦‚å¿µåŠè§£å†³åŠæ³•"></a> åã€Redisç¼“å­˜é›ªå´©ã€ç©¿é€ã€å‡»ç©¿æ¦‚å¿µåŠè§£å†³åŠæ³•</h2><p><strong>é›ªå´©åœºæ™¯ï¼š</strong></p><p>å¦‚æœé¦–é¡µæ‰€æœ‰ Key çš„å¤±æ•ˆæ—¶é—´éƒ½æ˜¯ 12 å°æ—¶ï¼Œä¸­åˆ 12 ç‚¹åˆ·æ–°çš„ï¼Œæˆ‘é›¶ç‚¹æœ‰ä¸ªå¤§ä¿ƒæ´»åŠ¨å¤§é‡ç”¨æˆ·æ¶Œå…¥ï¼Œå‡è®¾æ¯ç§’ 6000 ä¸ªè¯·æ±‚ï¼Œæœ¬æ¥ç¼“å­˜å¯ä»¥æŠ—ä½æ¯ç§’ 5000 ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç¼“å­˜ä¸­æ‰€æœ‰ Key éƒ½å¤±æ•ˆäº†ï¼Œæ­¤æ—¶ 6000 ä¸ª/ç§’çš„è¯·æ±‚å…¨éƒ¨è½åœ¨äº†æ•°æ®åº“ä¸Šï¼Œæ•°æ®åº“å¿…ç„¶æ‰›ä¸ä½ï¼ŒçœŸå®æƒ…å†µå¯èƒ½ æ•°æ®åº“éƒ½æ²¡ååº”è¿‡æ¥ç›´æ¥æŒ‚äº†ï¼Œæ­¤æ—¶ï¼Œå¦‚æœæ²¡ä»€ä¹ˆç‰¹åˆ«çš„æ–¹æ¡ˆæ¥å¤„ç†ï¼ŒDBA å¾ˆç€æ€¥ï¼Œé‡å¯æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“ç«‹é©¬åˆè¢«æ–°æµé‡ç»™æ‰“æ­»äº†ã€‚è¿™å°±æ˜¯æˆ‘ç†è§£çš„ç¼“å­˜é›ªå´©ã€‚</p><p><strong>é›ªå´©è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>åœ¨æ‰¹é‡å¾€ Redis å­˜æ•°æ®çš„æ—¶å€™ï¼ŒæŠŠæ¯ä¸ª Key çš„å¤±æ•ˆæ—¶é—´éƒ½åŠ ä¸ªéšæœºå€¼å°±å¥½äº†ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ•°æ®ä¸ä¼šå†åŒä¸€æ—¶é—´å¤§é¢ç§¯å¤±æ•ˆï¼Œæˆ–è€…è®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸã€‚</p><p><strong>ç©¿é€åœºæ™¯ï¼š</strong></p><p>ç¼“å­˜ç©¿é€æ˜¯æŒ‡ç¼“å­˜å’Œæ•°æ®åº“ä¸­éƒ½æ²¡æœ‰çš„æ•°æ®ï¼Œè€Œç”¨æˆ·ï¼ˆé»‘å®¢ï¼‰ä¸æ–­å‘èµ·è¯·æ±‚ï¼Œè¿™æ ·çš„ä¸æ–­æ”»å‡»å¯¼è‡´æ•°æ®åº“å‹åŠ›å¾ˆå¤§ï¼Œä¸¥é‡ä¼šå‡»å®æ•°æ®åº“</p><p><strong>ç©¿é€è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>ç¼“å­˜ç©¿é€æˆ‘ä¼šåœ¨æ¥å£å±‚å¢åŠ æ ¡éªŒï¼Œæ¯”å¦‚ç”¨æˆ·é‰´æƒï¼Œå‚æ•°åšæ ¡éªŒï¼Œä¸åˆæ³•çš„æ ¡éªŒç›´æ¥ returnï¼Œæˆ–è€…Â ä½¿ç”¨é«˜çº§ç”¨æ³•å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰è¿™ä¸ªä¹Ÿèƒ½å¾ˆå¥½çš„é¢„é˜²ç¼“å­˜ç©¿é€çš„å‘ç”Ÿã€‚</p><p><strong>å‡»ç©¿åœºæ™¯ï¼š</strong></p><p>ç¼“å­˜å‡»ç©¿ï¼Œè¿™ä¸ªè·Ÿç¼“å­˜é›ªå´©æœ‰ç‚¹åƒï¼Œä½†æ˜¯åˆæœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œç¼“å­˜é›ªå´©æ˜¯å› ä¸ºå¤§é¢ç§¯çš„ç¼“å­˜å¤±æ•ˆï¼Œæ‰“å´©äº† DBã€‚è€Œç¼“å­˜å‡»ç©¿ä¸åŒçš„æ˜¯ç¼“å­˜å‡»ç©¿æ˜¯æŒ‡ä¸€ä¸ª Key éå¸¸çƒ­ç‚¹ï¼Œåœ¨ä¸åœåœ°æ‰›ç€å¤§é‡çš„è¯·æ±‚ï¼Œå¤§å¹¶å‘é›†ä¸­å¯¹è¿™ä¸€ä¸ªç‚¹è¿›è¡Œè®¿é—®ï¼Œå½“è¿™ä¸ª Key åœ¨å¤±æ•ˆçš„ç¬é—´ï¼ŒæŒç»­çš„å¤§å¹¶å‘ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œå°±åœ¨è¿™ä¸ª Key çš„ç‚¹ä¸Šå‡»ç©¿äº†ç¼“å­˜ã€‚</p><p><strong>å‡»ç©¿è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>ä½¿ç”¨äº’æ–¥é”æˆ–è€…åˆ†å¸ƒå¼é”æ¥å¯¹å¹¶å‘è¯·æ±‚è¿›è¡Œæ§åˆ¶ï¼Œé¿å…å¯¹åŒä¸€èµ„æºçš„å¹¶å‘è¯»å†™ç«äº‰ï¼Œå¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨çƒ­ç‚¹æ•°æ®é¢„åŠ è½½ç­‰æœºåˆ¶æ¥æå‰å°†çƒ­ç‚¹æ•°æ®åŠ å…¥ç¼“å­˜ï¼Œåœ¨å…¶å¤±æ•ˆæ—¶å¿«é€Ÿåˆ·æ–°ç¼“å­˜</p><p>å‚è€ƒï¼š<a href="https://mp.weixin.qq.com/s/G0PUOOD9_IgTJEVUKsTOmg" title="2W å­—å›¾è§£ Redisï¼Œé¢è¯•å¿…è¿‡å¿…æ€æŠ€ï¼ï¼">2W å­—å›¾è§£ Redisï¼Œé¢è¯•å¿…è¿‡å¿…æ€æŠ€ï¼ï¼</a></p><p><a href="https://mp.weixin.qq.com/s/1TYKqtpo59HhliZtqcBQiw" title="JAVAæ¶æ„ | Redisåˆ†å¸ƒå¼ç¼“å­˜åŸç†åˆ†æ">JAVAæ¶æ„ | Redisåˆ†å¸ƒå¼ç¼“å­˜åŸç†åˆ†æ</a></p><p><a href="https://blog.csdn.net/ymb615ymb/article/details/123392106" title="Â  Â  Â  Â  Â  åä¸‰ã€RedisæŒä¹…åŒ–ä¹‹RDBåŸç†_ä¼šé£çš„ITèœ—ç‰›çš„åšå®¢-CSDNåšå®¢_rdb">åä¸‰ã€RedisæŒä¹…åŒ–ä¹‹RDBåŸç†_ä¼šé£çš„ITèœ—ç‰›çš„åšå®¢-CSDNåšå®¢_rdb</a></p>]]></content>
    
    
    <summary type="html">Redisæ·±åº¦è§£æï¼šç‰¹æ€§ã€ç¼“å­˜ç­–ç•¥ã€æŒä¹…åŒ–ä¸é›†ç¾¤å®æˆ˜</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="http://www.formeasy.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="http://www.formeasy.cc/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Redisçš„å“¨å…µæ¨¡å¼åŸç†è¯¦è§£</title>
    <link href="http://www.formeasy.cc/2025/08/20/Redis/Redis%E7%9A%84%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3/"/>
    <id>http://www.formeasy.cc/2025/08/20/Redis/Redis%E7%9A%84%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3/</id>
    <published>2025-08-20T00:59:32.000Z</published>
    <updated>2025-08-20T01:52:03.940Z</updated>
    
    <content type="html"><![CDATA[<h2 id="redisçš„å“¨å…µæ¨¡å¼åŸç†è¯¦è§£"><a class="markdownIt-Anchor" href="#redisçš„å“¨å…µæ¨¡å¼åŸç†è¯¦è§£"></a> Redisçš„å“¨å…µæ¨¡å¼åŸç†è¯¦è§£</h2><h3 id="å¼€ç¯‡å“¨å…µæ¨¡å¼å°±åƒåŸå¸‚çš„åº”æ€¥æŒ‡æŒ¥ä¸­å¿ƒ"><a class="markdownIt-Anchor" href="#å¼€ç¯‡å“¨å…µæ¨¡å¼å°±åƒåŸå¸‚çš„åº”æ€¥æŒ‡æŒ¥ä¸­å¿ƒ"></a> å¼€ç¯‡ï¼šå“¨å…µæ¨¡å¼å°±åƒåŸå¸‚çš„åº”æ€¥æŒ‡æŒ¥ä¸­å¿ƒ</h3><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªç¹å¿™çš„åŸå¸‚äº¤é€šç³»ç»Ÿã€‚å½“ä¸»è¦äº¤é€šæ¢çº½å‡ºç°æ•…éšœæ—¶ï¼Œå¦‚æœæ²¡æœ‰åº”æ€¥æœºåˆ¶ï¼Œæ•´ä¸ªåŸå¸‚çš„äº¤é€šå°±ä¼šé™·å…¥ç˜«ç—ªã€‚è¿™æ—¶ï¼ŒåŸå¸‚çš„åº”æ€¥æŒ‡æŒ¥ä¸­å¿ƒå°±ä¼šå¯åŠ¨ï¼Œè‡ªåŠ¨æ£€æµ‹æ•…éšœã€åè°ƒå¤‡ç”¨è·¯çº¿ã€é€šçŸ¥ç›¸å…³éƒ¨é—¨ï¼Œç¡®ä¿åŸå¸‚äº¤é€šèƒ½å¤Ÿç»§ç»­è¿è¡Œã€‚</p><p>Redisçš„å“¨å…µ(Sentinel)æ¨¡å¼å°±æ˜¯è¿™æ ·ä¸€ä¸ª&quot;åº”æ€¥æŒ‡æŒ¥ä¸­å¿ƒ&quot;ã€‚åœ¨Redisä¸»ä»æ¶æ„ä¸­ï¼Œå¦‚æœä¸»èŠ‚ç‚¹(master)å‡ºç°æ•…éšœï¼Œå“¨å…µç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹åˆ°é—®é¢˜ï¼Œç„¶åä»ä»èŠ‚ç‚¹(slave)ä¸­é€‰ä¸¾å‡ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥åˆ°æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œç¡®ä¿RedisæœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚</p><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨Rediså“¨å…µæ¨¡å¼çš„åŸç†ã€å·¥ä½œæœºåˆ¶å’Œå®ç°ç»†èŠ‚ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œå¤§å®¶å°†äº†è§£åˆ°å“¨å…µæ¨¡å¼å¦‚ä½•ä¿éšœRedisçš„é«˜å¯ç”¨æ€§ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•é…ç½®å’Œä½¿ç”¨å“¨å…µæ¨¡å¼ã€‚</p><h3 id="ä¸€-rediså“¨å…µæ¨¡å¼çš„åŸºæœ¬æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#ä¸€-rediså“¨å…µæ¨¡å¼çš„åŸºæœ¬æ¦‚å¿µ"></a> ä¸€ã€Rediså“¨å…µæ¨¡å¼çš„åŸºæœ¬æ¦‚å¿µ</h3><p>ç†è§£äº†å“¨å…µæ¨¡å¼çš„ç”Ÿæ´»æ¯”å–»åï¼Œæˆ‘ä»¬æ¥çœ‹å®ƒçš„æŠ€æœ¯å®šä¹‰ã€‚Rediså“¨å…µæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”¨äºç›‘æ§Redisä¸»ä»æœåŠ¡å™¨çš„çŠ¶æ€ï¼Œå¹¶åœ¨ä¸»æœåŠ¡å™¨å‡ºç°æ•…éšœæ—¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»(failover)ã€‚</p><p><img src="73307303d8b5f6080d6ba616429b7e35.png" alt="" /></p><p>ä¸Šå›¾å±•ç¤ºäº†Rediså“¨å…µæ¨¡å¼çš„åŸºæœ¬æ¶æ„ã€‚å¤šä¸ªå“¨å…µèŠ‚ç‚¹ç›‘æ§ç€ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ï¼Œå“¨å…µä¹‹é—´ä¹Ÿä¼šäº’ç›¸é€šä¿¡ã€‚</p><h4 id="11-å“¨å…µæ¨¡å¼çš„ä¸»è¦åŠŸèƒ½"><a class="markdownIt-Anchor" href="#11-å“¨å…µæ¨¡å¼çš„ä¸»è¦åŠŸèƒ½"></a> 1.1 å“¨å…µæ¨¡å¼çš„ä¸»è¦åŠŸèƒ½</h4><ul><li><strong>ç›‘æ§(Monitoring)</strong>ï¼šå“¨å…µä¼šå®šæœŸæ£€æŸ¥ä¸»ä»èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸å·¥ä½œ</li><li><strong>é€šçŸ¥(Notification)</strong>ï¼šå½“è¢«ç›‘æ§çš„Rediså®ä¾‹å‡ºç°é—®é¢˜æ—¶ï¼Œå“¨å…µå¯ä»¥é€šè¿‡APIé€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜</li><li><strong>è‡ªåŠ¨æ•…éšœè½¬ç§»(Automatic failover)</strong>ï¼šå¦‚æœä¸»èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå“¨å…µå¯ä»¥å¯åŠ¨æ•…éšœè½¬ç§»è¿‡ç¨‹ï¼Œå°†ä¸€ä¸ªä»èŠ‚ç‚¹å‡çº§ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</li><li><strong>é…ç½®æä¾›è€…(Configuration provider)</strong>ï¼šå®¢æˆ·ç«¯å¯ä»¥æŸ¥è¯¢å“¨å…µè·å–å½“å‰Redisä¸»èŠ‚ç‚¹çš„åœ°å€</li></ul><h4 id="12-å“¨å…µæ¨¡å¼çš„ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#12-å“¨å…µæ¨¡å¼çš„ç‰¹ç‚¹"></a> 1.2 å“¨å…µæ¨¡å¼çš„ç‰¹ç‚¹</h4><p>å“¨å…µæ¨¡å¼å…·æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦ç‰¹ç‚¹ï¼š</p><ol><li><strong>åˆ†å¸ƒå¼ç‰¹æ€§</strong>ï¼šå“¨å…µæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé€šå¸¸ç”±å¤šä¸ªå“¨å…µèŠ‚ç‚¹ç»„æˆï¼Œé¿å…å•ç‚¹æ•…éšœ</li><li><strong>è‡ªåŠ¨æ•…éšœæ£€æµ‹</strong>ï¼šå“¨å…µä½¿ç”¨å¿ƒè·³æœºåˆ¶å’ŒæŠ•ç¥¨åè®®æ¥æ£€æµ‹èŠ‚ç‚¹æ•…éšœ</li><li><strong>è‡ªåŠ¨æ•…éšœæ¢å¤</strong>ï¼šæ£€æµ‹åˆ°ä¸»èŠ‚ç‚¹æ•…éšœåï¼Œå“¨å…µä¼šè‡ªåŠ¨é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹å¹¶é‡æ–°é…ç½®ç³»ç»Ÿ</li><li><strong>å®¢æˆ·ç«¯é€æ˜</strong>ï¼šå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡å“¨å…µè‡ªåŠ¨å‘ç°å½“å‰çš„ä¸»èŠ‚ç‚¹ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹é…ç½®</li></ol><h3 id="äºŒ-å“¨å…µæ¨¡å¼çš„å·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#äºŒ-å“¨å…µæ¨¡å¼çš„å·¥ä½œæµç¨‹"></a> äºŒã€å“¨å…µæ¨¡å¼çš„å·¥ä½œæµç¨‹</h3><p>äº†è§£äº†å“¨å…µçš„åŸºæœ¬æ¦‚å¿µåï¼Œæˆ‘ä»¬æ¥çœ‹å®ƒçš„å…·ä½“å·¥ä½œæµç¨‹ã€‚å“¨å…µçš„å·¥ä½œå¯ä»¥åˆ†ä¸ºå‡ ä¸ªå…³é”®é˜¶æ®µï¼šç›‘æ§é˜¶æ®µã€æ•…éšœæ£€æµ‹é˜¶æ®µã€æ•…éšœè½¬ç§»é˜¶æ®µå’Œé…ç½®æ›´æ–°é˜¶æ®µã€‚</p><p><img src="d48790c67928c8026979f0bcefdd5452.png" alt="" /></p><p>ä¸Šè¿°åºåˆ—å›¾å±•ç¤ºäº†å“¨å…µæ¨¡å¼çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼ŒåŒ…æ‹¬ç›‘æ§ã€æ•…éšœæ£€æµ‹ã€æ•…éšœè½¬ç§»å’Œé…ç½®æ›´æ–°å››ä¸ªä¸»è¦é˜¶æ®µã€‚</p><h4 id="21-ç›‘æ§é˜¶æ®µ"><a class="markdownIt-Anchor" href="#21-ç›‘æ§é˜¶æ®µ"></a> 2.1 ç›‘æ§é˜¶æ®µ</h4><p>å“¨å…µä¼šå®šæœŸå‘æ‰€æœ‰è¢«ç›‘æ§çš„ä¸»ä»èŠ‚ç‚¹å‘é€PINGå‘½ä»¤ï¼Œæ ¹æ®è¿”å›ç»“æœåˆ¤æ–­èŠ‚ç‚¹çŠ¶æ€ï¼š</p><ol><li>å¦‚æœèŠ‚ç‚¹åœ¨<code>down-after-milliseconds</code>æ—¶é—´å†…æ²¡æœ‰æ­£ç¡®å“åº”PINGå‘½ä»¤ï¼Œå“¨å…µä¼šå°†è¯¥èŠ‚ç‚¹æ ‡è®°ä¸º&quot;ä¸»è§‚ä¸‹çº¿&quot;(subjectively down)</li><li>å“¨å…µä¼šé€šè¿‡å‘å¸ƒ/è®¢é˜…é¢‘é“ä¸å…¶ä»–å“¨å…µäº¤æµï¼Œç¡®è®¤èŠ‚ç‚¹çŠ¶æ€</li><li>å½“è¶³å¤Ÿæ•°é‡çš„å“¨å…µ(ç”±<code>quorum</code>å‚æ•°å†³å®š)éƒ½è®¤ä¸ºä¸»èŠ‚ç‚¹ä¸å¯è¾¾æ—¶ï¼Œä¸»èŠ‚ç‚¹è¢«æ ‡è®°ä¸º&quot;å®¢è§‚ä¸‹çº¿&quot;(objectively down)</li></ol><h4 id="22-æ•…éšœè½¬ç§»é˜¶æ®µ"><a class="markdownIt-Anchor" href="#22-æ•…éšœè½¬ç§»é˜¶æ®µ"></a> 2.2 æ•…éšœè½¬ç§»é˜¶æ®µ</h4><p>ä¸€æ—¦ä¸»èŠ‚ç‚¹è¢«ç¡®è®¤ä¸ºå®¢è§‚ä¸‹çº¿ï¼Œå“¨å…µä¼šå¼€å§‹æ•…éšœè½¬ç§»è¿‡ç¨‹ï¼š</p><ol><li>å“¨å…µä¼šä»å­˜æ´»çš„ä»èŠ‚ç‚¹ä¸­é€‰ä¸¾ä¸€ä¸ªä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹</li><li>é€‰ä¸¾æ ‡å‡†åŒ…æ‹¬ï¼šä»èŠ‚ç‚¹çš„ä¼˜å…ˆçº§ã€å¤åˆ¶åç§»é‡ã€è¿è¡ŒIDç­‰</li><li>å“¨å…µä¼šå‘é€‰å®šçš„ä»èŠ‚ç‚¹å‘é€<code>SLAVEOF NO ONE</code>å‘½ä»¤ï¼Œå°†å…¶æå‡ä¸ºä¸»èŠ‚ç‚¹</li><li>å“¨å…µä¼šå‘å…¶ä»–ä»èŠ‚ç‚¹å‘é€<code>SLAVEOF</code>å‘½ä»¤ï¼Œè®©å®ƒä»¬å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹</li><li>å“¨å…µä¼šæ›´æ–°è‡ªå·±çš„é…ç½®ï¼Œå°†æ•…éšœçš„ä¸»èŠ‚ç‚¹æ ‡è®°ä¸ºä»èŠ‚ç‚¹(å½“å®ƒæ¢å¤æ—¶)</li></ol><h3 id="ä¸‰-å“¨å…µæ¨¡å¼çš„é…ç½®ä¸å®ç°"><a class="markdownIt-Anchor" href="#ä¸‰-å“¨å…µæ¨¡å¼çš„é…ç½®ä¸å®ç°"></a> ä¸‰ã€å“¨å…µæ¨¡å¼çš„é…ç½®ä¸å®ç°</h3><p>ç†è§£äº†å“¨å…µçš„å·¥ä½œåŸç†åï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨å“¨å…µæ¨¡å¼ã€‚Rediså“¨å…µçš„é…ç½®ç›¸å¯¹ç®€å•ï¼Œä½†æœ‰ä¸€äº›å…³é”®å‚æ•°éœ€è¦æ³¨æ„ã€‚</p><h4 id="31-å“¨å…µé…ç½®æ–‡ä»¶ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#31-å“¨å…µé…ç½®æ–‡ä»¶ç¤ºä¾‹"></a> 3.1 å“¨å…µé…ç½®æ–‡ä»¶ç¤ºä¾‹</h4><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„å“¨å…µé…ç½®æ–‡ä»¶<code>sentinel.conf</code>ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">port 26379</span><br><span class="line">daemonize yes</span><br><span class="line">pidfile /var/run/redis-sentinel.pid</span><br><span class="line">logfile &quot;/var/log/redis/sentinel.log&quot;</span><br><span class="line"></span><br><span class="line">sentinel monitor mymaster 127.0.0.1 6379 2</span><br><span class="line">sentinel down-after-milliseconds mymaster 5000</span><br><span class="line">sentinel failover-timeout mymaster 180000</span><br><span class="line">sentinel parallel-syncs mymaster 1</span><br><span class="line"></span><br><span class="line">sentinel auth-pass mymaster MySecurePassword</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼š<br />- <code>sentinel monitor</code>æŒ‡å®šè¦ç›‘æ§çš„ä¸»èŠ‚ç‚¹<br />- <code>down-after-milliseconds</code>å®šä¹‰å¤šä¹…æ— å“åº”è§†ä¸ºä¸‹çº¿<br />- <code>failover-timeout</code>å®šä¹‰æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´<br />- <code>parallel-syncs</code>æ§åˆ¶åŒæ—¶åŒæ­¥çš„ä»èŠ‚ç‚¹æ•°é‡<br />- <code>auth-pass</code>è®¾ç½®Redisè®¤è¯å¯†ç </p><h4 id="32-å¯åŠ¨å“¨å…µè¿›ç¨‹"><a class="markdownIt-Anchor" href="#32-å¯åŠ¨å“¨å…µè¿›ç¨‹"></a> 3.2 å¯åŠ¨å“¨å…µè¿›ç¨‹</h4><p>é…ç½®å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å“¨å…µï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server /path/to/sentinel.conf --sentinel</span><br></pre></td></tr></table></figure><p>é€šå¸¸å»ºè®®è‡³å°‘éƒ¨ç½²3ä¸ªå“¨å…µèŠ‚ç‚¹ï¼Œä»¥ç¡®ä¿é«˜å¯ç”¨æ€§ã€‚å“¨å…µèŠ‚ç‚¹æ•°é‡åº”è¯¥æ˜¯å¥‡æ•°ï¼Œä»¥ä¾¿åœ¨æŠ•ç¥¨æ—¶èƒ½è¾¾æˆå¤šæ•°å…±è¯†ã€‚</p><p><img src="d5c8de4a9b05c063851b8cc07e09c96e.png" alt="" /></p><p>å“¨å…µéƒ¨ç½²çš„æ€ç»´å¯¼å›¾ï¼Œæ€»ç»“äº†å“¨å…µéƒ¨ç½²çš„å…³é”®è€ƒè™‘å› ç´ ã€‚</p><h4 id="33-javaå®¢æˆ·ç«¯è¿æ¥å“¨å…µ"><a class="markdownIt-Anchor" href="#33-javaå®¢æˆ·ç«¯è¿æ¥å“¨å…µ"></a> 3.3 Javaå®¢æˆ·ç«¯è¿æ¥å“¨å…µ</h4><p>åœ¨Javaåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Jedisæˆ–Lettuceç­‰å®¢æˆ·ç«¯åº“è¿æ¥Rediså“¨å…µã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨Jedisè¿æ¥å“¨å…µçš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisSentinelPool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SentinelExample</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MASTER_NAME</span> <span class="operator">=</span> <span class="string">&quot;mymaster&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;String&gt; SENTINELS = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(Arrays.asList(</span><br><span class="line">        <span class="string">&quot;sentinel1:26379&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sentinel2:26379&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sentinel3:26379&quot;</span></span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå“¨å…µè¿æ¥æ± </span></span><br><span class="line">        <span class="type">JedisSentinelPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisSentinelPool</span>(MASTER_NAME, SENTINELS);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> pool.getResource()) &#123;</span><br><span class="line">            <span class="comment">// æ‰§è¡ŒRediså‘½ä»¤</span></span><br><span class="line">            jedis.set(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Got value: &quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        pool.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°Javaä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Jedisè¿æ¥Rediså“¨å…µã€‚JedisSentinelPoolä¼šè‡ªåŠ¨ä»å“¨å…µè·å–å½“å‰ä¸»èŠ‚ç‚¹åœ°å€ï¼Œå¹¶åœ¨æ•…éšœè½¬ç§»åè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°çš„ä¸»èŠ‚ç‚¹ã€‚</p><h3 id="å››-å“¨å…µæ¨¡å¼çš„å†…éƒ¨åŸç†è¯¦è§£"><a class="markdownIt-Anchor" href="#å››-å“¨å…µæ¨¡å¼çš„å†…éƒ¨åŸç†è¯¦è§£"></a> å››ã€å“¨å…µæ¨¡å¼çš„å†…éƒ¨åŸç†è¯¦è§£</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†å“¨å…µçš„åŸºæœ¬ä½¿ç”¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨å“¨å…µæ¨¡å¼çš„å†…éƒ¨å·¥ä½œåŸç†ã€‚å“¨å…µç³»ç»Ÿçš„æ ¸å¿ƒåœ¨äºå…¶åˆ†å¸ƒå¼å…±è¯†ç®—æ³•å’Œæ•…éšœæ£€æµ‹æœºåˆ¶ã€‚</p><h4 id="41-å“¨å…µä¹‹é—´çš„é€šä¿¡"><a class="markdownIt-Anchor" href="#41-å“¨å…µä¹‹é—´çš„é€šä¿¡"></a> 4.1 å“¨å…µä¹‹é—´çš„é€šä¿¡</h4><p>å“¨å…µèŠ‚ç‚¹ä¹‹é—´é€šè¿‡Redisçš„å‘å¸ƒ/è®¢é˜…åŠŸèƒ½è¿›è¡Œé€šä¿¡ã€‚æ¯ä¸ªå“¨å…µä¼šå‘<code>__sentinel__:hello</code>é¢‘é“å‘å¸ƒæ¶ˆæ¯ï¼Œå†…å®¹åŒ…æ‹¬ï¼š</p><ul><li>å“¨å…µçš„è¿è¡ŒID</li><li>å“¨å…µçš„é…ç½®çºªå…ƒ(configuration epoch)</li><li>å“¨å…µç›‘æ§çš„ä¸»èŠ‚ç‚¹ä¿¡æ¯</li><li>å“¨å…µçš„IPå’Œç«¯å£</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå“¨å…µå¯ä»¥å‘ç°å…¶ä»–å“¨å…µå¹¶å»ºç«‹é€šä¿¡ã€‚</p><p><img src="dc649b87f16a98536c65073ea9bf2869.png" alt="" /></p><p>å“¨å…µçŠ¶æ€å›¾å±•ç¤ºäº†å“¨å…µä»å¯åŠ¨åˆ°å®Œæˆæ•…éšœè½¬ç§»çš„å®Œæ•´çŠ¶æ€å˜åŒ–è¿‡ç¨‹ã€‚</p><h4 id="42-æ•…éšœæ£€æµ‹ç®—æ³•"><a class="markdownIt-Anchor" href="#42-æ•…éšœæ£€æµ‹ç®—æ³•"></a> 4.2 æ•…éšœæ£€æµ‹ç®—æ³•</h4><p>å“¨å…µçš„æ•…éšœæ£€æµ‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ol><li><strong>ä¸»è§‚ä¸‹çº¿(SDOWN)</strong>ï¼šå•ä¸ªå“¨å…µè®¤ä¸ºèŠ‚ç‚¹ä¸å¯ç”¨</li><li><strong>å®¢è§‚ä¸‹çº¿(ODOWN)</strong>ï¼šè¶³å¤Ÿæ•°é‡çš„å“¨å…µè®¤ä¸ºèŠ‚ç‚¹ä¸å¯ç”¨</li></ol><p>å®¢è§‚ä¸‹çº¿çš„åˆ¤å®šéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quorum &lt;= number of sentinels agreeing the master is down</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>quorum</code>æ˜¯åœ¨é…ç½®ä¸­æŒ‡å®šçš„å€¼ï¼Œé€šå¸¸è®¾ç½®ä¸ºå“¨å…µæ•°é‡çš„ä¸€åŠåŠ ä¸€ã€‚</p><h4 id="43-é¢†å¯¼è€…é€‰ä¸¾"><a class="markdownIt-Anchor" href="#43-é¢†å¯¼è€…é€‰ä¸¾"></a> 4.3 é¢†å¯¼è€…é€‰ä¸¾</h4><p>å½“ä¸»èŠ‚ç‚¹è¢«ç¡®è®¤ä¸ºå®¢è§‚ä¸‹çº¿åï¼Œå“¨å…µä¼šé€šè¿‡Raft-likeç®—æ³•é€‰ä¸¾ä¸€ä¸ªé¢†å¯¼è€…å“¨å…µæ¥æ‰§è¡Œæ•…éšœè½¬ç§»ï¼š</p><ol><li>æ¯ä¸ªå“¨å…µéƒ½å¯ä»¥å‘èµ·é€‰ä¸¾ï¼Œå‘å…¶ä»–å“¨å…µå‘é€<code>SENTINEL is-master-down-by-addr</code>å‘½ä»¤è¯·æ±‚æŠ•ç¥¨</li><li>å“¨å…µä¼šæŠ•ç¥¨ç»™ç¬¬ä¸€ä¸ªè¯·æ±‚çš„å“¨å…µï¼Œå¹¶åœ¨ä¸€ä¸ªé…ç½®çºªå…ƒå†…ä¸å†æŠ•ç¥¨ç»™å…¶ä»–å“¨å…µ</li><li>è·å¾—å¤šæ•°ç¥¨çš„å“¨å…µæˆä¸ºé¢†å¯¼è€…ï¼Œè´Ÿè´£æ‰§è¡Œæ•…éšœè½¬ç§»</li><li>å¦‚æœé€‰ä¸¾è¶…æ—¶(ç”±<code>failover-timeout</code>æ§åˆ¶)ä¸”æ²¡æœ‰é€‰å‡ºé¢†å¯¼è€…ï¼Œä¼šé‡æ–°å¼€å§‹é€‰ä¸¾</li></ol><h4 id="44-ä»èŠ‚ç‚¹é€‰ä¸¾"><a class="markdownIt-Anchor" href="#44-ä»èŠ‚ç‚¹é€‰ä¸¾"></a> 4.4 ä»èŠ‚ç‚¹é€‰ä¸¾</h4><p>é¢†å¯¼è€…å“¨å…µä¼šä»ç¬¦åˆæ¡ä»¶çš„ä»èŠ‚ç‚¹ä¸­é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹ï¼Œé€‰ä¸¾æ ‡å‡†åŒ…æ‹¬ï¼š</p><ul><li>ä»èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹çš„æ–­å¼€æ—¶é—´</li><li>ä»èŠ‚ç‚¹çš„ä¼˜å…ˆçº§(<code>slave-priority</code>)</li><li>ä»èŠ‚ç‚¹çš„å¤åˆ¶åç§»é‡</li><li>ä»èŠ‚ç‚¹çš„è¿è¡ŒID(ä½œä¸ºæœ€åçš„æ¯”è¾ƒæ ‡å‡†)</li></ul><p>é€‰ä¸¾è¿‡ç¨‹ä¼šä¼˜å…ˆé€‰æ‹©æ•°æ®æœ€æ–°çš„ä»èŠ‚ç‚¹ï¼Œç¡®ä¿æœ€å°åŒ–æ•°æ®ä¸¢å¤±ã€‚</p><h3 id="äº”-å“¨å…µæ¨¡å¼çš„æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#äº”-å“¨å…µæ¨¡å¼çš„æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹"></a> äº”ã€å“¨å…µæ¨¡å¼çš„æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3><p>äº†è§£äº†å“¨å…µæ¨¡å¼çš„å†…éƒ¨åŸç†åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€äº›å®é™…ä½¿ç”¨ä¸­çš„æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜ã€‚</p><h4 id="51-å“¨å…µéƒ¨ç½²å»ºè®®"><a class="markdownIt-Anchor" href="#51-å“¨å…µéƒ¨ç½²å»ºè®®"></a> 5.1 å“¨å…µéƒ¨ç½²å»ºè®®</h4><ul><li><strong>å“¨å…µæ•°é‡</strong>ï¼šè‡³å°‘éƒ¨ç½²3ä¸ªå“¨å…µèŠ‚ç‚¹ï¼Œæœ€å¥½éƒ¨ç½²5ä¸ªä»¥æä¾›æ›´é«˜çš„å®¹é”™èƒ½åŠ›</li><li><strong>éƒ¨ç½²ä½ç½®</strong>ï¼šå°†å“¨å…µéƒ¨ç½²åœ¨ä¸åŒçš„ç‰©ç†æœºæˆ–å¯ç”¨åŒºï¼Œé¿å…å•ç‚¹æ•…éšœ</li><li><strong>ç›‘æ§é—´éš”</strong>ï¼šåˆç†è®¾ç½®<code>down-after-milliseconds</code>ï¼Œé€šå¸¸è®¾ç½®ä¸º5-30ç§’</li><li><strong>ç½‘ç»œè¦æ±‚</strong>ï¼šç¡®ä¿å“¨å…µèŠ‚ç‚¹ä¹‹é—´çš„ç½‘ç»œå»¶è¿Ÿä½ä¸”ç¨³å®š</li></ul><h4 id="52-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#52-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"></a> 5.2 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h4><p><img src="047fd05d5046fe27313ee2f757d11d5f.png" alt="" /></p><p>å¸¸è§é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆçš„æµç¨‹å›¾ã€‚åˆç†é…ç½®å¯ä»¥é¿å…å¤§å¤šæ•°é—®é¢˜ã€‚</p><h4 id="53-å“¨å…µæ¨¡å¼çš„å±€é™æ€§"><a class="markdownIt-Anchor" href="#53-å“¨å…µæ¨¡å¼çš„å±€é™æ€§"></a> 5.3 å“¨å…µæ¨¡å¼çš„å±€é™æ€§</h4><p>è™½ç„¶å“¨å…µæ¨¡å¼æä¾›äº†é«˜å¯ç”¨æ€§ï¼Œä½†ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼š</p><ol><li><strong>å†™æ“ä½œä¸åˆ†åŒº</strong>ï¼šå“¨å…µæ¨¡å¼ä¸è§£å†³æ•°æ®åˆ†åŒºé—®é¢˜ï¼Œæ‰€æœ‰å†™æ“ä½œä»ç„¶é›†ä¸­åœ¨ä¸»èŠ‚ç‚¹</li><li><strong>æ•…éšœè½¬ç§»æœŸé—´æ•°æ®å¯èƒ½ä¸¢å¤±</strong>ï¼šåœ¨ä¸»èŠ‚ç‚¹æ•…éšœæ—¶ï¼ŒæœªåŒæ­¥åˆ°ä»èŠ‚ç‚¹çš„æ•°æ®ä¼šä¸¢å¤±</li><li><strong>é…ç½®å¤æ‚æ€§</strong>ï¼šéœ€è¦æ­£ç¡®é…ç½®å¤šä¸ªå‚æ•°æ‰èƒ½ç¡®ä¿ç³»ç»Ÿç¨³å®š</li><li><strong>ç½‘ç»œåˆ†åŒºæ•æ„Ÿ</strong>ï¼šåœ¨ç½‘ç»œåˆ†åŒºæƒ…å†µä¸‹å¯èƒ½å‡ºç°è„‘è£‚é—®é¢˜</li></ol><h3 id="å…­-æ€»ç»“"><a class="markdownIt-Anchor" href="#å…­-æ€»ç»“"></a> å…­ã€æ€»ç»“</h3><p>é€šè¿‡ä»Šå¤©çš„è®¨è®ºï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº†Rediså“¨å…µæ¨¡å¼çš„åŸç†å’Œå®ç°ã€‚è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹æœ¬æ–‡çš„ä¸»è¦å†…å®¹ï¼š</p><ol><li><strong>åŸºæœ¬æ¦‚å¿µ</strong>ï¼šå“¨å…µæ¨¡å¼æ˜¯Redisçš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œç”¨äºè‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œè½¬ç§»</li><li><strong>å·¥ä½œæµç¨‹</strong>ï¼šåŒ…æ‹¬ç›‘æ§ã€æ•…éšœæ£€æµ‹ã€æ•…éšœè½¬ç§»å’Œé…ç½®æ›´æ–°å››ä¸ªé˜¶æ®µ</li><li><strong>é…ç½®å®ç°</strong>ï¼šå“¨å…µçš„é…ç½®æ–¹æ³•å’ŒJavaå®¢æˆ·ç«¯è¿æ¥æ–¹å¼</li><li><strong>å†…éƒ¨åŸç†</strong>ï¼šå“¨å…µä¹‹é—´çš„é€šä¿¡ã€æ•…éšœæ£€æµ‹ç®—æ³•ã€é¢†å¯¼è€…é€‰ä¸¾å’Œä»èŠ‚ç‚¹é€‰ä¸¾</li><li><strong>æœ€ä½³å®è·µ</strong>ï¼šå“¨å…µéƒ¨ç½²å»ºè®®å’Œå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</li></ol><p>Rediså“¨å…µæ¨¡å¼æ˜¯æ„å»ºé«˜å¯ç”¨Redisç³»ç»Ÿçš„å…³é”®ç»„ä»¶ã€‚è™½ç„¶å®ƒæœ‰ä¸€äº›å±€é™æ€§ï¼Œä½†åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹éƒ½èƒ½æä¾›å¯é çš„æœåŠ¡ä¿éšœã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨Rediså“¨å…µæ¨¡å¼ã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®ç»“åˆç›‘æ§ç³»ç»Ÿå¯¹å“¨å…µå’ŒRediså®ä¾‹è¿›è¡Œç›‘æ§ï¼Œå¹¶å®šæœŸæµ‹è¯•æ•…éšœè½¬ç§»è¿‡ç¨‹ï¼Œç¡®ä¿ç³»ç»Ÿåœ¨çœŸæ­£æ•…éšœæ—¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚</p>]]></content>
    
    
    <summary type="html">Redisçš„å“¨å…µæ¨¡å¼åŸç†è¯¦è§£</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="http://www.formeasy.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="http://www.formeasy.cc/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Rediså…¥é—¨ä¸èƒŒæ™¯è¯¦è§£ï¼šæ„å»ºé«˜å¹¶å‘ã€é«˜å¯ç”¨ç³»ç»Ÿçš„å…³é”®åŸºçŸ³</title>
    <link href="http://www.formeasy.cc/2025/08/20/Redis/Redis%E5%85%A5%E9%97%A8%E4%B8%8E%E8%83%8C%E6%99%AF%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%9E%84%E5%BB%BA%E9%AB%98%E5%B9%B6%E5%8F%91%E3%80%81%E9%AB%98%E5%8F%AF%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%85%B3%E9%94%AE%E5%9F%BA%E7%9F%B3/"/>
    <id>http://www.formeasy.cc/2025/08/20/Redis/Redis%E5%85%A5%E9%97%A8%E4%B8%8E%E8%83%8C%E6%99%AF%E8%AF%A6%E8%A7%A3%EF%BC%9A%E6%9E%84%E5%BB%BA%E9%AB%98%E5%B9%B6%E5%8F%91%E3%80%81%E9%AB%98%E5%8F%AF%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%85%B3%E9%94%AE%E5%9F%BA%E7%9F%B3/</id>
    <published>2025-08-20T00:51:48.000Z</published>
    <updated>2025-08-20T01:51:55.298Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><p>åœ¨å½“ä»Šè¿™ä¸ªæ•°æ®é©±åŠ¨çš„æ—¶ä»£ï¼Œåº”ç”¨çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§å·²æˆä¸ºè¡¡é‡å…¶æˆåŠŸçš„å…³é”®æŒ‡æ ‡ã€‚å½“ä¼ ç»Ÿçš„å•æœºæ¶æ„é¢å¯¹æ—¥ç›Šå¢é•¿çš„ç”¨æˆ·é‡å’Œæ•°æ®æ´ªæµè€Œæ˜¾å¾—åŠ›ä¸ä»å¿ƒæ—¶ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¾¿åº”è¿è€Œç”Ÿã€‚ç„¶è€Œï¼Œç³»ç»Ÿçš„åˆ†å¸ƒå¼æ¼”è¿›ä¹Ÿå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ï¼šå¦‚ä½•åœ¨å¤šå°æœåŠ¡å™¨ä¹‹é—´é«˜æ•ˆã€å¿«é€Ÿåœ°å…±äº«å’Œè®¿é—®æ•°æ®ï¼Ÿ<br />è¿™ç¯‡æ–‡ç« å°†å¸¦æ‚¨è®¤è¯†ä¸€ä¸ªåœ¨åˆ†å¸ƒå¼ä¸–ç•Œä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦è§’è‰²çš„æŠ€æœ¯â€”â€”Redisã€‚æˆ‘ä»¬å°†ä»æœ€åŸºç¡€çš„å•æœºæ¶æ„å‡ºå‘ï¼Œä¸€æ­¥æ­¥æ¢ç´¢ç³»ç»Ÿå¦‚ä½•æ¼”è¿›ä¸ºå¤æ‚çš„åˆ†å¸ƒå¼é›†ç¾¤ï¼Œå¹¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ­ç¤ºRedisä½œä¸ºé«˜æ€§èƒ½å†…å­˜æ•°æ®åº“å’Œç¼“å­˜ä¸­é—´ä»¶çš„æ ¸å¿ƒä»·å€¼ã€‚æ— è®ºæ‚¨æ˜¯åˆšå…¥é—¨çš„å¼€å‘è€…ï¼Œè¿˜æ˜¯å¸Œæœ›æ·±åŒ–å¯¹ç³»ç»Ÿæ¶æ„ç†è§£çš„å·¥ç¨‹å¸ˆï¼Œæœ¬æ–‡éƒ½å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªæ¸…æ™°çš„è·¯çº¿å›¾ï¼Œå¸®åŠ©æ‚¨ç†è§£Redisä¸ºä½•èƒ½æˆä¸ºç°ä»£é«˜æ€§èƒ½åº”ç”¨ä¸å¯æˆ–ç¼ºçš„åŸºçŸ³ã€‚</p><h2 id="è®¤è¯†redis"><a class="markdownIt-Anchor" href="#è®¤è¯†redis"></a> è®¤è¯†Redis</h2><p>åœ¨å†…å­˜ä¸­è¿›è¡Œæ•°æ®å­˜å‚¨<img src="b7db0fbbbabea55259138d69bb08ddc2.png" alt="image.png" /></p><p>ä½†æ˜¯æˆ‘ä»¬å®šä¹‰å˜é‡ä¸æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œå­˜å‚¨ä¹ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨redisä¸æ˜¯é¥¶äº†ä¸ªåœˆä¹ˆï¼Ÿ</p><p><strong>redisæ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ‰èƒ½å‘æŒ¥ä½œç”¨</strong></p><p>å¦‚æœåªæ˜¯å•æœºç¨‹åºï¼Œç›´æ¥é€šè¿‡å˜é‡å­˜å‚¨æ•°æ®çš„æ–¹æ³•æ˜¯æ¯”ä½¿ç”¨redisæ›´ä¼˜çš„é€‰æ‹©</p><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®šä¹‰å˜é‡è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè¿›ç¨‹æ˜¯å…·æœ‰éš”ç¦»æ€§çš„ï¼Œå¦‚æœæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„è¯è‚¯å®šæ˜¯æ¶‰åŠåˆ°å¤šä¸ªè¿›ç¨‹çš„ï¼Œç”šè‡³è¯´è¿™å¤šä¸ªè¿›ç¨‹æ˜¯åˆ†å¸ƒåœ¨ä¸åŒçš„ä¸»æœºä¸Šï¼Œè€Œä½ æƒ³å…±äº«åˆ«çš„è¿›ç¨‹çš„å˜é‡è‚¯å®šæ˜¯ä¸è¡Œçš„</p><p><strong>æ‰€ä»¥Redisæ˜¯åŸºäºç½‘ç»œï¼Œå°†è‡ªå·±å†…å­˜ä¸­çš„å˜é‡åˆ†äº«ç»™åˆ«çš„è¿›ç¨‹ï¼Œç”šè‡³ç»™åˆ«çš„ä¸»æœºä¸­çš„è¿›ç¨‹è¿›è¡Œä½¿ç”¨</strong></p><p>mysqlç°åœ¨æœ€å¤§çš„é—®é¢˜åœ¨äºï¼Œè®¿é—®é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œæ•°æ®åœ¨ç¡¬ç›˜ä¸Š<br />redisä¹Ÿå¯ä»¥ä½œä¸ºæ•°æ®åº“ï¼Œåœ¨å†…å­˜ä¸Šçš„ï¼Œé€Ÿåº¦å¿«</p><p>è®¡ç®—æœºè®¿é—®å†…å­˜çš„é€Ÿåº¦æ¯”è®¿é—®ç¡¬ç›˜çš„é€Ÿåº¦å¿«</p><p>å®šæ€§çš„è§’åº¦ï¼Œå¯ä»¥çŸ¥é“rediså¿«å¾ˆå¤šï¼Œä½†æ˜¯å¾ˆéš¾å®šé‡è¡¡é‡ï¼Œå› ä¸ºmysqlå’Œrediså…·ä½“åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯éƒ½ä¸åŒ</p><p>rediså’Œmysqlç›¸æ¯”ï¼Œæœ€å¤§çš„åŠ£åŠ¿ï¼Œå­˜å‚¨ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå†…å­˜æ¯”è¾ƒå°</p><p>ä»åŠŸèƒ½å’Œå­˜å‚¨ç©ºé—´çš„è§’åº¦æ¥è¯´ï¼Œè¿˜æ˜¯mysqlæ›´èƒœä¸€ç­¹çš„</p><p>é‚£ä¹ˆæ˜¯å¦å­˜åœ¨ä¸€ä¸ªæœºåˆ¶ï¼Œè®©å­˜å‚¨é€Ÿåº¦å¿«ï¼Œå­˜å‚¨ç©ºé—´å¤§å‘¢</p><p>å…¸å‹çš„æ–¹æ¡ˆå°±æ˜¯å°†mysqlå’Œredisç»“åˆèµ·æ¥è¿›è¡Œä½¿ç”¨</p><p>ç”¨redisä½œä¸ºmysqlçš„cacheï¼Œå°†æˆ‘ä»¬ç»å¸¸è®¿é—®çš„æ•°æ®ä½¿ç”¨redisè¿›è¡Œå­˜å‚¨ï¼Œå…¨é‡æ•°æ®è¿˜æ˜¯æ”¾åœ¨mysqlä¸­è¿›è¡Œå­˜å‚¨<br />ä»£ä»·å°±æ˜¯ç³»ç»Ÿçš„å¤æ‚ç¨‹åº¦å¤§å¤§æå‡äº†ï¼Œå¦‚æœæ•°æ®å‘ç”Ÿæˆä¿®æ”¹çš„è¯ï¼Œè¿˜æ¶‰åŠåˆ°mysqlå’Œredisä¹‹é—´çš„åŒæ­¥é—®é¢˜</p><p>redisçš„åˆå¿ƒï¼Œæœ€åˆå°±æ˜¯ç”¨æ¥ä½œä¸ºä¸€ä¸ª&quot;æ¶ˆæ¯ä¸­é—´ä»¶&quot;çš„(æ¶ˆæ¯é˜Ÿåˆ—)<br />åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹çš„ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹<br />ä½†æ˜¯å½“å‰å¾ˆå°‘ä¼šä½¿ç”¨redisä½œä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå› ä¸ºç•Œå†…æœ‰æ›´å¤šä¸“ä¸šçš„æ¶ˆæ¯ä¸­é—´ä»¶</p><h2 id="å•æœºæ¶æ„"><a class="markdownIt-Anchor" href="#å•æœºæ¶æ„"></a> å•æœºæ¶æ„</h2><p>å•æœºæ¶æ„ï¼Œåªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨è´Ÿè´£æ‰€å¶çš„å·¥ä½œ<br /><img src="4b6a0a62da2da2cf2dbc1e4ed4185d37.png" alt="image.png" /><br />è¿™é‡Œä½¿ç”¨çš„æœåŠ¡å™¨å¯ä»¥æ˜¯mysql<br />mysqlæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯æœåŠ¡å™¨ç»“æ„çš„é™ˆæ—­<br />æœ¬ä½“æ˜¯mysqlæœåŠ¡å™¨ï¼ˆå­˜å‚¨å’Œç»„ç»‡æ•°æ®çš„éƒ¨åˆ†ï¼‰</p><p>ç»å¤§éƒ¨åˆ†å…¬å¸çš„äº§å“éƒ½æ˜¯è¿™ç§å•æœºæ¶æ„</p><p>å¦‚æœä¸šåŠ¡è¿›ä¸€æ­¥å¢é•¿äº†ï¼Œç”¨æˆ·é‡å’Œæ•°æ®é‡éƒ½æ°´æ¶¨èˆ¹é«˜äº†ï¼Œä¸€å°ä¸»æœºéš¾ä»¥åº”ä»˜çš„æ—¶å€™ï¼Œå°±éœ€è¦å¼•å…¥æ›´å¤šçš„ä¸»æœºï¼Œå¼•å…¥æ›´å¤šçš„ç¡¬ä»¶èµ„æº</p><h2 id="æµ…è°ˆåˆ†å¸ƒå¼ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#æµ…è°ˆåˆ†å¸ƒå¼ç³»ç»Ÿ"></a> æµ…è°ˆåˆ†å¸ƒå¼ç³»ç»Ÿ</h2><h3 id="åˆ†å¸ƒå¼æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#åˆ†å¸ƒå¼æ˜¯ä»€ä¹ˆ"></a> åˆ†å¸ƒå¼æ˜¯ä»€ä¹ˆ</h3><p>ä¸€å°ä¸»æœºçš„ç¡¬ä»¶èµ„æºæ˜¯æœ‰ä¸Šé™çš„<br />ç¡¬ä»¶èµ„æºåŒ…æ‹¬ä¸é™äºä¸‹é¢å‡ ç§ï¼šCPUã€å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œ<br />æœåŠ¡å™¨æ¯æ¬¡æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½æ˜¯éœ€è¦æ¶ˆè€—ä¸Šè¿°çš„ä¸€äº›èµ„æºçš„</p><p>å¦‚æœåŒä¸€æ—¶åˆ»ï¼Œå¤„ç†çš„è¯·æ±‚å¤šäº†ï¼Œæ­¤æ—¶å°±å¯èƒ½ä¼šå¯¼è‡´æŸä¸ªç¡¬ä»¶èµ„æºä¸å¤Ÿç”¨äº†</p><p>æ— è®ºæ˜¯å“ªä¸ªæ–¹é¢ä¸å¤Ÿç”¨äº†ï¼Œéƒ½å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„æ—¶é—´å˜é•¿äº†ï¼Œç”šè‡³äºå¤„ç†å‡ºé”™</p><p>å¦‚æœæˆ‘ä»¬çœŸçš„é‡åˆ°è¿™æ ·çš„æœåŠ¡å™¨ä¸å¤Ÿçš„æƒ…å†µï¼Œå¦‚ä½•è¿›è¡Œå¤„ç†å‘¢<br />1ã€å¼€æº å¢åŠ æ›´å¤šçš„ç¡¬ä»¶èµ„æºï¼ˆä½†æ˜¯ä¸€ä¸ªä¸»æœºä¸Šèƒ½å¢åŠ çš„ç¡¬ä»¶èµ„æºä¹Ÿæ˜¯æœ‰é™çš„ï¼‰<br />2ã€èŠ‚æµï¼ˆè½¯ä»¶ä¸Šçš„ä¼˜åŒ–ï¼‰</p><p>ä¸€å°ä¸»æœºæ‰©å±•åˆ°æé™äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å¤Ÿï¼Œå°±åªèƒ½å¼•å…¥å¤šæ€ä¸»æœºäº†</p><p>ä¸€ä½†å¼•å…¥å¤šå°ä¸»æœºï¼Œå’±ä»¬çš„ç³»ç»Ÿå°±å¯ä»¥æˆä¸ºæ˜¯â€œåˆ†å¸ƒå¼ç³»ç»Ÿâ€</p><p>å¼•å…¥åˆ†å¸ƒå¼ï¼Œè¿™æ˜¯ä¸‡ä¸å¾—å·²<br />ç³»ç»Ÿçš„å¤æ‚ç¨‹åº¦ä¼šå¤§å¤§æé«˜çš„</p><h3 id="æ•°æ®åº“åˆ†ç¦»å’Œè´Ÿè½½å‡è¡¡"><a class="markdownIt-Anchor" href="#æ•°æ®åº“åˆ†ç¦»å’Œè´Ÿè½½å‡è¡¡"></a> æ•°æ®åº“åˆ†ç¦»å’Œè´Ÿè½½å‡è¡¡</h3><p><img src="7f1cd6674c7345e9f99d0c643f1cba7f.png" alt="image.png" /><br />åº”ç”¨æœåŠ¡å™¨ï¼Œé‡Œé¢å¯èƒ½ä¼šåŒ…å«å¾ˆå¤šçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¯èƒ½ä¼šåƒCPUå’Œå†…å­˜</p><p>æ•°æ®åº“æœåŠ¡å™¨ï¼Œéœ€è¦æ›´å¤§çš„ç¡¬ç›˜ç©ºé—´ï¼Œæ›´å¿«çš„è®¿é—®é€Ÿåº¦ï¼Œå¯ä»¥é…ç½®æ›´å¤§ç¡¬ç›˜çš„æœåŠ¡å™¨</p><p>å¼•å…¥æ›´å¤šçš„åº”ç”¨æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œåº”ç”¨æœåŠ¡å™¨å¯èƒ½æ¯”è¾ƒåƒCPUå’Œå†…å­˜ï¼Œå¦‚æœæŠŠCPUå’Œå†…å­˜åƒæ²¡äº†ï¼Œæ­¤æ—¶åº”ç”¨æœåŠ¡å™¨å°±é¡¶ä¸ä½äº†ï¼Œå¼•å…¥æ›´å¤šçš„åº”ç”¨æœåŠ¡å™¨ï¼Œå°±å¯ä»¥æœ‰æ•ˆè§£å†³ä¸Šè¿°é—®é¢˜äº†<br /><img src="d001cc0718214e7cb091bb8bd9918a3a.png" alt="" /><br />ç”¨æˆ·çš„è¯·æ±‚å…ˆåˆ°è¾¾è´Ÿè½½å‡è¡¡å™¨/ç½‘å…³æœåŠ¡å™¨</p><p>å‡è®¾æœ‰1wä¸ªç”¨æˆ·è¯·æ±‚ï¼Œæœ‰2ä¸ªåº”ç”¨æœåŠ¡å™¨çš„è¯ï¼Œæ­¤æ—¶æŒ‰ç…§è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼Œå°±å¯ä»¥è®©æ¯ä¸ªåº”ç”¨æœåŠ¡å™¨æ‰¿æ‹…5kçš„è®¿é—®é‡</p><p>è¿™ä¸ªå°±å’Œå¤šçº¿ç¨‹å…¶å®å¾ˆç›¸ä¼¼çš„</p><p>è´Ÿè½½å‡è¡¡å™¨ï¼Œå¯¹äºè¯·æ±‚é‡çš„æ‰¿æ‹…èƒ½åŠ›ï¼Œè¦è¿œè¶…è¿‡äºåº”ç”¨æœåŠ¡å™¨çš„</p><p>è´Ÿè½½å‡è¡¡å™¨æ˜¯é¢†å¯¼ï¼Œåˆ†é…å·¥ä½œ<br />åº”ç”¨æœåŠ¡å™¨ï¼Œæ˜¯ç»„å‘˜ï¼Œæ‰§è¡Œä»»åŠ¡</p><p>ä¹Ÿå¯èƒ½è¯·æ±‚é‡å¤§é“è´Ÿè½½å‡è¡¡å™¨ä¹Ÿæ‰›ä¸ä½äº†<br />é‚£ä¹ˆæˆ‘ä»¬å°±å¾—å¼•å…¥æ›´å¤šçš„è´Ÿè½½å‡è¡¡å™¨</p><p>å¢åŠ åº”ç”¨æœåŠ¡å™¨ï¼Œç¡®å®èƒ½å¤Ÿå¤„ç†æ›´é«˜çš„è¯·æ±‚é‡<br />ä½†æ˜¯éšä¹‹å­˜å‚¨æœåŠ¡å™¨ï¼Œè¦æ‰¿æ‹…çš„è¯·æ±‚é‡ä¹Ÿå°±æ›´å¤šäº†</p><p><img src="3322d8db8c7d1c211d2c3559d4e6cea3.png" alt="image.png" /><br />å®é™…çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œè¯»çš„é¢‘ç‡æ¯”å†™æ›´é«˜çš„</p><p>å¼•å…¥æ›´å¤šçš„ä»æœåŠ¡å™¨<br />ä¸»æœåŠ¡å™¨åªæœ‰ä¸€ä¸ª</p><p>åŒæ—¶ä»æ•°æ®åº“é€šè¿‡è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼Œè®©åº”ç”¨æœåŠ¡å™¨è¿›è¡Œè®¿é—®<br />é€šè¿‡è¿™æ ·é™ä½å•å°æœåŠ¡å™¨çš„å‹åŠ›</p><h3 id="å¼•å…¥ç¼“å­˜"><a class="markdownIt-Anchor" href="#å¼•å…¥ç¼“å­˜"></a> å¼•å…¥ç¼“å­˜</h3><p>æ•°æ®åº“å¤©ç„¶é—®é¢˜ï¼Œç›¸åº”é€Ÿåº¦æ˜¯æ›´æ…¢çš„ï¼ï¼<br />æŠŠæ•°æ®åŒºåˆ†&quot;å†·çƒ­&quot;ï¼Œçƒ­ç‚¹æ•°æ®æ”¾åˆ°ç¼“å­˜ä¸­~ç¼“å­˜çš„è®¿é—®é€Ÿåº¦å¾€å¾€æ¯”æ•°æ®åº“å¿«å¾ˆå¤šäº†<br />åœ¨æ•°æ®åº“è¯»å†™åˆ†ç¦»çš„åŸºç¡€ä¸Šï¼Œè¿™é‡Œå¼•å…¥äº†ç¼“å­˜æœåŠ¡å™¨ï¼Œå­˜æ”¾ä¸€å°éƒ¨åˆ†çƒ­ç‚¹æ•°æ®ï¼ˆä¼šé¢‘ç¹è¢«è®¿é—®çš„æ•°æ®ï¼‰<br />æ‰€ä»¥å†·æ•°æ®å°±æ˜¯ä¸ä¼šè¢«é¢‘ç¹è®¿é—®çš„æ•°æ®<br /><img src="1b4e091e68527ac6054e8d3ecb15d2b1.png" alt="image.png" /><br />ç¼“å­˜è¦æƒ³å¿«ï¼Œå°±å¾—ä»˜å‡ºä»£ä»·<br />rediså°±æ˜¯è¦ä½œä¸ºç¼“å­˜æœåŠ¡å™¨</p><p>å¯¹åº”ç”¨æœåŠ¡å™¨æ¥è¯´ï¼Œç»å¤§å¤šæ•°çš„è¯·æ±‚éƒ½èƒ½ä»ç¼“å­˜æœåŠ¡å™¨ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“æœåŠ¡å™¨æ‰¿æ‹…çš„å‹åŠ›å˜å°äº†ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç¼“å­˜æœåŠ¡å™¨è¯»å–é€Ÿåº¦è¿˜å¿«</p><p>ç¼“å­˜æœåŠ¡å™¨å¸®åŠ©æ•°æ®åº“æœåŠ¡å™¨è´Ÿé‡å‰è¡Œäº†<img src="64454faa23ed5ab8c356dbfa9c21f2b9.png" alt="image.png" /></p><p>è¦æƒ³å¾—åˆ°ä¸€ä¸ªæ•ˆæœï¼Œå°±è¦ä»˜å‡ºä¸€å®šçš„ä»£ä»·</p><h3 id="æ•°æ®åº“åˆ†åº“åˆ†è¡¨"><a class="markdownIt-Anchor" href="#æ•°æ®åº“åˆ†åº“åˆ†è¡¨"></a> æ•°æ®åº“åˆ†åº“åˆ†è¡¨</h3><p>å¼•å…¥åˆ†å¸ƒå¼ç³»ç»Ÿä¸å…‰è¦åº”å¯¹æ›´é«˜çš„è¯·æ±‚é‡ï¼ˆå¹¶å‘é‡ï¼‰ï¼ŒåŒæ—¶èƒ½åº”å¯¹æ›´å¤§çš„æ•°æ®é‡</p><p>å¯èƒ½ä¼šå‡ºç°ï¼Œä¸€å°æœåŠ¡å™¨å·²ç»å­˜ä¸ä¸‹æ•°æ®äº†ï¼Œè™½ç„¶ä¸€ä¸ªæœåŠ¡å™¨çš„å­˜å‚¨é‡å¯ä»¥åˆ°å‡ åä¸ªTBï¼Œå³ä½¿å¦‚æ­¤ä¹Ÿå¯èƒ½ä¼šå­˜ä¸ä¸‹</p><p>ä¸€å°ä¸»æœºå­˜ä¸ä¸‹ï¼Œå°±å¾—éœ€è¦å¤šå°ä¸»æœºäº†</p><p>é’ˆå¯¹æ•°æ®åº“è¿›è¡Œè¿›ä¸€æ­¥çš„æ‹†åˆ†<br />åˆ†åº“åˆ†è¡¨</p><p>æœ¬æ¥æ˜¯ä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸Šæœ‰å¤šä¸ªæ•°æ®åº“ï¼ˆæŒ‡çš„æ˜¯é€»è¾‘ä¸Šçš„æ•°æ®é›†åˆï¼Œcreate databaseåˆ›å»ºçš„é‚£ä¸ªä¸œè¥¿)</p><p>ç°åœ¨å°±å¯ä»¥å¼•å…¥å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨ï¼Œæ¯ä¸ªæ•°æ®åº“æœåŠ¡å™¨å­˜å‚¨ä¸€ä¸ªæˆ–è€…ä¸€éƒ¨åˆ†æ•°æ®åº“<br /><img src="f31a4e6dc8185589a6608bde0bf5b436.png" alt="image.png" /><br />å¦‚æœæŸä¸ªè¡¨ç‰¹åˆ«å¤§ï¼Œå¤§åˆ°ä¸€å°ä¸»æœºå­˜ä¸ä¸‹ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹è¡¨è¿›è¡Œæ‹†åˆ†</p><p>å…·ä½“åˆ†åº“åˆ†è¡¨å¦‚ä½•æ—¶é—´ï¼Œè¿˜æ˜¯è¦ç»“åˆå®é™…çš„ä¸šåŠ¡åœºæ™¯æ¥å±•å¼€<br />ä¸šåŠ¡è‡³å…³é‡è¦</p><h3 id="å¼•å…¥å¾®æœåŠ¡"><a class="markdownIt-Anchor" href="#å¼•å…¥å¾®æœåŠ¡"></a> å¼•å…¥å¾®æœåŠ¡</h3><p>å¾®æœåŠ¡æ¶æ„<br /><img src="fe871f872cc2c8dcf87cdc1676936dd9.png" alt="image.png" /><br />ä¹‹å‰çš„åº”ç”¨æœåŠ¡å™¨ï¼Œä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºé‡Œé¢åšäº†å¾ˆå¤šçš„ä¸šåŠ¡ï¼Œè¿™å°±å¯èƒ½ä¼šå¯¼è‡´è¿™ä¸€ä¸ªæœåŠ¡å™¨çš„ä»£ç è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œä¸ºäº†æ›´æ–¹ä¾¿äºä»£ç çš„ç»´æŠ¤ï¼Œå°±å¯ä»¥æŠŠè¿™æ ·çš„ä¸€ä¸ªå¤æ‚çš„æœåŠ¡å™¨ï¼Œæ‹†åˆ†æˆæ›´å¤šçš„ï¼ŒåŠŸèƒ½æ›´å•ä¸€ï¼Œæ›´ä¸‹çš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°†è¿™æ ·å°çš„æœåŠ¡å™¨æˆä¸ºå¾®æœåŠ¡</p><p>æœåŠ¡å™¨çš„ç§ç±»å’Œæ•°é‡å°±å¢åŠ äº†</p><p>æœ€å¼€å§‹å¼•å…¥è´Ÿè½½å‡è¡¡è§£å†³çš„é—®é¢˜æ˜¯è¯·æ±‚é‡æ›´é«˜çš„é—®é¢˜<br />åé¢å¼•å…¥çš„åˆ†åº“åˆ†è¡¨è§£å†³çš„æ˜¯å­˜å‚¨ç©ºé—´ä¸è¶³çš„é—®é¢˜</p><p>é‚£ä¹ˆå¾®æœåŠ¡æœ¬è´¨ä¸Šè§£å†³çš„æ˜¯â€œäººâ€çš„é—®é¢˜</p><p>å½“åº”ç”¨æœåŠ¡å™¨å˜å¤æ‚äº†ï¼Œé‚£ä¹ˆåŠ¿å¿…å°±éœ€è¦æ›´å¤šçš„äººæ¥ç»´æŠ¤äº†</p><p>å½“äººå¤šäº†ï¼Œå°±éœ€è¦é…å¥—çš„ç®¡ç†ï¼ŒæŠŠè¿™äº›äººç»„ç»‡å¥½</p><p>å› æ­¤å°±å¾—åˆ’åˆ†ç»„ç»‡ç»“æ„ï¼Œåˆ†æˆå¤šä¸ªç»„ï¼Œæ¯ä¸ªç»„é…å¤‡é¢†å¯¼è¿›è¡Œç®¡ç†</p><p>åˆ†æˆå¤šä¸ªç»„ä¹‹åï¼Œå°±éœ€è¦è¿›è¡Œåˆ†å·¥äº†</p><p>æŒ‰ç…§åŠŸèƒ½ï¼Œæ‹†åˆ†æˆå¤šç»„å¾®æœåŠ¡ï¼Œè¿™æ ·å°±æœ‰åˆ©äºä¸Šè¿°äººå‘˜ç»„ç»‡çš„ç»“æ„çš„åˆ†é…äº†</p><p>å¦‚æœæ˜¯å°å…¬å¸ï¼Œå°±å‡ ä¸ªå¼€å‘ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦æå¾®æœåŠ¡äº†</p><p>å¼•å…¥å¾®æœåŠ¡ï¼Œè§£å†³äº†äººçš„é—®é¢˜ï¼Œä¼šæœ‰ä»€ä¹ˆä»£ä»·å‘¢ï¼Ÿ<br />1ã€æ€§èƒ½ä¼šä¸‹é™ï¼ˆæƒ³ä¿è¯æ€§èƒ½ä¸ä¸‹é™ï¼Œåªèƒ½å¼•å…¥æ›´å¤šçš„æœºå™¨ï¼Œæ›´å¤šçš„ç¡¬ä»¶èµ„æºï¼‰<br />æ‹†å‡ºæ¥æ›´å¤šçš„æœåŠ¡ï¼Œå¤šä¸ªåŠŸèƒ½ä¹‹é—´æ›´è¦ä¾èµ–ç½‘ç»œé€šä¿¡ï¼Œ<br />ç½‘ç»œé€šä¿¡çš„é€Ÿåº¦å¾ˆå¯èƒ½æ˜¯æ¯”ç¡¬ç›˜è¿˜æ…¢çš„<br />2ã€ç³»ç»Ÿå¤æ‚ç¨‹åº¦æé«˜ï¼Œå¯ç”¨æ€§å—åˆ°å½±å“<br />æœåŠ¡å™¨æ›´å¤šäº†ï¼Œå‡ºç°é—®é¢˜çš„æ¦‚ç‡æ›´å¤§äº†<br />è¿™å°±éœ€è¦ä¸€äº›åˆ—çš„æ‰‹æ®µä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§</p><p>å¾®æœåŠ¡çš„ä¼˜åŠ¿ï¼š<br />1ã€è§£å†³äº†äººçš„é—®é¢˜<br />2ã€ä½¿ç”¨å¾®æœåŠ¡ï¼Œå¯ä»¥æ›´æ–¹ä¾¿äºåŠŸèƒ½çš„å¤ç”¨<br />3ã€å¯ä»¥ç»™ä¸åŒçš„æœåŠ¡å»è¿›è¡Œä¸åŒçš„éƒ¨ç½²</p><h3 id="å¿µè¡¥å……"><a class="markdownIt-Anchor" href="#å¿µè¡¥å……"></a> å¿µè¡¥å……</h3><p><img src="28b0dd027ab0cd09d3f18b8041655643.png" alt="image.png" /></p><p>åˆ†å¸ƒå¼ï¼Œå¼•å…¥å¤šä¸ªä¸»æœº/æœåŠ¡å™¨ï¼ŒååŒé…åˆå®Œæˆä¸€ç³»åˆ—çš„å·¥ä½œ<br /><img src="72f03155d3ba5278626872f02726978f.png" alt="image.png" /><br /><img src="fd0a4a0e17abd4768409713760e17ca8.png" alt="" /><br />ä¸»ä»æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸€ç§æ¯”è¾ƒç»å…¸çš„ç»“æ„</p><p>å¤šä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯ä¸»ï¼Œå¦ä¸€ä¸ªæ˜¯ä»ï¼Œä»èŠ‚ç‚¹çš„æ•°æ®ä¸»è¦ä»ä¸»èŠ‚ç‚¹è¿™é‡ŒåŒæ­¥è¿‡æ¥~~<br /><img src="9d3e11c629b2a258e453d4ee9ac3abbe.png" alt="image.png" /><br />ä¸­é—´ä»¶å’Œä¸šåŠ¡æ— å…³çš„æœåŠ¡ï¼ˆåŠŸèƒ½æ›´é€šç”¨çš„æœåŠ¡ï¼‰</p><ul><li>æ•°æ®åº“</li><li>ç¼“å­˜</li><li>æ¶ˆæ¯é˜Ÿåˆ—</li></ul><p>ååå’Œå¹¶å‘æ˜¯è¡¡é‡ç³»ç»Ÿçš„å¤„ç†è¯·æ±‚çš„èƒ½åŠ›ï¼Œè¡¡é‡æ€§èƒ½çš„ä¸€ç§æ–¹å¼</p><h3 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h3><p>1ã€å•æœºæ¶æ„ï¼ˆåº”ç”¨ç¨‹åº+æ•°æ®åº“æœåŠ¡å™¨ï¼‰</p><p>2ã€æ•°æ®åº“å’Œåº”ç”¨åˆ†ç¦»<br />åº”ç”¨ç¨‹åºå’Œæ•°æ®åº“æœåŠ¡å™¨åˆ†åˆ«æ”¾åˆ°ä¸åŒä¸»æœºä¸Šéƒ¨ç½²äº†</p><p>3ã€å¼•å…¥è´Ÿè½½å‡è¡¡ï¼šåº”ç”¨æœåŠ¡å™¨=&gt;é›†ç¾¤<br />é€šè¿‡è´Ÿè½½å‡è¡¡å™¨ï¼ŒæŠŠè¯·æ±‚æ¯”è¾ƒå›å‡åŒ€çš„åˆ†å‘ç»™é›†ç¾¤ä¸­çš„æ¯ä¸ªåº”ç”¨æœåŠ¡å™¨</p><p>å½“æ•´ä¸ªç³»ç»Ÿä¸­çš„æŸä¸ªä¸»æœºæŒ‚äº†ï¼Œå…¶ä»–ä¸»æœºä»ç„¶å¯ä»¥æ‰¿æ‹…æœåŠ¡ï¼Œæé«˜äº†æ•´ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§</p><p>4ã€å¼•å…¥è¯»å†™åˆ†ç¦»ï¼Œæ•°æ®åº“ä¸»ä»ç»“æ„<br />ä¸€ä¸ªæ•°æ®åº“èŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œå…¶ä»–nä¸ªæ•°æ®åº“èŠ‚ç‚¹ä½œä¸ºä»èŠ‚ç‚¹<br />ä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ•°æ®ï¼Œä»èŠ‚ç‚¹è´Ÿè´£è¯»æ•°æ®<br />ä¸»èŠ‚ç‚¹éœ€è¦æŠŠçˆ±ä¿®æ”¹è¿‡çš„æ•°æ®åŒæ­¥åˆ°ä»èŠ‚ç‚¹</p><p>5ã€å¼•å…¥ç¼“å­˜ï¼Œå†·çƒ­æ•°æ®åˆ†ç¦»<br />è¿›ä¸€æ­¥æå‡äº†æœåŠ¡å™¨é’ˆå¯¹è¯·æ±‚çš„å¤„ç†èƒ½åŠ›<br />äºŒå…«åŸåˆ™</p><p>6ã€å¼•å…¥åˆ†åº“åˆ†è¡¨ï¼Œæ•°æ®åº“èƒ½å¤Ÿè¿›ä¸€æ­¥æ‰©å±•å­˜å‚¨ç©ºé—´</p><p>7ã€å¼•å…¥å¾®æœåŠ¡ï¼Œä»ä¸šåŠ¡ä¸Šè¿›ä¸€æ­¥æ‹†åˆ†åº”ç”¨æœåŠ¡å™¨<br />ä»åä¸šåŠ¡åŠŸèƒ½çš„è§’åº¦ï¼ŒæŠŠåº”ç”¨æœåŠ¡å™¨ï¼Œæ‹†åˆ†æˆæ›´å¤šçš„åŠŸèƒ½å•ä¸€ï¼Œæ›´ç®€å•ï¼Œæ›´å°çš„æœåŠ¡å™¨</p><p>æ‰€è°“çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå°±æ˜¯æƒ³åŠæ³•å¼•å…¥æ›´å¤šçš„ç¡¬ä»¶èµ„æº</p><h2 id="redisç‰¹æ€§ä»‹ç»"><a class="markdownIt-Anchor" href="#redisç‰¹æ€§ä»‹ç»"></a> Redisç‰¹æ€§ä»‹ç»</h2><p>Redisæ˜¯ä¸€ä¸ªåœ¨å†…å­˜ä¸­å­˜å‚¨æ•°æ®çš„ä¸­é—´ä»¶ï¼Œç”¨äºä½œä¸ºæ•°æ®åº“ï¼Œç”¨äºä½œä¸ºæ•°æ®ç¼“å­˜<br />åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­èƒ½å¤Ÿå¤§å±•æ‹³è„š</p><p>Redisçš„ä¸€äº›ç‰¹å®šï¼ˆä¼˜ç‚¹ï¼‰</p><p>Redisåœ¨å†…å­˜ä¸­å­˜å‚¨æ•°æ®</p><p>mysqlä¸»è¦æ˜¯é€šè¿‡&quot;è¡¨&quot;çš„æ–¹å¼æ¥å­˜å‚¨ç»„ç»‡æ•°æ®çš„â€œå…³ç³»å‹æ•°æ®åº“â€</p><p>Redisä¸»è¦æ˜¯é€šè¿‡â€œé”®å€¼å¯¹â€çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®çš„ <strong>éå…³ç³»å‹æ•°æ®åº“</strong><br /><img src="c79ce7e619b626324f7d01a5da2a2f4f.png" alt="image.png" /></p><p>é’ˆå¯¹Redisçš„æ“ä½œï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç®€å•çš„äº¤äº’å¼å‘½ä»¤è¿›è¡Œæ“ä½œ<br />ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›è„šæœ¬çš„æ–¹å¼ï¼Œæ‰¹é‡æ‰§è¡Œä¸€äº›æ“ä½œ</p><p><img src="65111e9ba3704708c628eb69474a0b49.png" alt="image.png" /><br /><img src="d6f2cc155834c5d35691205bf812a2a7.png" alt="image.png" /></p><h3 id="æŒä¹…åŒ–"><a class="markdownIt-Anchor" href="#æŒä¹…åŒ–"></a> æŒä¹…åŒ–</h3><p>Redis æŒä¹…åŒ–<br />å†…å­˜ä¸­çš„æ•°æ®æ˜¯æ˜“å¤±çš„</p><p>Redisä¼šæŠŠæ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Š<br />å†…å­˜ä¸ºä¸»ï¼Œç¡¬ç›˜ä¸ºè¾…<br />ç¡¬ç›˜ç›¸å½“äºå¯¹å†…å­˜çš„æ•°æ®å¤‡ä»½ä¸€ä¸‹<br />å¦‚æœRedisé‡å¯äº†ï¼Œå°±ä¼šåœ¨é‡å¯æ—¶åŠ è½½ç¡¬ç›˜ä¸­çš„å¤‡ä»½æ•°æ®ï¼Œä½¿Redisçš„å†…å­˜æ¢å¤åˆ°é‡å¯å‰çš„çŠ¶æ€</p><h3 id="æ”¯æŒé›†ç¾¤"><a class="markdownIt-Anchor" href="#æ”¯æŒé›†ç¾¤"></a> æ”¯æŒé›†ç¾¤</h3><p>Redis ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸­é—´ä»¶ï¼Œèƒ½å¤Ÿæ”¯æŒé›†ç¾¤æ˜¯å¾ˆå…³é”®çš„<br /><img src="35b57faff950c22b58ed11c5b077e6bc.png" alt="image.png" /><br />è¿™ä¸ªæ°´å¹³æ‹“å±•çš„æ„æ€å³æ˜¯â€œåˆ†åº“åˆ†è¡¨â€</p><p>ä¸€ä¸ªRedis èƒ½å­˜å‚¨çš„æ•°æ®æ˜¯æœ‰é™çš„ï¼ˆå†…å­˜ç©ºé—´æœ‰é™ï¼‰<br />å¼•å…¥å¤šä¸ªä¸»æœºï¼Œéƒ¨ç½²å¤šä¸ªRedis<br />å¼•å…¥å¤šä¸ªä¸»æœºï¼Œéƒ¨ç½²å¤šä¸ªRedis èŠ‚ç‚¹ï¼Œæ¯ä¸ªå­˜å‚¨æ•°æ®çš„ä¸€éƒ¨åˆ†</p><h3 id="é«˜å¯ç”¨"><a class="markdownIt-Anchor" href="#é«˜å¯ç”¨"></a> é«˜å¯ç”¨</h3><p>é«˜å¯ç”¨=&gt;å†—ä½™/å¤‡ä»½<br />Redisè‡ªèº«ä¹Ÿæ˜¯æ”¯æŒä¸»ä»ç»“æ„çš„<br />ä»èŠ‚ç‚¹å°±ç›¸å½“äºä¸»èŠ‚ç‚¹çš„å¤‡ä»½äº†<br /><img src="03a2b8a43546a2f9f0d6cee9ab05a899.png" alt="image.png" /></p><h3 id="å¿«"><a class="markdownIt-Anchor" href="#å¿«"></a> å¿«</h3><p>1ã€Redisæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œå°±æ¯”è®¿é—®ç¡¬ç›˜çš„æ•°æ®åº“ï¼Œè¦å¿«å¾ˆå¤š<br />2ã€Redisçš„æ ¸å¿ƒåŠŸèƒ½éƒ½æ˜¯æ¯”è¾ƒç®€å•çš„é€»è¾‘â€”æ ¸å¿ƒåŠŸèƒ½éƒ½æ˜¯æ¯”è¾ƒç®€å•çš„æ“ä½œå†…å­˜çš„æ•°æ®ç»“æ„<br />3ã€ç½‘ç»œè§’åº¦ä¸Šï¼ŒRedisä½¿ç”¨äº†IOå¤šè·¯å¤ç”¨çš„æ–¹å¼ï¼ˆepollï¼‰â€”ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œç®¡ç†å¾ˆå¤šä¸ªsocket</p><p>4ã€Redisä½¿ç”¨çš„æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œè¿™æ ·çš„å•çº¿ç¨‹æ¨¡å‹ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„çº¿ç¨‹ä¹‹é—´çš„ç«äº‰å¼€é”€</p><p>å¤šçº¿ç¨‹æé«˜æ•ˆç‡çš„å‰ææ˜¯ï¼ŒCPUå¯†é›†å‹çš„ä»»åŠ¡ï¼Œä½¿ç”¨å¤šä¸ªçº¿ç¨‹å¯ä»¥å……åˆ†çš„åˆ©ç”¨CPUå¤šæ ¸èµ„æº</p><p>ä½†æ˜¯Rediså¾—æ ¸å¿ƒä»»åŠ¡ï¼Œä¸»è¦å°±æ˜¯æ“ä½œå†…å­˜çš„æ•°æ®ç»“æ„ï¼Œä¸ä¼šåƒå¾ˆå¤šçš„CPU</p><h2 id="redisçš„åº”ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#redisçš„åº”ç”¨åœºæ™¯"></a> Redisçš„åº”ç”¨åœºæ™¯</h2><p><img src="948e6028f66533c1234b738523b8195c.png" alt="image.png" /></p><ul><li>å®æ—¶çš„æ•°æ®å­˜å‚¨ï¼Œå°†Rediså½“åšæ•°æ®åº“ï¼ˆé€šè¿‡é”®å€¼å¯¹è¿›è¡Œæ•°æ®å­˜å‚¨ï¼‰<br />å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè€ƒè™‘åˆ°æ•°æ®å­˜å‚¨ï¼Œæœ‰é™è€ƒè™‘çš„æ˜¯â€œå¤§â€<br />ä½†æ˜¯ä»ç„¶æœ‰ä¸€äº›åœºæ™¯ï¼Œè€ƒè™‘çš„æ˜¯â€œå¿«â€</li></ul><p><img src="708db41e0abad0826013efe679dbbb3c.png" alt="image.png" /></p><ul><li>ä½œä¸ºç¼“å­˜<br /><img src="838e69fc086d446d9c5ef01eb08e91d7.png" alt="image.png" /></li></ul><p><img src="ce3c54ecb2a574631039a04dc5f864cc.png" alt="image.png" /><br /><img src="02e1e0f9cf61f1d5f936e27ef7036ada.png" alt="image.png" /><br />2ã€å°†ä¼šè¯æ•°æ®å•ç‹¬æ‹å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ç»„ç‹¬ç«‹çš„æœºå™¨ä¸Šå­˜å‚¨ï¼ˆRedisï¼‰<br /><img src="f250470341694324fd7da42e376e5cc1.png" alt="image.png" /></p><p><img src="2f2fac785031eb19e413ec110d7206ec.png" alt="image.png" /><br />åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼ŒæœåŠ¡å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œæœ‰æ—¶å€™ä¹Ÿéœ€è¦ä½¿ç”¨åˆ°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„</p><p>è§£è€¦åˆ<br />å‰Šå³°å¡«è°·</p><p>Redisä¹Ÿæ˜¯å·²æä¾›äº†æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½çš„<br />å¦‚æœå½“å‰åœºæ™¯ä¸­ï¼Œå¯¹äºæ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ä¾èµ–çš„ä¸æ˜¯å¾ˆå¤š<br />å¹¶ä¸”åˆä¸æƒ³å¼•å…¥é¢å¤–çš„ä¾èµ–äº†ï¼ŒRediså¯ä»¥ä½œä¸ºä¸€ä¸ªé€‰æ‹©</p><p>Redisä¸èƒ½å­˜å‚¨å¤§è§„æ¨¡æ•°æ®</p><h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><p>æœ¬æ–‡æ·±å…¥æ¢è®¨äº†Redisçš„èƒŒæ™¯ã€æ ¸å¿ƒç‰¹æ€§åŠå…¶åœ¨ç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å…³é”®ä½œç”¨ã€‚æ ¸å¿ƒè¦ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š<br />Redisçš„æ ¸å¿ƒå®šä½ï¼šRedisæ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäºå†…å­˜å­˜å‚¨çš„é”®å€¼å¯¹ï¼ˆKey-Valueï¼‰éå…³ç³»å‹æ•°æ®åº“ã€‚å®ƒé€šè¿‡ç½‘ç»œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤šä¸ªè¿›ç¨‹æä¾›é«˜é€Ÿçš„æ•°æ®å…±äº«æœåŠ¡ï¼Œå…¶è®¿é—®é€Ÿåº¦è¿œè¶…äºåŸºäºç¡¬ç›˜çš„ä¼ ç»Ÿæ•°æ®åº“ï¼ˆå¦‚MySQLï¼‰ã€‚<br />åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¼”è¿›ä¸Redisçš„ä»·å€¼ï¼šéšç€ä¸šåŠ¡é‡çš„å¢é•¿ï¼Œç³»ç»Ÿæ¶æ„ä»ç®€å•çš„å•æœºæ¨¡å¼ï¼Œé€æ­¥æ¼”è¿›ä¸ºåº”ç”¨ä¸æ•°æ®åº“åˆ†ç¦»ã€å¼•å…¥è´Ÿè½½å‡è¡¡ã€å®ç°æ•°æ®åº“è¯»å†™åˆ†ç¦»çš„å¤æ‚ç»“æ„ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†è§£å†³æ•°æ®åº“çš„è®¿é—®ç“¶é¢ˆï¼Œå¼•å…¥Redisä½œä¸ºç¼“å­˜å±‚æˆä¸ºå…³é”®ä¸€æ­¥ã€‚é€šè¿‡å°†é¢‘ç¹è®¿é—®çš„â€œçƒ­æ•°æ®â€æ”¾å…¥Redisï¼Œå¯ä»¥æå¤§å‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œå¹¶æ˜¾è‘—æå‡åº”ç”¨çš„å“åº”é€Ÿåº¦ã€‚<br />Redisçš„æ ¸å¿ƒç‰¹æ€§ï¼š<br />é€Ÿåº¦å¿«ï¼šæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒåŒæ—¶é‡‡ç”¨I/Oå¤šè·¯å¤ç”¨å’Œå•çº¿ç¨‹æ¨¡å‹ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚<br />æŒä¹…åŒ–ï¼šæ”¯æŒå°†å†…å­˜æ•°æ®å¼‚æ­¥å†™å…¥ç¡¬ç›˜ï¼Œç¡®ä¿äº†æ•°æ®åœ¨æœåŠ¡é‡å¯åä¸ä¼šä¸¢å¤±ã€‚<br />é«˜å¯ç”¨ä¸å¯æ‰©å±•ï¼šé€šè¿‡ä¸»ä»å¤åˆ¶ï¼ˆMaster-Slaveï¼‰æ¶æ„ä¿éšœé«˜å¯ç”¨æ€§ï¼Œå¹¶é€šè¿‡é›†ç¾¤æ¨¡å¼å®ç°æ°´å¹³æ‰©å±•ï¼Œä»¥åº”å¯¹æµ·é‡æ•°æ®çš„å­˜å‚¨éœ€æ±‚ã€‚<br />ä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼šæ”¯æŒå­—ç¬¦ä¸²ã€å“ˆå¸Œã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆç­‰å¤šç§æ•°æ®ç±»å‹ï¼Œèƒ½çµæ´»åº”å¯¹å„ç§ä¸šåŠ¡åœºæ™¯ã€‚<br />ä¸»è¦åº”ç”¨åœºæ™¯ï¼š<br />æ•°æ®ç¼“å­˜ï¼šæœ€æ ¸å¿ƒçš„åº”ç”¨ï¼Œä½œä¸ºMySQLç­‰ä¸»æ•°æ®åº“çš„ç¼“å­˜ï¼Œåˆ†ç¦»å†·çƒ­æ•°æ®ã€‚<br />ä¼šè¯å…±äº«ï¼ˆSession Storeï¼‰ï¼šåœ¨åˆ†å¸ƒå¼WebæœåŠ¡ä¸­ï¼Œé›†ä¸­å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼Œè§£å†³è´Ÿè½½å‡è¡¡ä¸‹çš„ä¼šè¯ä¸€è‡´æ€§é—®é¢˜ã€‚<br />å®æ—¶æ•°æ®å­˜å‚¨ï¼šé€‚ç”¨äºå¯¹é€Ÿåº¦è¦æ±‚æé«˜çš„åœºæ™¯ï¼Œå¦‚æ’è¡Œæ¦œã€è®¡æ•°å™¨ç­‰ã€‚<br />æ¶ˆæ¯é˜Ÿåˆ—ï¼šå¯ç”¨äºå®ç°ç®€å•çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œè¿›è¡ŒæœåŠ¡é—´çš„è§£è€¦å’Œæµé‡å‰Šå³°ã€‚<br />æ€»è€Œè¨€ä¹‹ï¼ŒRediså‡­å€Ÿå…¶å“è¶Šçš„æ€§èƒ½å’Œçµæ´»æ€§ï¼Œå·²æˆä¸ºæ„å»ºé«˜æ€§èƒ½ã€é«˜å¹¶å‘å’Œé«˜å¯ç”¨æ€§åˆ†å¸ƒå¼ç³»ç»Ÿçš„å…³é”®ä¸­é—´ä»¶ã€‚ç†è§£Redisä¸ä»…æ˜¯æŒæ¡ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯æ·±å…¥ç†è§£ç°ä»£åº”ç”¨æ¶æ„æ¼”è¿›æ€æƒ³çš„é‡è¦ä¸€ç¯ã€‚</p>]]></content>
    
    
    <summary type="html">Rediså…¥é—¨ä¸èƒŒæ™¯è¯¦è§£ï¼šæ„å»ºé«˜å¹¶å‘ã€é«˜å¯ç”¨ç³»ç»Ÿçš„å…³é”®åŸºçŸ³</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="http://www.formeasy.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="http://www.formeasy.cc/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>é€šä¿¡ä¸­é—´ä»¶ Fast DDSï¼šç¼–è¯‘ã€å®‰è£…å’Œæµ‹è¯•</title>
    <link href="http://www.formeasy.cc/2025/08/15/DDS/%E9%80%9A%E4%BF%A1%E4%B8%AD%E9%97%B4%E4%BB%B6%20Fast%20DDS%20%EF%BC%9A%E7%BC%96%E8%AF%91%E3%80%81%E5%AE%89%E8%A3%85%E5%92%8C%E6%B5%8B%E8%AF%95/"/>
    <id>http://www.formeasy.cc/2025/08/15/DDS/%E9%80%9A%E4%BF%A1%E4%B8%AD%E9%97%B4%E4%BB%B6%20Fast%20DDS%20%EF%BC%9A%E7%BC%96%E8%AF%91%E3%80%81%E5%AE%89%E8%A3%85%E5%92%8C%E6%B5%8B%E8%AF%95/</id>
    <published>2025-08-15T07:11:47.000Z</published>
    <updated>2025-08-15T07:34:27.708Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ç®€ä»‹"><a class="markdownIt-Anchor" href="#1ç®€ä»‹"></a> 1.ç®€ä»‹</h2><p>DDSæ˜¯ OMG ç»„ç»‡å‘å¸ƒçš„ä¸€ç§ä¸­é—´ä»¶åè®®å’Œ API æ ‡å‡†ï¼Œå®ƒå°†ç³»ç»Ÿçš„ç»„ä»¶é›†æˆåœ¨ä¸€èµ·ï¼Œæä¾›ä¸šåŠ¡å’Œä»»åŠ¡å…³é”®å‹ç‰©è”ç½‘(IoT) åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä½å»¶è¿Ÿæ•°æ®è¿æ¥ã€æé«˜çš„å¯é æ€§å’Œå¯æ‰©å±•æ¶æ„ã€‚</p><p><strong>DDS(Data Distribution Service,æ•°æ®åˆ†å‘æœåŠ¡)</strong> æ˜¯ä¸€ç§ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é€šä¿¡åè®®ï¼Œç”¨äºåˆ†å¸ƒå¼è½¯ä»¶åº”ç”¨ç¨‹åºé€šä¿¡ã€‚</p><p>å®ƒæè¿°äº†æ”¯æŒ <strong>æ•°æ®æä¾›è€…(Data Providers)</strong> å’Œ <strong>æ•°æ®æ¶ˆè´¹è€…(Data Consumers)</strong> ä¹‹é—´é€šä¿¡çš„é€šä¿¡åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ (API) å’Œé€šä¿¡è¯­ä¹‰ã€‚</p><p>è¦å­¦ä¹  DDS å°±ä¸èƒ½å¿½ç•¥å®ƒçš„æ¨¡å‹ï¼šDCPS(ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„å‘å¸ƒè®¢é˜…æ¨¡å‹)ã€‚</p><p>DCPS æœ‰ 3 ä¸ªå…³é”®å®ä½“ï¼š</p><ol><li>publication entities: å®šä¹‰æ¶ˆæ¯ç”Ÿæˆå¯¹è±¡åŠç›¸å…³å±æ€§</li><li>subscription entitiesï¼šå®šä¹‰æ¶ˆæ¯æ¶ˆè´¹å¯¹è±¡åŠç›¸å…³å±æ€§</li><li>configuration entities:å®šä¹‰ä¼ è¾“ç›¸å…³çš„å±æ€§å¦‚ Topic ç±»å‹ï¼Œé€šä¿¡çš„ QoS(æœåŠ¡è´¨é‡)ã€‚</li></ol><p>QoS æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼ŒDDS ä½¿ç”¨ QoS æ¥å®šä¹‰ DDS å®ä½“çš„è¡Œä¸ºç‰¹å¾ã€‚ QoS ç”±å•ç‹¬çš„ QoS ç­–ç•¥ï¼ˆæºè‡ª QoSPolicy çš„ç±»å‹çš„å¯¹è±¡ï¼‰ç»„æˆã€‚</p><p>FastDDSï¼ˆåŸå Fast RTPSï¼‰æ˜¯ eProsima å…¬å¸å¼€å‘çš„å¼€æº DDSï¼ˆData Distribution Serviceï¼‰å®ç°ï¼ŒåŸºäº RTPS åè®®ï¼Œé€‚ç”¨äºå®æ—¶é€šä¿¡åœºæ™¯ã€‚</p><h2 id="2windowsç¼–è¯‘-å®‰è£…å’Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#2windowsç¼–è¯‘-å®‰è£…å’Œæµ‹è¯•"></a> 2.Windowsç¼–è¯‘ã€å®‰è£…å’Œæµ‹è¯•</h2><h3 id="21ç¼–è¯‘ç¯å¢ƒå‡†å¤‡"><a class="markdownIt-Anchor" href="#21ç¼–è¯‘ç¯å¢ƒå‡†å¤‡"></a> 2.1.<strong>ç¼–è¯‘ç¯å¢ƒå‡†å¤‡</strong></h3><ul><li>å®‰è£…Â <strong>Visual Studio 2019/2022</strong>ï¼ˆéœ€å‹¾é€‰ â€œDesktop development with C++â€ ç»„ä»¶ï¼‰ã€‚</li><li>å®‰è£…Â <strong>CMake</strong>ï¼ˆ3.16+ï¼Œæ·»åŠ åˆ°ç³»ç»Ÿ PATHï¼‰ã€‚</li><li>å®‰è£…Â <strong>Git</strong>ï¼ˆæ·»åŠ åˆ°ç³»ç»Ÿ PATHï¼‰ã€‚</li><li>ä¾èµ–åº“ï¼ˆå¦‚ OpenSSLã€asioï¼‰å¯é€šè¿‡ vcpkg å®‰è£…ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…vcpkg</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/microsoft/vcpkg</span><br><span class="line">.\vcpkg\bootstrap-vcpkg.bat</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">.\vcpkg\vcpkg install openssl asio tinyxml2 --triplet x64-windows</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘çš„ç”µè„‘é€šè¿‡cmdå‘½ä»¤å‘½ä»¤è¡Œç›®å½•æ˜¯C:\Users\Administratorï¼Œæ‰€ä»¥vcpkgæ˜¯å®‰è£…åœ¨C:\Users\Administratorè¿™é‡Œï¼š</p><p><img src="517d6cae3ac74f93ad264358ba386c1f.png" alt="" /></p><p>ä¸‹è½½vcpkgæºç ï¼š</p><p><img src="24cad6ebada547ab9762e2d95fbd884a.png" alt="" /></p><p><img src="85d6795923ae4f5b978872552b966092.png" alt="" /></p><p>å®‰è£…Â openssl asio tinyxml2ï¼š</p><p><img src="f83e562826134fdea015f9ad12fa0cac.png" alt="" /></p><p><img src="281b37a54e5c4fa2995d690d1c543af0.png" alt="" /></p><h3 id="22ç¼–è¯‘å®‰è£…"><a class="markdownIt-Anchor" href="#22ç¼–è¯‘å®‰è£…"></a> 2.2.ç¼–è¯‘å®‰è£…</h3><h4 id="221å®‰è£…fastcdr"><a class="markdownIt-Anchor" href="#221å®‰è£…fastcdr"></a> 2.2.1.å®‰è£…<strong>FastCDR</strong></h4><p>FastDDS ä¾èµ–Â <strong>FastCDR</strong>ï¼ˆåºåˆ—åŒ–åº“ï¼‰ï¼Œéœ€è¦è·å–æºç ï¼Œåœ¨cmdå‘½ä»¤è¡Œç›´æ¥æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†FastCDRï¼ˆå¿…é¡»å…ˆç¼–è¯‘ï¼‰</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/eProsima/Fast-CDR.git</span><br><span class="line"><span class="built_in">cd</span> Fast-CDR</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line">cmake .. -G <span class="string">&quot;Visual Studio 17 2022&quot;</span> -A x64 -DCMAKE_INSTALL_PREFIX=C:\fastdds_install</span><br><span class="line">cmake --build . --config Release --target install</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œåœ¨C:\fastdds_installç›®å½•æœ‰FastCDRçš„å¤´æ–‡ä»¶ï¼Œåº“æ–‡ä»¶ç­‰ä¿¡æ¯ï¼š</p><p><img src="40c82ef35a8540fb83ad7a1b5d5d51da.png" alt="" /></p><h4 id="222å®‰è£…foonathan-memory"><a class="markdownIt-Anchor" href="#222å®‰è£…foonathan-memory"></a> 2.2.2.å®‰è£…<strong>Foonathan Memory</strong></h4><p>FastDDS ä¾èµ–Â <strong>Foonathan Memory</strong>ï¼ˆå†…å­˜ç®¡ç†åº“ï¼‰ï¼Œéœ€è¦è·å–æºç ï¼Œåœ¨cmdå‘½ä»¤è¡Œç›´æ¥æ“ä½œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†FastCDRï¼ˆå¿…é¡»å…ˆç¼–è¯‘ï¼‰</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/eProsima/foonathan_memory_vendor.git</span><br><span class="line"><span class="built_in">cd</span> foonathan_memory_vendor</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line">cmake .. -G <span class="string">&quot;Visual Studio 17 2022&quot;</span> -A x64 -DCMAKE_INSTALL_PREFIX=C:\fastdds_install</span><br><span class="line">cmake --build . --config Release --target install</span><br></pre></td></tr></table></figure><p>åœ¨æ‰§è¡Œcmake --build . --config Release --target installçš„æ—¶å€™æŠ¥é”™ï¼š</p><p><img src="6c7512ae52dc4336b1990b26f68a58b9.png" alt="" /></p><p><img src="7c73325431584dbda555dc9af23cae94.png" alt="" /></p><p>äºæ˜¯åœ¨ç½‘ä¸Šå„ç§æœç´¢é—®é¢˜åŸå› ï¼Œå§‹ç»ˆæ²¡æœ‰æ‰¾åˆ°è§£å†³çš„åŠæ³•ï¼Œäºæ˜¯æˆ‘åˆ°Foonathan Memoryçš„ç½‘ç«™å»çœ‹äº†ä¸€ä¸‹ï¼š</p><blockquote><p><a href="https://github.com/foonathan/memory" title="https://github.com/foonathan/memory">https://github.com/foonathan/memory</a></p></blockquote><p><img src="d44899e2166248d7a7b8187b554453d4.png" alt="" /></p><p>æ‰¾åˆ°èµ„æ–™åŸæ¥Foonathan Memoryå¯ä»¥é€šè¿‡vcpkgå®‰è£…ï¼Œç”±äºä¹‹å‰å®‰è£…vcpkgï¼Œäºæ˜¯ç›´æ¥è¿›å…¥vcpkgç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å°±è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./vcpkg integrate install</span><br><span class="line">./vcpkg install foonathan-memory</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œä¹‹åï¼ŒFastDDSçš„æ‰€ä»¥ä¾èµ–å°±å®‰è£…å®Œæ¯•ï¼Œåœ¨vcpkgçš„å®‰è£…ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼š</p><p><img src="6db4de0b4de54085afaf0f0a56cad7d4.png" alt="" /></p><h4 id="223å®‰è£…fastdds"><a class="markdownIt-Anchor" href="#223å®‰è£…fastdds"></a> 2.2.3.å®‰è£…FastDDS</h4><p>è·Ÿå®‰è£…FastCDRçš„æ­¥éª¤å·®ä¸å¤šï¼Œä¸è¿‡éœ€è¦å„ç§ä¾èµ–åº“çš„è·¯å¾„ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/eProsima/Fast-DDS.git</span><br><span class="line"><span class="built_in">cd</span> Fast-DDS</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line">cmake .. -G <span class="string">&quot;Visual Studio 17 2022&quot;</span> -A x64 -DCMAKE_INSTALL_PREFIX=C:\fastdds -Dfastcdr_ROOT=C:\fastdds_install   -DAsio_ROOT=C:\Users\Administrator\vcpkg\packages\asio_x64-windows\include  -DTinyXML2_ROOT=C:\Users\Administrator\vcpkg\packages\tinyxml2_x64-windows  -Dfoonathan_memory_ROOT=C:\Users\Administrator\vcpkg\packages\foonathan-memory_x64-windows  -DOpenSSL_ROOT=C:\Users\Administrator\vcpkg\packages\openssl_x64-windows</span><br><span class="line"> </span><br><span class="line">cmake --build . --config Release --target install</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å®‰è£…åï¼Œåœ¨C:\fastddsç›®å½•ä¸‹æœ‰FastDDSçš„å¤´æ–‡ä»¶ï¼Œåº“æ–‡ä»¶ç­‰ä¿¡æ¯ï¼š</p><p><img src="a78e4e5c26904ca4ac1a846957dfd076.png" alt="" /></p><h3 id="23éªŒè¯å®‰è£…"><a class="markdownIt-Anchor" href="#23éªŒè¯å®‰è£…"></a> 2.3.<strong>éªŒè¯å®‰è£…</strong></h3><p>ç¼–è¯‘å®Œæˆåï¼Œå¯é€šè¿‡è¿è¡Œ FastDDS çš„ç¤ºä¾‹ç¨‹åºéªŒè¯ï¼š</p><p><img src="937b18e1ebf4412e9e64699ad7bc7503.png" alt="" /></p><p>ç¼–è¯‘ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line">cmake .. -Dfastcdr_ROOT=C:\fastdds_install  -Dfastdds_ROOT=C:\fastdds   -DTinyXML2_ROOT=C:\Users\Administrator\vcpkg\packages\tinyxml2_x64-windows  -Dfoonathan_memory_ROOT=C:\Users\Administrator\vcpkg\packages\foonathan-memory_x64-windows  -DOpenSSL_ROOT=C:\Users\Administrator\vcpkg\packages\openssl_x64-windows</span><br><span class="line"> </span><br><span class="line">cmake --build . --config Release</span><br></pre></td></tr></table></figure><p>å®Œæˆååœ¨Releseç›®å½•ä¸‹æœ‰æµ‹è¯•ç¨‹åºhello_world.exe, æŠŠhello_world.exeçš„ä¸€äº›ä¾èµ–dllæ‹·è´åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼š</p><p><img src="03ba8b479bda4c869a0fc4c4ee8412b4.png" alt="" /></p><p>åœ¨å‘½ä»¤è¡Œè¿è¡Œhello_world.exeï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="d2259685708841aea011b4bf8c1b0949.png" alt="" /></p><p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªç»ˆç«¯ï¼Œè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨å‘å¸ƒè€…ï¼ˆç»ˆç«¯1ï¼‰</span></span><br><span class="line">.\Hello_World.exe  publisher</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¯åŠ¨è®¢é˜…è€…ï¼ˆç»ˆç«¯2ï¼‰</span></span><br><span class="line">.\Hello_World.exe  subscriber</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆè¿è¡Œçš„æ•ˆæœï¼ˆ1å¯¹1ï¼‰ï¼š</p><p><img src="4dad039a6a3b49e6b97908a86ef76158.png" alt="" /></p><p>1å¯¹å¤šï¼Œä¸€ä¸ªå‘å¸ƒè€…ï¼Œå¤šä¸ªè®¢é˜…è€…ï¼š</p><p><img src="d9adfb7feb724e13932eb1fd0d4e32b8.png" alt="" /></p><p>è‹¥è®¢é˜…è€…èƒ½æ”¶åˆ°å‘å¸ƒè€…çš„æ¶ˆæ¯ï¼Œè¯´æ˜ç¼–è¯‘å’Œå®‰è£…æˆåŠŸã€‚</p><h2 id="3linuxç¼–è¯‘-å®‰è£…å’Œæµ‹è¯•"><a class="markdownIt-Anchor" href="#3linuxç¼–è¯‘-å®‰è£…å’Œæµ‹è¯•"></a> 3.Linuxç¼–è¯‘ã€å®‰è£…å’Œæµ‹è¯•</h2><h3 id="31ç¼–è¯‘ç¯å¢ƒå‡†å¤‡"><a class="markdownIt-Anchor" href="#31ç¼–è¯‘ç¯å¢ƒå‡†å¤‡"></a> 3.1.<strong>ç¼–è¯‘ç¯å¢ƒå‡†å¤‡</strong></h3><p>ä»¥éº’éºŸç³»ç»Ÿä¸ºä¾‹è®²è§£ï¼ŒFastDDS ä¾èµ–å¤šä¸ªå·¥å…·å’Œåº“ï¼Œéœ€å…ˆå®‰è£…ç¼–è¯‘ç¯å¢ƒå’Œä¾èµ–é¡¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°ç³»ç»ŸåŒ…</span></span><br><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®‰è£…åŸºç¡€ç¼–è¯‘å·¥å…·</span></span><br><span class="line">sudo apt install -y build-essential cmake git pkg-config</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–åº“</span></span><br><span class="line">sudo apt install -y libssl-dev libasio-dev libtinyxml2-dev</span><br><span class="line">sudo apt install -y openjdk-11-jdk  <span class="comment"># ç”¨äºä»£ç ç”Ÿæˆå·¥å…·ï¼ˆå¯é€‰ï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ï¼‰</span></span><br></pre></td></tr></table></figure><h3 id="32ç¼–è¯‘å®‰è£…"><a class="markdownIt-Anchor" href="#32ç¼–è¯‘å®‰è£…"></a> 3.2.ç¼–è¯‘å®‰è£…</h3><h4 id="321å®‰è£…fastcdr"><a class="markdownIt-Anchor" href="#321å®‰è£…fastcdr"></a> 3.2.1.å®‰è£…<strong>FastCDR</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/eProsima/Fast-CDR.git</span><br><span class="line"><span class="built_in">cd</span> Fast-CDR</span><br><span class="line"> </span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line"><span class="comment"># CMakeé…ç½®ï¼ˆé»˜è®¤å®‰è£…åˆ°/usr/localï¼‰</span></span><br><span class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç¼–è¯‘ï¼ˆ-jåæ¥CPUæ ¸å¿ƒæ•°ï¼ŒåŠ é€Ÿç¼–è¯‘ï¼‰</span></span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®‰è£…ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</span></span><br><span class="line">sudo make install</span><br><span class="line"><span class="built_in">cd</span> ../..  <span class="comment"># è¿”å›å·¥ä½œç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="322å®‰è£…foonathan-memory"><a class="markdownIt-Anchor" href="#322å®‰è£…foonathan-memory"></a> 3.2.2.å®‰è£…<strong>Foonathan Memory</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/eProsima/foonathan_memory_vendor.git</span><br><span class="line"><span class="built_in">cd</span> foonathan_memory_vendor</span><br><span class="line"> </span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line"><span class="comment"># CMakeé…ç½®ï¼ˆé»˜è®¤å®‰è£…åˆ°/usr/localï¼‰</span></span><br><span class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç¼–è¯‘ï¼ˆ-jåæ¥CPUæ ¸å¿ƒæ•°ï¼ŒåŠ é€Ÿç¼–è¯‘ï¼‰</span></span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®‰è£…ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</span></span><br><span class="line">sudo make install</span><br><span class="line"><span class="built_in">cd</span> ../..  <span class="comment"># è¿”å›å·¥ä½œç›®å½•</span></span><br></pre></td></tr></table></figure><h4 id="323å®‰è£…fastdds"><a class="markdownIt-Anchor" href="#323å®‰è£…fastdds"></a> 3.2.3.å®‰è£…FastDDS</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/eProsima/Fast-DDS.git</span><br><span class="line"><span class="built_in">cd</span> Fast-DDS</span><br><span class="line"> </span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"> </span><br><span class="line"><span class="comment"># CMakeé…ç½®ï¼ˆé»˜è®¤å®‰è£…åˆ°/usr/localï¼‰</span></span><br><span class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_BUILD_TYPE=Release</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç¼–è¯‘ï¼ˆ-jåæ¥CPUæ ¸å¿ƒæ•°ï¼ŒåŠ é€Ÿç¼–è¯‘ï¼‰</span></span><br><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å®‰è£…ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰</span></span><br><span class="line">sudo make install</span><br><span class="line"><span class="built_in">cd</span> ../..  <span class="comment"># è¿”å›å·¥ä½œç›®å½•</span></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘åˆ°æœ€åçš„æ—¶å€™ï¼Œå‡ºé”™äº†ï¼š</p><p><img src="0f16cec2d515464eb4acb9f17ce086e3.png" alt="" /></p><p>ä»æŠ¥é”™çš„æç¤ºè¯´æ˜¯æ— æ³•æ‰¾åˆ°make_strandï¼Œç¬¬ä¸€ç›´è§‰åº”è¯¥æ˜¯asioçš„åº“ç‰ˆæœ¬ä½äº†ï¼ŒFastDDSè¦æ±‚çš„asioç‰ˆæœ¬æ˜¯ï¼š</p><p><img src="9fe3c4297f0542f6b77f259a91ec4bb7.png" alt="" /></p><p>è€Œæˆ‘çš„éº’éºŸç³»ç»Ÿæ˜¯1.12.2ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚å› æ­¤å¿…é¡»å‡çº§asioåº“ï¼Œäºæ˜¯ç›´æ¥ä»åœ°å€ï¼š</p><blockquote><p><a href="https://think-async.com/Asio/Download.html">https://think-async.com/Asio/Download.html</a></p></blockquote><p><img src="822f31f892444137b86ba4accbb189a6.png" alt="" /></p><p>ä¸‹è½½äº†æœ€æ–°ç‰ˆæœ¬ï¼Œç›´æ¥å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure </span><br><span class="line">make -j8  </span><br><span class="line">make -j8 install</span><br></pre></td></tr></table></figure><p>asioåº“ç›¸å¯¹æ¥è¯´æ›´ç®€å•ï¼Œç”±äºè¿™ä¸ªåº“å…¶å®å¹¶ä¸éœ€è¦ç¼–è¯‘ï¼Œæ˜¯ä¸€ä¸ªheader-onlyçš„åº“ï¼Œæ‰€ä»¥æ ¹æ®å‘½ä»¤è¿›è¡Œå®‰è£…å°±å¯ä»¥äº†ã€‚</p><p>ç„¶åå†ç”¨åŒæ ·çš„æ–¹æ³•å®‰è£…FastDDSå³å¯ã€‚å®‰è£…å®Œåœ¨/usr/localç›®å½•ä¸‹æœ‰FastDDSçš„ç›¸å…³ä¿¡æ¯ï¼š</p><p><img src="25585afff52f49129a9c3b9a4c1c7fe6.png" alt="" /></p><h3 id="33éªŒè¯å®‰è£…"><a class="markdownIt-Anchor" href="#33éªŒè¯å®‰è£…"></a> 3.3.éªŒè¯å®‰è£…</h3><p>ç¼–è¯‘å®Œæˆåï¼Œå¯é€šè¿‡è¿è¡Œ FastDDS çš„ç¤ºä¾‹ç¨‹åºéªŒè¯ã€‚</p><p>å…ˆç¼–è¯‘æµ‹è¯•ç¨‹åº:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥ç¤ºä¾‹ç›®å½•ï¼ˆä»¥HelloWorldä¸ºä¾‹ï¼‰</span></span><br><span class="line"><span class="built_in">cd</span> ~/Fast-DDS/examples/cpp/dds/HelloWorldExample/build</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ç¼–è¯‘ç¤ºä¾‹ï¼ˆè‹¥æœªè‡ªåŠ¨ç¼–è¯‘ï¼‰</span></span><br><span class="line">cmake .. &amp;&amp; make -j$(<span class="built_in">nproc</span>)</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«å¯ä¸¤ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•ç¨‹åºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨å‘å¸ƒè€…ï¼ˆç»ˆç«¯1ï¼‰</span></span><br><span class="line">./Hello_World  publisher</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¯åŠ¨è®¢é˜…è€…ï¼ˆç»ˆç«¯2ï¼‰</span></span><br><span class="line">./Hello_World  subscriber</span><br></pre></td></tr></table></figure><p><img src="6c76775937db459690c725bb81c8070c.png" alt="" /></p><p>è‹¥è®¢é˜…è€…èƒ½æ”¶åˆ°å‘å¸ƒè€…çš„æ¶ˆæ¯ï¼Œè¯´æ˜ç¼–è¯‘å’Œå®‰è£…æˆåŠŸã€‚</p><h2 id="4å¸¸è§é—®é¢˜"><a class="markdownIt-Anchor" href="#4å¸¸è§é—®é¢˜"></a> 4.<strong>å¸¸è§é—®é¢˜</strong></h2><p>1.<strong>ä¾èµ–ç¼ºå¤±</strong>ï¼šCMake æŠ¥é”™ â€œCould NOT find XXXâ€ æ—¶ï¼Œæ£€æŸ¥å¯¹åº”ä¾èµ–æ˜¯å¦å®‰è£…ï¼Œæˆ–é€šè¿‡<code>-DCMAKE_PREFIX_PATH</code>æŒ‡å®šä¾èµ–è·¯å¾„ã€‚</p><p>2.<strong>ç‰ˆæœ¬ä¸å…¼å®¹</strong>ï¼šç¡®ä¿ FastDDS ä¸ FastCDR ç‰ˆæœ¬åŒ¹é…ï¼ˆå‚è€ƒ<a href="https://fast-dds.docs.eprosima.com/en/latest/installation/sources/sources_linux.html#dependencies" title="å®˜æ–¹ç‰ˆæœ¬çŸ©é˜µ">å®˜æ–¹ç‰ˆæœ¬çŸ©é˜µ</a>ï¼‰ã€‚</p><p>3.<strong>æƒé™é—®é¢˜</strong>ï¼šå®‰è£…æ—¶è‹¥æç¤º â€œPermission deniedâ€ï¼Œæ·»åŠ <code>sudo</code>æˆ–ä¿®æ”¹å®‰è£…è·¯å¾„ï¼ˆå¦‚ <code>-DCMAKE_INSTALL_PREFIX=$HOME/fastdds</code>ï¼‰ã€‚</p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯åœ¨ Linuxã€Windows æˆ– macOS ç³»ç»Ÿä¸Šå®Œæˆ FastDDS çš„ç¼–è¯‘ä¸å®‰è£…ï¼Œä¸ºåç»­å¼€å‘ DDS åº”ç”¨å¥ å®šåŸºç¡€ã€‚</p>]]></content>
    
    
    <summary type="html">é€šä¿¡ä¸­é—´ä»¶ Fast DDS ï¼šç¼–è¯‘ã€å®‰è£…å’Œæµ‹è¯•</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="DDS" scheme="http://www.formeasy.cc/tags/DDS/"/>
    
  </entry>
  
</feed>
