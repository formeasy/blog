<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ˜“é”¦é£çš„åšå®¢</title>
  
  <subtitle>ä¸“æ³¨äº’è”ç½‘å’Œè½¯ä»¶æŠ€æœ¯</subtitle>
  <link href="http://www.formeasy.cc/atom.xml" rel="self"/>
  
  <link href="http://www.formeasy.cc/"/>
  <updated>2025-10-04T08:18:28.754Z</updated>
  <id>http://www.formeasy.cc/</id>
  
  <author>
    <name>formeasy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€Redisç¼“å­˜ä¸€è‡´æ€§ï¼šå¦‚ä½•ä¿è¯æ•°æ®åº“ä¸ç¼“å­˜åŒæ­¥ã€‘</title>
    <link href="http://www.formeasy.cc/2025/10/04/Redis/%E3%80%90Redis%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%BC%93%E5%AD%98%E5%90%8C%E6%AD%A5%E3%80%91/"/>
    <id>http://www.formeasy.cc/2025/10/04/Redis/%E3%80%90Redis%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%BC%93%E5%AD%98%E5%90%8C%E6%AD%A5%E3%80%91/</id>
    <published>2025-10-04T08:11:24.000Z</published>
    <updated>2025-10-04T08:18:28.754Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ’¡ æ‘˜è¦ï¼šæ˜¯å¦é‡åˆ°è¿‡ç¼“å­˜æ•°æ®ä¸æ•°æ®åº“ä¸ä¸€è‡´çš„å°´å°¬å±€é¢ï¼Ÿæ˜¯å¦åœ¨æ•°æ®æ›´æ–°åå‘ç°ç”¨æˆ·çœ‹åˆ°çš„è¿˜æ˜¯æ—§æ•°æ®ï¼Ÿç¼“å­˜ä¸€è‡´æ€§æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„é—®é¢˜ä¹‹ä¸€ï¼Œå®ƒç›´æ¥å½±å“åˆ°æ•°æ®çš„å‡†ç¡®æ€§å’Œç”¨æˆ·ä½“éªŒã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Redisç¼“å­˜ä¸€è‡´æ€§çš„å„ç§è§£å†³æ–¹æ¡ˆï¼Œä»ç®€å•çš„æ›´æ–°ç­–ç•¥åˆ°å¤æ‚çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼Œå¸®ä½ æ„å»ºå¯é çš„æ•°æ®åŒæ­¥ä½“ç³»ï¼</p><hr /><h3 id="ä¸€-ç¼“å­˜ä¸€è‡´æ€§æŒ‘æˆ˜"><a class="markdownIt-Anchor" href="#ä¸€-ç¼“å­˜ä¸€è‡´æ€§æŒ‘æˆ˜"></a> ä¸€ã€ç¼“å­˜ä¸€è‡´æ€§æŒ‘æˆ˜</h3><h4 id="1-ä¸ºä»€ä¹ˆç¼“å­˜ä¸€è‡´æ€§å¾ˆéš¾"><a class="markdownIt-Anchor" href="#1-ä¸ºä»€ä¹ˆç¼“å­˜ä¸€è‡´æ€§å¾ˆéš¾"></a> 1. ä¸ºä»€ä¹ˆç¼“å­˜ä¸€è‡´æ€§å¾ˆéš¾ï¼Ÿ</h4><p><strong>å…¸å‹çš„ä¸ä¸€è‡´åœºæ™¯</strong>ï¼š</p><ul><li><p>ğŸ•’Â <strong>æ—¶åºé—®é¢˜</strong>ï¼šç¼“å­˜æ›´æ–°å’Œæ•°æ®åº“æ›´æ–°çš„é¡ºåº</p></li><li><p>âš¡Â <strong>å¹¶å‘å†²çª</strong>ï¼šå¤šä¸ªè¯·æ±‚åŒæ—¶æ›´æ–°åŒä¸€æ•°æ®</p></li><li><p>ğŸ”„Â <strong>æ“ä½œå¤±è´¥</strong>ï¼šä¸€ä¸ªæ“ä½œæˆåŠŸå¦ä¸€ä¸ªå¤±è´¥</p></li><li><p>ğŸ—‘ï¸Â <strong>ç¼“å­˜å¤±æ•ˆ</strong>ï¼šç¼“å­˜è¿‡æœŸæˆ–æ·˜æ±°å¯¼è‡´æ•°æ®ä¸ä¸€è‡´</p></li></ul><p><img src="c1a02890a7ad4c8cb1d6d172adcdb820.png" alt="" /></p><h4 id="2-ä¸€è‡´æ€§çº§åˆ«å¯¹æ¯”"><a class="markdownIt-Anchor" href="#2-ä¸€è‡´æ€§çº§åˆ«å¯¹æ¯”"></a> 2. ä¸€è‡´æ€§çº§åˆ«å¯¹æ¯”</h4><table><thead><tr><th>ä¸€è‡´æ€§çº§åˆ«</th><th>æè¿°</th><th>æ€§èƒ½å½±å“</th><th>å®ç°å¤æ‚åº¦</th></tr></thead><tbody><tr><td><strong>å¼ºä¸€è‡´æ€§</strong></td><td>ä»»ä½•æ—¶åˆ»æ•°æ®ä¸€è‡´</td><td>é«˜</td><td>æé«˜</td></tr><tr><td><strong>æœ€ç»ˆä¸€è‡´æ€§</strong></td><td>ä¸€æ®µæ—¶é—´åæ•°æ®ä¸€è‡´</td><td>ä¸­</td><td>ä¸­</td></tr><tr><td><strong>å¼±ä¸€è‡´æ€§</strong></td><td>ä¸ä¿è¯æ•°æ®ä¸€è‡´</td><td>ä½</td><td>ä½</td></tr></tbody></table><h3 id="äºŒ-åŸºç¡€æ›´æ–°ç­–ç•¥"><a class="markdownIt-Anchor" href="#äºŒ-åŸºç¡€æ›´æ–°ç­–ç•¥"></a> äºŒã€åŸºç¡€æ›´æ–°ç­–ç•¥</h3><h4 id="1-cache-asideæ¨¡å¼æ—è·¯ç¼“å­˜"><a class="markdownIt-Anchor" href="#1-cache-asideæ¨¡å¼æ—è·¯ç¼“å­˜"></a> 1. Cache-Asideæ¨¡å¼ï¼ˆæ—è·¯ç¼“å­˜ï¼‰</h4><p><strong>æœ€å¸¸ç”¨çš„ç¼“å­˜æ¨¡å¼</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_user</span>(<span class="params">user_id</span>):</span><br><span class="line">    <span class="comment"># 1. å…ˆæŸ¥ç¼“å­˜</span></span><br><span class="line">    user_data = redis.get(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user_data:</span><br><span class="line">        <span class="keyword">return</span> user_data</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. ç¼“å­˜ä¸å­˜åœ¨ï¼ŒæŸ¥æ•°æ®åº“</span></span><br><span class="line">    user_data = db.query(<span class="string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>, user_id)</span><br><span class="line">    <span class="keyword">if</span> user_data:</span><br><span class="line">        <span class="comment"># 3. å†™å…¥ç¼“å­˜</span></span><br><span class="line">        redis.setex(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>, <span class="number">3600</span>, user_data)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> user_data</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_user</span>(<span class="params">user_id, new_data</span>):</span><br><span class="line">    <span class="comment"># 1. å…ˆæ›´æ–°æ•°æ®åº“</span></span><br><span class="line">    db.update(<span class="string">&quot;UPDATE users SET ... WHERE id = %s&quot;</span>, user_id, new_data)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. å†åˆ é™¤ç¼“å­˜</span></span><br><span class="line">    redis.delete(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><p><strong>é—®é¢˜ï¼šå¹¶å‘æ›´æ–°å¯èƒ½å¯¼è‡´ä¸ä¸€è‡´</strong></p><p><img src="1873d601c2a84ae5880db7b618e8a520.png" alt="" /></p><h4 id="2-write-throughæ¨¡å¼ç›´å†™"><a class="markdownIt-Anchor" href="#2-write-throughæ¨¡å¼ç›´å†™"></a> 2. Write-Throughæ¨¡å¼ï¼ˆç›´å†™ï¼‰</h4><p><strong>åŒæ­¥æ›´æ–°ç¼“å­˜å’Œæ•°æ®åº“</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WriteThroughCache</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, redis_client, db_client</span>):</span><br><span class="line">        self.redis = redis_client</span><br><span class="line">        self.db = db_client</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set</span>(<span class="params">self, key, value, expire=<span class="number">3600</span></span>):</span><br><span class="line">        <span class="comment"># 1. å…ˆæ›´æ–°æ•°æ®åº“</span></span><br><span class="line">        self.db.update_data(key, value)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 2. å†æ›´æ–°ç¼“å­˜</span></span><br><span class="line">        self.redis.setex(key, expire, value)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="comment"># ç›´æ¥è¯»ç¼“å­˜</span></span><br><span class="line">        <span class="keyword">return</span> self.redis.get(key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line">cache = WriteThroughCache(redis, db)</span><br><span class="line">cache.<span class="built_in">set</span>(<span class="string">&quot;user:1001&quot;</span>, user_data)</span><br></pre></td></tr></table></figure><p><strong>ä¼˜ç‚¹</strong>ï¼šä¿è¯å¼ºä¸€è‡´æ€§<br /><strong>ç¼ºç‚¹</strong>ï¼šå†™æ€§èƒ½è¾ƒä½ï¼Œä¸é€‚åˆé«˜é¢‘å†™åœºæ™¯</p><h3 id="ä¸‰-æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#ä¸‰-æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ"></a> ä¸‰ã€æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ</h3><h4 id="1-å»¶è¿ŸåŒåˆ ç­–ç•¥"><a class="markdownIt-Anchor" href="#1-å»¶è¿ŸåŒåˆ ç­–ç•¥"></a> 1. å»¶è¿ŸåŒåˆ ç­–ç•¥</h4><p><strong>è§£å†³å¹¶å‘å†²çªçš„æ–¹æ¡ˆ</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">update_user_with_double_delete</span>(<span class="params">user_id, new_data</span>):</span><br><span class="line">    <span class="comment"># ç¬¬ä¸€æ¬¡åˆ é™¤ç¼“å­˜</span></span><br><span class="line">    redis.delete(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ›´æ–°æ•°æ®åº“</span></span><br><span class="line">    db.update(<span class="string">&quot;UPDATE users SET ... WHERE id = %s&quot;</span>, user_id, new_data)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å»¶è¿Ÿç¬¬äºŒæ¬¡åˆ é™¤</span></span><br><span class="line">    threading.Timer(<span class="number">1.0</span>, <span class="keyword">lambda</span>: redis.delete(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>)).start()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_user_with_retry</span>(<span class="params">user_id, max_retries=<span class="number">3</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¸¦é‡è¯•çš„æŸ¥è¯¢&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> attempt <span class="keyword">in</span> <span class="built_in">range</span>(max_retries):</span><br><span class="line">        user_data = redis.get(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> user_data:</span><br><span class="line">            <span class="keyword">return</span> user_data</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ç¼“å­˜ä¸å­˜åœ¨ï¼ŒæŸ¥æ•°æ®åº“</span></span><br><span class="line">        user_data = db.query(<span class="string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>, user_id)</span><br><span class="line">        <span class="keyword">if</span> user_data:</span><br><span class="line">            <span class="comment"># è®¾ç½®ç¼“å­˜</span></span><br><span class="line">            redis.setex(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>, <span class="number">3600</span>, user_data)</span><br><span class="line">            <span class="keyword">return</span> user_data</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># çŸ­æš‚ç­‰å¾…åé‡è¯•</span></span><br><span class="line">        time.sleep(<span class="number">0.1</span> * (<span class="number">2</span> ** attempt))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure><h4 id="2-åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å¼‚æ­¥æ›´æ–°"><a class="markdownIt-Anchor" href="#2-åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å¼‚æ­¥æ›´æ–°"></a> 2. åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å¼‚æ­¥æ›´æ–°</h4><p><strong>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> kafka <span class="keyword">import</span> KafkaProducer</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CacheAsyncUpdater</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.producer = KafkaProducer(</span><br><span class="line">            bootstrap_servers=[<span class="string">&#x27;kafka1:9092&#x27;</span>, <span class="string">&#x27;kafka2:9092&#x27;</span>],</span><br><span class="line">            value_serializer=<span class="keyword">lambda</span> v: json.dumps(v).encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_user</span>(<span class="params">self, user_id, new_data</span>):</span><br><span class="line">        <span class="comment"># 1. åªæ›´æ–°æ•°æ®åº“</span></span><br><span class="line">        db.update(<span class="string">&quot;UPDATE users SET ... WHERE id = %s&quot;</span>, user_id, new_data)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 2. å‘é€ç¼“å­˜æ›´æ–°æ¶ˆæ¯</span></span><br><span class="line">        message = &#123;</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;cache_update&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;key&#x27;</span>: <span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: new_data,</span><br><span class="line">            <span class="string">&#x27;timestamp&#x27;</span>: time.time()</span><br><span class="line">        &#125;</span><br><span class="line">        self.producer.send(<span class="string">&#x27;cache-updates&#x27;</span>, message)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¶ˆè´¹è€…ç«¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cache_update_consumer</span>():</span><br><span class="line">    consumer = KafkaConsumer(</span><br><span class="line">        <span class="string">&#x27;cache-updates&#x27;</span>,</span><br><span class="line">        bootstrap_servers=[<span class="string">&#x27;kafka1:9092&#x27;</span>, <span class="string">&#x27;kafka2:9092&#x27;</span>],</span><br><span class="line">        value_deserializer=<span class="keyword">lambda</span> m: json.loads(m.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> message <span class="keyword">in</span> consumer:</span><br><span class="line">        data = message.value</span><br><span class="line">        <span class="keyword">if</span> data[<span class="string">&#x27;type&#x27;</span>] == <span class="string">&#x27;cache_update&#x27;</span>:</span><br><span class="line">            <span class="comment"># æ›´æ–°ç¼“å­˜</span></span><br><span class="line">            redis.setex(data[<span class="string">&#x27;key&#x27;</span>], <span class="number">3600</span>, data[<span class="string">&#x27;data&#x27;</span>])</span><br></pre></td></tr></table></figure><h3 id="å››-å¼ºä¸€è‡´æ€§æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#å››-å¼ºä¸€è‡´æ€§æ–¹æ¡ˆ"></a> å››ã€å¼ºä¸€è‡´æ€§æ–¹æ¡ˆ</h3><h4 id="1-åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#1-åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ"></a> 1. åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ</h4><p><strong>ä½¿ç”¨2PCå®ç°å¼ºä¸€è‡´æ€§</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DistributedTransaction</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, redis_client, db_client</span>):</span><br><span class="line">        self.redis = redis_client</span><br><span class="line">        self.db = db_client</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_with_2pc</span>(<span class="params">self, key, new_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¸¤é˜¶æ®µæäº¤æ›´æ–°&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># é˜¶æ®µä¸€ï¼šå‡†å¤‡</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ•°æ®åº“å‡†å¤‡</span></span><br><span class="line">            db_transaction = self.db.begin_transaction()</span><br><span class="line">            db_transaction.update(<span class="string">&quot;UPDATE users SET ... WHERE id = %s&quot;</span>, key.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>], new_data)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># Rediså‡†å¤‡ï¼ˆè®¾ç½®ä¸´æ—¶çŠ¶æ€ï¼‰</span></span><br><span class="line">            self.redis.setex(<span class="string">f&quot;lock:<span class="subst">&#123;key&#125;</span>&quot;</span>, <span class="number">30</span>, <span class="string">&quot;prepared&quot;</span>)</span><br><span class="line">            self.redis.setex(<span class="string">f&quot;temp:<span class="subst">&#123;key&#125;</span>&quot;</span>, <span class="number">30</span>, new_data)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># é˜¶æ®µäºŒï¼šæäº¤</span></span><br><span class="line">            db_transaction.commit()</span><br><span class="line">            self.redis.setex(key, <span class="number">3600</span>, new_data)</span><br><span class="line">            self.redis.delete(<span class="string">f&quot;lock:<span class="subst">&#123;key&#125;</span>&quot;</span>)</span><br><span class="line">            self.redis.delete(<span class="string">f&quot;temp:<span class="subst">&#123;key&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># å›æ»š</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;db_transaction&#x27;</span> <span class="keyword">in</span> <span class="built_in">locals</span>():</span><br><span class="line">                db_transaction.rollback()</span><br><span class="line">            self.redis.delete(<span class="string">f&quot;lock:<span class="subst">&#123;key&#125;</span>&quot;</span>)</span><br><span class="line">            self.redis.delete(<span class="string">f&quot;temp:<span class="subst">&#123;key&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">raise</span> e</span><br></pre></td></tr></table></figure><h4 id="2-åŸºäºbinlogçš„åŒæ­¥æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#2-åŸºäºbinlogçš„åŒæ­¥æ–¹æ¡ˆ"></a> 2. åŸºäºbinlogçš„åŒæ­¥æ–¹æ¡ˆ</h4><p><strong>ä½¿ç”¨MySQL binlogåŒæ­¥ç¼“å­˜</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysqlreplication</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BinlogSyncService</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, redis_client</span>):</span><br><span class="line">        self.redis = redis_client</span><br><span class="line">        self.setup_binlog_stream()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_binlog_stream</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è®¾ç½®binlogç›‘å¬&quot;&quot;&quot;</span></span><br><span class="line">        stream = pymysqlreplication.BinLogStreamReader(</span><br><span class="line">            connection_settings=&#123;</span><br><span class="line">                <span class="string">&#x27;host&#x27;</span>: <span class="string">&#x27;mysql-master&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;port&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">                <span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;repl&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;passwd&#x27;</span>: <span class="string">&#x27;password&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            server_id=<span class="number">100</span>,</span><br><span class="line">            blocking=<span class="literal">True</span>,</span><br><span class="line">            resume_stream=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> binlogevent <span class="keyword">in</span> stream:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(binlogevent, WriteRowsEvent):</span><br><span class="line">                self.handle_write_event(binlogevent)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(binlogevent, UpdateRowsEvent):</span><br><span class="line">                self.handle_update_event(binlogevent)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(binlogevent, DeleteRowsEvent):</span><br><span class="line">                self.handle_delete_event(binlogevent)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle_write_event</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¤„ç†æ’å…¥äº‹ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> event.rows:</span><br><span class="line">            <span class="keyword">if</span> event.table == <span class="string">&#x27;users&#x27;</span>:</span><br><span class="line">                user_id = row[<span class="string">&#x27;values&#x27;</span>][<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">                redis_key = <span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span></span><br><span class="line">                self.redis.setex(redis_key, <span class="number">3600</span>, json.dumps(row[<span class="string">&#x27;values&#x27;</span>]))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle_update_event</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¤„ç†æ›´æ–°äº‹ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> event.rows:</span><br><span class="line">            <span class="keyword">if</span> event.table == <span class="string">&#x27;users&#x27;</span>:</span><br><span class="line">                user_id = row[<span class="string">&#x27;after_values&#x27;</span>][<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">                redis_key = <span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span></span><br><span class="line">                self.redis.setex(redis_key, <span class="number">3600</span>, json.dumps(row[<span class="string">&#x27;after_values&#x27;</span>]))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle_delete_event</span>(<span class="params">self, event</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¤„ç†åˆ é™¤äº‹ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> event.rows:</span><br><span class="line">            <span class="keyword">if</span> event.table == <span class="string">&#x27;users&#x27;</span>:</span><br><span class="line">                user_id = row[<span class="string">&#x27;values&#x27;</span>][<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">                redis_key = <span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span></span><br><span class="line">                self.redis.delete(redis_key)</span><br></pre></td></tr></table></figure><h3 id="äº”-è¯»å†™åˆ†ç¦»åœºæ™¯çš„ä¸€è‡´æ€§"><a class="markdownIt-Anchor" href="#äº”-è¯»å†™åˆ†ç¦»åœºæ™¯çš„ä¸€è‡´æ€§"></a> äº”ã€è¯»å†™åˆ†ç¦»åœºæ™¯çš„ä¸€è‡´æ€§</h3><h4 id="1-ä¸»ä»å»¶è¿Ÿé—®é¢˜"><a class="markdownIt-Anchor" href="#1-ä¸»ä»å»¶è¿Ÿé—®é¢˜"></a> 1. ä¸»ä»å»¶è¿Ÿé—®é¢˜</h4><p><strong>è§£å†³ä¸»ä»å»¶è¿Ÿå¯¼è‡´çš„è„è¯»</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_user_with_read_after_write</span>(<span class="params">user_id, write_timestamp=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¯»å†™åˆ†ç¦»ç¯å¢ƒä¸‹çš„ä¸€è‡´æ€§è¯»å–</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> write_timestamp:</span><br><span class="line">        <span class="comment"># æ£€æŸ¥ä¸»ä»å»¶è¿Ÿ</span></span><br><span class="line">        slave_lag = get_slave_lag()</span><br><span class="line">        <span class="keyword">if</span> time.time() - write_timestamp &amp;lt; slave_lag + <span class="number">1</span>:  <span class="comment"># é¢å¤–1ç§’ç¼“å†²</span></span><br><span class="line">            <span class="comment"># å¼ºåˆ¶è¯»ä¸»åº“</span></span><br><span class="line">            <span class="keyword">return</span> read_from_master(user_id)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…ˆå°è¯•è¯»ä»åº“</span></span><br><span class="line">    user_data = read_from_slave(user_id)</span><br><span class="line">    <span class="keyword">if</span> user_data:</span><br><span class="line">        <span class="keyword">return</span> user_data</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä»åº“æ²¡æœ‰ï¼Œè¯»ä¸»åº“</span></span><br><span class="line">    <span class="keyword">return</span> read_from_master(user_id)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_from_master</span>(<span class="params">user_id</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä»ä¸»åº“è¯»å–&quot;&quot;&quot;</span></span><br><span class="line">    user_data = db_master.query(<span class="string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>, user_id)</span><br><span class="line">    <span class="keyword">if</span> user_data:</span><br><span class="line">        <span class="comment"># æ›´æ–°ç¼“å­˜</span></span><br><span class="line">        redis.setex(<span class="string">f&quot;user:<span class="subst">&#123;user_id&#125;</span>&quot;</span>, <span class="number">3600</span>, user_data)</span><br><span class="line">    <span class="keyword">return</span> user_data</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_from_slave</span>(<span class="params">user_id</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä»ä»åº“è¯»å–&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> db_slave.query(<span class="string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>, user_id)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_slave_lag</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–ä»åº“å»¶è¿Ÿ&quot;&quot;&quot;</span></span><br><span class="line">    result = db_slave.query(<span class="string">&quot;SHOW SLAVE STATUS&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> result[<span class="string">&#x27;Seconds_Behind_Master&#x27;</span>] <span class="keyword">if</span> result <span class="keyword">else</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="å…­-ç›‘æ§ä¸æ²»ç†"><a class="markdownIt-Anchor" href="#å…­-ç›‘æ§ä¸æ²»ç†"></a> å…­ã€ç›‘æ§ä¸æ²»ç†</h3><h4 id="1-ä¸€è‡´æ€§ç›‘æ§ä½“ç³»"><a class="markdownIt-Anchor" href="#1-ä¸€è‡´æ€§ç›‘æ§ä½“ç³»"></a> 1. ä¸€è‡´æ€§ç›‘æ§ä½“ç³»</h4><p><strong>ç›‘æ§å…³é”®æŒ‡æ ‡</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ConsistencyMonitor</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.metrics = &#123;</span><br><span class="line">            <span class="string">&#x27;cache_hits&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;cache_misses&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;stale_reads&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;consistency_errors&#x27;</span>: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_consistency</span>(<span class="params">self, key, db_data, cache_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> db_data != cache_data:</span><br><span class="line">            self.metrics[<span class="string">&#x27;consistency_errors&#x27;</span>] += <span class="number">1</span></span><br><span class="line">            self._repair_inconsistency(key, db_data)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_repair_inconsistency</span>(<span class="params">self, key, correct_data</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¿®å¤ä¸ä¸€è‡´æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            redis.setex(key, <span class="number">3600</span>, correct_data)</span><br><span class="line">            logging.warning(<span class="string">f&quot;Repaired inconsistency for key: <span class="subst">&#123;key&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            logging.error(<span class="string">f&quot;Failed to repair inconsistency: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">track_stale_read</span>(<span class="params">self, key, duration</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·Ÿè¸ªè¿‡æœŸæ•°æ®è¯»å–&quot;&quot;&quot;</span></span><br><span class="line">        self.metrics[<span class="string">&#x27;stale_reads&#x27;</span>] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> duration &amp;gt; <span class="number">5</span>:  <span class="comment"># 5ç§’ä»¥ä¸Šçš„æ—§æ•°æ®</span></span><br><span class="line">            send_alert(<span class="string">f&quot;Stale data detected: <span class="subst">&#123;key&#125;</span>&quot;</span>, <span class="string">f&quot;Duration: <span class="subst">&#123;duration&#125;</span>s&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_report</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ç”Ÿæˆç›‘æ§æŠ¥å‘Š&quot;&quot;&quot;</span></span><br><span class="line">        total_requests = self.metrics[<span class="string">&#x27;cache_hits&#x27;</span>] + self.metrics[<span class="string">&#x27;cache_misses&#x27;</span>]</span><br><span class="line">        consistency_rate = <span class="number">1</span> - (self.metrics[<span class="string">&#x27;consistency_errors&#x27;</span>] / total_requests) <span class="keyword">if</span> total_requests &amp;gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&#x27;consistency_rate&#x27;</span>: <span class="string">f&quot;<span class="subst">&#123;consistency_rate:<span class="number">.3</span>%&#125;</span>&quot;</span>,</span><br><span class="line">            <span class="string">&#x27;stale_reads&#x27;</span>: self.metrics[<span class="string">&#x27;stale_reads&#x27;</span>],</span><br><span class="line">            <span class="string">&#x27;total_requests&#x27;</span>: total_requests</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h4 id="2-è‡ªåŠ¨ä¿®å¤æœºåˆ¶"><a class="markdownIt-Anchor" href="#2-è‡ªåŠ¨ä¿®å¤æœºåˆ¶"></a> 2. è‡ªåŠ¨ä¿®å¤æœºåˆ¶</h4><p><strong>ä¸ä¸€è‡´æ•°æ®è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤</strong>ï¼š</p><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AutoRepairService</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, redis_client, db_client</span>):</span><br><span class="line">        self.redis = redis_client</span><br><span class="line">        self.db = db_client</span><br><span class="line">        self.repair_queue = queue.Queue()</span><br><span class="line">        self.start_workers()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_workers</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¯åŠ¨ä¿®å¤å·¥ä½œçº¿ç¨‹&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):  <span class="comment"># 3ä¸ªä¿®å¤ worker</span></span><br><span class="line">            thread = threading.Thread(target=self._repair_worker)</span><br><span class="line">            thread.daemon = <span class="literal">True</span></span><br><span class="line">            thread.start()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_repair_worker</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¿®å¤å·¥ä½œçº¿ç¨‹&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                key = self.repair_queue.get()</span><br><span class="line">                self._repair_key(key)</span><br><span class="line">                self.repair_queue.task_done()</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                logging.error(<span class="string">f&quot;Repair worker error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_repair_key</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¿®å¤å•ä¸ªkey&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># ä»æ•°æ®åº“è·å–æ­£ç¡®æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> key.startswith(<span class="string">&#x27;user:&#x27;</span>):</span><br><span class="line">            user_id = key.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">            db_data = self.db.query(<span class="string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>, user_id)</span><br><span class="line">            <span class="keyword">if</span> db_data:</span><br><span class="line">                <span class="comment"># æ›´æ–°ç¼“å­˜</span></span><br><span class="line">                self.redis.setex(key, <span class="number">3600</span>, db_data)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">schedule_repair</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è°ƒåº¦ä¿®å¤ä»»åŠ¡&quot;&quot;&quot;</span></span><br><span class="line">        self.repair_queue.put(key)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">bulk_repair_check</span>(<span class="params">self, pattern=<span class="string">&quot;user:*&quot;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰¹é‡æ£€æŸ¥ä¿®å¤&quot;&quot;&quot;</span></span><br><span class="line">        cursor = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            cursor, keys = self.redis.scan(cursor, <span class="keyword">match</span>=pattern, count=<span class="number">100</span>)</span><br><span class="line">            <span class="keyword">for</span> key <span class="keyword">in</span> keys:</span><br><span class="line">                self._verify_and_repair(key)</span><br><span class="line">            <span class="keyword">if</span> cursor == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_verify_and_repair</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;éªŒè¯å¹¶ä¿®å¤æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">        cache_data = self.redis.get(key)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cache_data:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è·å–æ•°æ®åº“æ•°æ®å¯¹æ¯”</span></span><br><span class="line">        <span class="keyword">if</span> key.startswith(<span class="string">&#x27;user:&#x27;</span>):</span><br><span class="line">            user_id = key.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">            db_data = self.db.query(<span class="string">&quot;SELECT * FROM users WHERE id = %s&quot;</span>, user_id)</span><br><span class="line">            <span class="keyword">if</span> db_data != cache_data:</span><br><span class="line">                self.schedule_repair(key)</span><br></pre></td></tr></table></figure><h3 id="ä¸ƒ-åœºæ™¯åŒ–è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#ä¸ƒ-åœºæ™¯åŒ–è§£å†³æ–¹æ¡ˆ"></a> ä¸ƒã€åœºæ™¯åŒ–è§£å†³æ–¹æ¡ˆ</h3><h4 id="1-ç”µå•†å•†å“åº“å­˜ä¸€è‡´æ€§"><a class="markdownIt-Anchor" href="#1-ç”µå•†å•†å“åº“å­˜ä¸€è‡´æ€§"></a> 1. ç”µå•†å•†å“åº“å­˜ä¸€è‡´æ€§</h4><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InventoryService</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.redis = redis.Redis()</span><br><span class="line">        self.db = database.Connection()</span><br><span class="line">        self.lock = redis.Redis()  <span class="comment"># ç”¨äºåˆ†å¸ƒå¼é”</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decrease_stock</span>(<span class="params">self, product_id, quantity</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å‡å°‘åº“å­˜ï¼ˆä¿è¯ä¸€è‡´æ€§ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">        lock_key = <span class="string">f&quot;lock:stock:<span class="subst">&#123;product_id&#125;</span>&quot;</span></span><br><span class="line">        cache_key = <span class="string">f&quot;stock:<span class="subst">&#123;product_id&#125;</span>&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è·å–åˆ†å¸ƒå¼é”</span></span><br><span class="line">        <span class="keyword">with</span> self._acquire_lock(lock_key):</span><br><span class="line">            <span class="comment"># æ£€æŸ¥ç¼“å­˜åº“å­˜</span></span><br><span class="line">            cache_stock = self.redis.get(cache_key)</span><br><span class="line">            <span class="keyword">if</span> cache_stock <span class="keyword">and</span> <span class="built_in">int</span>(cache_stock) &amp;lt; quantity:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">&quot;åº“å­˜ä¸è¶³&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ›´æ–°æ•°æ®åº“</span></span><br><span class="line">            self.db.update(</span><br><span class="line">                <span class="string">&quot;UPDATE products SET stock = stock - %s WHERE id = %s AND stock &amp;gt;= %s&quot;</span>,</span><br><span class="line">                quantity, product_id, quantity</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ›´æ–°ç¼“å­˜</span></span><br><span class="line">            <span class="keyword">if</span> cache_stock:</span><br><span class="line">                new_stock = <span class="built_in">int</span>(cache_stock) - quantity</span><br><span class="line">                self.redis.setex(cache_key, <span class="number">3600</span>, <span class="built_in">str</span>(new_stock))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># ç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ é™¤ä»¥ç¡®ä¿ä¸‹æ¬¡ä»æ•°æ®åº“åŠ è½½</span></span><br><span class="line">                self.redis.delete(cache_key)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_stock</span>(<span class="params">self, product_id</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·å–åº“å­˜ä¿¡æ¯&quot;&quot;&quot;</span></span><br><span class="line">        cache_key = <span class="string">f&quot;stock:<span class="subst">&#123;product_id&#125;</span>&quot;</span></span><br><span class="line">        stock = self.redis.get(cache_key)</span><br><span class="line">        <span class="keyword">if</span> stock:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">int</span>(stock)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä»æ•°æ®åº“è·å–</span></span><br><span class="line">        stock = self.db.query(<span class="string">&quot;SELECT stock FROM products WHERE id = %s&quot;</span>, product_id)</span><br><span class="line">        <span class="keyword">if</span> stock <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            self.redis.setex(cache_key, <span class="number">3600</span>, <span class="built_in">str</span>(stock))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> stock</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_acquire_lock</span>(<span class="params">self, lock_key, timeout=<span class="number">10</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·å–åˆ†å¸ƒå¼é”&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># å®ç°åˆ†å¸ƒå¼é”é€»è¾‘</span></span><br><span class="line">        identifier = <span class="built_in">str</span>(uuid.uuid4())</span><br><span class="line">        end = time.time() + timeout</span><br><span class="line">        <span class="keyword">while</span> time.time() &amp;lt; end:</span><br><span class="line">            <span class="keyword">if</span> self.lock.<span class="built_in">set</span>(lock_key, identifier, nx=<span class="literal">True</span>, ex=<span class="number">5</span>):</span><br><span class="line">                <span class="keyword">return</span> identifier</span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;è·å–é”è¶…æ—¶&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="2-é‡‘èè´¦æˆ·ä½™é¢ä¸€è‡´æ€§"><a class="markdownIt-Anchor" href="#2-é‡‘èè´¦æˆ·ä½™é¢ä¸€è‡´æ€§"></a> 2. é‡‘èè´¦æˆ·ä½™é¢ä¸€è‡´æ€§</h4><p>python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AccountService</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.redis = redis.Redis()</span><br><span class="line">        self.db = database.Connection()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">transfer</span>(<span class="params">self, from_account, to_account, amount</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è½¬è´¦æ“ä½œï¼ˆå¼ºä¸€è‡´æ€§è¦æ±‚ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§</span></span><br><span class="line">        <span class="keyword">with</span> self.db.transaction():</span><br><span class="line">            <span class="comment"># æ›´æ–°æ•°æ®åº“</span></span><br><span class="line">            self.db.update(</span><br><span class="line">                <span class="string">&quot;UPDATE accounts SET balance = balance - %s WHERE id = %s AND balance &amp;gt;= %s&quot;</span>,</span><br><span class="line">                amount, from_account, amount</span><br><span class="line">            )</span><br><span class="line">            self.db.update(</span><br><span class="line">                <span class="string">&quot;UPDATE accounts SET balance = balance + %s WHERE id = %s&quot;</span>,</span><br><span class="line">                amount, to_account</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åˆ é™¤ç›¸å…³ç¼“å­˜</span></span><br><span class="line">            self.redis.delete(<span class="string">f&quot;account:<span class="subst">&#123;from_account&#125;</span>&quot;</span>)</span><br><span class="line">            self.redis.delete(<span class="string">f&quot;account:<span class="subst">&#123;to_account&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è®°å½•äº¤æ˜“æ—¥å¿—</span></span><br><span class="line">            self._log_transaction(from_account, to_account, amount)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_balance</span>(<span class="params">self, account_id</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·å–ä½™é¢ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">        cache_key = <span class="string">f&quot;account:<span class="subst">&#123;account_id&#125;</span>&quot;</span></span><br><span class="line">        balance = self.redis.get(cache_key)</span><br><span class="line">        <span class="keyword">if</span> balance:</span><br><span class="line">            <span class="keyword">return</span> decimal.Decimal(balance)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä»æ•°æ®åº“è·å–</span></span><br><span class="line">        balance = self.db.query(<span class="string">&quot;SELECT balance FROM accounts WHERE id = %s&quot;</span>, account_id)</span><br><span class="line">        <span class="keyword">if</span> balance <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># å¼‚æ­¥æ›´æ–°ç¼“å­˜</span></span><br><span class="line">            threading.Thread(</span><br><span class="line">                target=self.redis.setex,</span><br><span class="line">                args=(cache_key, <span class="number">300</span>, <span class="built_in">str</span>(balance))</span><br><span class="line">            ).start()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> balance</span><br></pre></td></tr></table></figure><h3 id="å…«-æ€»ç»“ä¸æœ€ä½³å®è·µ"><a class="markdownIt-Anchor" href="#å…«-æ€»ç»“ä¸æœ€ä½³å®è·µ"></a> å…«ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h3><h4 id="ä¸€è‡´æ€§æ–¹æ¡ˆé€‰æ‹©æŒ‡å—"><a class="markdownIt-Anchor" href="#ä¸€è‡´æ€§æ–¹æ¡ˆé€‰æ‹©æŒ‡å—"></a> ä¸€è‡´æ€§æ–¹æ¡ˆé€‰æ‹©æŒ‡å—</h4><p><img src="db541323ce40494a994076ba3cd5de0c.png" alt="" /></p><h4 id="æœ€ä½³å®è·µ-checklist"><a class="markdownIt-Anchor" href="#æœ€ä½³å®è·µ-checklist"></a> æœ€ä½³å®è·µ checklist âœ…</h4><p><strong>è®¾è®¡é˜¶æ®µ</strong>ï¼š</p><ul><li><p>æ˜ç¡®ä¸šåŠ¡çš„ä¸€è‡´æ€§è¦æ±‚</p></li><li><p>é€‰æ‹©åˆé€‚çš„ä¸€è‡´æ€§çº§åˆ«</p></li><li><p>è®¾è®¡ç¼“å­˜æ›´æ–°ç­–ç•¥</p></li><li><p>è§„åˆ’ç›‘æ§å’Œä¿®å¤æœºåˆ¶</p></li></ul><p><strong>å¼€å‘é˜¶æ®µ</strong>ï¼š</p><ul><li><p>å®ç°é€‚å½“çš„é‡è¯•æœºåˆ¶</p></li><li><p>æ·»åŠ åˆ†å¸ƒå¼é”é¿å…å¹¶å‘å†²çª</p></li><li><p>è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´</p></li><li><p>å®ç°æ•°æ®éªŒè¯å’Œä¿®å¤</p></li></ul><p><strong>è¿ç»´é˜¶æ®µ</strong>ï¼š</p><ul><li><p>ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡å’Œä¸€è‡´æ€§</p></li><li><p>è®¾ç½®å‘Šè­¦æœºåˆ¶</p></li><li><p>å®šæœŸè¿›è¡Œä¸€è‡´æ€§æ£€æŸ¥</p></li><li><p>å‡†å¤‡åº”æ€¥é¢„æ¡ˆ</p></li></ul><h4 id="å…³é”®å»ºè®®"><a class="markdownIt-Anchor" href="#å…³é”®å»ºè®®"></a> å…³é”®å»ºè®® ğŸš€</h4><ol><li><p><strong>ä¸è¦è¿‡åº¦è®¾è®¡</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©é€‚å½“çš„ä¸€è‡´æ€§çº§åˆ«</p></li><li><p><strong>ç›‘æ§é‡äºé¢„é˜²</strong>ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»æ¯”è¿½æ±‚å®Œç¾æ–¹æ¡ˆæ›´é‡è¦</p></li><li><p><strong>è®¾è®¡å®¹é”™æœºåˆ¶</strong>ï¼šå‡è®¾ä¸ä¸€è‡´ä¼šå‘ç”Ÿï¼Œå‡†å¤‡å¥½ä¿®å¤æ–¹æ¡ˆ</p></li><li><p><strong>æŒç»­ä¼˜åŒ–æ”¹è¿›</strong>ï¼šæ ¹æ®ç›‘æ§æ•°æ®ä¸æ–­è°ƒæ•´å’Œä¼˜åŒ–ç­–ç•¥</p></li></ol><p>é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†åˆ†æå’Œå®è·µæ–¹æ¡ˆï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç¼“å­˜ä¸€è‡´æ€§æ–¹æ¡ˆï¼Œå¹¶æ„å»ºå‡ºå¯é çš„æ•°æ®åŒæ­¥ä½“ç³»ã€‚è®°ä½ï¼šä¸€è‡´æ€§æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„è§£å†³æ–¹æ¡ˆï¼</p>]]></content>
    
    
    <summary type="html">ã€Redisç¼“å­˜ä¸€è‡´æ€§ï¼šå¦‚ä½•ä¿è¯æ•°æ®åº“ä¸ç¼“å­˜åŒæ­¥ã€‘</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="http://www.formeasy.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Redis" scheme="http://www.formeasy.cc/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>ElasticsearchçŸ¥è¯†ç‚¹è¯¦ç»†æ€»ç»“</title>
    <link href="http://www.formeasy.cc/2025/10/03/Elasticsearch/Elasticsearch%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E7%BB%86%E6%80%BB%E7%BB%93/"/>
    <id>http://www.formeasy.cc/2025/10/03/Elasticsearch/Elasticsearch%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%A6%E7%BB%86%E6%80%BB%E7%BB%93/</id>
    <published>2025-10-03T13:42:57.000Z</published>
    <updated>2025-10-03T13:48:08.764Z</updated>
    
    <content type="html"><![CDATA[<p>Elasticsearchï¼ˆç®€ç§° ESï¼‰æ˜¯ä¸€æ¬¾åŸºäº Lucene æ„å»ºçš„åˆ†å¸ƒå¼ã€é«˜æ‰©å±•ã€é«˜å®æ—¶çš„å…¨æ–‡æœç´¢å¼•æ“ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Elastic Stackï¼ˆELK Stackï¼šElasticsearch, Logstash, Kibanaï¼‰çš„æ ¸å¿ƒç»„ä»¶ï¼Œå¹¿æ³›åº”ç”¨äºæ—¥å¿—åˆ†æã€å…¨æ–‡æ£€ç´¢ã€å®æ—¶æ•°æ®åˆ†æç­‰åœºæ™¯ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒæ¦‚å¿µã€æ¶æ„è®¾è®¡ã€æ•°æ®æ“ä½œã€æŸ¥è¯¢åˆ†æã€æ€§èƒ½ä¼˜åŒ–ç­‰ç»´åº¦è¿›è¡Œå…¨é¢æ€»ç»“ã€‚</p><h3 id="ä¸€-æ ¸å¿ƒæ¦‚å¿µ"><a class="markdownIt-Anchor" href="#ä¸€-æ ¸å¿ƒæ¦‚å¿µ"></a> ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ</h3><p>Elasticsearch çš„æ¦‚å¿µä½“ç³»ä¸ä¼ ç»Ÿæ•°æ®åº“æœ‰æ˜¾è‘—å·®å¼‚ï¼Œç†è§£è¿™äº›åŸºç¡€æ¦‚å¿µæ˜¯æŒæ¡ ES çš„å‰æã€‚</p><h4 id="1-ä¸ä¼ ç»Ÿæ•°æ®åº“çš„å¯¹åº”å…³ç³»"><a class="markdownIt-Anchor" href="#1-ä¸ä¼ ç»Ÿæ•°æ®åº“çš„å¯¹åº”å…³ç³»"></a> 1. ä¸ä¼ ç»Ÿæ•°æ®åº“çš„å¯¹åº”å…³ç³»</h4><p>ä¸ºä¾¿äºå¿«é€Ÿç†è§£ï¼Œå¯å°† ES æ ¸å¿ƒæ¦‚å¿µä¸å…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰è¿›è¡Œç±»æ¯”ï¼š</p><table><thead><tr><th>Elasticsearch æ¦‚å¿µ</th><th>å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Indexï¼ˆç´¢å¼•ï¼‰</td><td>Databaseï¼ˆæ•°æ®åº“ï¼‰</td><td>å­˜å‚¨åŒç±»æ–‡æ¡£çš„é›†åˆï¼Œå…·æœ‰ç›¸ä¼¼çš„ç»“æ„</td></tr><tr><td>Typeï¼ˆç±»å‹ï¼Œ7.x ååºŸå¼ƒï¼‰</td><td>Tableï¼ˆè¡¨ï¼‰</td><td>æ—©æœŸç”¨äºå¯¹ Index å†…æ–‡æ¡£åˆ†ç±»ï¼Œ7.x èµ·å¼ºåˆ¶ä¸º <code>_doc</code></td></tr><tr><td>Documentï¼ˆæ–‡æ¡£ï¼‰</td><td>Rowï¼ˆè¡Œï¼‰</td><td>ç´¢å¼•ä¸­æœ€å°çš„æ•°æ®å•å…ƒï¼Œä»¥ JSON æ ¼å¼å­˜å‚¨</td></tr><tr><td>Fieldï¼ˆå­—æ®µï¼‰</td><td>Columnï¼ˆåˆ—ï¼‰</td><td>æ–‡æ¡£ä¸­çš„å±æ€§ï¼Œå¯¹åº” JSON çš„é”®å€¼å¯¹</td></tr><tr><td>Mappingï¼ˆæ˜ å°„ï¼‰</td><td>Schemaï¼ˆè¡¨ç»“æ„ï¼‰</td><td>å®šä¹‰æ–‡æ¡£ä¸­å­—æ®µçš„ç±»å‹ã€åˆ†è¯å™¨ã€æ˜¯å¦ç´¢å¼•ç­‰å…ƒæ•°æ®</td></tr><tr><td>Shardï¼ˆåˆ†ç‰‡ï¼‰</td><td>-</td><td>ç´¢å¼•çš„ç‰©ç†åˆ†ç‰‡ï¼Œå®ç°æ°´å¹³æ‰©å±•ï¼ˆLucene ç´¢å¼•å®ä¾‹ï¼‰</td></tr><tr><td>Replicaï¼ˆå‰¯æœ¬ï¼‰</td><td>-</td><td>åˆ†ç‰‡çš„å†—ä½™å¤‡ä»½ï¼Œç”¨äºé«˜å¯ç”¨å’Œè´Ÿè½½åˆ†æ‹…</td></tr></tbody></table><h4 id="2-æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"><a class="markdownIt-Anchor" href="#2-æ ¸å¿ƒæ¦‚å¿µè¯¦è§£"></a> 2. æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h4><h5 id="1indexç´¢å¼•"><a class="markdownIt-Anchor" href="#1indexç´¢å¼•"></a> ï¼ˆ1ï¼‰Indexï¼ˆç´¢å¼•ï¼‰</h5><ul><li><strong>å®šä¹‰</strong>ï¼šä¸€ä¸ªé€»è¾‘ä¸Šçš„é›†åˆï¼ŒåŒ…å«å…·æœ‰ç›¸ä¼¼ç»“æ„çš„æ–‡æ¡£ï¼ˆå¦‚â€œå•†å“ç´¢å¼•â€â€œç”¨æˆ·æ—¥å¿—ç´¢å¼•â€ï¼‰ã€‚</li><li><strong>å‘½åè§„åˆ™</strong>ï¼š lowercase å°å†™ï¼Œæ— ç‰¹æ®Šå­—ç¬¦ï¼ˆå»ºè®®ç”¨ <code>-</code> åˆ†éš”ï¼Œå¦‚ <code>user-logs-2024</code>ï¼‰ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šç´¢å¼•æ˜¯åˆ†ç‰‡çš„é€»è¾‘å®¹å™¨ï¼Œåˆ›å»ºæ—¶éœ€æŒ‡å®šåˆ†ç‰‡å’Œå‰¯æœ¬æ•°é‡ï¼Œåˆ›å»ºååˆ†ç‰‡æ•°é‡ä¸å¯ä¿®æ”¹ï¼ˆå‰¯æœ¬å¯åŠ¨æ€è°ƒæ•´ï¼‰ã€‚</li></ul><h5 id="2documentæ–‡æ¡£"><a class="markdownIt-Anchor" href="#2documentæ–‡æ¡£"></a> ï¼ˆ2ï¼‰Documentï¼ˆæ–‡æ¡£ï¼‰</h5><ul><li><strong>æ ¼å¼</strong>ï¼šå”¯ä¸€æ”¯æŒ JSON æ ¼å¼ï¼Œçµæ´»æ€§é«˜ï¼ˆæ— éœ€ä¸¥æ ¼ç»Ÿä¸€ç»“æ„ï¼Œä½†å»ºè®®éµå¾ª Mapping è§„èŒƒï¼‰ã€‚</li><li><strong>å”¯ä¸€æ ‡è¯†</strong>ï¼šç”± <code>_index</code>ï¼ˆæ‰€å±ç´¢å¼•ï¼‰ã€<code>_type</code>ï¼ˆ7.x å›ºå®šä¸º <code>_doc</code>ï¼‰ã€<code>_id</code>ï¼ˆæ–‡æ¡£ IDï¼‰å…±åŒç¡®å®šã€‚<ul><li><code>_id</code> å¯æ‰‹åŠ¨æŒ‡å®šï¼ˆå¦‚ç”¨ä¸šåŠ¡ ID ä½œä¸º <code>_id</code>ï¼‰ï¼Œä¹Ÿå¯ç”± ES è‡ªåŠ¨ç”Ÿæˆï¼ˆ20 ä½ UUIDï¼‰ã€‚</li></ul></li><li><strong>å…ƒæ•°æ®</strong>ï¼šé™¤ä¸šåŠ¡å­—æ®µå¤–ï¼ŒåŒ…å« <code>_index</code>ã€<code>_type</code>ã€<code>_id</code>ã€<code>_version</code>ï¼ˆç‰ˆæœ¬å·ï¼‰ã€<code>_score</code>ï¼ˆæŸ¥è¯¢ç›¸å…³æ€§å¾—åˆ†ï¼‰ç­‰ç³»ç»Ÿå­—æ®µã€‚</li></ul><h5 id="3mappingæ˜ å°„"><a class="markdownIt-Anchor" href="#3mappingæ˜ å°„"></a> ï¼ˆ3ï¼‰Mappingï¼ˆæ˜ å°„ï¼‰</h5><ul><li><strong>å®šä¹‰</strong>ï¼šç›¸å½“äºæ–‡æ¡£çš„â€œ schema â€ï¼Œç”¨äºçº¦æŸå­—æ®µçš„ç±»å‹ã€åˆ†è¯æ–¹å¼ã€æ˜¯å¦å¯æ£€ç´¢ç­‰å±æ€§ã€‚</li><li><strong>ç±»å‹</strong>ï¼š<ul><li>åŠ¨æ€æ˜ å°„ï¼ˆDynamic Mappingï¼‰ï¼šES è‡ªåŠ¨æ ¹æ®æ–‡æ¡£å­—æ®µå€¼æ¨æ–­ç±»å‹ï¼ˆå¦‚æ•°å­—â†’<code>long</code>ï¼Œå­—ç¬¦ä¸²â†’<code>text</code>/<code>keyword</code>ï¼‰ï¼Œé€‚åˆå¿«é€Ÿä¸Šæ‰‹ï¼Œä½†å¯èƒ½å­˜åœ¨ç²¾åº¦é—®é¢˜ã€‚</li><li>é™æ€æ˜ å°„ï¼ˆExplicit Mappingï¼‰ï¼šæ‰‹åŠ¨å®šä¹‰å­—æ®µç±»å‹å’Œå±æ€§ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œä¿è¯æ•°æ®ç»“æ„ä¸€è‡´æ€§ã€‚</li></ul></li><li><strong>å¸¸è§å­—æ®µç±»å‹</strong>ï¼š<ul><li>æ–‡æœ¬ç±»ï¼š<code>text</code>ï¼ˆå¯åˆ†è¯ï¼Œç”¨äºå…¨æ–‡æ£€ç´¢ï¼Œå¦‚â€œå•†å“æè¿°â€ï¼‰ã€<code>keyword</code>ï¼ˆä¸åˆ†è¯ï¼Œç”¨äºç²¾ç¡®åŒ¹é…/èšåˆï¼Œå¦‚â€œå•†å“åˆ†ç±»â€ï¼‰ã€‚</li><li>æ•°å€¼ç±»ï¼š<code>long</code>ã€<code>integer</code>ã€<code>double</code>ã€<code>float</code>ï¼ˆå¯¹åº”ä¸åŒç²¾åº¦çš„æ•°å­—ï¼‰ã€‚</li><li>æ—¥æœŸç±»ï¼š<code>date</code>ï¼ˆæ”¯æŒæ ¼å¼åŒ–ï¼Œå¦‚ <code>yyyy-MM-dd HH:mm:ss</code>ï¼‰ã€‚</li><li>å¸ƒå°”ç±»ï¼š<code>boolean</code>ï¼ˆ<code>true</code>/<code>false</code>ï¼‰ã€‚</li><li>å¤åˆç±»ï¼š<code>object</code>ï¼ˆåµŒå¥—å¯¹è±¡ï¼‰ã€<code>nested</code>ï¼ˆå¤„ç†åµŒå¥—æ•°ç»„ï¼Œè§£å†³ <code>object</code> ç±»å‹çš„æ‰å¹³åŒ–é—®é¢˜ï¼‰ã€‚</li></ul></li></ul><h5 id="4shard-replicaåˆ†ç‰‡ä¸å‰¯æœ¬"><a class="markdownIt-Anchor" href="#4shard-replicaåˆ†ç‰‡ä¸å‰¯æœ¬"></a> ï¼ˆ4ï¼‰Shard &amp; Replicaï¼ˆåˆ†ç‰‡ä¸å‰¯æœ¬ï¼‰</h5><ul><li><p><strong>Shardï¼ˆåˆ†ç‰‡ï¼‰</strong>ï¼š</p><ul><li>æ ¸å¿ƒç›®çš„ï¼šå®ç°æ°´å¹³æ‰©å±•ã€‚å•ä¸ªç´¢å¼•çš„æ•°æ®è¢«æ‹†åˆ†åˆ°å¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡æ˜¯ç‹¬ç«‹çš„ Lucene ç´¢å¼•ï¼Œå¯åˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹ã€‚</li><li>ç±»å‹ï¼šä¸»åˆ†ç‰‡ï¼ˆPrimary Shardï¼‰ã€å‰¯æœ¬åˆ†ç‰‡ï¼ˆReplica Shardï¼‰ã€‚</li><li>æ•°é‡é™åˆ¶ï¼šåˆ›å»ºç´¢å¼•æ—¶æŒ‡å®šä¸»åˆ†ç‰‡æ•°é‡ï¼ˆ<code>number_of_shards</code>ï¼‰ï¼Œåˆ›å»ºåä¸å¯ä¿®æ”¹ï¼ˆéœ€é€šè¿‡ <code>reindex</code> é‡å»ºç´¢å¼•è°ƒæ•´ï¼‰ï¼›é»˜è®¤ 1 ä¸ªä¸»åˆ†ç‰‡ã€‚</li></ul></li><li><p><strong>Replicaï¼ˆå‰¯æœ¬ï¼‰</strong>ï¼š</p><ul><li>æ ¸å¿ƒç›®çš„ï¼šé«˜å¯ç”¨ + è´Ÿè½½åˆ†æ‹…ã€‚å‰¯æœ¬æ˜¯ä¸»åˆ†ç‰‡çš„å†—ä½™å¤‡ä»½ï¼Œä¸»åˆ†ç‰‡æ•…éšœæ—¶å¯è‡ªåŠ¨å‡çº§ä¸ºä¸»åˆ†ç‰‡ï¼›åŒæ—¶å¯æ‰¿æ‹…æŸ¥è¯¢è¯·æ±‚ï¼Œç¼“è§£ä¸»åˆ†ç‰‡å‹åŠ›ã€‚</li><li>æ•°é‡é…ç½®ï¼šåˆ›å»ºæ—¶é€šè¿‡ <code>number_of_replicas</code> æŒ‡å®šï¼Œæ”¯æŒåŠ¨æ€ä¿®æ”¹ï¼ˆå¦‚ <code>PUT /index/_settings &#123;&quot;number_of_replicas&quot;: 2&#125;</code>ï¼‰ï¼›é»˜è®¤ 1 ä¸ªå‰¯æœ¬ã€‚</li><li>çº¦æŸï¼šå‰¯æœ¬åˆ†ç‰‡ä¸ä¼šä¸å¯¹åº”çš„ä¸»åˆ†ç‰‡åœ¨åŒä¸€èŠ‚ç‚¹ï¼ˆé¿å…å•ç‚¹æ•…éšœï¼‰ã€‚</li></ul></li></ul><h5 id="5cluster-nodeé›†ç¾¤ä¸èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#5cluster-nodeé›†ç¾¤ä¸èŠ‚ç‚¹"></a> ï¼ˆ5ï¼‰Cluster &amp; Nodeï¼ˆé›†ç¾¤ä¸èŠ‚ç‚¹ï¼‰</h5><ul><li><p><strong>Nodeï¼ˆèŠ‚ç‚¹ï¼‰</strong>ï¼š</p><ul><li>å®šä¹‰ï¼šè¿è¡Œ ES è¿›ç¨‹çš„å•ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯é›†ç¾¤çš„åŸºæœ¬ç»„æˆå•å…ƒã€‚</li><li>ç±»å‹ï¼š<ul><li>ä¸»èŠ‚ç‚¹ï¼ˆMaster Nodeï¼‰ï¼šè´Ÿè´£é›†ç¾¤å…ƒæ•°æ®ç®¡ç†ï¼ˆå¦‚åˆ›å»ºç´¢å¼•ã€åˆ†ç‰‡åˆ†é…ï¼‰ï¼Œé»˜è®¤æ‰€æœ‰èŠ‚ç‚¹å‡å¯ç«é€‰ï¼Œå»ºè®®é€šè¿‡ <code>node.master: true</code> ä¸“é—¨é…ç½®ã€‚</li><li>æ•°æ®èŠ‚ç‚¹ï¼ˆData Nodeï¼‰ï¼šè´Ÿè´£æ•°æ®çš„å­˜å‚¨ã€ç´¢å¼•ã€æŸ¥è¯¢å’Œèšåˆï¼Œé€šè¿‡ <code>node.data: true</code> é…ç½®ï¼Œæ˜¯é›†ç¾¤çš„â€œæ•°æ®è½½ä½“â€ã€‚</li><li>åè°ƒèŠ‚ç‚¹ï¼ˆCoordinating Nodeï¼‰ï¼šæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œåˆ†å‘åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œæ±‡æ€»ç»“æœè¿”å›ï¼›é»˜è®¤æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯åè°ƒèŠ‚ç‚¹ï¼Œå¯é€šè¿‡ <code>node.master: false</code> + <code>node.data: false</code> é…ç½®ä¸“ç”¨åè°ƒèŠ‚ç‚¹ã€‚</li><li>ingest èŠ‚ç‚¹ï¼šè´Ÿè´£æ•°æ®é¢„å¤„ç†ï¼ˆå¦‚æ·»åŠ å­—æ®µã€è½¬æ¢æ ¼å¼ï¼‰ï¼Œé€šè¿‡ <code>node.ingest: true</code> é…ç½®ã€‚</li></ul></li></ul></li><li><p><strong>Clusterï¼ˆé›†ç¾¤ï¼‰</strong>ï¼š</p><ul><li>å®šä¹‰ï¼šç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆçš„é›†åˆï¼Œå…±äº«åŒä¸€é›†ç¾¤åç§°ï¼ˆ<code>cluster.name</code>ï¼‰ï¼ŒååŒå·¥ä½œå®ç°åˆ†å¸ƒå¼èƒ½åŠ›ã€‚</li><li>é›†ç¾¤çŠ¶æ€ï¼šé€šè¿‡ <code>_cluster/health</code> æŸ¥çœ‹ï¼ŒçŠ¶æ€åˆ†ä¸º <code>green</code>ï¼ˆæ‰€æœ‰ä¸»/å‰¯æœ¬åˆ†ç‰‡æ­£å¸¸ï¼‰ã€<code>yellow</code>ï¼ˆä¸»åˆ†ç‰‡æ­£å¸¸ï¼Œå‰¯æœ¬åˆ†ç‰‡ç¼ºå¤±ï¼‰ã€<code>red</code>ï¼ˆä¸»åˆ†ç‰‡ç¼ºå¤±ï¼Œæ•°æ®ä¸å¯ç”¨ï¼‰ã€‚</li></ul></li></ul><h3 id="äºŒ-æ¶æ„è®¾è®¡"><a class="markdownIt-Anchor" href="#äºŒ-æ¶æ„è®¾è®¡"></a> äºŒã€æ¶æ„è®¾è®¡</h3><p>Elasticsearch çš„åˆ†å¸ƒå¼æ¶æ„æ˜¯å…¶é«˜æ‰©å±•ã€é«˜å¯ç”¨çš„æ ¸å¿ƒï¼Œä¸»è¦å›´ç»•â€œåˆ†ç‰‡åˆ†é…â€â€œè·¯ç”±æœºåˆ¶â€â€œæ•…éšœè½¬ç§»â€å±•å¼€ã€‚</p><h4 id="1-åˆ†ç‰‡è·¯ç”±æœºåˆ¶"><a class="markdownIt-Anchor" href="#1-åˆ†ç‰‡è·¯ç”±æœºåˆ¶"></a> 1. åˆ†ç‰‡è·¯ç”±æœºåˆ¶</h4><p>å½“å®¢æˆ·ç«¯å†™å…¥/æŸ¥è¯¢æ–‡æ¡£æ—¶ï¼ŒES éœ€è¦ç¡®å®šæ–‡æ¡£å½’å±çš„ä¸»åˆ†ç‰‡ï¼Œæ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p><ol><li>è®¡ç®—è·¯ç”±å€¼ï¼š<code>shard = hash(_routing) % number_of_primary_shards</code>ã€‚</li><li><code>_routing</code> é»˜è®¤ä¸ºæ–‡æ¡£çš„ <code>_id</code>ï¼Œå¯æ‰‹åŠ¨æŒ‡å®šï¼ˆå¦‚æŒ‰â€œç”¨æˆ· IDâ€è·¯ç”±ï¼Œç¡®ä¿åŒä¸€ç”¨æˆ·çš„æ–‡æ¡£åœ¨åŒä¸€åˆ†ç‰‡ï¼Œä¼˜åŒ–èšåˆæ•ˆç‡ï¼‰ã€‚</li><li>åè°ƒèŠ‚ç‚¹æ ¹æ®è·¯ç”±ç»“æœï¼Œå°†è¯·æ±‚è½¬å‘åˆ°ä¸»åˆ†ç‰‡æ‰€åœ¨èŠ‚ç‚¹ï¼›å†™å…¥æ“ä½œéœ€ç­‰å¾…ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡å‡ç¡®è®¤åè¿”å›æˆåŠŸï¼ˆé»˜è®¤é…ç½®ï¼‰ã€‚</li></ol><h4 id="2-åˆ†ç‰‡åˆ†é…ä¸å†å¹³è¡¡"><a class="markdownIt-Anchor" href="#2-åˆ†ç‰‡åˆ†é…ä¸å†å¹³è¡¡"></a> 2. åˆ†ç‰‡åˆ†é…ä¸å†å¹³è¡¡</h4><ul><li><strong>åˆ†é…ç­–ç•¥</strong>ï¼šMaster èŠ‚ç‚¹è´Ÿè´£å°†ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡åˆ†é…åˆ°ä¸åŒèŠ‚ç‚¹ï¼Œéµå¾ªâ€œå‰¯æœ¬ä¸ä¸ä¸»åˆ†ç‰‡åŒèŠ‚ç‚¹â€â€œåˆ†ç‰‡å‡åŒ€åˆ†å¸ƒâ€ç­‰åŸåˆ™ã€‚</li><li><strong>å†å¹³è¡¡ï¼ˆRebalancingï¼‰</strong>ï¼šå½“é›†ç¾¤èŠ‚ç‚¹æ•°é‡å˜åŒ–ï¼ˆæ–°å¢/ä¸‹çº¿èŠ‚ç‚¹ï¼‰æˆ–åˆ†ç‰‡çŠ¶æ€å˜åŒ–æ—¶ï¼ŒMaster ä¼šè‡ªåŠ¨è§¦å‘åˆ†ç‰‡è¿ç§»ï¼Œç¡®ä¿è´Ÿè½½å‡è¡¡ï¼›å¯é€šè¿‡ <code>cluster.routing.rebalance.enable</code> æ§åˆ¶å¼€å…³ã€‚</li></ul><h4 id="3-æ•…éšœè½¬ç§»æœºåˆ¶"><a class="markdownIt-Anchor" href="#3-æ•…éšœè½¬ç§»æœºåˆ¶"></a> 3. æ•…éšœè½¬ç§»æœºåˆ¶</h4><p>å½“ä¸»èŠ‚ç‚¹æ•…éšœæˆ–ä¸»åˆ†ç‰‡ä¸å¯ç”¨æ—¶ï¼ŒES è‡ªåŠ¨æ‰§è¡Œæ•…éšœè½¬ç§»ï¼š</p><ol><li>èŠ‚ç‚¹é—´é€šè¿‡ ZenDiscovery åè®®é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹ï¼ˆéœ€æ»¡è¶³â€œæ³•å®šäººæ•°â€ï¼Œé¿å…è„‘è£‚ï¼Œå¯é…ç½® <code>discovery.zen.minimum_master_nodes</code>ï¼‰ã€‚</li><li>æ–°ä¸»èŠ‚ç‚¹å°†è¯¥ä¸»åˆ†ç‰‡å¯¹åº”çš„å‰¯æœ¬åˆ†ç‰‡å‡çº§ä¸ºæ–°çš„ä¸»åˆ†ç‰‡ã€‚</li><li>é‡æ–°åˆ›å»ºç¼ºå¤±çš„å‰¯æœ¬åˆ†ç‰‡ï¼Œæ¢å¤é›†ç¾¤çŠ¶æ€ä¸º <code>green</code>ã€‚</li></ol><h3 id="ä¸‰-æ•°æ®æ“ä½œcrud"><a class="markdownIt-Anchor" href="#ä¸‰-æ•°æ®æ“ä½œcrud"></a> ä¸‰ã€æ•°æ®æ“ä½œï¼ˆCRUDï¼‰</h3><p>ES æä¾› RESTful API ç”¨äºæ•°æ®äº¤äº’ï¼Œæ ¸å¿ƒæ“ä½œåŒ…æ‹¬ç´¢å¼•ï¼ˆIndexï¼‰ã€æŸ¥è¯¢ï¼ˆSearchï¼‰ã€æ›´æ–°ï¼ˆUpdateï¼‰ã€åˆ é™¤ï¼ˆDeleteï¼‰ã€‚</p><h4 id="1-æ–‡æ¡£æ“ä½œ"><a class="markdownIt-Anchor" href="#1-æ–‡æ¡£æ“ä½œ"></a> 1. æ–‡æ¡£æ“ä½œ</h4><h5 id="1åˆ›å»ºæ–‡æ¡£index"><a class="markdownIt-Anchor" href="#1åˆ›å»ºæ–‡æ¡£index"></a> ï¼ˆ1ï¼‰åˆ›å»ºæ–‡æ¡£ï¼ˆIndexï¼‰</h5><ul><li>æ‰‹åŠ¨æŒ‡å®š <code>_id</code>ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PUT /&lt;index&gt;/_doc/&lt;_id&gt;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;field1&quot;: &quot;value1&quot;,</span><br><span class="line">  &quot;field2&quot;: &quot;value2&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è‡ªåŠ¨ç”Ÿæˆ <code>_id</code>ï¼ˆç”¨ POSTï¼‰ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">POST /&lt;index&gt;/_doc/</span><br><span class="line">&#123;</span><br><span class="line">  &quot;field1&quot;: &quot;value1&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2æŸ¥è¯¢æ–‡æ¡£get"><a class="markdownIt-Anchor" href="#2æŸ¥è¯¢æ–‡æ¡£get"></a> ï¼ˆ2ï¼‰æŸ¥è¯¢æ–‡æ¡£ï¼ˆGetï¼‰</h5><ul><li>æŒ‰ <code>_id</code> ç²¾ç¡®æŸ¥è¯¢ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /&lt;index&gt;/_doc/&lt;_id&gt;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢æ–‡æ¡£æ˜¯å¦å­˜åœ¨ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HEAD /&lt;index&gt;/_doc/&lt;_id&gt;  # 200 å­˜åœ¨ï¼Œ404 ä¸å­˜åœ¨</span><br></pre></td></tr></table></figure><h5 id="3æ›´æ–°æ–‡æ¡£update"><a class="markdownIt-Anchor" href="#3æ›´æ–°æ–‡æ¡£update"></a> ï¼ˆ3ï¼‰æ›´æ–°æ–‡æ¡£ï¼ˆUpdateï¼‰</h5><ul><li>å…¨é‡æ›´æ–°ï¼ˆè¦†ç›–åŸæœ‰æ–‡æ¡£ï¼Œ<code>_version</code> è‡ªå¢ï¼‰ï¼šç›´æ¥ç”¨ <code>PUT</code> é‡å†™æ–‡æ¡£ã€‚</li><li>å±€éƒ¨æ›´æ–°ï¼ˆä»…ä¿®æ”¹æŒ‡å®šå­—æ®µï¼‰ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /&lt;index&gt;/_doc/&lt;_id&gt;/_update</span><br><span class="line">&#123;</span><br><span class="line">  &quot;doc&quot;: &#123;</span><br><span class="line">    &quot;field1&quot;: &quot;new_value&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4åˆ é™¤æ–‡æ¡£delete"><a class="markdownIt-Anchor" href="#4åˆ é™¤æ–‡æ¡£delete"></a> ï¼ˆ4ï¼‰åˆ é™¤æ–‡æ¡£ï¼ˆDeleteï¼‰</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /&lt;index&gt;/_doc/&lt;_id&gt;</span><br></pre></td></tr></table></figure><h4 id="2-ç´¢å¼•æ“ä½œ"><a class="markdownIt-Anchor" href="#2-ç´¢å¼•æ“ä½œ"></a> 2. ç´¢å¼•æ“ä½œ</h4><h5 id="1åˆ›å»ºç´¢å¼•å«-mapping"><a class="markdownIt-Anchor" href="#1åˆ›å»ºç´¢å¼•å«-mapping"></a> ï¼ˆ1ï¼‰åˆ›å»ºç´¢å¼•ï¼ˆå« Mappingï¼‰</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">PUT /&lt;index&gt;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">    &quot;number_of_shards&quot;: 3,    # ä¸»åˆ†ç‰‡æ•°é‡</span><br><span class="line">    &quot;number_of_replicas&quot;: 1   # å‰¯æœ¬æ•°é‡</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    &quot;properties&quot;: &#123;</span><br><span class="line">      &quot;title&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;text&quot;,       # å¯åˆ†è¯ï¼Œç”¨äºå…¨æ–‡æ£€ç´¢</span><br><span class="line">        &quot;analyzer&quot;: &quot;ik_max_word&quot;  # ä¸­æ–‡åˆ†è¯å™¨</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;category&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;keyword&quot;     # ä¸åˆ†è¯ï¼Œç”¨äºç²¾ç¡®åŒ¹é…</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;price&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;double&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;create_time&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;date&quot;,</span><br><span class="line">        &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2åˆ é™¤ç´¢å¼•"><a class="markdownIt-Anchor" href="#2åˆ é™¤ç´¢å¼•"></a> ï¼ˆ2ï¼‰åˆ é™¤ç´¢å¼•</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DELETE /&lt;index&gt;  # åˆ é™¤å•ä¸ªç´¢å¼•</span><br><span class="line">DELETE /&lt;index1&gt;,&lt;index2&gt;  # åˆ é™¤å¤šä¸ªç´¢å¼•</span><br><span class="line">DELETE /*  # åˆ é™¤æ‰€æœ‰ç´¢å¼•ï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰</span><br></pre></td></tr></table></figure><h5 id="3æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯"><a class="markdownIt-Anchor" href="#3æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯"></a> ï¼ˆ3ï¼‰æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯</h5><ul><li>æŸ¥çœ‹ç´¢å¼•è®¾ç½®ï¼š<code>GET /&lt;index&gt;/_settings</code></li><li>æŸ¥çœ‹ç´¢å¼• Mappingï¼š<code>GET /&lt;index&gt;/_mapping</code></li><li>æŸ¥çœ‹ç´¢å¼•ç»Ÿè®¡ä¿¡æ¯ï¼š<code>GET /&lt;index&gt;/_stats</code></li></ul><h3 id="å››-æŸ¥è¯¢ä¸åˆ†æ"><a class="markdownIt-Anchor" href="#å››-æŸ¥è¯¢ä¸åˆ†æ"></a> å››ã€æŸ¥è¯¢ä¸åˆ†æ</h3><p>æŸ¥è¯¢æ˜¯ ES çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ”¯æŒå…¨æ–‡æ£€ç´¢ã€ç²¾ç¡®åŒ¹é…ã€èšåˆåˆ†æç­‰å¤æ‚åœºæ™¯ï¼ŒæŸ¥è¯¢è¯­æ³•é€šè¿‡ <code>Query DSL</code>ï¼ˆDomain Specific Languageï¼‰å®šä¹‰ã€‚</p><h4 id="1-æŸ¥è¯¢ç±»å‹åˆ†ç±»"><a class="markdownIt-Anchor" href="#1-æŸ¥è¯¢ç±»å‹åˆ†ç±»"></a> 1. æŸ¥è¯¢ç±»å‹åˆ†ç±»</h4><p>ES çš„æŸ¥è¯¢åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>ä»£è¡¨æŸ¥è¯¢</th></tr></thead><tbody><tr><td>å¶å­æŸ¥è¯¢ï¼ˆLeaf Queriesï¼‰</td><td>ç›´æ¥æŸ¥è¯¢å­—æ®µå€¼ï¼Œå¯å•ç‹¬ä½¿ç”¨</td><td>åŒ¹é…æŸ¥è¯¢ï¼ˆmatchï¼‰ã€ç²¾ç¡®åŒ¹é…ï¼ˆtermï¼‰ã€èŒƒå›´æŸ¥è¯¢ï¼ˆrangeï¼‰</td></tr><tr><td>å¤åˆæŸ¥è¯¢ï¼ˆCompound Queriesï¼‰</td><td>ç»„åˆå¤šä¸ªå¶å­æŸ¥è¯¢æˆ–å…¶ä»–å¤åˆæŸ¥è¯¢</td><td>å¸ƒå°”æŸ¥è¯¢ï¼ˆboolï¼‰ã€åµŒå¥—æŸ¥è¯¢ï¼ˆnestedï¼‰ã€å‡½æ•°è¯„åˆ†æŸ¥è¯¢ï¼ˆfunction_scoreï¼‰</td></tr></tbody></table><h4 id="2-å¸¸ç”¨æ ¸å¿ƒæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#2-å¸¸ç”¨æ ¸å¿ƒæŸ¥è¯¢"></a> 2. å¸¸ç”¨æ ¸å¿ƒæŸ¥è¯¢</h4><h5 id="1åŒ¹é…æŸ¥è¯¢match"><a class="markdownIt-Anchor" href="#1åŒ¹é…æŸ¥è¯¢match"></a> ï¼ˆ1ï¼‰åŒ¹é…æŸ¥è¯¢ï¼ˆmatchï¼‰</h5><ul><li>ç”¨äº <code>text</code> ç±»å‹å­—æ®µçš„å…¨æ–‡æ£€ç´¢ï¼Œä¼šå¯¹æŸ¥è¯¢è¯åˆ†è¯ååŒ¹é…ã€‚</li><li>ç¤ºä¾‹ï¼šæŸ¥è¯¢â€œæ‰‹æœºâ€ç›¸å…³çš„å•†å“ï¼ˆâ€œæ™ºèƒ½æ‰‹æœºâ€â€œæ‰‹æœºå£³â€å‡ä¼šåŒ¹é…ï¼‰ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /products/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;match&quot;: &#123;</span><br><span class="line">      &quot;title&quot;: &quot;æ‰‹æœº&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2ç²¾ç¡®åŒ¹é…term"><a class="markdownIt-Anchor" href="#2ç²¾ç¡®åŒ¹é…term"></a> ï¼ˆ2ï¼‰ç²¾ç¡®åŒ¹é…ï¼ˆtermï¼‰</h5><ul><li>ç”¨äº <code>keyword</code> æˆ–æ•°å€¼ç±»å‹å­—æ®µçš„ç²¾ç¡®åŒ¹é…ï¼Œä¸å¯¹æŸ¥è¯¢è¯åˆ†è¯ã€‚</li><li>ç¤ºä¾‹ï¼šæŸ¥è¯¢åˆ†ç±»ä¸ºâ€œæ‰‹æœºâ€çš„å•†å“ï¼ˆä»…â€œæ‰‹æœºâ€åˆ†ç±»åŒ¹é…ï¼Œâ€œæ™ºèƒ½æ‰‹æœºâ€ä¸åŒ¹é…ï¼‰ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /products/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;term&quot;: &#123;</span><br><span class="line">      &quot;category&quot;: &quot;æ‰‹æœº&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3èŒƒå›´æŸ¥è¯¢range"><a class="markdownIt-Anchor" href="#3èŒƒå›´æŸ¥è¯¢range"></a> ï¼ˆ3ï¼‰èŒƒå›´æŸ¥è¯¢ï¼ˆrangeï¼‰</h5><ul><li>ç”¨äºæ•°å€¼ã€æ—¥æœŸç±»å‹å­—æ®µçš„èŒƒå›´ç­›é€‰ï¼Œæ”¯æŒ <code>gt</code>ï¼ˆ&gt;ï¼‰ã€<code>gte</code>ï¼ˆâ‰¥ï¼‰ã€<code>lt</code>ï¼ˆ&lt;ï¼‰ã€<code>lte</code>ï¼ˆâ‰¤ï¼‰ã€‚</li><li>ç¤ºä¾‹ï¼šæŸ¥è¯¢ä»·æ ¼ 1000-3000 å…ƒçš„å•†å“ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET /products/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;range&quot;: &#123;</span><br><span class="line">      &quot;price&quot;: &#123;</span><br><span class="line">        &quot;gte&quot;: 1000,</span><br><span class="line">        &quot;lte&quot;: 3000</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4å¸ƒå°”æŸ¥è¯¢bool"><a class="markdownIt-Anchor" href="#4å¸ƒå°”æŸ¥è¯¢bool"></a> ï¼ˆ4ï¼‰å¸ƒå°”æŸ¥è¯¢ï¼ˆboolï¼‰</h5><ul><li>ç»„åˆå¤šä¸ªå­æŸ¥è¯¢ï¼Œé€šè¿‡ <code>must</code>ï¼ˆå¿…é¡»åŒ¹é…ï¼‰ã€<code>should</code>ï¼ˆå¯é€‰åŒ¹é…ï¼ŒåŠ åˆ†ï¼‰ã€<code>must_not</code>ï¼ˆå¿…é¡»ä¸åŒ¹é…ï¼‰ã€<code>filter</code>ï¼ˆè¿‡æ»¤ï¼Œä¸å½±å“è¯„åˆ†ï¼‰æ§åˆ¶é€»è¾‘ã€‚</li><li>ç¤ºä¾‹ï¼šæŸ¥è¯¢åˆ†ç±»ä¸ºâ€œæ‰‹æœºâ€ã€ä»·æ ¼ 1000-3000 å…ƒã€æ ‡é¢˜å«â€œåä¸ºâ€çš„å•†å“ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GET /products/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;must&quot;: [</span><br><span class="line">        &#123;&quot;term&quot;: &#123;&quot;category&quot;: &quot;æ‰‹æœº&quot;&#125;&#125;,</span><br><span class="line">        &#123;&quot;match&quot;: &#123;&quot;title&quot;: &quot;åä¸º&quot;&#125;&#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;filter&quot;: [</span><br><span class="line">        &#123;&quot;range&quot;: &#123;&quot;price&quot;: &#123;&quot;gte&quot;: 1000, &quot;lte&quot;: 3000&#125;&#125;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-èšåˆåˆ†æaggregation"><a class="markdownIt-Anchor" href="#3-èšåˆåˆ†æaggregation"></a> 3. èšåˆåˆ†æï¼ˆAggregationï¼‰</h4><p>èšåˆç”¨äºå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç»Ÿè®¡åˆ†æï¼ˆå¦‚åˆ†ç»„ã€æ±‚å’Œã€æ’åºï¼‰ï¼Œç±»ä¼¼ SQL çš„ <code>GROUP BY</code> + èšåˆå‡½æ•°ï¼Œåˆ†ä¸º<strong>æ¡¶èšåˆï¼ˆBucketï¼‰</strong> å’Œ<strong>æŒ‡æ ‡èšåˆï¼ˆMetricï¼‰</strong>ã€‚</p><h5 id="1æ¡¶èšåˆbucket"><a class="markdownIt-Anchor" href="#1æ¡¶èšåˆbucket"></a> ï¼ˆ1ï¼‰æ¡¶èšåˆï¼ˆBucketï¼‰</h5><ul><li>æŒ‰æ¡ä»¶å¯¹æ•°æ®åˆ†ç»„ï¼Œæ¯ä¸ªç»„ç§°ä¸ºä¸€ä¸ªâ€œæ¡¶â€ï¼Œå¦‚æŒ‰åˆ†ç±»åˆ†ç»„ã€æŒ‰ä»·æ ¼åŒºé—´åˆ†ç»„ã€‚</li><li>ç¤ºä¾‹ï¼šæŒ‰â€œcategoryâ€å­—æ®µåˆ†ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªåˆ†ç±»çš„å•†å“æ•°é‡ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET /products/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;size&quot;: 0,  # ä¸è¿”å›åŸå§‹æ–‡æ¡£ï¼Œä»…è¿”å›èšåˆç»“æœ</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;category_count&quot;: &#123;  # èšåˆåç§°ï¼ˆè‡ªå®šä¹‰ï¼‰</span><br><span class="line">      &quot;terms&quot;: &#123;  # æ¡¶èšåˆç±»å‹ï¼šæŒ‰å­—æ®µå€¼åˆ†ç»„</span><br><span class="line">        &quot;field&quot;: &quot;category&quot;,</span><br><span class="line">        &quot;size&quot;: 10  # è¿”å›å‰ 10 ä¸ªåˆ†ç»„</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2æŒ‡æ ‡èšåˆmetric"><a class="markdownIt-Anchor" href="#2æŒ‡æ ‡èšåˆmetric"></a> ï¼ˆ2ï¼‰æŒ‡æ ‡èšåˆï¼ˆMetricï¼‰</h5><ul><li>å¯¹æ¡¶å†…æ•°æ®è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œå¦‚æ±‚å’Œã€å¹³å‡å€¼ã€æœ€å¤§å€¼ç­‰ã€‚</li><li>ç¤ºä¾‹ï¼šæŒ‰åˆ†ç±»åˆ†ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªåˆ†ç±»çš„å•†å“å¹³å‡ä»·æ ¼ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GET /products/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;size&quot;: 0,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;category_avg_price&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;&quot;field&quot;: &quot;category&quot;&#125;,</span><br><span class="line">      &quot;aggs&quot;: &#123;  # åµŒå¥—æŒ‡æ ‡èšåˆ</span><br><span class="line">        &quot;avg_price&quot;: &#123;</span><br><span class="line">          &quot;avg&quot;: &#123;&quot;field&quot;: &quot;price&quot;&#125;  # æŒ‡æ ‡èšåˆç±»å‹ï¼šæ±‚å¹³å‡å€¼</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº”-åˆ†è¯å™¨analyzer"><a class="markdownIt-Anchor" href="#äº”-åˆ†è¯å™¨analyzer"></a> äº”ã€åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰</h3><p>åˆ†è¯æ˜¯å…¨æ–‡æ£€ç´¢çš„æ ¸å¿ƒæ­¥éª¤ï¼Œå°†æ–‡æœ¬æ‹†åˆ†ä¸ºå¯ç´¢å¼•çš„â€œè¯æ¡ï¼ˆTermï¼‰â€ï¼ŒES çš„åˆ†è¯èƒ½åŠ›ä¾èµ–äºåˆ†è¯å™¨ã€‚</p><h4 id="1-åˆ†è¯å™¨ç»„æˆ"><a class="markdownIt-Anchor" href="#1-åˆ†è¯å™¨ç»„æˆ"></a> 1. åˆ†è¯å™¨ç»„æˆ</h4><p>ä¸€ä¸ªå®Œæ•´çš„åˆ†è¯å™¨ç”± 3 éƒ¨åˆ†ç»„æˆï¼š</p><ol><li><strong>Character Filterï¼ˆå­—ç¬¦è¿‡æ»¤å™¨ï¼‰</strong>ï¼šé¢„å¤„ç†æ–‡æœ¬ï¼ˆå¦‚å»é™¤ HTML æ ‡ç­¾ã€æ›¿æ¢ç‰¹æ®Šå­—ç¬¦ï¼‰ï¼Œå¯é€‰ã€‚</li><li><strong>Tokenizerï¼ˆåˆ†è¯å™¨ï¼‰</strong>ï¼šå°†æ–‡æœ¬æ‹†åˆ†ä¸ºè¯æ¡ï¼ˆå¦‚æŒ‰ç©ºæ ¼ã€æ ‡ç‚¹æ‹†åˆ†ï¼‰ï¼Œå¿…é¡»ã€‚</li><li><strong>Token Filterï¼ˆè¯æ¡è¿‡æ»¤å™¨ï¼‰</strong>ï¼šå¤„ç†è¯æ¡ï¼ˆå¦‚å°å†™è½¬æ¢ã€åœç”¨è¯ç§»é™¤ã€åŒä¹‰è¯æ›¿æ¢ï¼‰ï¼Œå¯é€‰ã€‚</li></ol><h4 id="2-å†…ç½®åˆ†è¯å™¨"><a class="markdownIt-Anchor" href="#2-å†…ç½®åˆ†è¯å™¨"></a> 2. å†…ç½®åˆ†è¯å™¨</h4><ul><li><strong>Standard Analyzer</strong>ï¼šé»˜è®¤åˆ†è¯å™¨ï¼ŒæŒ‰ Unicode æ–‡æœ¬åˆ†å‰²ï¼Œå°å†™è½¬æ¢ï¼Œç§»é™¤æ ‡ç‚¹ã€‚</li><li><strong>Simple Analyzer</strong>ï¼šæŒ‰éå­—æ¯å­—ç¬¦åˆ†å‰²ï¼Œå°å†™è½¬æ¢ã€‚</li><li><strong>Whitespace Analyzer</strong>ï¼šä»…æŒ‰ç©ºæ ¼åˆ†å‰²ï¼Œä¸åšå…¶ä»–å¤„ç†ã€‚</li><li><strong>Keyword Analyzer</strong>ï¼šä¸åˆ†è¯ï¼Œå°†æ•´ä¸ªæ–‡æœ¬ä½œä¸ºä¸€ä¸ªè¯æ¡ã€‚</li></ul><h4 id="3-ä¸­æ–‡åˆ†è¯å™¨"><a class="markdownIt-Anchor" href="#3-ä¸­æ–‡åˆ†è¯å™¨"></a> 3. ä¸­æ–‡åˆ†è¯å™¨</h4><p>å†…ç½®åˆ†è¯å™¨å¯¹ä¸­æ–‡æ”¯æŒå·®ï¼ˆå¦‚å°†â€œæˆ‘çˆ±ä¸­å›½â€æ‹†åˆ†ä¸ºâ€œæˆ‘â€â€œçˆ±â€â€œä¸­â€â€œå›½â€ï¼‰ï¼Œéœ€å¼•å…¥ç¬¬ä¸‰æ–¹åˆ†è¯å™¨ï¼š</p><ul><li><strong>IK Analyzer</strong>ï¼šæœ€å¸¸ç”¨çš„ä¸­æ–‡åˆ†è¯å™¨ï¼Œæ”¯æŒè‡ªå®šä¹‰è¯å…¸ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼š<ul><li><code>ik_max_word</code>ï¼šæœ€å¤§ç²’åº¦åˆ†è¯ï¼ˆå¦‚â€œä¸­åäººæ°‘å…±å’Œå›½â€â†’â€œä¸­åäººæ°‘å…±å’Œå›½â€â€œä¸­åäººæ°‘â€â€œä¸­åâ€â€œä¸­å›½â€ç­‰ï¼‰ã€‚</li><li><code>ik_smart</code>ï¼š</li></ul></li></ul>]]></content>
    
    
    <summary type="html">ElasticsearchçŸ¥è¯†ç‚¹è¯¦ç»†æ€»ç»“</summary>
    
    
    
    <category term="æ•°æ®åº“" scheme="http://www.formeasy.cc/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
    <category term="Elasticsearch" scheme="http://www.formeasy.cc/tags/Elasticsearch/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘ä¸­å¸¸ç”¨ç´ ææ ¼å¼å®Œæ•´æ¸…å•ï¼ˆé€‚ç”¨äºå‰åç«¯ã€å…¨æ ˆåŠå„é¢†åŸŸç ”å‘å·¥ç¨‹å¸ˆï¼‰</title>
    <link href="http://www.formeasy.cc/2025/10/03/Other/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B4%A0%E6%9D%90%E6%A0%BC%E5%BC%8F%E5%AE%8C%E6%95%B4%E6%B8%85%E5%8D%95%EF%BC%88%E9%80%82%E7%94%A8%E4%BA%8E%E5%89%8D%E5%90%8E%E7%AB%AF%E3%80%81%E5%85%A8%E6%A0%88%E5%8F%8A%E5%90%84%E9%A2%86%E5%9F%9F%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89/"/>
    <id>http://www.formeasy.cc/2025/10/03/Other/%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B4%A0%E6%9D%90%E6%A0%BC%E5%BC%8F%E5%AE%8C%E6%95%B4%E6%B8%85%E5%8D%95%EF%BC%88%E9%80%82%E7%94%A8%E4%BA%8E%E5%89%8D%E5%90%8E%E7%AB%AF%E3%80%81%E5%85%A8%E6%A0%88%E5%8F%8A%E5%90%84%E9%A2%86%E5%9F%9F%E7%A0%94%E5%8F%91%E5%B7%A5%E7%A8%8B%E5%B8%88%EF%BC%89/</id>
    <published>2025-10-03T13:29:38.000Z</published>
    <updated>2025-10-03T13:37:49.989Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼€å‘ä¸­å¸¸ç”¨ç´ ææ ¼å¼å®Œæ•´æ¸…å•é€‚ç”¨äºå‰åç«¯-å…¨æ ˆåŠå„é¢†åŸŸç ”å‘å·¥ç¨‹å¸ˆ"><a class="markdownIt-Anchor" href="#å¼€å‘ä¸­å¸¸ç”¨ç´ ææ ¼å¼å®Œæ•´æ¸…å•é€‚ç”¨äºå‰åç«¯-å…¨æ ˆåŠå„é¢†åŸŸç ”å‘å·¥ç¨‹å¸ˆ"></a> å¼€å‘ä¸­å¸¸ç”¨ç´ ææ ¼å¼å®Œæ•´æ¸…å•ï¼ˆé€‚ç”¨äºå‰åç«¯ã€å…¨æ ˆåŠå„é¢†åŸŸç ”å‘å·¥ç¨‹å¸ˆï¼‰</h2><p>åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ— è®ºæ˜¯æ„å»º Web åº”ç”¨ã€ç§»åŠ¨ Appã€æ¡Œé¢ç¨‹åºè¿˜æ˜¯ AI ç³»ç»Ÿï¼Œå¼€å‘è€…éƒ½ä¼šæ¥è§¦åˆ°å„ç§ç±»å‹çš„<strong>æ•°å­—ç´ æ</strong>ã€‚è¿™äº›ç´ æä¸ä»…æ˜¯äº§å“åŠŸèƒ½çš„ç»„æˆéƒ¨åˆ†ï¼Œä¹Ÿç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æœ¬æ–‡æ•´ç†äº†ä¸€ä»½<strong>å…¨é¢ã€åˆ†ç±»æ¸…æ™°ã€è·¨é¢†åŸŸ</strong>çš„å¼€å‘å¸¸ç”¨ç´ ææ ¼å¼æ¸…å•ï¼Œé€‚ç”¨äºï¼š</p><ul><li>âœ… å‰ç«¯å·¥ç¨‹å¸ˆ</li><li>âœ… åç«¯å·¥ç¨‹å¸ˆ</li><li>âœ… å…¨æ ˆå·¥ç¨‹å¸ˆ</li><li>âœ… ç§»åŠ¨å¼€å‘å·¥ç¨‹å¸ˆï¼ˆiOS/Androidï¼‰</li><li>âœ… æ•°æ®ç§‘å­¦å®¶ / AI å·¥ç¨‹å¸ˆ</li><li>âœ… DevOps å·¥ç¨‹å¸ˆ</li><li>âœ… UI/UX è®¾è®¡å¸ˆä¸å¼€å‘è€…åä½œåœºæ™¯</li></ul><hr /><h3 id="ä¸€-å›¾åƒç´ æimages"><a class="markdownIt-Anchor" href="#ä¸€-å›¾åƒç´ æimages"></a> ğŸ“ ä¸€ã€å›¾åƒç´ æï¼ˆImagesï¼‰</h3><table><thead><tr><th>æ ¼å¼</th><th>å…¨ç§°</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>å¼€å‘è€…ç”¨é€”</th></tr></thead><tbody><tr><td><strong>JPEG / JPG</strong></td><td>Joint Photographic Experts Group</td><td>æœ‰æŸå‹ç¼©ï¼Œæ–‡ä»¶å°ï¼Œæ”¯æŒçœŸå½©è‰²</td><td>ç…§ç‰‡ã€èƒŒæ™¯å›¾ã€ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡</td><td>å‰ç«¯å±•ç¤ºã€åç«¯å­˜å‚¨ã€CDN åˆ†å‘</td></tr><tr><td><strong>PNG</strong></td><td>Portable Network Graphics</td><td>æ— æŸå‹ç¼©ï¼Œæ”¯æŒé€æ˜é€šé“ï¼ˆAlphaï¼‰</td><td>Logoã€å›¾æ ‡ã€éœ€è¦é€æ˜èƒŒæ™¯çš„å›¾åƒ</td><td>å‰ç«¯ UI å…ƒç´ ã€SVG æ›¿ä»£æ–¹æ¡ˆ</td></tr><tr><td><strong>GIF</strong></td><td>Graphics Interchange Format</td><td>æ”¯æŒåŠ¨ç”»ï¼Œ256 è‰²ï¼Œæ”¯æŒé€æ˜</td><td>ç®€å•åŠ¨ç”»ã€loading æ•ˆæœ</td><td>å‰ç«¯åŠ¨æ•ˆã€æç¤ºåŠ¨ç”»</td></tr><tr><td><strong>WebP</strong></td><td>Web Picture Format (Google)</td><td>é«˜å‹ç¼©ç‡ï¼Œæ”¯æŒæœ‰æŸ/æ— æŸ + é€æ˜ + åŠ¨ç”»</td><td>Web å›¾ç‰‡ä¼˜åŒ–ï¼Œæ›¿ä»£ JPEG/PNG</td><td>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ŒèŠ‚çœå¸¦å®½</td></tr><tr><td><strong>AVIF</strong></td><td>AV1 Image File Format</td><td>æ–°ä¸€ä»£é«˜æ•ˆå‹ç¼©æ ¼å¼ï¼Œä¼˜äº WebP</td><td>é«˜è´¨é‡å›¾ç‰‡ï¼Œæœªæ¥ Web æ ‡å‡†</td><td>å‰ç«¯å®éªŒæ€§æ”¯æŒï¼Œæ¸è¿›å¢å¼º</td></tr><tr><td><strong>SVG</strong></td><td>Scalable Vector Graphics</td><td>çŸ¢é‡å›¾ï¼ŒXML æ ¼å¼ï¼Œæ— é™ç¼©æ”¾ä¸å¤±çœŸ</td><td>å›¾æ ‡ã€Logoã€å›¾è¡¨ã€UI ç»„ä»¶</td><td>å‰ç«¯å†…è”ä½¿ç”¨ã€åŠ¨æ€ä¿®æ”¹æ ·å¼</td></tr><tr><td><strong>ICO</strong></td><td>Icon Format</td><td>Windows å›¾æ ‡æ ¼å¼ï¼Œæ”¯æŒå¤šå°ºå¯¸</td><td>ç½‘ç«™ faviconã€æ¡Œé¢åº”ç”¨å›¾æ ‡</td><td>å‰ç«¯ <code>&lt;link rel=&quot;icon&quot;&gt;</code></td></tr><tr><td><strong>BMP</strong></td><td>Bitmap</td><td>æ— å‹ç¼©ï¼Œæ–‡ä»¶å¤§</td><td>åŸºæœ¬å›¾åƒå¤„ç†æ•™å­¦</td><td>ä¸€èˆ¬ä¸ç”¨äºç”Ÿäº§ç¯å¢ƒ</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å¼€å‘è€…å»ºè®®</strong>ï¼šä¼˜å…ˆä½¿ç”¨ WebP + SVGï¼Œæä¾› JPEG/PNG å›é€€ã€‚</p></blockquote><hr /><h3 id="äºŒ-éŸ³é¢‘ç´ æaudio"><a class="markdownIt-Anchor" href="#äºŒ-éŸ³é¢‘ç´ æaudio"></a> ğŸµ äºŒã€éŸ³é¢‘ç´ æï¼ˆAudioï¼‰</h3><table><thead><tr><th>æ ¼å¼</th><th>å…¨ç§°</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>å¼€å‘è€…ç”¨é€”</th></tr></thead><tbody><tr><td><strong>MP3</strong></td><td>MPEG-1 Audio Layer III</td><td>æœ‰æŸå‹ç¼©ï¼Œå…¼å®¹æ€§æå¹¿</td><td>èƒŒæ™¯éŸ³ä¹ã€è¯­éŸ³æ’­æ”¾</td><td>å‰ç«¯ <code>&lt;audio&gt;</code>ã€App å†…åµŒæ’­æ”¾</td></tr><tr><td><strong>WAV</strong></td><td>Waveform Audio File Format</td><td>æ— æŸï¼Œæ–‡ä»¶å¤§ï¼ŒPCM ç¼–ç </td><td>ä¸“ä¸šéŸ³é¢‘å¤„ç†ã€å½•éŸ³</td><td>åç«¯è¯­éŸ³è¯†åˆ«è¾“å…¥</td></tr><tr><td><strong>OGG</strong></td><td>Ogg Vorbis</td><td>å¼€æºæœ‰æŸå‹ç¼©ï¼ŒWeb å‹å¥½</td><td>Web æ¸¸æˆéŸ³æ•ˆã€HTML5 éŸ³é¢‘</td><td>å‰ç«¯æ›¿ä»£ MP3ï¼ˆå…ç‰ˆæƒï¼‰</td></tr><tr><td><strong>AAC</strong></td><td>Advanced Audio Coding</td><td>é«˜æ•ˆå‹ç¼©ï¼ŒéŸ³è´¨å¥½</td><td>iOS ç³»ç»Ÿã€è§†é¢‘ä¼´éŸ³</td><td>ç§»åŠ¨ Appã€æµåª’ä½“</td></tr><tr><td><strong>FLAC</strong></td><td>Free Lossless Audio Codec</td><td>æ— æŸå‹ç¼©ï¼Œå¼€æº</td><td>éŸ³ä¹å­˜æ¡£ã€é«˜ä¿çœŸæ’­æ”¾</td><td>éŸ³ä¹ç±» Appã€ä¸“ä¸šéŸ³é¢‘å¹³å°</td></tr><tr><td><strong>M4A</strong></td><td>MPEG-4 Audio</td><td>åŸºäº AACï¼Œè‹¹æœç”Ÿæ€å¸¸ç”¨</td><td>iTunesã€æ’­å®¢</td><td>iOS App éŸ³é¢‘èµ„æº</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å¼€å‘è€…å»ºè®®</strong>ï¼šWeb ä½¿ç”¨ <code>MP3 + OGG</code> å¤šæ ¼å¼æ”¯æŒï¼›AI è¯­éŸ³å¤„ç†ä¼˜å…ˆç”¨ <code>WAV</code>ã€‚</p></blockquote><hr /><h3 id="ä¸‰-è§†é¢‘ç´ ævideo"><a class="markdownIt-Anchor" href="#ä¸‰-è§†é¢‘ç´ ævideo"></a> ğŸ¥ ä¸‰ã€è§†é¢‘ç´ æï¼ˆVideoï¼‰</h3><table><thead><tr><th>æ ¼å¼</th><th>å…¨ç§°</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>å¼€å‘è€…ç”¨é€”</th></tr></thead><tbody><tr><td><strong>MP4</strong></td><td>MPEG-4 Part 14</td><td>H.264/H.265 ç¼–ç ï¼Œå…¼å®¹æ€§å¥½</td><td>Web è§†é¢‘ã€App æ’­æ”¾</td><td>å‰ç«¯ <code>&lt;video&gt;</code>ã€ç§»åŠ¨ç«¯æ’­æ”¾</td></tr><tr><td><strong>WebM</strong></td><td>Web Media Format (Google)</td><td>VP8/VP9 ç¼–ç ï¼Œå¼€æºå…è´¹</td><td>Web è§†é¢‘ï¼Œæ›¿ä»£ MP4</td><td>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œå…ç‰ˆæƒ</td></tr><tr><td><strong>AVI</strong></td><td>Audio Video Interleave</td><td>å¾®è½¯æ ¼å¼ï¼Œæ–‡ä»¶å¤§</td><td>æ—§ç³»ç»Ÿå…¼å®¹</td><td>ä¸€èˆ¬ä¸ç”¨äºæ–°é¡¹ç›®</td></tr><tr><td><strong>MOV</strong></td><td>QuickTime Movie</td><td>è‹¹æœæ ¼å¼ï¼Œé«˜è´¨é‡</td><td>iOS å½•åˆ¶ã€ä¸“ä¸šå‰ªè¾‘</td><td>iOS App è§†é¢‘ä¸Šä¼ å¤„ç†</td></tr><tr><td><strong>MKV</strong></td><td>Matroska Video</td><td>æ”¯æŒå¤šéŸ³è½¨ã€å­—å¹•ï¼Œå°è£…èƒ½åŠ›å¼º</td><td>è§†é¢‘å­˜æ¡£ã€é«˜æ¸…èµ„æº</td><td>åç«¯è½¬ç è¾“å…¥</td></tr><tr><td><strong>FLV</strong></td><td>Flash Video</td><td>æ—§å¼æµåª’ä½“æ ¼å¼</td><td>é€æ­¥æ·˜æ±°</td><td>ä»…ç»´æŠ¤è€ç³»ç»Ÿ</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å¼€å‘è€…å»ºè®®</strong>ï¼šWeb æ¨è <code>MP4 (H.264) + WebM</code> åŒæ ¼å¼ï¼›ä½¿ç”¨ FFmpeg è¿›è¡Œè½¬ç ã€‚</p></blockquote><hr /><h3 id="å››-æ–‡æ¡£ä¸æ•°æ®æ ¼å¼documents-data"><a class="markdownIt-Anchor" href="#å››-æ–‡æ¡£ä¸æ•°æ®æ ¼å¼documents-data"></a> ğŸ“„ å››ã€æ–‡æ¡£ä¸æ•°æ®æ ¼å¼ï¼ˆDocuments &amp; Dataï¼‰</h3><table><thead><tr><th>æ ¼å¼</th><th>ç±»å‹</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>å¼€å‘è€…ç”¨é€”</th></tr></thead><tbody><tr><td><strong>JSON</strong></td><td>æ•°æ®äº¤æ¢</td><td>è½»é‡ã€æ˜“è¯»ã€JavaScript åŸç”Ÿæ”¯æŒ</td><td>API è¿”å›ã€é…ç½®æ–‡ä»¶ã€å‰åç«¯é€šä¿¡</td><td>å…¨æ ˆé€šç”¨ï¼Œå¿…ä¼šæ ¼å¼</td></tr><tr><td><strong>XML</strong></td><td>æ ‡è®°è¯­è¨€</td><td>ç»“æ„åŒ–å¼ºï¼Œæ”¯æŒ Schema</td><td>SOAPã€RSSã€Android å¸ƒå±€</td><td>åç«¯æ¥å£ã€é…ç½®æ–‡ä»¶</td></tr><tr><td><strong>YAML</strong></td><td>é…ç½®æ–‡ä»¶</td><td>ç¼©è¿›è¯­æ³•ï¼Œäººç±»å‹å¥½</td><td>Docker Composeã€K8s é…ç½®ã€CI/CD</td><td>DevOpsã€å¾®æœåŠ¡é…ç½®</td></tr><tr><td><strong>CSV</strong></td><td>æ–‡æœ¬æ•°æ®</td><td>ç®€å•è¡¨æ ¼ï¼ŒExcel å‹å¥½</td><td>æ•°æ®å¯¼å…¥å¯¼å‡ºã€æ‰¹é‡å¤„ç†</td><td>åç«¯æ•°æ®å¤„ç†ã€BI åˆ†æ</td></tr><tr><td><strong>PDF</strong></td><td>æ–‡æ¡£</td><td>è·¨å¹³å°ã€æ’ç‰ˆå›ºå®š</td><td>åˆåŒã€æŠ¥å‘Šã€ç”µå­ä¹¦</td><td>åç«¯ç”Ÿæˆï¼ˆå¦‚ Puppeteerï¼‰ã€å‰ç«¯é¢„è§ˆ</td></tr><tr><td><strong>Markdown (.md)</strong></td><td>è½»é‡æ ‡è®°</td><td>æ˜“å†™æ˜“è¯»ï¼Œæ”¯æŒ HTML</td><td>æŠ€æœ¯æ–‡æ¡£ã€READMEã€åšå®¢</td><td>å‰ç«¯æ¸²æŸ“ï¼ˆå¦‚ VuePressï¼‰</td></tr><tr><td><strong>Excel (.xlsx/.xls)</strong></td><td>è¡¨æ ¼</td><td>æ”¯æŒå…¬å¼ã€æ ·å¼</td><td>è´¢åŠ¡ã€æŠ¥è¡¨ã€è¿è¥æ•°æ®</td><td>åç«¯è¯»å–ï¼ˆå¦‚ Apache POIï¼‰</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å¼€å‘è€…å»ºè®®</strong>ï¼šAPI ä¼˜å…ˆç”¨ JSONï¼›é…ç½®ç”¨ YAMLï¼›æ–‡æ¡£ç”¨ Markdownã€‚</p></blockquote><hr /><h3 id="äº”-uiux-ä¸è®¾è®¡èµ„æºdesigner-handoff"><a class="markdownIt-Anchor" href="#äº”-uiux-ä¸è®¾è®¡èµ„æºdesigner-handoff"></a> ğŸ¨ äº”ã€UI/UX ä¸è®¾è®¡èµ„æºï¼ˆDesigner Handoffï¼‰</h3><table><thead><tr><th>æ ¼å¼</th><th>å·¥å…·</th><th>è¯´æ˜</th><th>å¼€å‘è€…ç”¨é€”</th></tr></thead><tbody><tr><td><strong>Figma (.fig)</strong></td><td>Figma</td><td>å®æ—¶åä½œè®¾è®¡å·¥å…·</td><td>å‰ç«¯æå–å°ºå¯¸ã€é¢œè‰²ã€å›¾æ ‡</td></tr><tr><td><strong>Sketch (.sketch)</strong></td><td>Sketch</td><td>macOS åŸç”Ÿè®¾è®¡å·¥å…·</td><td>å¯¼å‡ºåˆ‡å›¾ã€æ ·å¼å˜é‡</td></tr><tr><td><strong>Adobe XD (.xd)</strong></td><td>Adobe</td><td>UI/UX è®¾è®¡</td><td>è·å–è®¾è®¡è§„èŒƒ</td></tr><tr><td><strong>PSD</strong></td><td>Photoshop</td><td>å›¾åƒç¼–è¾‘</td><td>æ—§é¡¹ç›®åˆ‡å›¾æå–</td></tr><tr><td><strong>XCF</strong></td><td>GIMP</td><td>å¼€æºå›¾åƒç¼–è¾‘</td><td>å¼€æºé¡¹ç›®èµ„æº</td></tr><tr><td><strong>Lottie (.json)</strong></td><td>Airbnb</td><td>JSON æ ¼å¼çš„åŠ¨ç”»</td><td>å‰ç«¯/ç§»åŠ¨ç«¯åµŒå…¥é«˜æ€§èƒ½åŠ¨ç”»</td></tr><tr><td><strong>Motion Design (After Effects)</strong></td><td>AE</td><td>å¤æ‚åŠ¨ç”»</td><td>å¯¼å‡ºä¸ºè§†é¢‘æˆ– Lottie</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å¼€å‘è€…å»ºè®®</strong>ï¼šä¸è®¾è®¡å¸ˆçº¦å®šä½¿ç”¨ Figma + Lottieï¼Œæå‡åä½œæ•ˆç‡ã€‚</p></blockquote><hr /><h3 id="å…­-ai-ä¸æœºå™¨å­¦ä¹ ç´ ææ ¼å¼"><a class="markdownIt-Anchor" href="#å…­-ai-ä¸æœºå™¨å­¦ä¹ ç´ ææ ¼å¼"></a> ğŸ§  å…­ã€AI ä¸æœºå™¨å­¦ä¹ ç´ ææ ¼å¼</h3><table><thead><tr><th>æ ¼å¼</th><th>ç”¨é€”</th><th>è¯´æ˜</th><th>å¼€å‘è€…ç”¨é€”</th></tr></thead><tbody><tr><td><strong>.h5 / .hdf5</strong></td><td>æ¨¡å‹ä¿å­˜</td><td>Keras/TensorFlow æ¨¡å‹</td><td>åŠ è½½é¢„è®­ç»ƒæ¨¡å‹</td></tr><tr><td><strong>.pb</strong></td><td>Protocol Buffer</td><td>TensorFlow å†»ç»“å›¾</td><td>æ¨¡å‹éƒ¨ç½²</td></tr><tr><td><strong>.onnx</strong></td><td>Open Neural Network Exchange</td><td>è·¨æ¡†æ¶æ¨¡å‹äº¤æ¢</td><td>æ¨¡å‹è½¬æ¢ä¸éƒ¨ç½²</td></tr><tr><td><strong>.pt / .pth</strong></td><td>PyTorch</td><td>PyTorch æ¨¡å‹æƒé‡</td><td>æ·±åº¦å­¦ä¹ è®­ç»ƒä¸æ¨ç†</td></tr><tr><td><strong>.tflite</strong></td><td>TensorFlow Lite</td><td>ç§»åŠ¨ç«¯è½»é‡æ¨¡å‹</td><td>Android/iOS é›†æˆ</td></tr><tr><td><strong>.npy / .npz</strong></td><td>NumPy</td><td>æ•°ç»„æ•°æ®å­˜å‚¨</td><td>æ•°æ®é¢„å¤„ç†ã€ç‰¹å¾ä¿å­˜</td></tr><tr><td><strong>.parquet</strong></td><td>åˆ—å¼å­˜å‚¨</td><td>å¤§æ•°æ®é«˜æ•ˆå­˜å‚¨</td><td>æ•°æ®æ¹–ã€AI è®­ç»ƒæ•°æ®é›†</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å¼€å‘è€…å»ºè®®</strong>ï¼šç”Ÿäº§éƒ¨ç½²ä¼˜å…ˆä½¿ç”¨ ONNX æˆ– TFLite æå‡å…¼å®¹æ€§ã€‚</p></blockquote><hr /><h3 id="ï¸-ä¸ƒ-å¼€å‘ä¸éƒ¨ç½²èµ„æºæ ¼å¼"><a class="markdownIt-Anchor" href="#ï¸-ä¸ƒ-å¼€å‘ä¸éƒ¨ç½²èµ„æºæ ¼å¼"></a> ğŸ› ï¸ ä¸ƒã€å¼€å‘ä¸éƒ¨ç½²èµ„æºæ ¼å¼</h3><table><thead><tr><th>æ ¼å¼</th><th>è¯´æ˜</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><strong>Dockerfile</strong></td><td>å®¹å™¨æ„å»ºè„šæœ¬</td><td>å®šä¹‰é•œåƒæ„å»ºæµç¨‹</td></tr><tr><td><strong>.tar / .tar.gz / .zip</strong></td><td>å‹ç¼©åŒ…</td><td>ä»£ç æ‰“åŒ…ã€èµ„æºåˆ†å‘</td></tr><tr><td><strong>.jar / .war</strong></td><td>Java å½’æ¡£</td><td>Java åº”ç”¨æ‰“åŒ…</td></tr><tr><td><strong>.exe / .msi</strong></td><td>Windows å¯æ‰§è¡Œ</td><td>æ¡Œé¢åº”ç”¨åˆ†å‘</td></tr><tr><td><strong>.dmg / .pkg</strong></td><td>macOS å®‰è£…åŒ…</td><td>Mac åº”ç”¨å‘å¸ƒ</td></tr><tr><td><strong>.apk / .aab</strong></td><td>Android åº”ç”¨</td><td>Android App å‘å¸ƒ</td></tr><tr><td><strong>.ipa</strong></td><td>iOS åº”ç”¨</td><td>iOS App ä¸Šæ¶</td></tr><tr><td><strong>.env</strong></td><td>ç¯å¢ƒå˜é‡</td><td>å­˜å‚¨é…ç½®ï¼ˆæ•°æ®åº“å¯†ç ç­‰ï¼‰</td></tr><tr><td><strong>.pem / .crt / .key</strong></td><td>è¯ä¹¦</td><td>HTTPSã€SSL åŠ å¯†é€šä¿¡</td></tr></tbody></table><hr /><h3 id="å…«-å­—ä½“ç´ æfonts"><a class="markdownIt-Anchor" href="#å…«-å­—ä½“ç´ æfonts"></a> ğŸ§© å…«ã€å­—ä½“ç´ æï¼ˆFontsï¼‰</h3><table><thead><tr><th>æ ¼å¼</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>WOFF / WOFF2</strong></td><td>Web å­—ä½“</td><td>Web ä½¿ç”¨ï¼Œå‹ç¼©ä¼˜åŒ–</td></tr><tr><td><strong>TTF / OTF</strong></td><td>TrueType / OpenType</td><td>æ¡Œé¢åº”ç”¨ã€è®¾è®¡è½¯ä»¶</td></tr><tr><td><strong>EOT</strong></td><td>Embedded OpenType</td><td>æ—§ç‰ˆ IE å…¼å®¹</td></tr><tr><td><strong>SVG Fonts</strong></td><td>çŸ¢é‡å­—ä½“</td><td>æ—§å¼å›¾æ ‡å­—ä½“</td></tr></tbody></table><blockquote><p>ğŸ”§ <strong>å»ºè®®</strong>ï¼šWeb ä½¿ç”¨ <code>WOFF2</code>ï¼Œé€šè¿‡ <code>@font-face</code> å¼•å…¥ã€‚</p></blockquote><hr /><h3 id="ä¹-å¼€å‘è€…ä½¿ç”¨å»ºè®®æ€»ç»“"><a class="markdownIt-Anchor" href="#ä¹-å¼€å‘è€…ä½¿ç”¨å»ºè®®æ€»ç»“"></a> âœ… ä¹ã€å¼€å‘è€…ä½¿ç”¨å»ºè®®æ€»ç»“</h3><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ ¼å¼</th></tr></thead><tbody><tr><td><strong>Web å›¾ç‰‡</strong></td><td>WebP + SVG + JPEG/PNG å›é€€</td></tr><tr><td><strong>Web éŸ³é¢‘</strong></td><td>MP3 + OGG</td></tr><tr><td><strong>Web è§†é¢‘</strong></td><td>MP4 (H.264) + WebM</td></tr><tr><td><strong>API æ•°æ®</strong></td><td>JSON</td></tr><tr><td><strong>é…ç½®æ–‡ä»¶</strong></td><td>YAML</td></tr><tr><td><strong>æ–‡æ¡£åä½œ</strong></td><td>Markdown</td></tr><tr><td><strong>åŠ¨ç”»æ•ˆæœ</strong></td><td>Lottie (.json)</td></tr><tr><td><strong>AI æ¨¡å‹</strong></td><td>ONNX / TFLite / PyTorch (.pt)</td></tr><tr><td><strong>å­—ä½“</strong></td><td>WOFF2</td></tr><tr><td><strong>è®¾è®¡äº¤æ¥</strong></td><td>Figma / Lottie</td></tr></tbody></table><hr /><h3 id="å-é™„å½•è·¨é¢†åŸŸç´ æä½¿ç”¨åœºæ™¯å¯¹ç…§è¡¨"><a class="markdownIt-Anchor" href="#å-é™„å½•è·¨é¢†åŸŸç´ æä½¿ç”¨åœºæ™¯å¯¹ç…§è¡¨"></a> ğŸ“Œ åã€é™„å½•ï¼šè·¨é¢†åŸŸç´ æä½¿ç”¨åœºæ™¯å¯¹ç…§è¡¨</h3><table><thead><tr><th>é¢†åŸŸ</th><th>å¸¸ç”¨ç´ ææ ¼å¼</th></tr></thead><tbody><tr><td><strong>å‰ç«¯å¼€å‘</strong></td><td>WebP, SVG, JSON, CSS, WOFF2, Lottie, Markdown</td></tr><tr><td><strong>åç«¯å¼€å‘</strong></td><td>JSON, XML, CSV, PDF, YAML, .env, .pem</td></tr><tr><td><strong>ç§»åŠ¨å¼€å‘</strong></td><td>PNG, WebP, MP4, AAC, .apk/.ipa, .tflite</td></tr><tr><td><strong>å…¨æ ˆå¼€å‘</strong></td><td>å…¨éƒ¨ä¸Šè¿°æ ¼å¼</td></tr><tr><td><strong>AI/æ•°æ®ç§‘å­¦</strong></td><td>.npy, .parquet, .h5, .onnx, .pt, CSV, JSON</td></tr><tr><td><strong>DevOps</strong></td><td>YAML, .tar.gz, Dockerfile, .pem, .env</td></tr><tr><td><strong>æ¸¸æˆå¼€å‘</strong></td><td>PNG, WebP, MP3, WAV, GLB (3D), JSON (é…ç½®)</td></tr><tr><td><strong>ç‰©è”ç½‘ (IoT)</strong></td><td>JSON, CSV, .bin (å›ºä»¶), .crt (è¯ä¹¦)</td></tr></tbody></table><hr /><h3 id="ç»“è¯­"><a class="markdownIt-Anchor" href="#ç»“è¯­"></a> ğŸ¯ ç»“è¯­</h3><p>æŒæ¡å„ç±»ç´ ææ ¼å¼çš„ç‰¹ç‚¹ä¸é€‚ç”¨åœºæ™¯ï¼Œæ˜¯ç°ä»£ç ”å‘å·¥ç¨‹å¸ˆçš„<strong>åŸºæœ¬åŠŸ</strong>ã€‚æ— è®ºä½ æ˜¯å‰ç«¯ã€åç«¯ã€å…¨æ ˆè¿˜æ˜¯ AI å·¥ç¨‹å¸ˆï¼Œéƒ½éœ€è¦ä¸è¿™äº›â€œæ•°å­—èµ„äº§â€æ‰“äº¤é“ã€‚</p><blockquote><p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p><ul><li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šé€‰æ‹©å‹ç¼©ç‡é«˜ã€åŠ è½½å¿«çš„æ ¼å¼</li><li><strong>å…¼å®¹æ€§ä¿éšœ</strong>ï¼šè€ƒè™‘æµè§ˆå™¨/è®¾å¤‡æ”¯æŒ</li><li><strong>åä½œé«˜æ•ˆ</strong>ï¼šä¸è®¾è®¡å¸ˆã€æ•°æ®ç§‘å­¦å®¶ä½¿ç”¨é€šç”¨æ ¼å¼</li><li><strong>å®‰å…¨åˆè§„</strong>ï¼šé¿å…ä½¿ç”¨æœ‰ç‰ˆæƒé£é™©çš„ç´ æ</li></ul></blockquote><hr /><p>ğŸ“Œ <strong>å»ºè®®æ”¶è—</strong>ï¼šå°†æœ¬æ–‡ä½œä¸ºå›¢é˜Ÿå†…éƒ¨çŸ¥è¯†åº“ï¼Œç»Ÿä¸€ç´ æä½¿ç”¨è§„èŒƒï¼Œæå‡å¼€å‘æ•ˆç‡ä¸äº§å“è´¨é‡ã€‚</p>]]></content>
    
    
    <summary type="html">å¼€å‘ä¸­å¸¸ç”¨ç´ ææ ¼å¼å®Œæ•´æ¸…å•ï¼ˆé€‚ç”¨äºå‰åç«¯ã€å…¨æ ˆåŠå„é¢†åŸŸç ”å‘å·¥ç¨‹å¸ˆï¼‰</summary>
    
    
    
    <category term="èµ„æº" scheme="http://www.formeasy.cc/categories/%E8%B5%84%E6%BA%90/"/>
    
    
    <category term="Other" scheme="http://www.formeasy.cc/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥æµ…å‡º RAGï¼šåŸç†ã€æµç¨‹ä¸ä»£ç å®æˆ˜</title>
    <link href="http://www.formeasy.cc/2025/09/21/ollama/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20RAG%EF%BC%9A%E5%8E%9F%E7%90%86%E3%80%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/"/>
    <id>http://www.formeasy.cc/2025/09/21/ollama/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%20RAG%EF%BC%9A%E5%8E%9F%E7%90%86%E3%80%81%E6%B5%81%E7%A8%8B%E4%B8%8E%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/</id>
    <published>2025-09-21T03:22:29.000Z</published>
    <updated>2025-09-21T03:28:03.559Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-å¼•è¨€ä¸ºä»€ä¹ˆéœ€è¦-rag"><a class="markdownIt-Anchor" href="#1-å¼•è¨€ä¸ºä»€ä¹ˆéœ€è¦-rag"></a> 1. å¼•è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ RAGï¼Ÿ</h3><p>åœ¨å½“ä»Šäººå·¥æ™ºèƒ½æµªæ½®ä¸­ï¼Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¦‚ GPTã€LLaMAã€ChatGLM ç­‰å·²ç»å±•ç°äº†ä»¤äººæƒŠå¹çš„èƒ½åŠ›ï¼Œæ— è®ºæ˜¯åœ¨å¯¹è¯ã€åˆ›ä½œè¿˜æ˜¯ä»£ç ç”Ÿæˆæ–¹é¢ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬çœŸæ­£å°†å®ƒä»¬åº”ç”¨äºä¼ä¸šçº§æˆ–ä¸“ä¸šåŒ–åœºæ™¯æ—¶ï¼Œä¼šå‘ç°å®ƒä»¬å­˜åœ¨å‡ ä¸ªè‡´å‘½çš„â€œç¡¬ä¼¤â€ï¼š</p><ol><li><strong>çŸ¥è¯†æ»åä¸é™æ€æ€§</strong>ï¼šLLM çš„å‚æ•°åŒ–çŸ¥è¯†æ¥è‡ªäºå…¶è®­ç»ƒæ—¶çš„æ•°æ®å¿«ç…§ã€‚å¯¹äºè®­ç»ƒæˆªæ­¢æ—¥æœŸä¹‹åçš„äº‹ä»¶ã€æ–°é—»ã€ç ”ç©¶è¿›å±•æˆ–å…¬å¸å†…éƒ¨çš„æœ€æ–°æ–‡æ¡£ï¼Œæ¨¡å‹ä¸€æ— æ‰€çŸ¥ï¼Œç”šè‡³ä¼šâ€œä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“â€ï¼ˆå¹»è§‰ç°è±¡ï¼‰ã€‚</li><li><strong>ç¼ºä¹é¢†åŸŸç‰¹å¼‚æ€§</strong>ï¼šä¸€ä¸ªé€šç”¨çš„ LLM å¯èƒ½å¯¹åŒ»å­¦ã€æ³•å¾‹æˆ–é‡‘èç­‰ä¸“ä¸šé¢†åŸŸçš„æ·±åº¦çŸ¥è¯†æŒæ¡ä¸è¶³ï¼Œéš¾ä»¥ç»™å‡ºé«˜åº¦ç²¾å‡†å’Œå¯é çš„ç­”æ¡ˆã€‚</li><li><strong>é€æ˜æ€§ä¸å¯è¿½æº¯æ€§ç¼ºå¤±</strong>ï¼šLLM çš„å›ç­”åƒä¸€ä¸ªâ€œé»‘ç®±â€ï¼Œæˆ‘ä»¬æ— æ³•å¾—çŸ¥å…¶ç”Ÿæˆç­”æ¡ˆçš„å…·ä½“ä¾æ®æ¥æºï¼Œè¿™åœ¨ä¸¥è‚ƒçš„åº”ç”¨åœºæ™¯ä¸­æ˜¯ä¸å¯æ¥å—çš„ã€‚</li></ol><p><strong>é‚£ä¹ˆï¼Œå¦‚ä½•è®©å¼ºå¤§çš„ LLM å…·å¤‡è·å–æœ€æ–°ã€ç‰¹å®šçŸ¥è¯†çš„èƒ½åŠ›ï¼ŒåŒæ—¶è¿˜èƒ½æä¾›å¯é çš„ä¾æ®å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆå°±æ˜¯ <strong>RAG (Retrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆ)</strong>ã€‚</p><p>RAG å·§å¦™åœ°å°†<strong>ä¿¡æ¯æ£€ç´¢ï¼ˆIRï¼‰</strong> æŠ€æœ¯ä¸<strong>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</strong> ç›¸ç»“åˆï¼Œå°±åƒæ˜¯ç»™ä¸€ä½åšå­¦ä½†è®°å¿†åœç•™åœ¨è¿‡å»çš„å­¦è€…ï¼ˆLLMï¼‰é…å¤‡äº†ä¸€ä½é«˜æ•ˆã€å®æ—¶çš„å›¾ä¹¦ç®¡ç†å‘˜ï¼ˆæ£€ç´¢ç³»ç»Ÿï¼‰ã€‚åœ¨å›ç­”é—®é¢˜æ—¶ï¼Œå›¾ä¹¦ç®¡ç†å‘˜ä¼šè¿…é€Ÿä»æœ€æ–°çš„çŸ¥è¯†åº“ï¼ˆå¦‚å…¬å¸æ–‡æ¡£ã€æ•°æ®åº“ã€ç½‘é¡µï¼‰ä¸­æŸ¥æ‰¾ç›¸å…³èµ„æ–™ï¼Œäº¤ç»™å­¦è€…ã€‚å­¦è€…åŸºäºè¿™äº›æœ€æ–°çš„ã€å‡†ç¡®çš„èµ„æ–™ï¼Œç»„ç»‡è¯­è¨€ï¼Œç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</p><p>è¿™ç§æ–¹æ³•ä¸ä»…è§£å†³äº†çŸ¥è¯†æ›´æ–°é—®é¢˜ï¼Œè¿˜é€šè¿‡æä¾›å¼•ç”¨æ¥æºæå¤§åœ°å¢å¼ºäº†ç­”æ¡ˆçš„å¯ä¿¡åº¦å’Œå¯è§£é‡Šæ€§ã€‚</p><p>æœ¬æ–‡å°†æ·±å…¥å‰–æ RAG çš„æ ¸å¿ƒåŸç†ã€ä¸»è¦æµç¨‹ï¼Œå¹¶é€šè¿‡ä»£ç ç¤ºä¾‹å¸¦ä½ å®æˆ˜ä¸€ä¸ªç®€å•çš„ RAG ç³»ç»Ÿã€‚</p><h3 id="2-rag-æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#2-rag-æ˜¯ä»€ä¹ˆ"></a> 2. RAG æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>RAG çš„æ¦‚å¿µæœ€æ—©ç”± Meta (Facebook) çš„ç ”ç©¶å›¢é˜Ÿåœ¨ 2020 å¹´çš„è®ºæ–‡ã€ŠRetrieval-Augmented Generation for Knowledge-Intensive NLP Tasksã€‹ä¸­æå‡ºã€‚</p><p>å…¶æ ¸å¿ƒæ€æƒ³å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š<strong>â€œå…ˆæ£€ç´¢ï¼Œå†ç”Ÿæˆâ€</strong>ã€‚</p><p>å®ƒä¸æ˜¯é€šè¿‡é‡æ–°è®­ç»ƒæˆ–å¾®è°ƒï¼ˆFine-tuningï¼‰LLM æ¥æ›´æ–°å…¶çŸ¥è¯†ï¼Œè€Œæ˜¯åœ¨æ¨¡å‹<strong>å¤–éƒ¨</strong>æŒ‚è½½ä¸€ä¸ªçŸ¥è¯†åº“ã€‚åœ¨æ”¶åˆ°ç”¨æˆ·æŸ¥è¯¢ï¼ˆQueryï¼‰æ—¶ï¼ŒRAG ç³»ç»Ÿä¼šé¦–å…ˆä»è¿™ä¸ªå¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢å‡ºä¸é—®é¢˜æœ€ç›¸å…³çš„ä¿¡æ¯ç‰‡æ®µï¼ˆContextï¼‰ï¼Œç„¶åå°†<strong>åŸå§‹é—®é¢˜</strong>å’Œ<strong>æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡</strong>ä¸€å¹¶æ‰“åŒ…ï¼Œå‘é€ç»™ LLMï¼ŒæŒ‡ä»¤ LLM åŸºäºç»™å®šçš„ä¸Šä¸‹æ–‡æ¥å›ç­”é—®é¢˜ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š</p><ul><li><strong>æˆæœ¬ä½</strong>ï¼šæ— éœ€é‡æ–°è®­ç»ƒæ˜‚è´µçš„ LLMã€‚</li><li><strong>æ›´æ–°å¿«</strong>ï¼šåªéœ€æ›´æ–°å¤–éƒ¨çŸ¥è¯†åº“ï¼ˆå¦‚æ’å…¥æ–°çš„æ–‡æ¡£ï¼‰ï¼ŒLLM ç«‹å³å°±èƒ½è·å–åˆ°æ–°çŸ¥è¯†ã€‚</li><li><strong>å¯ä¿¡åº¦é«˜</strong>ï¼šç­”æ¡ˆæ¥æºäºæä¾›çš„ä¸Šä¸‹æ–‡ï¼Œå‡å°‘å¹»è§‰ï¼Œä¸”å¯æº¯æºã€‚</li></ul><h3 id="3-rag-çš„ä¸»è¦æµç¨‹"><a class="markdownIt-Anchor" href="#3-rag-çš„ä¸»è¦æµç¨‹"></a> 3. RAG çš„ä¸»è¦æµç¨‹</h3><p>ä¸€ä¸ªå…¸å‹çš„ RAG æµç¨‹å¯ä»¥åˆ†è§£ä¸ºä¸¤ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š<strong>ç´¢å¼•ï¼ˆIndexingï¼‰</strong> å’Œ<strong>æ¨ç†ï¼ˆInferenceï¼‰</strong>ã€‚</p><h4 id="31-ç´¢å¼•é˜¶æ®µindexing-data-preparation"><a class="markdownIt-Anchor" href="#31-ç´¢å¼•é˜¶æ®µindexing-data-preparation"></a> 3.1 ç´¢å¼•é˜¶æ®µï¼ˆIndexing / Data Preparationï¼‰</h4><p>ç´¢å¼•é˜¶æ®µæ˜¯â€œå¤‡è¯¾â€çš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯å°†åŸå§‹çš„éç»“æ„åŒ–æ–‡æ¡£ï¼ˆå¦‚ PDFã€Wordã€TXTã€ç½‘é¡µï¼‰å¤„ç†æˆä¾¿äºå¿«é€Ÿæ£€ç´¢çš„ç»“æ„åŒ–æ ¼å¼ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ç¦»çº¿çš„ï¼Œé€šå¸¸åªéœ€æ‰§è¡Œä¸€æ¬¡æˆ–åœ¨æ•°æ®æ›´æ–°æ—¶é‡å¤ã€‚</p><p>å…¶ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>1. åŠ è½½ï¼ˆLoadingï¼‰</strong>ï¼š<br />ä½¿ç”¨æ–‡æ¡£åŠ è½½å™¨ï¼ˆDocument Loaderï¼‰ä»å„ç§æ•°æ®æºè¯»å–åŸå§‹æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢æˆç»Ÿä¸€çš„æ–‡æ¡£å¯¹è±¡ï¼ˆDocumentï¼‰ã€‚æ¯ä¸ªæ–‡æ¡£å¯¹è±¡é€šå¸¸åŒ…å«æ–‡æœ¬å†…å®¹åŠå…¶å…ƒæ•°æ®ï¼ˆå¦‚æ¥æºã€åˆ›å»ºæ—¥æœŸç­‰ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨ LangChain çš„ PyPDFLoader åŠ è½½ PDF</span></span><br><span class="line"><span class="keyword">from</span> langchain.document_loaders <span class="keyword">import</span> PyPDFLoader</span><br><span class="line"></span><br><span class="line">loader = PyPDFLoader(<span class="string">&quot;path/to/your/document.pdf&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br></pre></td></tr></table></figure><p><strong>2. åˆ†å‰²ï¼ˆSplittingï¼‰</strong>ï¼š<br />LLM æœ‰ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼Œå› æ­¤éœ€è¦å°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆæ›´å°çš„ã€è¯­ä¹‰å®Œæ•´çš„æ–‡æœ¬å—ï¼ˆChunksï¼‰ã€‚è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼Œ chunk çš„å¤§å°å’Œè´¨é‡ç›´æ¥å½±å“æ£€ç´¢æ•ˆæœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨ LangChain çš„ RecursiveCharacterTextSplitter è¿›è¡Œæ–‡æœ¬åˆ†å‰²</span></span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"></span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter(</span><br><span class="line">    chunk_size=<span class="number">500</span>,  <span class="comment"># æ¯ä¸ª chunk çš„å¤§å°</span></span><br><span class="line">    chunk_overlap=<span class="number">50</span> <span class="comment"># chunk ä¹‹é—´çš„é‡å éƒ¨åˆ†ï¼Œé¿å…è¯­ä¹‰æ–­è£‚</span></span><br><span class="line">)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br></pre></td></tr></table></figure><p><strong>3. åµŒå…¥ï¼ˆEmbeddingï¼‰</strong>ï¼š<br />ä½¿ç”¨<strong>åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰</strong> å°†æ¯ä¸ªæ–‡æœ¬å—è½¬æ¢æˆä¸€ä¸ªé«˜ç»´å‘é‡ï¼ˆVectorï¼‰ã€‚è¿™ä¸ªå‘é‡å°±åƒæ˜¯æ–‡æœ¬çš„â€œæ•°å­¦æŒ‡çº¹â€ï¼Œè¯­ä¹‰ç›¸è¿‘çš„æ–‡æœ¬å—å…¶å‘é‡åœ¨å‘é‡ç©ºé—´ä¸­çš„è·ç¦»ä¹Ÿæ›´è¿‘ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨ OpenAI çš„ text-embedding-ada-002 æ¨¡å‹ç”ŸæˆåµŒå…¥å‘é‡</span></span><br><span class="line"><span class="keyword">from</span> langchain.embeddings <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"></span><br><span class="line">embeddings_model = OpenAIEmbeddings(model=<span class="string">&quot;text-embedding-ada-002&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>4. å­˜å‚¨ï¼ˆStoringï¼‰</strong>ï¼š<br />å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„æ–‡æœ¬å—ï¼ˆåŸå§‹æ–‡æœ¬ï¼‰å’Œå…¶å¯¹åº”çš„å‘é‡<strong>ç´¢å¼•ï¼ˆIndexï¼‰</strong> èµ·æ¥ï¼Œå­˜å…¥<strong>å‘é‡æ•°æ®åº“ï¼ˆVector Databaseï¼‰</strong> ä¸­ã€‚å‘é‡æ•°æ®åº“ä¸“é—¨ä¸ºé«˜æ•ˆçš„æµ·é‡å‘é‡ç›¸ä¼¼æ€§æœç´¢è€Œè®¾è®¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨ Chroma å‘é‡æ•°æ®åº“å¹¶å­˜å‚¨å‘é‡</span></span><br><span class="line"><span class="keyword">from</span> langchain.vectorstores <span class="keyword">import</span> Chroma</span><br><span class="line"></span><br><span class="line">vectorstore = Chroma.from_documents(</span><br><span class="line">    documents=docs,</span><br><span class="line">    embedding=embeddings_model,</span><br><span class="line">    persist_directory=<span class="string">&quot;./chroma_db&quot;</span>  <span class="comment"># æŒ‡å®šæŒä¹…åŒ–ç›®å½•</span></span><br><span class="line">)</span><br><span class="line">vectorstore.persist() <span class="comment"># æŒä¹…åŒ–åˆ°ç£ç›˜</span></span><br></pre></td></tr></table></figure><h4 id="32-æ¨ç†é˜¶æ®µinference-retrieval-generation"><a class="markdownIt-Anchor" href="#32-æ¨ç†é˜¶æ®µinference-retrieval-generation"></a> 3.2 æ¨ç†é˜¶æ®µï¼ˆInference / Retrieval &amp; Generationï¼‰</h4><p>æ¨ç†é˜¶æ®µæ˜¯â€œç­”é¢˜â€çš„è¿‡ç¨‹ï¼Œåœ¨çº¿å¤„ç†ç”¨æˆ·çš„æŸ¥è¯¢ã€‚</p><p><strong>1. æ£€ç´¢ï¼ˆRetrievalï¼‰</strong>ï¼š</p><ul><li>ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæŸ¥è¯¢ï¼ˆQueryï¼‰ã€‚</li><li>ç³»ç»Ÿä½¿ç”¨ä¸ç´¢å¼•é˜¶æ®µ<strong>ç›¸åŒçš„åµŒå…¥æ¨¡å‹</strong>ï¼Œå°†ç”¨æˆ·çš„æŸ¥è¯¢ä¹Ÿè½¬æ¢ä¸ºä¸€ä¸ªæŸ¥è¯¢å‘é‡ï¼ˆQuery Vectorï¼‰ã€‚</li><li>ç³»ç»Ÿåœ¨å‘é‡æ•°æ®åº“ä¸­è¿›è¡Œ<strong>ç›¸ä¼¼æ€§æœç´¢ï¼ˆSimilarity Searchï¼‰</strong>ï¼Œæ‰¾å‡ºä¸æŸ¥è¯¢å‘é‡æœ€ç›¸ä¼¼çš„ K ä¸ªæ–‡æœ¬å—ï¼ˆK æ˜¯å¯è®¾å®šçš„å‚æ•°ï¼‰ã€‚è¿™äº›è¢«æ£€ç´¢åˆ°çš„æ–‡æœ¬å—å°±æ˜¯ä¸é—®é¢˜æœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line">query = <span class="string">&quot;ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æŸ¥è¯¢è½¬æ¢ä¸ºå‘é‡å¹¶è¿›è¡Œç›¸ä¼¼æ€§æ£€ç´¢</span></span><br><span class="line">retrieved_docs = vectorstore.similarity_search(query, k=<span class="number">3</span>) <span class="comment"># æ£€ç´¢æœ€ç›¸ä¼¼çš„ 3 ä¸ªç‰‡æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°æ£€ç´¢ç»“æœ</span></span><br><span class="line"><span class="keyword">for</span> doc <span class="keyword">in</span> retrieved_docs:</span><br><span class="line">    <span class="built_in">print</span>(doc.page_content)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;---&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>2. å¢å¼ºï¼ˆAugmentationï¼‰</strong>ï¼š<br />å°†æ£€ç´¢åˆ°çš„å¤šä¸ªæ–‡æœ¬å—ï¼ˆContextï¼‰å’Œç”¨æˆ·çš„åŸå§‹æŸ¥è¯¢ï¼ˆQueryï¼‰æŒ‰ç…§é¢„è®¾çš„<strong>æç¤ºæ¨¡æ¿ï¼ˆPrompt Templateï¼‰</strong> ç»„åˆæˆä¸€ä¸ªæ–°çš„ã€å¢å¼ºåçš„æç¤ºï¼ˆAugmented Promptï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªæç¤ºæ¨¡æ¿</span></span><br><span class="line">template = <span class="string">&quot;&quot;&quot;è¯·æ ¹æ®ä»¥ä¸‹ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”é—®é¢˜ã€‚å¦‚æœä½ ä¸çŸ¥é“ç­”æ¡ˆï¼Œå°±è¯´ä¸çŸ¥é“ï¼Œä¸è¦ç¼–é€ ç­”æ¡ˆã€‚</span></span><br><span class="line"><span class="string">ä¸Šä¸‹æ–‡ï¼š</span></span><br><span class="line"><span class="string">&#123;context&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é—®é¢˜ï¼š&#123;question&#125;</span></span><br><span class="line"><span class="string">è¯·ç»™å‡ºç­”æ¡ˆï¼š&quot;&quot;&quot;</span></span><br><span class="line">prompt = PromptTemplate.from_template(template)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»„åˆæç¤º</span></span><br><span class="line">context = <span class="string">&quot;\n\n&quot;</span>.join([doc.page_content <span class="keyword">for</span> doc <span class="keyword">in</span> retrieved_docs])</span><br><span class="line">augmented_prompt = prompt.<span class="built_in">format</span>(context=context, question=query)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(augmented_prompt)</span><br></pre></td></tr></table></figure><p><strong>3. ç”Ÿæˆï¼ˆGenerationï¼‰</strong>ï¼š<br />å°†ç»„åˆå¥½çš„å¢å¼ºæç¤ºï¼ˆAugmented Promptï¼‰å‘é€ç»™ LLMã€‚LLM ä¼šä¸¥æ ¼åŸºäºæä¾›çš„ä¸Šä¸‹æ–‡æ¥ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼Œè€Œä¸æ˜¯ä¾èµ–å…¶å†…éƒ¨å¯èƒ½è¿‡æ—¶æˆ–ä¸å‡†ç¡®çš„çŸ¥è¯†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨ OpenAI çš„ GPT æ¨¡å‹è¿›è¡Œç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">from</span> langchain.llms <span class="keyword">import</span> OpenAI</span><br><span class="line"></span><br><span class="line">llm = OpenAI(model_name=<span class="string">&quot;gpt-3.5-turbo-instruct&quot;</span>)</span><br><span class="line">answer = llm(augmented_prompt)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æœ€ç»ˆç­”æ¡ˆï¼š\n<span class="subst">&#123;answer&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="4-æµç¨‹å›¾"><a class="markdownIt-Anchor" href="#4-æµç¨‹å›¾"></a> 4. æµç¨‹å›¾</h3><p>ä¸‹å›¾æ¸…æ™°åœ°å±•ç¤ºäº† RAG ä¸¤ä¸ªé˜¶æ®µçš„æ•°æ®æµä¸æ ¸å¿ƒç»„ä»¶ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[RAG æµç¨‹]</span><br><span class="line"></span><br><span class="line">    subgraph S1 [ç¬¬ä¸€é˜¶æ®µï¼šç´¢å¼•ï¼ˆç¦»çº¿ï¼‰]</span><br><span class="line">        direction LR</span><br><span class="line">        A1[åŸå§‹æ–‡æ¡£] --&gt;|åŠ è½½| B1[æ–‡æ¡£åŠ è½½å™¨]</span><br><span class="line">        B1 --&gt; C1[é•¿æ–‡æœ¬]</span><br><span class="line">        C1 --&gt;|åˆ†å‰²| D1[æ–‡æœ¬å— Chunks]</span><br><span class="line">        D1 --&gt;|åµŒå…¥| E1[å‘é‡ Vector]</span><br><span class="line">        E1 --&gt;|å­˜å‚¨| F1[å‘é‡æ•°æ®åº“]</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    subgraph S2 [ç¬¬äºŒé˜¶æ®µï¼šæ¨ç†ï¼ˆåœ¨çº¿ï¼‰]</span><br><span class="line">        direction TB</span><br><span class="line">        G[ç”¨æˆ·æŸ¥è¯¢] --&gt;|åµŒå…¥| H[æŸ¥è¯¢å‘é‡]</span><br><span class="line">        H --&gt;|ç›¸ä¼¼æ€§æ£€ç´¢| F1</span><br><span class="line">        F1 --&gt; I[Top-K ç›¸å…³æ–‡æœ¬å—]</span><br><span class="line">        I --&gt; J[æç¤ºå·¥ç¨‹ï¼š ç»„åˆæŸ¥è¯¢ä¸ä¸Šä¸‹æ–‡]</span><br><span class="line">        J --&gt; K[å¢å¼ºçš„æç¤º]</span><br><span class="line">        K --&gt; L[å¤§è¯­è¨€æ¨¡å‹ LLM]</span><br><span class="line">        L --&gt; M[æœ€ç»ˆç­”æ¡ˆ]</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    S1 --&gt; S2</span><br></pre></td></tr></table></figure><h3 id="5-ä»£ç å®æˆ˜æ„å»ºä¸€ä¸ªç®€å•çš„-rag-é—®ç­”ç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#5-ä»£ç å®æˆ˜æ„å»ºä¸€ä¸ªç®€å•çš„-rag-é—®ç­”ç³»ç»Ÿ"></a> 5. ä»£ç å®æˆ˜ï¼šæ„å»ºä¸€ä¸ªç®€å•çš„ RAG é—®ç­”ç³»ç»Ÿ</h3><p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ <code>LangChain</code>ï¼ˆä¸€ä¸ªæµè¡Œçš„ LLM åº”ç”¨å¼€å‘æ¡†æ¶ï¼‰å’Œ <code>Chroma</code>ï¼ˆè½»é‡çº§å‘é‡æ•°æ®åº“ï¼‰æ¥å¿«é€Ÿæ­å»ºä¸€ä¸ª RAG ç³»ç»Ÿã€‚</p><p><strong>ç¯å¢ƒå‡†å¤‡ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install langchain openai chromadb tiktoken pypdf</span><br></pre></td></tr></table></figure><p><strong>å®Œæ•´ä»£ç ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain.document_loaders <span class="keyword">import</span> PyPDFLoader</span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain.embeddings <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain.vectorstores <span class="keyword">import</span> Chroma</span><br><span class="line"><span class="keyword">from</span> langchain.llms <span class="keyword">import</span> OpenAI</span><br><span class="line"><span class="keyword">from</span> langchain.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® OpenAI API Key</span></span><br><span class="line">os.environ[<span class="string">&quot;OPENAI_API_KEY&quot;</span>] = <span class="string">&quot;ä½ çš„-OpenAI-API-Key&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. ç´¢å¼•é˜¶æ®µï¼ˆå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå«åš &#x27;ml_book.pdf&#x27; çš„æ–‡æ¡£ï¼‰</span></span><br><span class="line">loader = PyPDFLoader(<span class="string">&quot;ml_book.pdf&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line"></span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="number">1000</span>, chunk_overlap=<span class="number">100</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line"></span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br><span class="line">vectorstore = Chroma.from_documents(documents=docs, embedding=embeddings, persist_directory=<span class="string">&quot;./rag_chroma_db&quot;</span>)</span><br><span class="line">vectorstore.persist() <span class="comment"># æŒä¹…åŒ–ï¼Œä¹‹ååªéœ€åŠ è½½å³å¯ï¼Œæ— éœ€é‡å¤ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ¨ç†é˜¶æ®µ</span></span><br><span class="line">query = <span class="string">&quot;æœºå™¨å­¦ä¹ çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»ç£ç›˜åŠ è½½å·²å­˜åœ¨çš„å‘é‡æ•°æ®åº“</span></span><br><span class="line"><span class="comment"># db = Chroma(persist_directory=&quot;./rag_chroma_db&quot;, embedding_function=embeddings)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€ç´¢</span></span><br><span class="line">retriever = vectorstore.as_retriever(search_kwargs=&#123;<span class="string">&quot;k&quot;</span>: <span class="number">3</span>&#125;)</span><br><span class="line">relevant_docs = retriever.get_relevant_documents(query)</span><br><span class="line">context = <span class="string">&quot;\n\n&quot;</span>.join([doc.page_content <span class="keyword">for</span> doc <span class="keyword">in</span> relevant_docs])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºæç¤º</span></span><br><span class="line">prompt_template = <span class="string">&quot;&quot;&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIåŠ©æ‰‹ã€‚è¯·ä¸¥æ ¼ä»…æ ¹æ®ä»¥ä¸‹æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥å›ç­”é—®é¢˜ã€‚</span></span><br><span class="line"><span class="string">å¦‚æœä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ä¸è¶³ä»¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œè¯·ç›´æ¥å›ç­”&quot;æ ¹æ®æä¾›çš„èµ„æ–™ï¼Œæˆ‘æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€‚&quot;ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¸Šä¸‹æ–‡ï¼š</span></span><br><span class="line"><span class="string">&#123;context&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é—®é¢˜ï¼š&#123;question&#125;</span></span><br><span class="line"><span class="string">è¯·ç»™å‡ºç­”æ¡ˆï¼š&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">prompt = PromptTemplate(</span><br><span class="line">    template=prompt_template, input_variables=[<span class="string">&quot;context&quot;</span>, <span class="string">&quot;question&quot;</span>]</span><br><span class="line">)</span><br><span class="line">formatted_prompt = prompt.<span class="built_in">format</span>(context=context, question=query)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆ</span></span><br><span class="line">llm = OpenAI(temperature=<span class="number">0</span>) <span class="comment"># temperature=0 ä½¿è¾“å‡ºæ›´ç¡®å®š</span></span><br><span class="line">answer = llm(formatted_prompt)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ç”¨æˆ·é—®é¢˜: <span class="subst">&#123;query&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;\næ£€ç´¢åˆ°å¹¶é€å…¥LLMçš„ä¸Šä¸‹æ–‡: \n<span class="subst">&#123;context&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;\nLLMç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆ: \n<span class="subst">&#123;answer&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="6-æ€»ç»“ä¸å±•æœ›"><a class="markdownIt-Anchor" href="#6-æ€»ç»“ä¸å±•æœ›"></a> 6. æ€»ç»“ä¸å±•æœ›</h3><p>RAG é€šè¿‡å°†å…¶å¼ºå¤§çš„ç”Ÿæˆèƒ½åŠ›ä¸å¤–éƒ¨çŸ¥è¯†æºçš„å¯ä¿¡æ€§ã€å®æ—¶æ€§ç›¸ç»“åˆï¼ŒæˆåŠŸåœ°è§£å†³äº†çº¯ LLM åº”ç”¨çš„è¯¸å¤šç—›ç‚¹ã€‚å®ƒå·²æˆä¸ºæ„å»ºä¼ä¸šçº§çŸ¥è¯†åº“é—®ç­”ã€æ™ºèƒ½å®¢æœã€ä»£ç è¾…åŠ©ç­‰åº”ç”¨çš„é¦–é€‰æ¶æ„ã€‚</p><p><strong>RAG çš„ä¼˜åŠ¿ï¼š</strong></p><ul><li><strong>çŸ¥è¯†å®æ—¶æ€§</strong>ï¼šè½»æ¾æ¥å…¥æœ€æ–°ä¿¡æ¯ã€‚</li><li><strong>æˆæœ¬æ•ˆç›Š</strong>ï¼šé¿å…é‡å¤è®­ç»ƒå¤§æ¨¡å‹ã€‚</li><li><strong>å¯ä¿¡å¯æ§</strong>ï¼šç­”æ¡ˆæœ‰æ®å¯ä¾ï¼Œæ¥æºå¯è¿½æº¯ï¼Œé£é™©å¯æ§ã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥ä¸ºä¸åŒé¢†åŸŸå¿«é€Ÿæ„å»ºä¸“å±é—®ç­”ç³»ç»Ÿã€‚</li></ul><p><strong>RAG çš„æŒ‘æˆ˜ä¸è¿›é˜¶æ–¹å‘ï¼š</strong></p><ul><li><strong>æ£€ç´¢è´¨é‡</strong>ï¼šå¦‚ä½•æå‡ chunk çš„è´¨é‡ã€ä¼˜åŒ–æ£€ç´¢å™¨ï¼ˆå¦‚ä½¿ç”¨é‡æ’åº Re-Rankingï¼‰ä»¥æ‰¾åˆ°æœ€ç›¸å…³çš„ä¸Šä¸‹æ–‡ã€‚</li><li><strong>ä¸Šä¸‹æ–‡é•¿åº¦</strong>ï¼šå¦‚ä½•åº”å¯¹æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡è¿‡é•¿ï¼Œè¶…å‡º LLM çª—å£é™åˆ¶çš„é—®é¢˜ï¼ˆå¦‚é€šè¿‡ Map-Reduce ç­‰æ‘˜è¦æŠ€å·§ï¼‰ã€‚</li><li><strong>å¤šæ¨¡æ€ RAG</strong>ï¼šæœªæ¥ä¸ä»…æ£€ç´¢æ–‡æœ¬ï¼Œè¿˜èƒ½æ£€ç´¢å›¾ç‰‡ã€è¡¨æ ¼ç­‰å¤šæ¨¡æ€ä¿¡æ¯æ¥ç”Ÿæˆç­”æ¡ˆã€‚</li></ul><p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ å…¨é¢ç†è§£ RAGï¼Œå¹¶ä¸ºä½ åœ¨ AI åº”ç”¨å¼€å‘çš„é“è·¯ä¸Šæ‰“å¼€ä¸€æ‰‡æ–°çš„å¤§é—¨ã€‚</p>]]></content>
    
    
    <summary type="html">æ·±å…¥æµ…å‡º RAGï¼šåŸç†ã€æµç¨‹ä¸ä»£ç å®æˆ˜</summary>
    
    
    
    <category term="æ™ºèƒ½" scheme="http://www.formeasy.cc/categories/%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="ollama" scheme="http://www.formeasy.cc/tags/ollama/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨WinSWæŠŠnginxåšæˆwindowsæœåŠ¡</title>
    <link href="http://www.formeasy.cc/2025/09/17/Python/%E4%BD%BF%E7%94%A8WinSW%E6%8A%8Anginx%E5%81%9A%E6%88%90windows%E6%9C%8D%E5%8A%A1/"/>
    <id>http://www.formeasy.cc/2025/09/17/Python/%E4%BD%BF%E7%94%A8WinSW%E6%8A%8Anginx%E5%81%9A%E6%88%90windows%E6%9C%8D%E5%8A%A1/</id>
    <published>2025-09-17T05:58:13.000Z</published>
    <updated>2025-09-17T06:04:25.749Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ä¸‹è½½nginx"><a class="markdownIt-Anchor" href="#1-ä¸‹è½½nginx"></a> 1. ä¸‹è½½nginx</h3><p><a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></p><h3 id="2-ä¸‹è½½win-sw"><a class="markdownIt-Anchor" href="#2-ä¸‹è½½win-sw"></a> 2. ä¸‹è½½win sw</h3><p><a href="https://github.com/winsw/winsw/releases/tag/v2.11.0">https://github.com/winsw/winsw/releases/tag/v2.11.0</a>  ä¸‹è½½.NET4.0ç‰ˆæœ¬ï¼ŒWinSW.NET4.exeã€‚</p><h3 id="3-è§£å‹nignxå‹ç¼©åŒ…å¹¶é‡å‘½åæ–‡ä»¶å¤¹ä¸ºnginx"><a class="markdownIt-Anchor" href="#3-è§£å‹nignxå‹ç¼©åŒ…å¹¶é‡å‘½åæ–‡ä»¶å¤¹ä¸ºnginx"></a> 3. è§£å‹nignxå‹ç¼©åŒ…ï¼Œå¹¶é‡å‘½åæ–‡ä»¶å¤¹ä¸ºâ€œnginxâ€ã€‚</h3><p>æœ¬ä¾‹çš„nginx.exeå®Œæ•´è·¯å¾„ä¸ºï¼šD:\Soft\nginx\nginx.exe</p><h3 id="4-å°†ä¸‹è½½çš„winswnet4exe-å¤åˆ¶è¿›-dsoftnginx"><a class="markdownIt-Anchor" href="#4-å°†ä¸‹è½½çš„winswnet4exe-å¤åˆ¶è¿›-dsoftnginx"></a> 4. å°†ä¸‹è½½çš„WinSW.NET4.exe å¤åˆ¶è¿› D:\Soft\nginx\</h3><h3 id="5-åœ¨dsoftnginxæ–°å»ºä¸€ä¸ªåä¸ºwinswnet4xmlçš„xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹"><a class="markdownIt-Anchor" href="#5-åœ¨dsoftnginxæ–°å»ºä¸€ä¸ªåä¸ºwinswnet4xmlçš„xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹"></a> 5. åœ¨D:\Soft\nginx\æ–°å»ºä¸€ä¸ªåä¸ºâ€œWinSW.NET4.xmlâ€çš„XMLæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;service&gt; </span><br><span class="line"> &lt;!--æœåŠ¡åç§°--&gt;</span><br><span class="line">&lt;id&gt;nginxsvr&lt;/id&gt;</span><br><span class="line">  &lt;!--æ˜¾ç¤ºåç§°--&gt;</span><br><span class="line">&lt;name&gt;nginx-svr&lt;/name&gt;</span><br><span class="line"> &lt;!--æè¿°--&gt;</span><br><span class="line">&lt;description&gt;è‡ªå¯åŠ¨çš„ nginx&lt;/description&gt; </span><br><span class="line"> &lt;!--windowsæœåŠ¡å®‰è£…æ—¥å¿—--&gt;</span><br><span class="line">&lt;logpath&gt;D:\Soft\nginx\log2&lt;/logpath&gt; </span><br><span class="line">&lt;logmode&gt;roll&lt;/logmode&gt; </span><br><span class="line">&lt;depend&gt;&lt;/depend&gt; </span><br><span class="line"> &lt;executable&gt;D:\Soft\nginx\nginx.exe&lt;/executable&gt; </span><br><span class="line"> &lt;stopexecutable&gt;D:\Soft\nginx\nginx.exe -s stop&lt;/stopexecutable&gt; </span><br><span class="line">&lt;/service&gt;</span><br></pre></td></tr></table></figure><p>XMLçš„è·¯å¾„æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ã€‚</p><h3 id="6-ç”¨å‘½ä»¤å®‰è£…å¹¶å¯åŠ¨"><a class="markdownIt-Anchor" href="#6-ç”¨å‘½ä»¤å®‰è£…å¹¶å¯åŠ¨"></a> 6. ç”¨å‘½ä»¤å®‰è£…å¹¶å¯åŠ¨ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D:\\Soft\\nginx\\WinSW.NET4.exe install</span><br><span class="line"></span><br><span class="line">NET START nginxsvr</span><br></pre></td></tr></table></figure><h3 id="7-å¦‚æœéœ€è¦å¸è½½"><a class="markdownIt-Anchor" href="#7-å¦‚æœéœ€è¦å¸è½½"></a> 7. å¦‚æœéœ€è¦å¸è½½ ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NET STOP nginxsvr</span><br><span class="line"></span><br><span class="line">D:\\Soft\\nginx\\WinSW.NET4.exe uninstall</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¿å­˜ä¸ºæ‰¹å¤„ç†ï¼Œå®‰è£…BATï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;å®‰è£…&quot;</span><br><span class="line">D:\Soft\nginx\WinSW.NET4.exe install</span><br><span class="line">echo &quot;å¯åŠ¨åä¸ºnginxsvrçš„windowsæœåŠ¡&quot;</span><br><span class="line">NET START nginxsvr</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>å¸è½½BATï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;ä¸€å®šè¦å…ˆåœæ­¢åå¸è½½ï¼Œå¦åˆ™ç”µè„‘éœ€è¦é‡å¯&quot;</span><br><span class="line">echo &quot;åœæ­¢åä¸ºnginxsvrçš„windowsæœåŠ¡&quot;</span><br><span class="line">NET STOP nginxsvr</span><br><span class="line">D:\Soft\nginx\WinSW.NET4.exe uninstall</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>å¯è¿è¡ŒÂ services.msc æ¥æŸ¥çœ‹æœåŠ¡çŠ¶æ€ã€‚</p>]]></content>
    
    
    <summary type="html">ä½¿ç”¨WinSWæŠŠnginxåšæˆwindowsæœåŠ¡</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Python" scheme="http://www.formeasy.cc/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨NSSMå°†.exeç¨‹åºå®‰è£…æˆwindowsæœåŠ¡</title>
    <link href="http://www.formeasy.cc/2025/09/17/Python/%E4%BD%BF%E7%94%A8NSSM%E5%B0%86.exe%E7%A8%8B%E5%BA%8F%E5%AE%89%E8%A3%85%E6%88%90windows%E6%9C%8D%E5%8A%A1/"/>
    <id>http://www.formeasy.cc/2025/09/17/Python/%E4%BD%BF%E7%94%A8NSSM%E5%B0%86.exe%E7%A8%8B%E5%BA%8F%E5%AE%89%E8%A3%85%E6%88%90windows%E6%9C%8D%E5%8A%A1/</id>
    <published>2025-09-17T05:52:51.000Z</published>
    <updated>2025-09-17T05:57:47.134Z</updated>
    
    <content type="html"><![CDATA[<p>1ã€ä¸‹è½½NSSMï¼š<a href="https://nssm.cc/usage">NSSM - the Non-Sucking Service Manager</a></p><p><img src="2447777-20240506104400143-1336746940.png" alt="" /></p><p>2ã€æ–¹å¼ä¸€ï¼šcmdæ–¹å¼å®‰è£…æœåŠ¡</p><p>å°†ä¸‹è½½çš„å‹ç¼©åŒ…è§£å‹ï¼Œæ‰¾åˆ°nssm.exeï¼Œä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œåœ¨cmdä¸­å®šä½åˆ°nssm.exeæ‰€åœ¨è·¯å¾„ï¼Œæ‰§è¡Œnssm install æœåŠ¡åï¼š</p><p><img src="2447777-20240506105204004-1853535886.png" alt="" /></p><p>æŒ‰ä¸‹enteré”®ä¼šè‡ªåŠ¨å¼¹å‡ºnssmçš„çª—ä½“ï¼š</p><p><img src="2447777-20240506105550887-1981089896.png" alt="" /></p><p>åœ¨Application-Application Pathä¸­é€‰æ‹©ä½ çš„å¯æ‰§è¡Œæ–‡ä»¶.exeï¼Œç¡®è®¤åä¼šè‡ªåŠ¨å¡«å…¥Startup directoryï¼ŒService nameå¤„å¯ä»¥ä¿®æ”¹æœåŠ¡å</p><p>ä¸Šæ–¹é€‰é¡¹å¡çš„Detailsä¸­å¯ä»¥å¡«å…¥æ˜¾ç¤ºåç§°ã€æè¿°ã€å¯åŠ¨æ–¹å¼ï¼Œä¸€èˆ¬é»˜è®¤æ˜¯è‡ªåŠ¨å¯åŠ¨</p><p>å¡«å†™å®Œæˆåç‚¹å‡»å³ä¸‹è§’çš„Install serviceå³å¯ã€‚</p><p>3ã€æ–¹å¼äºŒï¼šæ‰¹å¤„ç†æ–‡ä»¶æ–¹å¼å®‰è£…æœåŠ¡</p><p>å°†nssm.exeå¤åˆ¶åˆ°è¦æ‰“åŒ…çš„ç¨‹åºæ–‡ä»¶å¤¹ä¸­ï¼Œå†åœ¨åŒç›®å½•ä¸‹æ–°å»ºä¸‰ä¸ªtxtæ–‡æœ¬ï¼Œåˆ†åˆ«å¯¹åº”å®‰è£…æœåŠ¡ã€å…³é—­æœåŠ¡ã€å¸è½½æœåŠ¡ï¼Œå°†åç¼€åæ”¹ä¸ºbat</p><ul><li>å³é”®å®‰è£…æœåŠ¡.bat-ç¼–è¾‘ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">REM åˆ›å»ºæœåŠ¡</span><br><span class="line">echo off</span><br><span class="line">echo å³å°†å¼€å§‹é‡‡ç”¨nssmå®‰è£…åº”ç”¨ç¨‹åºä¸ºwindowsæœåŠ¡ï¼Œè¯·ç¡®è®¤ä»¥ç³»ç»Ÿç®¡ç†å‘˜èº«ä»½è¿è¡Œ</span><br><span class="line">set servicename=è‡ªå®šä¹‰æœåŠ¡åç§°</span><br><span class="line">REM %~dp0 ä¸ºBATè„šæœ¬å–å½“å‰ç³»ç»Ÿç›®å½•å‘½ä»¤,API_HOST.EXEä¸ºéœ€è¦åŒ…è£…ä¸ºæœåŠ¡çš„åº”ç”¨ç¨‹åº</span><br><span class="line">set app_path=&quot;%~dp0ç¨‹åº.exe&quot;</span><br><span class="line">set nssm_path=&quot;%~dp0nssm.exe&quot;</span><br><span class="line">REM å°†NSSMå¤åˆ¶è‡³ç³»ç»Ÿç›˜ç›®å½•ï¼Œæˆ–è€… æ·»åŠ  windows ç¯å¢ƒå˜é‡äº¦å¯è¾¾åˆ°ç›®çš„</span><br><span class="line">set targetFolder=&quot;C:\windows\System32\nssm.exe&quot;</span><br><span class="line">REM æ£€æŸ¥NSSM.exeæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="line">echo æ£€æŸ¥å½“å‰ç›®å½•nssm.exeæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="line">if not exist %nssm_path% (</span><br><span class="line">    echo %nssm_path% ä¸å­˜åœ¨,è¯·ç¡®è®¤</span><br><span class="line">    pause </span><br><span class="line">    goto exitCode</span><br><span class="line"> )</span><br><span class="line">) </span><br><span class="line">echo %nssm_path% å­˜åœ¨ï¼Œå³å°†æ£€æŸ¥æ–‡ä»¶å¹¶å¤åˆ¶</span><br><span class="line">REM å¤åˆ¶nssm</span><br><span class="line">if not exist %targetFolder% (</span><br><span class="line">    copy /y %nssm_path% %targetFolder%</span><br><span class="line">    echo å¤åˆ¶nssmè‡³windowsç³»ç»Ÿç›®å½•å®Œæˆ</span><br><span class="line">)</span><br><span class="line">echo å³å°†åˆ›å»ºæœåŠ¡ %servicename%</span><br><span class="line">echo  ****************************************</span><br><span class="line"></span><br><span class="line">REM åˆ¤æ–­service æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨ï¼Œå…ˆåœæ­¢ï¼Œè‡³åˆ é™¤</span><br><span class="line">echo æ£€æŸ¥æœåŠ¡æ˜¯å¦å­˜åœ¨,å­˜åœ¨åˆ™åœæ­¢æœåŠ¡ååˆ é™¤ï¼Œå†å®‰è£…</span><br><span class="line">sc query|find /i &quot;%servicename%&quot; &gt;nul 2&gt;nul</span><br><span class="line">if not errorlevel 1 (</span><br><span class="line">    echo æœåŠ¡å·²å­˜åœ¨ï¼Œåœæ­¢è¿è¡ŒæœåŠ¡</span><br><span class="line">    echo stop %servicename%</span><br><span class="line">    REM NSSMåœæ­¢æœåŠ¡å‘½ä»¤ï¼šnssm stop &lt;ServiceName&gt;</span><br><span class="line">    nssm stop %servicename%    </span><br><span class="line">    echo å¼€å§‹ç§»é™¤æœåŠ¡ %servicename%</span><br><span class="line">    echo remove service %servicename%</span><br><span class="line">    REM NSSMåˆ é™¤æœåŠ¡å‘½ä»¤ï¼šnssm remove &lt;ServiceName&gt; confirm</span><br><span class="line">    REM ç§»é™¤å‘½ä»¤æœ€åçš„ confirm å³è¡¨ç¤ºæ— é™å¼¹çª—ç¡®è®¤,ç›´æ¥ç§»é™¤ã€‚</span><br><span class="line">    nssm remove %servicename% confirm</span><br><span class="line">    echo ç§»é™¤æœåŠ¡å®Œæˆ</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">echo *********************************</span><br><span class="line">echo å¼€å§‹åˆ›å»ºæœåŠ¡ %servicename%</span><br><span class="line">REM NSSMå‘½ä»¤ï¼šnssm install &lt;æœåŠ¡å&gt; &lt;æœåŠ¡éœ€è¦æ‰§è¡Œçš„ç¨‹åº&gt;</span><br><span class="line">nssm install %servicename% %app_path%</span><br><span class="line">echo å¼€å§‹è®¾ç½®æœåŠ¡ä¿¡æ¯</span><br><span class="line">echo set service property</span><br><span class="line">echo è®¾ç½®æœåŠ¡æ˜¾ç¤ºåç§°</span><br><span class="line">REM nssm set &lt;ServiceName&gt; DisplayName &lt;ServiceName&gt;</span><br><span class="line">nssm set %servicename% DisplayName %servicename%</span><br><span class="line">echo è®¾ç½®æœåŠ¡æè¿°</span><br><span class="line">REM nssm set &lt;ServiceName&gt; Description &lt;ServiceName&gt;</span><br><span class="line">nssm set %servicename% Description xxxæ§åˆ¶ç³»ç»Ÿ </span><br><span class="line">echo è®¾ç½®æœåŠ¡å¯åŠ¨æ–¹å¼ä¸ºï¼šè‡ªåŠ¨</span><br><span class="line">nssm set %servicename% Start SERVICE_AUTO_START</span><br><span class="line">echo *********************************</span><br><span class="line">echo å¯åŠ¨æœåŠ¡ %servicename%</span><br><span class="line">echo start service %servicename%</span><br><span class="line">nssm start %servicename%</span><br><span class="line">echo æœåŠ¡åˆ›å»ºå¹¶å¯åŠ¨å®Œæˆ</span><br><span class="line"></span><br><span class="line">:exitCode</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>set servicename=è‡ªå®šä¹‰æœåŠ¡åç§°ï¼Œè¿™é‡Œçš„è‡ªå®šä¹‰æœåŠ¡åç§°æ”¹ä¸ºä½ æƒ³è¦çš„åç§°<br />set app_path=â€œ%~dp0ç¨‹åº.exeâ€ï¼Œè¿™é‡Œçš„ç¨‹åº.exeæ”¹ä¸ºä½ çš„å¯æ‰§è¡Œæ–‡ä»¶å<br />%~dp0ä»£è¡¨çš„æ˜¯å½“å‰ç›®å½•</p><ul><li>å³é”®å…³é—­æœåŠ¡.bat-ç¼–è¾‘ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@echo off </span><br><span class="line">@title å…³é—­æœåŠ¡</span><br><span class="line">echo= å¼€å§‹å…³é—­æœåŠ¡ï¼  </span><br><span class="line">@echo off  </span><br><span class="line">@sc stop è‡ªå®šä¹‰æœåŠ¡åç§°</span><br><span class="line">@echo off  </span><br><span class="line">echo= å…³é—­æœåŠ¡ç»“æŸï¼  </span><br><span class="line">@pause</span><br></pre></td></tr></table></figure><ul><li>å³é”®å¸è½½æœåŠ¡.bat-ç¼–è¾‘ï¼š</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@echo off </span><br><span class="line">@title åˆ é™¤æœåŠ¡</span><br><span class="line">echo= å¼€å§‹åˆ é™¤æœåŠ¡ï¼  </span><br><span class="line">@echo off  </span><br><span class="line">nssm stop è‡ªå®šä¹‰æœåŠ¡åç§°</span><br><span class="line">nssm remove è‡ªå®šä¹‰æœåŠ¡åç§° confirm    </span><br><span class="line">@echo off  </span><br><span class="line">echo= åˆ é™¤å®Œæˆï¼  </span><br><span class="line">@pause</span><br></pre></td></tr></table></figure><ul><li>ä¸Šè¿°çš„batæ–‡ä»¶éƒ½éœ€è¦ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œå¯ä»¥ä¸ºbatæ–‡ä»¶åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œåœ¨å¿«æ·æ–¹å¼ä¸Šå³é”®å±æ€§-å¿«æ·æ–¹å¼-é«˜çº§-å‹¾é€‰ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</li></ul><p><img src="2447777-20240506103959941-479814109.png" alt="" /></p><ul><li>åŒå‡»å¿«æ·æ–¹å¼æ‰§è¡Œå³å¯ã€‚</li></ul><p>4ã€è¡¥å……</p><p>â‘  æœ‰å›­å‹è¯´ä¹Ÿå¯ä»¥ç”¨WinSWï¼Œæ‰¾äº†ä¸‹èµ„æ–™ï¼Œè¿˜æ²¡è¯•è¿‡ï¼Œä»…ä¾›å‚è€ƒï¼š</p><p>â‘¡ å¦‚æœæœ‰æ—¶å€™æ˜¾ç¤ºæœåŠ¡å®‰è£…æˆåŠŸï¼Œä½†åœ¨æœåŠ¡ç®¡ç†å™¨åˆæ‰¾ä¸åˆ°ï¼Œå¯ä»¥çœ‹çœ‹æ˜¯ä¸æ˜¯è¢«æ€æ¯’è½¯ä»¶æ‹¦æˆªäº†</p>]]></content>
    
    
    <summary type="html">ä½¿ç”¨NSSMå°†.exeç¨‹åºå®‰è£…æˆwindowsæœåŠ¡</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Python" scheme="http://www.formeasy.cc/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>pythonæ‰“åŒ…flaskæœåŠ¡æˆexeæ–‡ä»¶å¹¶å¿«é€Ÿæ³¨å†ŒæˆwindowsæœåŠ¡</title>
    <link href="http://www.formeasy.cc/2025/09/17/Python/python%E6%89%93%E5%8C%85flask%E6%9C%8D%E5%8A%A1%E6%88%90exe%E6%96%87%E4%BB%B6%E5%B9%B6%E5%BF%AB%E9%80%9F%E6%B3%A8%E5%86%8C%E6%88%90windows%E6%9C%8D%E5%8A%A1/"/>
    <id>http://www.formeasy.cc/2025/09/17/Python/python%E6%89%93%E5%8C%85flask%E6%9C%8D%E5%8A%A1%E6%88%90exe%E6%96%87%E4%BB%B6%E5%B9%B6%E5%BF%AB%E9%80%9F%E6%B3%A8%E5%86%8C%E6%88%90windows%E6%9C%8D%E5%8A%A1/</id>
    <published>2025-09-17T05:46:01.000Z</published>
    <updated>2025-09-17T05:52:22.677Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºç›¸å…³ä¸šåŠ¡é—®é¢˜ï¼Œéœ€è¦åœ¨windowsç¯å¢ƒä¸­å¼€å¯å¤šä¸ªflaskæœåŠ¡ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†å„ä¸ªflaskæœåŠ¡ï¼Œéœ€è¦è¿›è¡Œæ³¨å†ŒæˆwindowsæœåŠ¡ï¼Œåœ¨windowsæœåŠ¡ä¸­è¿›è¡Œè‡ªåŠ¨å¼€å¯çŠ¶æ€ã€‚ä¸‹é¢å°†åˆ†äº«åœ¨å®é™…è¿‡ç¨‹ä¸­çš„æ–¹æ³•ï¼Œé¿å…å°ä¼™ä¼´ä»¬é‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚</p><h4 id="æ­¥éª¤"><a class="markdownIt-Anchor" href="#æ­¥éª¤"></a> æ­¥éª¤</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 1.å®‰è£…flaskã€pyinstaller</span><br><span class="line"># 2.ä¸‹è½½nssméƒ¨ç½²windowsæœåŠ¡æ‰§è¡Œæ–‡ä»¶</span><br><span class="line"># 3.å‡†å¤‡flaskå¼€å‘çš„æ¡ˆä¾‹ä»£ç </span><br><span class="line"># 4.ä½¿ç”¨pyinstallerå°†flaskæœåŠ¡è¿›è¡Œæ‰“åŒ…</span><br><span class="line"># 5.è§£å‹nssmæ–‡ä»¶ï¼ŒæŒ‡å®šæ‰“åŒ…æ–‡ä»¶å’ŒæœåŠ¡åç§°</span><br><span class="line"># 6.æµ‹è¯•æœ€ç»ˆç»“æœæ˜¯å¦æ­£ç¡®</span><br></pre></td></tr></table></figure><h3 id="1å‡†å¤‡å·¥ä½œ"><a class="markdownIt-Anchor" href="#1å‡†å¤‡å·¥ä½œ"></a> 1.å‡†å¤‡å·¥ä½œ</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonç¯å¢ƒï¼š3.6.8</span><br><span class="line">windowsç¯å¢ƒï¼šwindows10</span><br></pre></td></tr></table></figure><p>å®‰è£…ç›¸å…³åŒ…å¦‚ä¸‹ï¼Œå‡†å¤‡æ‰“åŒ…pythonä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.å®‰è£…flaskæ¡†æ¶</span></span><br><span class="line">pip install flask</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 2.å®‰è£…pyinstalleråŒ…</span></span><br><span class="line">pip install pyinstaller</span><br></pre></td></tr></table></figure><p>ä¸‹è½½nssm.zipæ–‡ä»¶ï¼Œå‡†å¤‡åœ¨windowsä¸Šå®‰è£…exeæ–‡ä»¶</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹è½½åœ°å€</span><br><span class="line">http://www.nssm.cc/release/nssm-2.24.zip</span><br></pre></td></tr></table></figure><h3 id="2å¼€å§‹å®é™…æ“ä½œ"><a class="markdownIt-Anchor" href="#2å¼€å§‹å®é™…æ“ä½œ"></a> 2.å¼€å§‹å®é™…æ“ä½œ</h3><p>flaskä»£ç å¼€å‘ï¼Œä»¥ä¸‹æ˜¯ä¸ªdemo</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request,jsonify</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ¨¡å‹è®­ç»ƒçŠ¶æ€</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/modelstatus&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train_status</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;false&#x27;</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;hello&#x27;</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;ä¸æ”¯æŒè¯¥è¯·æ±‚&#x27;</span>&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">9004</span>)</span><br></pre></td></tr></table></figure><h3 id="3å¼€å§‹æ‰“åŒ…"><a class="markdownIt-Anchor" href="#3å¼€å§‹æ‰“åŒ…"></a> 3.å¼€å§‹æ‰“åŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯´æ˜ï¼š(æˆ‘åœ¨æ‰§è¡Œ pyinstaller -w admin.pyæ—¶,æ‰“åŒ…è¿‡ç¨‹ä¸­æ§åˆ¶å°æ­£å¸¸æ²¡æŠ¥é”™ï¼Œæ‰“åŒ…å®Œæˆä»¥åè¿›è¡Œdistæ–‡ä»¶ï¼Œæ‰¾åˆ°admin.exeåŒå‡»å¯åŠ¨æ—¶ï¼Œæç¤ºåˆ›åº“æ˜¾ç¤ºæ‰§è¡Œå¤±è´¥ã€‚å› ä¸ºæƒ³ç¨‹åºå ç€æ§åˆ¶å°ï¼Œæ‰€ä»¥æ‰§è¡Œçš„å‚æ•°ä¸º -w)</span></span><br><span class="line"><span class="comment"># æœ€ç»ˆæ‰§è¡ŒflaskæœåŠ¡æ‰“åŒ…</span></span><br><span class="line">pyinstaller -F admin.py</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ä¸€ä¸‹å°±æ˜¯ç¨‹åºæ‰“åŒ…ä»¥åæ–‡ä»¶ç›®å½•</span></span><br></pre></td></tr></table></figure><p><img src="2b6f6336f903a8e1caad04fd7ead53a0.png" alt="" /></p><h3 id="4å¼€å§‹è¿›è¡Œæ³¨å†ŒwindowsæœåŠ¡"><a class="markdownIt-Anchor" href="#4å¼€å§‹è¿›è¡Œæ³¨å†ŒwindowsæœåŠ¡"></a> 4.å¼€å§‹è¿›è¡Œæ³¨å†ŒwindowsæœåŠ¡</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.åœ¨cmdä¸­è¿›å…¥nssmä¸­çš„ç›®å½•ï¼Œç„¶åè¿›è¡Œå‘½ä»¤</span><br><span class="line">2. nssm install aiweb(æœåŠ¡å)</span><br><span class="line">3. é€‰æ‹©Application pathæŒ‰é’®å°†pyinstalleræ‰“åŒ…åçš„exeæ–‡ä»¶é€‰æ‹©è¿‡æ¥ã€‚</span><br><span class="line">4.ç‚¹å‡»installer serviceæŒ‰é’®ï¼Œåˆ™æç¤ºæˆåŠŸï¼Œæ­¤æ—¶å»windowsæœåŠ¡ä¸­æŸ¥çœ‹æœåŠ¡å³å¯ã€‚</span><br></pre></td></tr></table></figure><p><img src="df25be88d6135abc2c6453db5c137749.png" alt="" /></p><p><img src="fa73497bd830729f519915d78374742a.png" alt="" /></p><p><img src="5f42a37870613fa32e2d783b6746cb94.png" alt="" /></p><h3 id="5æµ‹è¯•windowsæœåŠ¡"><a class="markdownIt-Anchor" href="#5æµ‹è¯•windowsæœåŠ¡"></a> 5.æµ‹è¯•windowsæœåŠ¡</h3><p>åœ¨æœåŠ¡ä¸­ç‚¹å‡»å¯åŠ¨æŒ‰é’®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ipåœ°å€å’Œç«¯å£å·ï¼Œå¦‚å›¾ï¼š</p><p><img src="69ad754b7ea7fa035dbba64b3e2621d3.png" alt="" /></p><p><img src="b8aa7972f31ababda44f878616cf3694.png" alt="" /></p><p>æœ€åå¤§åŠŸå‘Šæˆï¼Œæ­¤æ–¹æ³•å¯ä»¥å°†flaskæœåŠ¡ã€çˆ¬è™«æœåŠ¡éƒ½å¯ä»¥æ³¨å†ŒæˆwindowsæœåŠ¡ï¼Œå¼€æœºè‡ªå¯åŠ¨ã€‚</p>]]></content>
    
    
    <summary type="html">pythonæ‰“åŒ…flaskæœåŠ¡æˆexeæ–‡ä»¶å¹¶å¿«é€Ÿæ³¨å†ŒæˆwindowsæœåŠ¡</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Python" scheme="http://www.formeasy.cc/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Windowsä¸Šå°†Eexéƒ¨ç½²æˆä¸ºæœåŠ¡WinSWå’ŒNSSM</title>
    <link href="http://www.formeasy.cc/2025/09/14/Python/Windows%E4%B8%8A%E5%B0%86Eex%E9%83%A8%E7%BD%B2%E6%88%90%E4%B8%BA%E6%9C%8D%E5%8A%A1WinSW%E5%92%8CNSSM/"/>
    <id>http://www.formeasy.cc/2025/09/14/Python/Windows%E4%B8%8A%E5%B0%86Eex%E9%83%A8%E7%BD%B2%E6%88%90%E4%B8%BA%E6%9C%8D%E5%8A%A1WinSW%E5%92%8CNSSM/</id>
    <published>2025-09-14T14:14:35.000Z</published>
    <updated>2025-09-14T14:21:33.768Z</updated>
    
    <content type="html"><![CDATA[<p>ä½¿ç”¨Windowsï¼Œç»å¸¸éœ€è¦å°†å¸¦ç•Œé¢çš„Windows åº”ç”¨ã€exeå¯æ‰§è¡Œç¨‹åºã€batæ‰¹å¤„ç†æ–‡ä»¶å˜ä¸ºWindowsæœåŠ¡ï¼Œä»¥ä¾¿äºåå°è¿è¡Œï¼Œæ”¯æŒå¼€å¯é‡å¯ã€è¿›ç¨‹ä¿æŠ¤ç­‰åŠŸèƒ½ã€‚<br />æœ‰ä¼—å¤šçš„å·¥å…·æ”¯æŒå°†exeæ–‡ä»¶å°è£…ä¸ºWindowsæœåŠ¡ï¼Œå¸¸ç”¨çš„å·¥å…·åŒ…æ‹¬ï¼š<br />Sc.exe/NSSM/WinSW/Shawl/AlwaysUp/FireDaemon</p><h3 id="scexe"><a class="markdownIt-Anchor" href="#scexe"></a> Sc.exe</h3><p><a href="https://learn.microsoft.com/zh-cn/windows/win32/services/controlling-a-service-using-sc">https://learn.microsoft.com/zh-cn/windows/win32/services/controlling-a-service-using-sc</a></p><p>Windowsç³»ç»Ÿå†…ç½®å‘½ä»¤ï¼Œéœ€è¦ç†Ÿæ‚‰å‘½ä»¤è¡Œæ“ä½œï¼Œå¯¹æ–°æ‰‹ä¸å‹å¥½</p><p>ä»¥å‰è¿˜æœ‰SRVANY.exeï¼Œå¾®è½¯å®˜æ–¹åœ¨ Windows 10/11 ä¸Šå·²ç»ä¸å†æä¾›æ”¯æŒï¼Œå› æ­¤ä¸æ¨èã€‚</p><h3 id="nssm"><a class="markdownIt-Anchor" href="#nssm"></a> NSSM</h3><p><a href="https://nssm.cc/builds">https://nssm.cc/builds</a></p><p><a href="https://github.com/kirillkovalenko/nssm">https://github.com/kirillkovalenko/nssm</a></p><p>å¼€æºï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†ä»2017å¹´ä»¥åæœªå†æ›´æ–°ç»´æŠ¤</p><h3 id="winsw"><a class="markdownIt-Anchor" href="#winsw"></a> Winsw</h3><p><a href="https://github.com/winsw/winsw">https://github.com/winsw/winsw</a></p><p>å¼€æºï¼ŒåŠŸèƒ½å¼ºå¤§ä½†é…ç½®è¾ƒä¸ºå¤æ‚ï¼Œ2023å¹´åæœªå†æ›´æ–°ç»´æŠ¤</p><h3 id="shawl"><a class="markdownIt-Anchor" href="#shawl"></a> Shawl</h3><p><a href="https://github.com/mtkennerly/shawl">https://github.com/mtkennerly/shawl</a></p><p>å¼€æºï¼ŒåŠŸèƒ½ç›¸å¯¹äºNSSMã€Winswå¼±ä¸€äº›ï¼Œç›®å‰è¿˜åœ¨æ›´æ–°ç»´æŠ¤</p><h3 id="alwaysup"><a class="markdownIt-Anchor" href="#alwaysup"></a> AlwaysUp</h3><p><a href="https://www.coretechnologies.com/products/AlwaysUp/">https://www.coretechnologies.com/products/AlwaysUp/</a></p><p>æ”¶è´¹å•†ä¸šè½¯ä»¶</p><h3 id="firedaemon"><a class="markdownIt-Anchor" href="#firedaemon"></a> FireDaemon</h3><p><a href="https://www.firedaemon.com/">https://www.firedaemon.com/</a></p><p>æ”¶è´¹å•†ä¸šè½¯ä»¶</p><p>å¯ä»¥çœ‹å‡ºï¼Œè¦å°†exeç¨‹åºå˜ä¸ºWindowsæœåŠ¡ï¼Œå…è´¹æ–¹æ¡ˆåŒ…æ‹¬Sc.exeï¼ŒNSSMï¼ŒWinswï¼ŒShawlï¼Œä½†å„æœ‰ä¼˜åŠ£ã€‚</p><p>ä¸‹é¢ä»‹ç»å…¶ä¸­çš„ä¸¤æ¬¾WinSWå’ŒNSSMï¼Œåœ¨Windowsä¸Šä½¿ç”¨è¿™ä¸¤æ¬¾å¼è½¯ä»¶å¯ä»¥å¿«å°†EXEéƒ¨ç½²æˆä¸ºæœåŠ¡ï¼ˆä¸ºä»€ä¹ˆä¸ç›´æ¥å†™æœåŠ¡ï¼Œæˆ‘ä¸ªäººå–œæ¬¢EXEè°ƒè¯•æµ‹è¯•æ–¹ä¾¿OKä¹‹å å†éƒ¨ç½²æˆä¸ºæœåŠ¡è¿™æ ·æ–¹ä¾¿ï¼‰</p><p><strong>NSSMï¼ˆC++ï¼‰</strong></p><p>å®˜æ–¹ <a href="http://www.nssm.cc/">http://www.nssm.cc/</a> ä¸‹è½½åªæœ‰ä¸€ä¸ªç»¿è‰²EXE ä½¿ç”¨æ–¹æ³•å‘½ä»¤è¡Œä¸‹ NSSM.exe install (å¯¹åº”ç§»é™¤ä½¿ç”¨ remove</p><p><img src="624386-20250122192200962-1765742953.png" alt="" /></p><p>åœ¨è¿™é‡Œå°±å¯ä»¥é€‰æ‹©ä½ æƒ³è¦çš„EXE ä¸”èµ·å¯¹åº”çš„æœåŠ¡çš„åå­—ï¼ˆç§»é™¤çš„æ—¶å€™éœ€è¦è¿™ä¸ªåå­—ï¼‰</p><p>å¦‚æœæ˜¯ç§»é™¤ ä½¿ç”¨ NSSM.exe Remove å¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼Œå¡«å†™åå­—ç§»é™¤</p><p><img src="624386-20250122191214948-2065923795.png" alt="" /></p><p><strong>WinSW (C#)</strong></p><p><strong><a href="https://github.com/winsw/winsw/releases">https://github.com/winsw/winsw/releases</a>Â githubä¸Šå°±æœ‰</strong></p><p><strong>ä½¿ç”¨windsw éœ€è¦æœ‰å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹é¢çš„xmlæ–‡ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœåŠ¡IDåç§°ï¼ˆå”¯ä¸€ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>Myserver<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœåŠ¡æ˜¾ç¤ºåç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Myserver<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœåŠ¡çš„æè¿°ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Minioæ–‡ä»¶å­˜å‚¨æœåŠ¡å™¨<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- å¯è®¾ç½®ç¯å¢ƒå˜é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;HOME&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%BASE%&quot;</span>/&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- è¦æ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executable</span>&gt;</span>%BASE%\minio.exe<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- å¯æ‰§è¡Œæ–‡ä»¶ä¼ é€’çš„å‚æ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arguments</span>&gt;</span>server &quot;%BASE%\data&quot;<span class="tag">&lt;/<span class="name">arguments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;logmode&gt;rotate&lt;/logmode&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logpath</span>&gt;</span>%BASE%\logs<span class="tag">&lt;/<span class="name">logpath</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">log</span> <span class="attr">mode</span>=<span class="string">&quot;roll-by-size-time&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sizeThreshold</span>&gt;</span>10240<span class="tag">&lt;/<span class="name">sizeThreshold</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>yyyyMMdd<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">autoRollAtTime</span>&gt;</span>00:00:00<span class="tag">&lt;/<span class="name">autoRollAtTime</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">zipOlderThanNumDays</span>&gt;</span>5<span class="tag">&lt;/<span class="name">zipOlderThanNumDays</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">zipDateFormat</span>&gt;</span>yyyyMMdd<span class="tag">&lt;/<span class="name">zipDateFormat</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">log</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç®¡ç†å‘˜èº«ä»½è¿è¡ŒCMDå¹¶å®šä½åˆ°WinSWçš„å®‰è£…ç›®å½•ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤WinSWr installï¼Œæ­¤æ—¶æˆ‘ä»¬çš„WindowsæœåŠ¡åˆ—è¡¨ä¸­å°±å¤šäº†ä¸€ä¸ªå«Minio-Serverçš„æœåŠ¡äº†</p><p>WinSWçš„å„ä¸ªå‘½ä»¤</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>install</td><td>å®‰è£…æœåŠ¡</td></tr><tr><td>uninstall</td><td>å¸è½½æœåŠ¡</td></tr><tr><td>start</td><td>å¯åŠ¨æœåŠ¡</td></tr><tr><td>stop</td><td>åœæ­¢æœåŠ¡</td></tr><tr><td>restart</td><td>é‡å¯æœåŠ¡</td></tr><tr><td>status</td><td>æ£€æŸ¥æœåŠ¡çŠ¶æ€</td></tr><tr><td>refresh</td><td>åˆ·æ–°æœåŠ¡å±æ€§è€Œä¸æ˜¯é‡æ–°å®‰è£…</td></tr><tr><td>customize</td><td>--</td></tr></tbody></table><p><img src="624386-20250122192046755-1088983727.jpg" alt="" /></p><p>é…åˆè¿™ä¸¤å›¾ç‰‡åº”è¯¥åŸºæœ¬ä½¿ç”¨æ–¹å¼ è®°å½•å®Œäº†</p><p>ä»ä¸Šé¢æ¥çœ‹æˆ‘ä¸ªäººå–œæ¬¢æœ‰ç•Œé¢è®¾ç½®çš„NSSM</p>]]></content>
    
    
    <summary type="html">Windowsä¸Šå°†Eexéƒ¨ç½²æˆä¸ºæœåŠ¡WinSWå’ŒNSSM</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Python" scheme="http://www.formeasy.cc/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨electronå°†vueé¡¹ç›®æ‰“åŒ…æˆ.exeæ–‡ä»¶ã€ä¿å§†çº§æ•™ç¨‹ã€‘</title>
    <link href="http://www.formeasy.cc/2025/09/13/VUE/%E7%94%A8electron%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90.exe%E6%96%87%E4%BB%B6%E3%80%90%E4%BF%9D%E5%A7%86%E7%BA%A7%E6%95%99%E7%A8%8B%E3%80%91/"/>
    <id>http://www.formeasy.cc/2025/09/13/VUE/%E7%94%A8electron%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90.exe%E6%96%87%E4%BB%B6%E3%80%90%E4%BF%9D%E5%A7%86%E7%BA%A7%E6%95%99%E7%A8%8B%E3%80%91/</id>
    <published>2025-09-13T13:45:49.000Z</published>
    <updated>2025-09-13T14:01:21.823Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¯´æ˜ï¼š vue2é¡¹ç›®ï¼Œä½¿ç”¨çš„vue-element-adminæ¡†æ¶ï¼Œç”¨electronæ‰“åŒ…æˆ.exeæ–‡ä»¶ã€‚</p></blockquote><p><strong>1ã€æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åå³é”®æ‰“å¼€ç»ˆç«¯æˆ–è€…cdåˆ°è¿™ä¸ªç›®å½•ã€‚æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ˆæœ€å¥½ç¡®è®¤ä¸€ä¸‹githubç½‘ç«™æ˜¯å¦ç™»é™†äº†ï¼‰ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å°†electronå®˜ç½‘ä¸­çš„quick-startæ‹‰å–åˆ°æœ¬åœ°</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/electron/electron-quick-start</span><br></pre></td></tr></table></figure><p><img src="bbf8565071e2cf68eaa25eed66323d9e.png" alt="" /><br /><em>å®‰è£…æˆåŠŸçš„æ–‡ä»¶å¦‚ä¸‹æ˜¾ç¤ºï¼š</em><br /><img src="0fe16f69a6abd191fce197c40114fdf4.png" alt="" /></p><p><strong>2.å®‰è£…å¥½åï¼Œç”¨vscodeï¼ˆå…¶ä»–ç±»ä¼¼å·¥å…·ï¼‰æ‰“å¼€ï¼Œæ–°å»ºç»ˆç«¯ï¼Œå‰åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ä¸‹è½½é¡¹ç›®éœ€è¦çš„ä¾èµ–</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">//å®‰è£…æ‰“åŒ….exeæ‰€éœ€è¦çš„ä¾èµ–electron-packagerã€electron</span><br><span class="line">npm i electron-packager --save-dev</span><br><span class="line">npm i electron --save-dev </span><br><span class="line"></span><br><span class="line">//è¿è¡Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æˆåŠŸ</span><br><span class="line">npm run start</span><br></pre></td></tr></table></figure><p><em>å¦‚æœè¿è¡ŒæˆåŠŸï¼Œä¼šå¼¹å‡ºä¸€ä¸ªé¡µé¢ï¼Œå¦‚ä¸‹å›¾ï¼š</em></p><p><img src="a89af1046501287e1986533267746fc4.png" alt="" /><br /><strong>3ã€åˆ é™¤electron-quick-startæ–‡ä»¶ä¸­çš„index.htmlï¼ŒæŠŠè‡ªå·±çš„é¡¹ç›®distæ–‡ä»¶æ”¾è¿›å»ã€‚</strong></p><p><img src="d98cce14b827a8b749368ac930c36d28.png" alt="" /></p><p><strong>4ã€æ‰“å¼€electron-quick-startæ–‡ä»¶é‡Œçš„main.jsæ–‡ä»¶ï¼Œä¸‹é¢æ˜¯mian.jså®Œæ•´ä»£ç ã€‚</strong><br /><em>é‡ç‚¹æ˜¯ï¼š mainWindow.loadFile(â€œ<strong>./dist/index.html</strong>â€) çš„ä¿®æ”¹</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Modules to control application life and create native browser window</span></span><br><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;electron&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;node:path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// Create the browser window.</span></span><br><span class="line">  <span class="keyword">const</span> mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">1024</span>, <span class="comment">//è‡ªå·±éœ€è¦çš„å®½é«˜</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">960</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;preload.js&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// and load the index.html of the app.</span></span><br><span class="line">  mainWindow.<span class="title function_">loadFile</span>(<span class="string">&quot;./dist/index.html&quot;</span>);</span><br><span class="line">  <span class="comment">// Open the DevTools.</span></span><br><span class="line">  mainWindow.<span class="property">webContents</span>.<span class="title function_">openDevTools</span>(); <span class="comment">// æ‰“å¼€è°ƒè¯•å·¥å…·</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This method will be called when Electron has finished</span></span><br><span class="line"><span class="comment">// initialization and is ready to create browser windows.</span></span><br><span class="line"><span class="comment">// Some APIs can only be used after this event occurs.</span></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createWindow</span>();</span><br><span class="line"></span><br><span class="line">  app.<span class="title function_">on</span>(<span class="string">&quot;activate&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// On macOS it&#x27;s common to re-create a window in the app when the</span></span><br><span class="line">    <span class="comment">// dock icon is clicked and there are no other windows open.</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) <span class="title function_">createWindow</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Quit when all windows are closed, except on macOS. There, it&#x27;s common</span></span><br><span class="line"><span class="comment">// for applications and their menu bar to stay active until the user quits</span></span><br><span class="line"><span class="comment">// explicitly with Cmd + Q.</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;window-all-closed&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&quot;darwin&quot;</span>) app.<span class="title function_">quit</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// In this file you can include the rest of your app&#x27;s specific main process</span></span><br><span class="line"><span class="comment">// code. You can also put them in separate files and require them here.</span></span><br></pre></td></tr></table></figure><p><strong>5ã€æ‰“å¼€ package.jsonæ–‡ä»¶ï¼Œæ·»åŠ ä¸Šæœ‰å…³packagerçš„ä»£ç ã€‚</strong><br />(PS: å¦‚æœä¸éœ€è¦è‡ªåŠ¨åŒ¹é…distæ–‡ä»¶å¤¹ä¸‹çš„åº”ç”¨å›¾æ ‡ä½¿ç”¨è¯¥å†…å®¹<br />â€œelectron-packager ./ Vite App --platform=win32 --arch=x64 --overwriteâ€)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="string">&quot;electron .&quot;</span>,</span><br><span class="line">  <span class="string">&quot;packager&quot;</span>: <span class="string">&quot;electron-packager ./ ä½ æƒ³ç”¨çš„exeåå­— --platform=win32 --arch=x64 --icon=./dist/favicon.ico --overwrite&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img src="b661f7f30b917c1101987f021020b90c.png" alt="" /></p><p><strong>6ã€ç»ˆäºåˆ°äº†æœ€åä¸€æ­¥ï¼šnpm run packagerè¿›è¡Œæ‰“åŒ…ï¼æ‰“åŒ…æˆåŠŸåå¦‚ä¸‹å›¾</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run packager</span><br></pre></td></tr></table></figure><p><img src="219cc791e979e805b0d2cc3042fa06df.png" alt="" /></p><p><strong>7ã€å…¶å®ƒ</strong></p><p>å¦‚æœæƒ³electronæ‰“åŒ…åè‡ªå¸¦æœåŠ¡ï¼Œå°†electron-quick-startæ–‡ä»¶é‡Œçš„main.jsæ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;electron&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> expressApp = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">expressApp.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = expressApp.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running on http://localhost:3000&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;ready&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line"><span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line"><span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line"><span class="attr">webPreferences</span>: &#123;</span><br><span class="line"><span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">contextIsolation</span>: <span class="literal">false</span>   <span class="comment">// å¦‚æœä½ ä½¿ç”¨çš„æ˜¯Electron 12åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæ¨èå¯ç”¨contextIsolationå¹¶ä½¿ç”¨preloadè„šæœ¬</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">mainWindow.<span class="title function_">loadURL</span>(<span class="string">&quot;http://localhost:3000&quot;</span>);</span><br><span class="line"></span><br><span class="line">mainWindow.<span class="title function_">on</span>(<span class="string">&quot;closed&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">server.<span class="title function_">close</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†åº”ç”¨é€€å‡ºé€»è¾‘</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&quot;window-all-closed&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// åœ¨macOSä¸Šï¼Œåº”ç”¨é€šå¸¸åœ¨ç”¨æˆ·æ˜ç¡®é€€å‡ºå‰ä¿æŒæ´»åŠ¨çŠ¶æ€</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&quot;darwin&quot;</span>) &#123;</span><br><span class="line">app.<span class="title function_">quit</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ç”¨electronå°†vueé¡¹ç›®æ‰“åŒ…æˆ.exeæ–‡ä»¶ã€ä¿å§†çº§æ•™ç¨‹ã€‘</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="VUE" scheme="http://www.formeasy.cc/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>Electronç³»åˆ— -- vueé¡¹ç›®æ‰“åŒ…æˆ.exeæ–‡ä»¶(é€šè¿‡å®˜æ–¹demoçš„æ–¹å¼)</title>
    <link href="http://www.formeasy.cc/2025/09/12/VUE/Electron%E7%B3%BB%E5%88%97%20--%20vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90.exe%E6%96%87%E4%BB%B6(%E9%80%9A%E8%BF%87%E5%AE%98%E6%96%B9demo%E7%9A%84%E6%96%B9%E5%BC%8F)/"/>
    <id>http://www.formeasy.cc/2025/09/12/VUE/Electron%E7%B3%BB%E5%88%97%20--%20vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%88%90.exe%E6%96%87%E4%BB%B6(%E9%80%9A%E8%BF%87%E5%AE%98%E6%96%B9demo%E7%9A%84%E6%96%B9%E5%BC%8F)/</id>
    <published>2025-09-12T02:55:34.000Z</published>
    <updated>2025-09-12T03:02:12.298Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-æ‹‰å–å®˜æ–¹demo-electron-quick-start"><a class="markdownIt-Anchor" href="#ä¸€-æ‹‰å–å®˜æ–¹demo-electron-quick-start"></a> ä¸€. æ‹‰å–å®˜æ–¹demo (electron-quick-start)</h3><p>å°†electronå®˜ç½‘ä¸­çš„Â electron-quick-startÂ æ‹‰å–åˆ°æœ¬åœ°</p><p><a href="https://edu.csdn.net/cloud/pm_summit?utm_source=blogglc">git</a>Â cloneÂ <a href="https://github.com/electron/electron-quick-start">https://github.com/electron/electron-quick-start</a></p><p><img src="1016812-20241126145749293-662678124.png" alt="" /></p><p>å®‰è£…æˆåŠŸçš„ç›®å½•å¦‚ä¸‹</p><p><img src="1016812-20241126145806632-1100162865.png" alt="" /></p><p>2.å®‰è£…å¥½åï¼Œç”¨vscodeï¼ˆSublime Tex ç­‰å·¥å…·ï¼‰æ‰“å¼€ï¼Œæ–°å»ºç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ã€‚</p><p>åˆå§‹åŒ–ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>ç®€å†™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…æ‰€éœ€çš„ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i electron --save-dev  </span><br><span class="line">npm i electron-packager --save-dev  </span><br><span class="line">npm install -g @electron/packager</span><br></pre></td></tr></table></figure><p><img src="1016812-20241126145904161-131154087.png" alt="" /></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start å¯åŠ¨é¡¹ç›®</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸæ˜¾ç¤ºÂ Hello World!</p><p><img src="1016812-20241126145942140-1512890203.png" alt="" /></p><h3 id="äºŒ-é¡¹ç›®æ‰“åŒ…"><a class="markdownIt-Anchor" href="#äºŒ-é¡¹ç›®æ‰“åŒ…"></a> äºŒ.Â é¡¹ç›®æ‰“åŒ…</h3><p>é€šè¿‡å°†vueé¡¹ç›®æ‰“åŒ…, ä¼šç”Ÿæˆä¸€ä¸ªdistæ–‡ä»¶</p><p><img src="1016812-20241126150001495-729014494.png" alt="" /></p><h3 id="ä¸‰-ä¿®æ”¹electron-quick-start-æ–‡ä»¶"><a class="markdownIt-Anchor" href="#ä¸‰-ä¿®æ”¹electron-quick-start-æ–‡ä»¶"></a> ä¸‰. ä¿®æ”¹electron-quick-startÂ æ–‡ä»¶</h3><p>åˆ é™¤ electron-quick-start æ–‡ä»¶ä¸­çš„index.htmlï¼ŒæŠŠvueé¡¹ç›®æ‰“åŒ…çš„distæ–‡ä»¶æ”¾è¿›å»ã€‚<br />æ‰“å¼€electron-quick-start æ–‡ä»¶é‡Œçš„main.jsæ–‡ä»¶ï¼Œé™„ä¸Šmian.jså®Œæ•´ä»£ç <br />é‡ç‚¹æ˜¯ï¼š mainWindow.loadFile(â€œ./dist/index.htmlâ€) çš„ä¿®æ”¹</p><p><img src="1016812-20241126150026718-648644936.png" alt="" /></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Modules to control application life and create native browser window</span></span><br><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;node:path&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span> () &#123;</span><br><span class="line">  <span class="comment">// Create the browser window.</span></span><br><span class="line">  <span class="keyword">const</span> mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">1920</span>,    <span class="comment">//çª—å£å®½åº¦</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">1080</span>,    <span class="comment">//çª—å£é«˜åº¦</span></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;preload.js&#x27;</span>) </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// and load the index.html of the app.</span></span><br><span class="line">  mainWindow.<span class="title function_">loadFile</span>(<span class="string">&#x27;index.html&#x27;</span>) <span class="comment">//é¡¹ç›®å…¥å£æ–‡ä»¶</span></span><br><span class="line">  mainWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>); <span class="comment">//    éšè—é¡¶éƒ¨èœå•</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">// Open the DevTools.</span></span><br><span class="line">  <span class="comment">// mainWindow.webContents.openDevTools() //æ‰“å¼€è°ƒè¯•å·¥å…·</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// This method will be called when Electron has finished</span></span><br><span class="line"><span class="comment">// initialization and is ready to create browser windows.</span></span><br><span class="line"><span class="comment">// Some APIs can only be used after this event occurs.</span></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createWindow</span>()</span><br><span class="line"> </span><br><span class="line">  app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// On macOS it&#x27;s common to re-create a window in the app when the</span></span><br><span class="line">    <span class="comment">// dock icon is clicked and there are no other windows open.</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) <span class="title function_">createWindow</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// Quit when all windows are closed, except on macOS. There, it&#x27;s common</span></span><br><span class="line"><span class="comment">// for applications and their menu bar to stay active until the user quits</span></span><br><span class="line"><span class="comment">// explicitly with Cmd + Q.</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) app.<span class="title function_">quit</span>()</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// In this file you can include the rest of your app&#x27;s specific main process</span></span><br><span class="line"><span class="comment">// code. You can also put them in separate files and require them here.</span></span><br></pre></td></tr></table></figure><p>åµŒå¥—çš„vueé¡¹ç›®å¯åŠ¨é¡µé¢( npm run start )</p><p><img src="1016812-20241126150115393-1842781350.png" alt="" /></p><p>åœ¨Â electron-quick-startÂ é¡¹ç›® package.json é…ç½®æ–‡ä»¶ä¸­ï¼Œscripts ä¸‹æ·»åŠ  packager æŒ‡ä»¤</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;electron .&quot;,</span><br><span class="line">  &quot;packager&quot;: &quot;electron-packager ./ æµ‹è¯•xxxæ”¶é“¶ç³»ç»Ÿ --platform=win32 --arch=x64 --icon=./dist/favicon.ico --out=./out --overwrite&quot;</span><br><span class="line">&#125;, // æµ‹è¯•xxxæ”¶é“¶ç³»ç»Ÿ ä¸ºåº”ç”¨å</span><br></pre></td></tr></table></figure><p>npm run packager æ‰§è¡Œæ‰“åŒ…å‘½ä»¤</p><p>æ‰“åŒ…å®Œæ¯•, node_modulesåŒçº§ ä¼šç”Ÿæˆoutæ–‡ä»¶, ç‚¹å¼€exeåŒ…å°±æ˜¯æ‰“åŒ…å¥½ , å¯å®‰è£…åœ¨windowsç³»ç»Ÿä¸Š</p><p><img src="1016812-20241126150159760-814097958.png" alt="" /></p><h3 id="å››-è‡³æ­¤-exe-æ‰“åŒ…å·²å®Œæˆ-æ¥ä¸‹æ¥ä½¿ç”¨-inno-setupå·¥å…·ç”Ÿæˆå®‰è£…ç¨‹åºåŒ…"><a class="markdownIt-Anchor" href="#å››-è‡³æ­¤-exe-æ‰“åŒ…å·²å®Œæˆ-æ¥ä¸‹æ¥ä½¿ç”¨-inno-setupå·¥å…·ç”Ÿæˆå®‰è£…ç¨‹åºåŒ…"></a> å››.Â è‡³æ­¤ exe æ‰“åŒ…å·²å®Œæˆ , æ¥ä¸‹æ¥ä½¿ç”¨ Inno Setupï¼ˆå·¥å…·ç”Ÿæˆå®‰è£…ç¨‹åºåŒ…)</h3><p>åœ¨Inno Setup é‡Œé¢æ­å»ºä¸€ä¸ªè„šæœ¬, é€šè¿‡è„šæœ¬ç¼–è¾‘å®‰è£…ç¨‹åºçš„åç§°, ç‰ˆæœ¬. å¿«æ·é”®ç”Ÿæˆ, å®‰è£…ç›®å½•ç­‰, æ˜¯å¾ˆæœ‰å¿…è¦çš„, ç”Ÿæˆä¸€æ¬¡å,åç»­å¯ä»¥ä¸€ç›´æ²¿ç”¨ ,äºŒæ¬¡ä½¿ç”¨é€‰æ‹©ä¸Šä¸€æ¬¡åˆ›å»ºå¥½çš„è„šæœ¬, ä¸€é”®æ‰“åŒ…å³å¯</p><p><img src="1016812-20241126150223690-1845894402.png" alt="" /></p>]]></content>
    
    
    <summary type="html">Electronç³»åˆ— -- vueé¡¹ç›®æ‰“åŒ…æˆ.exeæ–‡ä»¶(é€šè¿‡å®˜æ–¹demoçš„æ–¹å¼)</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="VUE" scheme="http://www.formeasy.cc/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>VUEé¡¹ç›®æ‰“åŒ…Electron</title>
    <link href="http://www.formeasy.cc/2025/09/10/VUE/VUE%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85Electron/"/>
    <id>http://www.formeasy.cc/2025/09/10/VUE/VUE%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85Electron/</id>
    <published>2025-09-10T08:22:46.000Z</published>
    <updated>2025-09-10T08:35:56.608Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‡†å¤‡vueé¡¹ç›®"><a class="markdownIt-Anchor" href="#å‡†å¤‡vueé¡¹ç›®"></a> å‡†å¤‡VUEé¡¹ç›®</h2><p>å¯ä»¥åœ¨ä»¥ä¸‹æ–¹å¼é€‰ä¸€ç§ï¼š</p><ul><li>æ–°å»ºä¸€ä¸ªçº¯VUEé¡¹ç›®ï¼ˆé¡ºä¾¿è€ƒè™‘ä¸‹ç”¨ä»€ä¹ˆæ¨¡æ¿æ¥æ–°å»ºï¼‰</li><li>å·²æœ‰çš„ä¸€ä¸ªVUEé¡¹ç›®</li></ul><h2 id="æ–°å»ºé¡¹ç›®çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#æ–°å»ºé¡¹ç›®çš„è¿‡ç¨‹"></a> æ–°å»ºé¡¹ç›®çš„è¿‡ç¨‹</h2><p>1.åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ vue add electron-builderã€‚</p><p>2.è¿è¡Œ npm run electron:serve å³å®Œæˆã€‚</p><h2 id="å·²æœ‰é¡¹ç›®çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#å·²æœ‰é¡¹ç›®çš„è¿‡ç¨‹"></a> å·²æœ‰é¡¹ç›®çš„è¿‡ç¨‹</h2><p>1.VUEé¡¹ç›®çš„configï¼Œæ”¹ä¸€ä¸‹ã€‚æœ‰çš„æ˜¯æ ¹ç›®å½•çš„vue.config.jsï¼Œæœ‰çš„æ˜¯config/index.jsï¼ŒæŠŠbuild-&gt;assetsPublicPathçš„å€¼&quot;/â€œæ”¹ä¸ºâ€./&quot;</p><p>2.VUEé¡¹ç›®buildä¸€ä¸‹:npm run build</p><p>3.dist ç›®å½•åŠ ä¸Šelectron.jsã€package.jsonä¸¤ä¸ªæ–‡ä»¶ï¼š</p><p>electron.js :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">    app,</span><br><span class="line">    <span class="title class_">BrowserWindow</span>,</span><br><span class="line">    ipcMain,</span><br><span class="line">    <span class="title class_">Tray</span></span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>); <span class="comment">//å¼•å…¥electron</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line">app.<span class="property">commandLine</span>.<span class="title function_">appendSwitch</span>(<span class="string">&quot;--disable-http-cache&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> canQuit=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mainWin;</span><br><span class="line"><span class="keyword">let</span> windowIco=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(process.<span class="property">platform</span>==<span class="string">&#x27;darwin&#x27;</span>)&#123;</span><br><span class="line">    windowIco=path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./resources/kefu_mac.icns&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(windowIco)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> windowConfig = &#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">minWidth</span>:<span class="number">800</span>,</span><br><span class="line">    <span class="attr">minHeight</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">icon</span>: windowIco,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">        <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">contextIsolation</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;preload.js&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;; <span class="comment">//çª—å£é…ç½®ç¨‹åºè¿è¡Œçª—å£çš„å¤§å°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    mainWin = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(windowConfig); <span class="comment">//åˆ›å»ºä¸€ä¸ªçª—å£</span></span><br><span class="line">    <span class="comment">//mainWin.loadURL(`file://$&#123;__dirname&#125;/index.html`); </span></span><br><span class="line">    mainWin.<span class="title function_">loadURL</span>(<span class="string">&#x27;http://127.0.0.1:10089/&#x27;</span>)</span><br><span class="line">    <span class="comment">//mainWin.webContents.openDevTools(); //å¼€å¯è°ƒè¯•å·¥å…·</span></span><br><span class="line">    mainWin.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(canQuit)&#123;<span class="keyword">return</span>;&#125;</span><br><span class="line">        mainWin.<span class="title function_">hide</span>();</span><br><span class="line">        e.<span class="title function_">preventDefault</span>()</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    tray = <span class="keyword">new</span> <span class="title class_">Tray</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./resources/macTrayTwoTemplate.png&#x27;</span>))</span><br><span class="line">    <span class="title function_">createWindow</span>();</span><br><span class="line">    tray.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(mainWin != <span class="literal">null</span>)&#123;</span><br><span class="line">            mainWin.<span class="title function_">show</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) &#123;</span><br><span class="line">        app.<span class="title function_">quit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (mainWin == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="title function_">createWindow</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        mainWin.<span class="title function_">show</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;before-quit&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    canQuit=<span class="literal">true</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ipcMain.<span class="title function_">on</span>(<span class="string">&#x27;openNewWindow&#x27;</span>,<span class="function">(<span class="params">event,data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> win=<span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;<span class="attr">width</span>:<span class="number">500</span>,<span class="attr">height</span>:<span class="number">500</span>&#125;);</span><br><span class="line">    win.<span class="title function_">loadURL</span>(data.<span class="property">url</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ipcMain.<span class="title function_">on</span>(<span class="string">&#x27;setBadgeCount&#x27;</span>,<span class="function">(<span class="params">event,data</span>)=&gt;</span>&#123;</span><br><span class="line">    app.<span class="title function_">setBadgeCount</span>(data.<span class="property">count</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// simple web server</span></span><br><span class="line"><span class="keyword">const</span> httpServer=<span class="built_in">require</span>(<span class="string">&#x27;http-server&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> webRoot=path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(webRoot)</span><br><span class="line"><span class="keyword">let</span> op=&#123;</span><br><span class="line">    <span class="attr">root</span>: webRoot</span><br><span class="line">&#125;</span><br><span class="line">httpServer.<span class="title function_">createServer</span>(op).<span class="title function_">listen</span>(<span class="number">10089</span>);</span><br></pre></td></tr></table></figure><p>å…¶åŸç†æ˜¯å†…éƒ¨å¯åŠ¨ä¸€ä¸ªnodejsçš„httpâˆ’serverï¼Œä¾›electronè®¿é—®ã€‚</p><p>package.json :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;zhanxiong-kefu&quot;</span>,</span><br><span class="line">  <span class="string">&quot;productName&quot;</span>: <span class="string">&quot;æˆ˜é›„å®¢æœ&quot;</span>,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;Sinco.Zou&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;electron.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;Zhan Xiong Service&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;pack&quot;</span>: <span class="string">&quot;electron-builder --dir&quot;</span>,</span><br><span class="line">    <span class="string">&quot;dist&quot;</span>: <span class="string">&quot;electron-builder&quot;</span>,</span><br><span class="line">    <span class="string">&quot;postinstall&quot;</span>: <span class="string">&quot;electron-builder install-app-deps&quot;</span>,</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;electron-forge start&quot;</span>,</span><br><span class="line">    <span class="string">&quot;package&quot;</span>: <span class="string">&quot;electron-forge package&quot;</span>,</span><br><span class="line">    <span class="string">&quot;make&quot;</span>: <span class="string">&quot;electron-forge make&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;electronVersion&quot;</span>: <span class="string">&quot;1.8.4&quot;</span>,</span><br><span class="line">    <span class="string">&quot;win&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;requestedExecutionLevel&quot;</span>: <span class="string">&quot;highestAvailable&quot;</span>,</span><br><span class="line">      <span class="string">&quot;target&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;target&quot;</span>: <span class="string">&quot;nsis&quot;</span>,</span><br><span class="line">          <span class="string">&quot;arch&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;x64&quot;</span></span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;appId&quot;</span>: <span class="string">&quot;com.zhanxiaong.pckefu&quot;</span>,</span><br><span class="line">    <span class="string">&quot;artifactName&quot;</span>: <span class="string">&quot;cang-versionâˆ’&#123;arch&#125;.$&#123;ext&#125;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;nsis&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;artifactName&quot;</span>: <span class="string">&quot;cang-versionâˆ’&#123;arch&#125;.$&#123;ext&#125;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extraResources&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;from&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;to&quot;</span>: <span class="string">&quot;app-server&quot;</span>,</span><br><span class="line">        <span class="string">&quot;filter&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;**/*&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;publish&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;provider&quot;</span>: <span class="string">&quot;generic&quot;</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;cang&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;config&quot;</span>: <span class="string">&quot;^3.3.7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;core-js&quot;</span>: <span class="string">&quot;^2.4.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;electron-package&quot;</span>: <span class="string">&quot;^0.1.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;electron-squirrel-startup&quot;</span>: <span class="string">&quot;^1.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;electron-updater&quot;</span>: <span class="string">&quot;^4.6.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;fs-extra&quot;</span>: <span class="string">&quot;^4.0.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;get&quot;</span>: <span class="string">&quot;^1.4.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;http-server&quot;</span>: <span class="string">&quot;^14.1.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;install.js&quot;</span>: <span class="string">&quot;^1.0.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;moment&quot;</span>: <span class="string">&quot;^2.18.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;moment-es6&quot;</span>: <span class="string">&quot;^1.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;npm&quot;</span>: <span class="string">&quot;^8.10.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;registry&quot;</span>: <span class="string">&quot;^0.3.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@electron-forge/cli&quot;</span>: <span class="string">&quot;^6.0.0-beta.63&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@electron-forge/maker-deb&quot;</span>: <span class="string">&quot;^6.0.0-beta.63&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@electron-forge/maker-rpm&quot;</span>: <span class="string">&quot;^6.0.0-beta.63&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@electron-forge/maker-squirrel&quot;</span>: <span class="string">&quot;^6.0.0-beta.63&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@electron-forge/maker-zip&quot;</span>: <span class="string">&quot;^6.0.0-beta.63&quot;</span>,</span><br><span class="line">    <span class="string">&quot;electron&quot;</span>: <span class="string">&quot;18.2.4&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;forge&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;packagerConfig&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;./resources/kefu_mac.icns&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;makers&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@electron-forge/maker-squirrel&quot;</span>,</span><br><span class="line">          <span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;cang&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@electron-forge/maker-zip&quot;</span>,</span><br><span class="line">          <span class="string">&quot;platforms&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;darwin&quot;</span></span><br><span class="line">          ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@electron-forge/maker-deb&quot;</span>,</span><br><span class="line">          <span class="string">&quot;config&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;@electron-forge/maker-rpm&quot;</span>,</span><br><span class="line">          <span class="string">&quot;config&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.åˆ‡åˆ°distç›®å½•ä¸‹ï¼Œnpm installï¼Œä¸è¦ç”¨cnpmï¼Œå„ç§è«åå…¶å¦™çš„é—®é¢˜ï¼Œç”¨yarnä¹Ÿè®¸æ²¡é—®é¢˜ã€‚</p><p>5.åœ¨distç›®å½• electron .è¿è¡Œæµ‹è¯•ï¼Œå¦‚æœæœ‰JSæŠ¥é”™ï¼Œå°è¯•æŠŠwebpackprod.conf.jsçš„compressæ³¨é‡Šæ‰å†è¯•ã€‚</p><h2 id="æ‰“åŒ…"><a class="markdownIt-Anchor" href="#æ‰“åŒ…"></a> æ‰“åŒ…</h2><p>æ­¤æ­¥éª¤åªé€‚åˆå·²æœ‰é¡¹ç›®çš„è¿‡ç¨‹ï¼Œæ–°å»ºé¡¹ç›®è‡ªè¡Œçœ‹package.jsoné‡Œé¢çš„å‘½ä»¤ã€‚</p><p>1.åˆ‡åˆ°distç›®å½•ï¼šnpm install --save-dev electron-forgeï¼ˆéœ€è¦å¥½é•¿æ—¶é—´ï¼‰</p><p>2.npm run make ä¸€èˆ¬å°±å¯ä»¥äº†ã€‚å¦‚æœéœ€è¦æ”¹ç¨‹åºçš„å›¾æ ‡ï¼Œåœ¨package.jsonçš„config-&gt;forge-&gt;packgerConfigï¼ŒåŠ ä¸Š&quot;icon&quot;: &quot;./res/xx.icns&quot;å³å¯</p><p>å³æ­¤å·²å®Œæˆã€‚</p>]]></content>
    
    
    <summary type="html">VUEé¡¹ç›®æ‰“åŒ…Electron</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="VUE" scheme="http://www.formeasy.cc/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨electronå°†Vueé¡¹ç›®æ‰“åŒ…ä¸ºæœ¬åœ°exeæ–‡ä»¶</title>
    <link href="http://www.formeasy.cc/2025/09/10/VUE/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8electron%E5%B0%86Vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E4%B8%BA%E6%9C%AC%E5%9C%B0exe%E6%96%87%E4%BB%B6/"/>
    <id>http://www.formeasy.cc/2025/09/10/VUE/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8electron%E5%B0%86Vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E4%B8%BA%E6%9C%AC%E5%9C%B0exe%E6%96%87%E4%BB%B6/</id>
    <published>2025-09-10T08:20:46.000Z</published>
    <updated>2025-09-10T08:28:56.830Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€-åˆ›å»ºvueå·¥ç¨‹"><a class="markdownIt-Anchor" href="#ä¸€-åˆ›å»ºvueå·¥ç¨‹"></a> ä¸€ã€åˆ›å»ºVueå·¥ç¨‹</h2><p>1ã€Node.jså’ŒVueçš„å®‰è£…</p><p>node.jså®‰è£…ånode -vå’Œnpm -vå¯çœ‹åˆ°ç‰ˆæœ¬å·</p><p>å®‰è£…vue<br />npm install -g vue-cli<br />vue -V å¯çœ‹åˆ°vueç‰ˆæœ¬å·</p><p>2ã€<code>vue create [project]</code>åˆ›å»ºVueå·¥ç¨‹ï¼Œç„¶åæ ¹æ®éœ€æ±‚ç¼–å†™Vueç»„ä»¶å³å¯ï¼Œå®Œæˆåä½¿ç”¨npm run serveå¯åŠ¨ç¨‹åºã€‚</p><h2 id="äºŒ-æ‹¿ä¸‹electron"><a class="markdownIt-Anchor" href="#äºŒ-æ‹¿ä¸‹electron"></a> äºŒã€æ‹¿ä¸‹Electron</h2><h3 id="1-ç®€ä»‹"><a class="markdownIt-Anchor" href="#1-ç®€ä»‹"></a> 1ã€ç®€ä»‹</h3><p><strong>Electron</strong>æ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œå¯å€ŸåŠ©JavaScriptã€HTMLå’ŒCSSæ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ã€‚å®ƒç»“åˆChromiumå’ŒNode.jsï¼Œå¼€å‘è€…èƒ½å¤ç”¨WebæŠ€æœ¯ã€‚ä¼—å¤šçŸ¥ååº”ç”¨å¦‚VS Codeã€Slackéƒ½ç”¨å®ƒå¼€å‘ï¼Œå…·å¤‡é«˜æ•ˆã€çµæ´»çš„ç‰¹ç‚¹ã€‚</p><p>å®ƒåœ¨Githubå®˜æ–¹ä»“åº“ä¸­å¯ä»¥æ‰¾åˆ°å„ä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘ä»¬å›½å†…æœ‰å¾ˆå‡ºè‰²çš„é•œåƒæºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://registry.npmmirror.com/binary.html?path=electron/28.1.0/</span><br></pre></td></tr></table></figure><p><strong>electron-builder</strong>æ˜¯ä¸€ä¸ªä¸ºElectronåº”ç”¨é‡èº«æ‰“é€ çš„æ‰“åŒ…å·¥å…·ã€‚å®ƒèƒ½æŠŠElectronåº”ç”¨æ‰“åŒ…æˆå¯åœ¨ä¸åŒæ“ä½œç³»ç»Ÿï¼ˆå¦‚Windowsã€Macã€Linuxï¼‰ä¸Šç›´æ¥å®‰è£…è¿è¡Œçš„æ ¼å¼ã€‚æ”¯æŒè‡ªåŠ¨æ›´æ–°ã€ç­¾åç­‰åŠŸèƒ½ï¼Œæ“ä½œç®€å•ä¸”åŠŸèƒ½å¼ºå¤§ï¼Œèƒ½å¤§å¹…æå‡åº”ç”¨å‘å¸ƒæ•ˆç‡ã€‚</p><p>æœ¬æ–‡é€‰æ‹©æœ€ç¨³å®šçš„ç‰ˆæœ¬è¿›è¡Œæ­é…å®‰è£…ï¼š</p><table><thead><tr><th>ä¾èµ–</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>electron</td><td>28.1.0</td></tr><tr><td>electron-builder</td><td>26.0.12</td></tr></tbody></table><h3 id="2-å®‰è£…electron"><a class="markdownIt-Anchor" href="#2-å®‰è£…electron"></a> 2ã€å®‰è£…electron</h3><p>2.1ã€è®¾ç½®é•œåƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> ELECTRON_MIRROR=https://npmmirror.com/mirrors/electron/</span><br></pre></td></tr></table></figure><p>2.2ã€å®‰è£…ä¾èµ–åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron@28.1.0 --save-dev --ignore-scripts</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸå¦‚ä¸‹ï¼š<br /><img src="855297e63ccc49ce911d25ba06e724d6.png" alt="" /></p><p>2.3ã€<a href="https://registry.npmmirror.com/binary.html?path=electron/28.1.0/">æ‰‹åŠ¨ä¸‹è½½ElectronäºŒè¿›åˆ¶æ–‡ä»¶</a></p><p><img src="36034decb16c490eb2b7167517161186.png" alt="" /></p><p>2.4ã€ç§»åŠ¨åˆ°ç›®å½•<code>music-score\node_modules\electron</code>ä¸‹</p><p><img src="42060022879e401cb23139539ff3e667.png" alt="" /></p><p>2.5ã€ä¿®æ”¹install.jsè„šæœ¬</p><p>ä¸ºå®‰è£…æ—¶ä¸‹è½½ä¾èµ–æˆåŠŸï¼Œéœ€è¦æ³¨é‡Šæ‰<code>downloadArtifact</code>æ–¹æ³•ï¼Œæ·»åŠ <code>extractFile(&quot;electron-v28.1.0-win32-x64.zip&quot;);</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; version &#125; = <span class="built_in">require</span>(<span class="string">&#x27;./package&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> childProcess = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&#x27;os&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> extract = <span class="built_in">require</span>(<span class="string">&#x27;extract-zip&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; downloadArtifact &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@electron/get&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">ELECTRON_SKIP_BINARY_DOWNLOAD</span>) &#123;</span><br><span class="line">  process.<span class="title function_">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> platformPath = <span class="title function_">getPlatformPath</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">isInstalled</span>()) &#123;</span><br><span class="line">  process.<span class="title function_">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> platform = process.<span class="property">env</span>.<span class="property">npm_config_platform</span> || process.<span class="property">platform</span>;</span><br><span class="line"><span class="keyword">let</span> arch = process.<span class="property">env</span>.<span class="property">npm_config_arch</span> || process.<span class="property">arch</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (platform === <span class="string">&#x27;darwin&#x27;</span> &amp;&amp; process.<span class="property">platform</span> === <span class="string">&#x27;darwin&#x27;</span> &amp;&amp; arch === <span class="string">&#x27;x64&#x27;</span> &amp;&amp;</span><br><span class="line">  process.<span class="property">env</span>.<span class="property">npm_config_arch</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">  <span class="comment">// When downloading for macOS ON macOS and we think we need x64 we should</span></span><br><span class="line">  <span class="comment">// check if we&#x27;re running under rosetta and download the arm64 version if appropriate</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> output = childProcess.<span class="title function_">execSync</span>(<span class="string">&#x27;sysctl -in sysctl.proc_translated&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (output.<span class="title function_">toString</span>().<span class="title function_">trim</span>() === <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">      arch = <span class="string">&#x27;arm64&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="comment">// Ignore failure</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">extractFile</span>(<span class="string">&quot;electron-v28.1.0-win32-x64.zip&quot;</span>);</span><br><span class="line"><span class="comment">// downloads if not cached</span></span><br><span class="line"><span class="comment">// downloadArtifact(&#123;</span></span><br><span class="line"><span class="comment">//   version,</span></span><br><span class="line"><span class="comment">//   artifactName: &#x27;electron&#x27;,</span></span><br><span class="line"><span class="comment">//   force: process.env.force_no_cache === &#x27;true&#x27;,</span></span><br><span class="line"><span class="comment">//   cacheRoot: process.env.electron_config_cache,</span></span><br><span class="line"><span class="comment">//   checksums: process.env.electron_use_remote_checksums ? undefined : require(&#x27;./checksums.json&#x27;),</span></span><br><span class="line"><span class="comment">//   platform,</span></span><br><span class="line"><span class="comment">//   arch</span></span><br><span class="line"><span class="comment">// &#125;).then(extractFile).catch(err =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   console.error(err.stack);</span></span><br><span class="line"><span class="comment">//   process.exit(1);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isInstalled</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (fs.<span class="title function_">readFileSync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>, <span class="string">&#x27;version&#x27;</span>), <span class="string">&#x27;utf-8&#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/^v/</span>, <span class="string">&#x27;&#x27;</span>) !== version) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (fs.<span class="title function_">readFileSync</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;path.txt&#x27;</span>), <span class="string">&#x27;utf-8&#x27;</span>) !== platformPath) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ignored) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> electronPath = process.<span class="property">env</span>.<span class="property">ELECTRON_OVERRIDE_DIST_PATH</span> || path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>, platformPath);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fs.<span class="title function_">existsSync</span>(electronPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// unzips and makes path.txt point at the correct executable</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">extractFile</span>(<span class="params">zipPath</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> distPath = process.<span class="property">env</span>.<span class="property">ELECTRON_OVERRIDE_DIST_PATH</span> || path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">extract</span>(zipPath, &#123; <span class="attr">dir</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>) &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// If the zip contains an &quot;electron.d.ts&quot; file,</span></span><br><span class="line">    <span class="comment">// move that up</span></span><br><span class="line">    <span class="keyword">const</span> srcTypeDefPath = path.<span class="title function_">join</span>(distPath, <span class="string">&#x27;electron.d.ts&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> targetTypeDefPath = path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;electron.d.ts&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> hasTypeDefinitions = fs.<span class="title function_">existsSync</span>(srcTypeDefPath);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hasTypeDefinitions) &#123;</span><br><span class="line">      fs.<span class="title function_">renameSync</span>(srcTypeDefPath, targetTypeDefPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write a &quot;path.txt&quot; file.</span></span><br><span class="line">    <span class="keyword">return</span> fs.<span class="property">promises</span>.<span class="title function_">writeFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;path.txt&#x27;</span>), platformPath);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPlatformPath</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> platform = process.<span class="property">env</span>.<span class="property">npm_config_platform</span> || os.<span class="title function_">platform</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (platform) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;mas&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;darwin&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;Electron.app/Contents/MacOS/Electron&#x27;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;freebsd&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;openbsd&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;linux&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;electron&#x27;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;win32&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;electron.exe&#x27;</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Electron builds are not available on platform: &#x27;</span> + platform);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.6ã€åœ¨electronç›®å½•ä¸‹ï¼Œé‡æ–°æ‰§è¡Œå®‰è£…å‘½ä»¤<code>node install.js</code></p><p>è¿™æ ·å°±ä¼šè‡ªåŠ¨è§£å‹åˆ°å½“å‰ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªdistç›®å½•ï¼Œè‡³æ­¤electronå®‰è£…å®Œæˆã€‚<br /><img src="567dec51895545898c5611692d62d17f.png" alt="" /></p><h3 id="3-å®‰è£…electron-builder"><a class="markdownIt-Anchor" href="#3-å®‰è£…electron-builder"></a> 3ã€å®‰è£…electron-builder</h3><p>3.1ã€è®¾ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> ELECTRON_BUILDER_BINARIES_MIRROR=https://npmmirror.com/mirrors/electron-builder-binaries/</span><br></pre></td></tr></table></figure><p>3.2ã€å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-builder@26.0.12 --save-dev</span><br></pre></td></tr></table></figure><p><img src="b694e0a5a92c4116886aa62b3691700a.png" alt="" /></p><h3 id="4-æµ‹è¯•"><a class="markdownIt-Anchor" href="#4-æµ‹è¯•"></a> 4ã€æµ‹è¯•</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºtest-electron.jsï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Electronç‰ˆæœ¬:&#x27;</span>, process.<span class="property">versions</span>.<span class="property">electron</span>)</span><br><span class="line">app.<span class="title function_">quit</span>()</span><br></pre></td></tr></table></figure><p>ç»ˆç«¯æ‰§è¡Œ<code>npx electron ./src/test-electron.js</code><br /><img src="571b482f1d25467292437ebfec1a7691.png" alt="" /></p><p>æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p><h2 id="ä¸‰-é…ç½®vueç¨‹åº"><a class="markdownIt-Anchor" href="#ä¸‰-é…ç½®vueç¨‹åº"></a> ä¸‰ã€é…ç½®Vueç¨‹åº</h2><h3 id="31-vueconfigjs"><a class="markdownIt-Anchor" href="#31-vueconfigjs"></a> 3.1ã€vue.config.js</h3><p>éœ€è¦å®šä¹‰å…¬å…±è·¯å¾„å’Œè¾“å‡ºç›®å½•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;dist&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="32-packagejson"><a class="markdownIt-Anchor" href="#32-packagejson"></a> 3.2ã€package.json</h3><p>æœ€ä¸»è¦çš„å°±æ˜¯buildé”®å±æ€§ï¼Œå®šä¹‰äº†è½¯ä»¶çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;music-score&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;use five hours to convert web to app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron-main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;duzhenhua&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;appId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.dzh.musicscore&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;productName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MusicScore&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;directories&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;output&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;win&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;portable&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public/icon.ico&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;dist/**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;electron-main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;package.json&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;electronDownload&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;mirror&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://npmmirror.com/mirrors/electron/&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-cli-service lint&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;postinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node node_modules/electron/install.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;electron:build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron-builder&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron .&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@element-plus/icons-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;core-js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.8.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;element-plus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.9.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.2.13&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@babel/core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.12.16&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@babel/eslint-parser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.12.16&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@vue/cli-plugin-babel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;~5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@vue/cli-plugin-eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;~5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@vue/cli-service&quot;</span><span class="punctuation">:</span> <span class="string">&quot;~5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;electron&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^28.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;electron-builder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^26.0.12&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.32.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint-plugin-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.0.3&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;eslintConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;extends&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;plugin:vue/vue3-essential&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;eslint:recommended&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parserOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;parser&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@babel/eslint-parser&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;&gt; 1%&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;last 2 versions&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;not dead&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;not ie 11&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="33-electron-mainjs"><a class="markdownIt-Anchor" href="#33-electron-mainjs"></a> 3.3ã€electron-main.js</h3><p><img src="e92e28e0365e46d4a7d50ba52c8bd7e7.png" alt="" /></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º<code>electron-main.js</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// electron-main.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">1200</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="number">800</span>,</span><br><span class="line">        <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">            <span class="attr">nodeIntegration</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ è½½Vueæ„å»ºåçš„é¡µé¢</span></span><br><span class="line">    win.<span class="title function_">loadFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(createWindow)</span><br></pre></td></tr></table></figure><h2 id="å››-æ‰“åŒ…vueç¨‹åº"><a class="markdownIt-Anchor" href="#å››-æ‰“åŒ…vueç¨‹åº"></a> å››ã€æ‰“åŒ…Vueç¨‹åº</h2><h3 id="41-npm-run-build"><a class="markdownIt-Anchor" href="#41-npm-run-build"></a> 4.1ã€npm run build</h3><p>åœ¨æ ¹ç›®å½•æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼Œç„¶åä¼šåœ¨distç›®å½•ä¸­ç”Ÿæˆcssã€jså’Œhtmlæ–‡ä»¶ã€‚<br /><img src="f7a0db922ddb4f60b9eafedd0bde1df5.png" alt="" /><br />åœ¨èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€index.htmlæ–‡ä»¶ï¼Œå¦‚æœå¯ä»¥æ­£å¸¸åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºå°±è¯´æ˜ç¨‹åºæ²¡é—®é¢˜ã€‚</p><p><img src="05b93c1e3e354b338c9c0e7ce959000b.png" alt="" /></p><h3 id="42-npx-electron-builder-win-x64-configasarfalse"><a class="markdownIt-Anchor" href="#42-npx-electron-builder-win-x64-configasarfalse"></a> 4.2ã€npx electron-builder --win --x64 --config.asar=false</h3><p>åœ¨æ ¹ç›®å½•æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œ10sä¸åˆ°å°±å¯ä»¥æ‰“åŒ…å®Œæˆã€‚<br /><img src="a2d75e22565a4306aab27df600afbb8c.png" alt="" /></p><p>ä¼šåœ¨buildç›®å½•ä¸‹ç”Ÿæˆwin-unpackedç›®å½•ï¼Œå¦‚ä¸‹ï¼š<br />build/<br />â””â”€â”€ win-unpacked/<br />â”œâ”€â”€ music-score.exe<br />â””â”€â”€ resources/<br />â”œâ”€â”€ app.asar<br />â””â”€â”€ electron.asar</p><p>å…¶ä¸­music-score.exeæ˜¯æˆ‘ä»¬éœ€è¦çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œresourcesç›®å½•æ˜¯ä¾èµ–æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†win-unpackedå‹ç¼©ï¼Œå°±å¯ä»¥åœ¨ä»»ä½•è£…æœ‰Windowsç³»ç»Ÿçš„ç”µè„‘ä¸Šè§£å‹è¿è¡Œã€‚<br /><img src="1fd9decfc7474e61b3914f61a9913dfe.png" alt="" /></p>]]></content>
    
    
    <summary type="html">å¦‚ä½•ä½¿ç”¨electronå°†Vueé¡¹ç›®æ‰“åŒ…ä¸ºæœ¬åœ°exeæ–‡ä»¶</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="VUE" scheme="http://www.formeasy.cc/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>UEä¸­ä½¿ç”¨NDIæ’ä»¶è¯»å–Qtç¨‹åºæˆªå›¾</title>
    <link href="http://www.formeasy.cc/2025/09/09/UE/UE%E4%B8%AD%E4%BD%BF%E7%94%A8NDI%E6%8F%92%E4%BB%B6%E8%AF%BB%E5%8F%96Qt%E7%A8%8B%E5%BA%8F%E6%88%AA%E5%9B%BE/"/>
    <id>http://www.formeasy.cc/2025/09/09/UE/UE%E4%B8%AD%E4%BD%BF%E7%94%A8NDI%E6%8F%92%E4%BB%B6%E8%AF%BB%E5%8F%96Qt%E7%A8%8B%E5%BA%8F%E6%88%AA%E5%9B%BE/</id>
    <published>2025-09-09T01:03:22.000Z</published>
    <updated>2025-09-09T02:31:57.130Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-ä¸‹è½½å’Œå®‰è£…ndiå·¥å…·å’Œsdk"><a class="markdownIt-Anchor" href="#ä¸€-ä¸‹è½½å’Œå®‰è£…ndiå·¥å…·å’Œsdk"></a> ä¸€ã€ä¸‹è½½å’Œå®‰è£…NDIå·¥å…·å’ŒSDK</h3><p>ä¸‹è½½å’Œå®‰è£…ï¼š<br />1.NDI 6 SDK ï¼ˆ<a href="https://ndi.video/for-developers/ndi-sdk/%EF%BC%89">https://ndi.video/for-developers/ndi-sdk/ï¼‰</a><br />2.NDI 6 Toolsï¼ˆé€‰è£…ï¼‰ ï¼ˆ<a href="https://ndi.video/%EF%BC%89">https://ndi.video/ï¼‰</a><br />3.NDI SDK for Unreal Engine v3.8 ï¼ˆ<a href="https://ndi.video/for-developers/ndi-unreal-engine-sdk/%EF%BC%89">https://ndi.video/for-developers/ndi-unreal-engine-sdk/ï¼‰</a></p><h3 id="äºŒ-qtç¨‹åºä½¿ç”¨ndiå‘é€è§†é¢‘æµ"><a class="markdownIt-Anchor" href="#äºŒ-qtç¨‹åºä½¿ç”¨ndiå‘é€è§†é¢‘æµ"></a> äºŒã€Qtç¨‹åºä½¿ç”¨NDIå‘é€è§†é¢‘æµ</h3><p>1.æ–°å¢SDKåˆ°å·¥ç¨‹ç›®å½•ä¸‹ \HDD\NDISDK</p><p><a href="http://2.XXX.pro">2.XXX.pro</a> æ–‡ä»¶åŠ å…¥ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#NDI</span><br><span class="line">INCLUDEPATH += $$PWD/NDISDK/include</span><br><span class="line">LIBS += -L$$PWD/NDISDK/lib -lProcessing.NDI.Lib.x64</span><br></pre></td></tr></table></figure><p>3.mainform.hæ–‡ä»¶ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Processing.NDI.Lib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">/*--------------NDI--------------------*/</span></span><br><span class="line">    NDIlib_send_instance_t m_pNDI_send; <span class="comment">// NDI å‘é€å®ä¾‹</span></span><br><span class="line">    QTimer* m_pTimer; <span class="comment">// å®šæ—¶å™¨ï¼Œç”¨äºå®šæœŸæ•è·å’Œå‘é€å¸§</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">captureAndSendFrame</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>4.mainform.cppæ–‡ä»¶ï¼š</p><p>ï¼ˆ1ï¼‰æ„é€ å‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*--------------NDI--------------------*/</span></span><br><span class="line"><span class="comment">// åˆå§‹åŒ– NDI åº“ï¼ˆç¡®ä¿åªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">NDIlib_initialize</span>()) &#123;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º NDI å‘é€å™¨</span></span><br><span class="line">NDIlib_send_create_t NDI_send_create_desc;</span><br><span class="line">NDI_send_create_desc.p_ndi_name = <span class="string">&quot;HDD1&quot;</span>; <span class="comment">// æµçš„åç§°ï¼Œåœ¨UEç«¯ä¼šçœ‹åˆ°è¿™ä¸ªåç§°</span></span><br><span class="line">NDI_send_create_desc.p_groups = <span class="literal">nullptr</span>;</span><br><span class="line">NDI_send_create_desc.clock_video = <span class="literal">false</span>;</span><br><span class="line">NDI_send_create_desc.clock_audio = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">m_pNDI_send = <span class="built_in">NDIlib_send_create</span>(&amp;NDI_send_create_desc);</span><br><span class="line"><span class="keyword">if</span> (!m_pNDI_send) &#123;</span><br><span class="line">   <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¾‹å¦‚æ¯ç§’ 30 æ¬¡ï¼ˆ30 FPSï¼‰</span></span><br><span class="line"></span><br><span class="line">m_pTimer = <span class="keyword">new</span> <span class="built_in">QTimer</span>(<span class="keyword">this</span>);</span><br><span class="line"><span class="built_in">connect</span>(m_pTimer, &amp;QTimer::timeout, <span class="keyword">this</span>, &amp;MainForm::captureAndSendFrame);</span><br><span class="line">m_pTimer-&gt;<span class="built_in">start</span>(<span class="number">33</span>); <span class="comment">// ~33ms ä¸€å¸§</span></span><br><span class="line"><span class="comment">/*---------end NDI---------*/</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ææ„å‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*--------NDI----------*/</span></span><br><span class="line">m_pTimer-&gt;<span class="built_in">stop</span>();</span><br><span class="line"><span class="keyword">delete</span> m_pTimer;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”€æ¯ NDI å‘é€å™¨</span></span><br><span class="line"><span class="keyword">if</span> (m_pNDI_send) &#123;</span><br><span class="line"><span class="built_in">NDIlib_send_destroy</span>(m_pNDI_send);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ€åæ¸…ç† NDI åº“</span></span><br><span class="line"><span class="built_in">NDIlib_destroy</span>();</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰captureAndSendFrameå‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* NDI å®šæ—¶å‘é€ */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainForm::captureAndSendFrame</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 1. æ•è·å½“å‰çª—å£çš„åƒç´ å›¾</span></span><br><span class="line">    QPixmap pixmap = <span class="keyword">this</span>-&gt;<span class="built_in">grab</span>(); <span class="comment">// æ•è·æ•´ä¸ªä¸»çª—å£</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å°† QPixmap è½¬æ¢ä¸º QImage (ç¡®ä¿æ ¼å¼æ˜¯ RGB æˆ– RGBA)</span></span><br><span class="line">    QImage image = pixmap.<span class="built_in">toImage</span>().<span class="built_in">convertToFormat</span>(QImage::Format_RGBA8888);</span><br><span class="line">    <span class="comment">//QImage image = pixmap.toImage().convertToFormat(QImage::Format_BGR888);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å¡«å…… NDI è§†é¢‘å¸§æ•°æ®ç»“æ„</span></span><br><span class="line">    NDIlib_video_frame_v2_t video_frame;</span><br><span class="line">    video_frame.xres = image.<span class="built_in">width</span>();</span><br><span class="line">    video_frame.yres = image.<span class="built_in">height</span>();</span><br><span class="line">    video_frame.FourCC = NDIlib_FourCC_type_RGBA; <span class="comment">// æ ¼å¼ä¸æˆ‘ä»¬è½¬æ¢çš„ QImage åŒ¹é…</span></span><br><span class="line">    <span class="comment">//video_frame.FourCC = NDIlib_FourCC_type_BGRA ;</span></span><br><span class="line">    video_frame.frame_rate_N = <span class="number">30000</span>;</span><br><span class="line">    video_frame.frame_rate_D = <span class="number">1001</span>;</span><br><span class="line">    video_frame.picture_aspect_ratio = <span class="built_in">static_cast</span>&lt;<span class="type">float</span>&gt;(image.<span class="built_in">width</span>()) / <span class="built_in">static_cast</span>&lt;<span class="type">float</span>&gt;(image.<span class="built_in">height</span>());</span><br><span class="line">    video_frame.frame_format_type = NDIlib_frame_format_type_progressive;</span><br><span class="line">    video_frame.timecode = NDIlib_send_timecode_synthesize;</span><br><span class="line">    video_frame.p_data = <span class="built_in">const_cast</span>&lt;<span class="type">uint8_t</span>*&gt;(image.<span class="built_in">bits</span>()); <span class="comment">// NDI ä¸ä¼šä¿®æ”¹æ•°æ®</span></span><br><span class="line">    video_frame.line_stride_in_bytes = image.<span class="built_in">bytesPerLine</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. å‘é€å¸§</span></span><br><span class="line">    <span class="built_in">NDIlib_send_send_video_v2</span>(m_pNDI_send, &amp;video_frame);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ‰§è¡Œåï¼Œå¯ç”¨NDI toolså·¥å…·æµ‹è¯•æ˜¯å¦æ­£å¸¸sendè§†é¢‘æµ</p><h3 id="ä¸‰-ä½¿ç”¨ue5æ¥æ”¶è§†é¢‘æµå¹¶æ’­æ”¾"><a class="markdownIt-Anchor" href="#ä¸‰-ä½¿ç”¨ue5æ¥æ”¶è§†é¢‘æµå¹¶æ’­æ”¾"></a> ä¸‰ã€ä½¿ç”¨UE5æ¥æ”¶è§†é¢‘æµå¹¶æ’­æ”¾</h3><p>1.æ·»åŠ NDI Receive Actoræ’­æ”¾å®ä½“</p><p><img src="2025-09-09_091607_852_1.png" alt="" /></p><p>2.æ·»åŠ NDI Media Receiverï¼Œç”¨æ¥æ¥æ”¶è§†é¢‘æµ</p><p><img src="2025-09-09_091722_794_2.png" alt="" /></p><p>3.è®¾ç½®åˆ›å»ºçš„NDIMediaReceiverï¼Œå°†Connectioné€‰æ‹©ä¸ºQtç¨‹åºä¸­çš„SourceNameã€MachineNameã€StreamName</p><p><img src="2025-09-09_092133_683_3.png" alt="" /></p><p>4.è®¾ç½®NDI Receive Actorçš„è§†é¢‘æºä¸ºåˆ›å»ºçš„NDIMediaReceiver</p><p><img src="2025-09-09_091856_260_4.png" alt="" /></p><p>ä»¥ä¸Šï¼Œå¯åœ¨UE5ä¸­æ­£å¸¸æ’­æ”¾Qtç¨‹åºæˆªå›¾</p>]]></content>
    
    
    <summary type="html">UEä¸­ä½¿ç”¨NDIæ’ä»¶è¯»å–Qtç¨‹åºæˆªå›¾</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="UE" scheme="http://www.formeasy.cc/tags/UE/"/>
    
  </entry>
  
  <entry>
    <title>UEä¸­ä½¿ç”¨NDIæ’ä»¶åŠ¨æ€è®¾ç½®SourceName</title>
    <link href="http://www.formeasy.cc/2025/09/08/UE/UE%E4%B8%AD%E4%BD%BF%E7%94%A8NDI%E6%8F%92%E4%BB%B6%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AESourceName/"/>
    <id>http://www.formeasy.cc/2025/09/08/UE/UE%E4%B8%AD%E4%BD%BF%E7%94%A8NDI%E6%8F%92%E4%BB%B6%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AESourceName/</id>
    <published>2025-09-08T09:03:22.000Z</published>
    <updated>2025-09-08T09:37:24.088Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-é…ç½®åŠ¨æ€iniç±»"><a class="markdownIt-Anchor" href="#ä¸€-é…ç½®åŠ¨æ€iniç±»"></a> ä¸€ã€é…ç½®åŠ¨æ€iniç±»</h3><p>InConfigBPLibrary.h</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CoreMinimal.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;GameFramework/Actor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;InConfigBPLibrary.generated.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">UCLASS</span>()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VISIONPROJECT_API</span> AInConfigBPLibrary : <span class="keyword">public</span> AActor</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">GENERATED_BODY</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// Sets default values for this actor&#x27;s properties</span></span><br><span class="line"><span class="built_in">AInConfigBPLibrary</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="comment">// Called when the game starts or when spawned</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">BeginPlay</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">// Called every frame</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span> <span class="keyword">override</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">UFUNCTION</span>(BlueprintCallable, Category = <span class="string">&quot;InConfig&quot;</span>)</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GetConfigNdiInfo</span><span class="params">(TArray&lt;FString&gt;&amp; configNDIInfo)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>InConfigBPLibrary.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;InConfigBPLibrary.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Sets default values</span></span><br><span class="line">AInConfigBPLibrary::<span class="built_in">AInConfigBPLibrary</span>()</span><br><span class="line">&#123;</span><br><span class="line"> <span class="comment">// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don&#x27;t need it.</span></span><br><span class="line">PrimaryActorTick.bCanEverTick = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called when the game starts or when spawned</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AInConfigBPLibrary::BeginPlay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">BeginPlay</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called every frame</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AInConfigBPLibrary::Tick</span><span class="params">(<span class="type">float</span> DeltaTime)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Super::<span class="built_in">Tick</span>(DeltaTime);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">AInConfigBPLibrary::GetConfigNdiInfo</span><span class="params">(TArray&lt;FString&gt;&amp; configNDIInfo)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">FString ConfigPath = FPaths::<span class="built_in">ConvertRelativePathToFull</span>(FPaths::<span class="built_in">ProjectDir</span>()) + <span class="string">&quot;Config/config.ini&quot;</span>;</span><br><span class="line">FString sourcename;</span><br><span class="line">GConfig-&gt;<span class="built_in">GetString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;NDI&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;sourcename&quot;</span>), sourcename, ConfigPath);</span><br><span class="line">configNDIInfo.<span class="built_in">Add</span>(sourcename);</span><br><span class="line">FString machinename;</span><br><span class="line">GConfig-&gt;<span class="built_in">GetString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;NDI&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;machinename&quot;</span>), machinename, ConfigPath);</span><br><span class="line">configNDIInfo.<span class="built_in">Add</span>(machinename);</span><br><span class="line">FString streamname;</span><br><span class="line">GConfig-&gt;<span class="built_in">GetString</span>(<span class="built_in">TEXT</span>(<span class="string">&quot;NDI&quot;</span>), <span class="built_in">TEXT</span>(<span class="string">&quot;streamname&quot;</span>), streamname, ConfigPath);</span><br><span class="line">configNDIInfo.<span class="built_in">Add</span>(streamname);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒ-é…ç½®iniæ–‡ä»¶"><a class="markdownIt-Anchor" href="#äºŒ-é…ç½®iniæ–‡ä»¶"></a> äºŒã€é…ç½®iniæ–‡ä»¶</h3><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºç›®å½•åŠæ–‡ä»¶ Config/config.ini</p><p>æ·»åŠ æºåã€æœºå™¨åå’Œæµåï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[NDI]</span><br><span class="line">sourcename=FORMEASY (HDD1)</span><br><span class="line">machinename=FORMEASY</span><br><span class="line">streamname=HDD1</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæ³¨æ„:sourcenameçš„è®¾å¤‡åå’Œæµåä¹‹é—´æœ‰ç©ºæ ¼</p><h3 id="ä¸‰-ndiioæ’ä»¶å¤åˆ¶"><a class="markdownIt-Anchor" href="#ä¸‰-ndiioæ’ä»¶å¤åˆ¶"></a> ä¸‰ã€NDIIOæ’ä»¶å¤åˆ¶</h3><p>å°†UE5ä¸­çš„pluginä¸‹NDIIOæ’ä»¶ç›®å½•å¤åˆ¶åˆ°é¡¹ç›®pluginä¸‹</p><h3 id="å››-æ·»åŠ å…³å¡è“å›¾æ–¹æ³•"><a class="markdownIt-Anchor" href="#å››-æ·»åŠ å…³å¡è“å›¾æ–¹æ³•"></a> å››ã€æ·»åŠ å…³å¡è“å›¾æ–¹æ³•</h3><p>æŒ‰ç…§ä¸‹å›¾ï¼Œåœ¨EventBeginPlayåæ·»åŠ NDIé…ç½®:</p><p><img src="20250908172055_97_53.png" alt="" /></p>]]></content>
    
    
    <summary type="html">UEä¸­ä½¿ç”¨NDIæ’ä»¶åŠ¨æ€è®¾ç½®SourceName</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="UE" scheme="http://www.formeasy.cc/tags/UE/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 3 é›†æˆ Swagger 3 å®Œæ•´æŒ‡å—</title>
    <link href="http://www.formeasy.cc/2025/09/08/Springboot/Spring%20Boot%203%20%E9%9B%86%E6%88%90%20Swagger%203%20%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/"/>
    <id>http://www.formeasy.cc/2025/09/08/Springboot/Spring%20Boot%203%20%E9%9B%86%E6%88%90%20Swagger%203%20%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97/</id>
    <published>2025-09-08T02:40:49.000Z</published>
    <updated>2025-09-08T02:59:37.076Z</updated>
    
    <content type="html"><![CDATA[<h2 id="spring-boot-3-é›†æˆ-swagger-3-å®Œæ•´æŒ‡å—"><a class="markdownIt-Anchor" href="#spring-boot-3-é›†æˆ-swagger-3-å®Œæ•´æŒ‡å—"></a> Spring Boot 3 é›†æˆ Swagger 3 å®Œæ•´æŒ‡å—</h2><p>Swaggerï¼ˆç°æ›´åä¸ºOpenAPIï¼‰æ˜¯ä¸€ä¸ªç”¨äºè®¾è®¡ã€æ„å»ºå’Œæ–‡æ¡£åŒ–APIçš„å¼ºå¤§å·¥å…·ã€‚åœ¨Spring Boot 3ä¸­é›†æˆSwagger 3ï¼ˆOpenAPI 3.0ï¼‰å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œæ–¹ä¾¿å‰åç«¯å¼€å‘äººå‘˜åä½œã€‚</p><h3 id="ä¸€-ä¾èµ–é…ç½®"><a class="markdownIt-Anchor" href="#ä¸€-ä¾èµ–é…ç½®"></a> ä¸€ã€ä¾èµ–é…ç½®</h3><p>é¦–å…ˆï¼Œåœ¨<code>pom.xml</code>ä¸­æ·»åŠ SpringDoc OpenAPIä¾èµ–ï¼ˆSwagger 3çš„å®˜æ–¹å®ç°ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SpringDoc OpenAPI æ ¸å¿ƒä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾èµ–åŒ…å«äº†ï¼š</p><ul><li>OpenAPI 3.0è§„èŒƒçš„å®ç°</li><li>Swagger UIç•Œé¢</li><li>ä¸Spring Boot 3çš„è‡ªåŠ¨é…ç½®</li></ul><h3 id="äºŒ-åŸºæœ¬é…ç½®"><a class="markdownIt-Anchor" href="#äºŒ-åŸºæœ¬é…ç½®"></a> äºŒã€åŸºæœ¬é…ç½®</h3><p>åˆ›å»ºSwaggeré…ç½®ç±»ï¼Œè‡ªå®šä¹‰APIæ–‡æ¡£ä¿¡æ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.OpenAPI;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Contact;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Info;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.License;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OpenAPI <span class="title function_">customOpenAPI</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OpenAPI</span>()</span><br><span class="line">                .info(<span class="keyword">new</span> <span class="title class_">Info</span>()</span><br><span class="line">                        .title(<span class="string">&quot;Spring Boot 3 API æ–‡æ¡£&quot;</span>)</span><br><span class="line">                        .version(<span class="string">&quot;1.0.0&quot;</span>)</span><br><span class="line">                        .description(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Spring Boot 3å’ŒSwagger 3æ„å»ºçš„APIæ–‡æ¡£ç¤ºä¾‹&quot;</span>)</span><br><span class="line">                        .termsOfService(<span class="string">&quot;https://example.com/terms&quot;</span>)</span><br><span class="line">                        .contact(<span class="keyword">new</span> <span class="title class_">Contact</span>()</span><br><span class="line">                                .name(<span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span>)</span><br><span class="line">                                .email(<span class="string">&quot;dev@example.com&quot;</span>)</span><br><span class="line">                                .url(<span class="string">&quot;https://example.com&quot;</span>))</span><br><span class="line">                        .license(<span class="keyword">new</span> <span class="title class_">License</span>()</span><br><span class="line">                                .name(<span class="string">&quot;Apache 2.0&quot;</span>)</span><br><span class="line">                                .url(<span class="string">&quot;https://www.apache.org/licenses/LICENSE-2.0.html&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸‰-å®æˆ˜ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#ä¸‰-å®æˆ˜ç¤ºä¾‹"></a> ä¸‰ã€å®æˆ˜ç¤ºä¾‹</h3><h4 id="1-åˆ›å»ºå®ä½“ç±»"><a class="markdownIt-Anchor" href="#1-åˆ›å»ºå®ä½“ç±»"></a> 1. åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;ç”¨æˆ·å®ä½“ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·ID&quot;, example = &quot;1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·å&quot;, example = &quot;å¼ ä¸‰&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·å¹´é¾„&quot;, example = &quot;25&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·é‚®ç®±&quot;, example = &quot;zhangsan@example.com&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºæ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#2-åˆ›å»ºæ§åˆ¶å™¨"></a> 2. åˆ›å»ºæ§åˆ¶å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.model.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Operation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Parameter;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.enums.ParameterIn;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/users&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;ç”¨æˆ·ç®¡ç†&quot;, description = &quot;ç”¨æˆ·CRUDæ“ä½œçš„APIæ¥å£&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ConcurrentHashMap&lt;Long, User&gt; users = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        users.put(<span class="number">1L</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1L</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="number">25</span>, <span class="string">&quot;zhangsan@example.com&quot;</span>));</span><br><span class="line">        users.put(<span class="number">2L</span>, <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">2L</span>, <span class="string">&quot;æå››&quot;</span>, <span class="number">30</span>, <span class="string">&quot;lisi@example.com&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;è·å–æ‰€æœ‰ç”¨æˆ·&quot;, description = &quot;è¿”å›ç³»ç»Ÿä¸­æ‰€æœ‰çš„ç”¨æˆ·åˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="meta">@ApiResponse(responseCode = &quot;200&quot;, description = &quot;æŸ¥è¯¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">            content = @Content(schema = @Schema(implementation = User.class)))</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getAllUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(users.values());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ ¹æ®IDè·å–ç”¨æˆ·&quot;, description = &quot;æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯&quot;)</span></span><br><span class="line">    <span class="meta">@ApiResponse(responseCode = &quot;200&quot;, description = &quot;æŸ¥è¯¢æˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="meta">@ApiResponse(responseCode = &quot;404&quot;, description = &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">getUserById</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(name = &quot;id&quot;, description = &quot;ç”¨æˆ·ID&quot;, in = ParameterIn.PATH, required = true)</span></span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> users.get(id);</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.notFound().build();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ›å»ºæ–°ç”¨æˆ·&quot;, description = &quot;æ·»åŠ æ–°ç”¨æˆ·åˆ°ç³»ç»Ÿä¸­&quot;)</span></span><br><span class="line">    <span class="meta">@ApiResponse(responseCode = &quot;201&quot;, description = &quot;ç”¨æˆ·åˆ›å»ºæˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">createUser</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(description = &quot;ç”¨æˆ·ä¿¡æ¯&quot;, required = true)</span></span></span><br><span class="line"><span class="params">            <span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">newId</span> <span class="operator">=</span> users.size() + <span class="number">1L</span>;</span><br><span class="line">        user.setId(newId);</span><br><span class="line">        users.put(newId, user);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(<span class="number">201</span>).body(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ›´æ–°ç”¨æˆ·ä¿¡æ¯&quot;, description = &quot;æ ¹æ®IDæ›´æ–°ç”¨æˆ·ä¿¡æ¯&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">updateUser</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(name = &quot;id&quot;, description = &quot;ç”¨æˆ·ID&quot;, in = ParameterIn.PATH, required = true)</span></span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable</span> Long id,</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(description = &quot;æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯&quot;, required = true)</span></span></span><br><span class="line"><span class="params">            <span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!users.containsKey(id)) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.notFound().build();</span><br><span class="line">        &#125;</span><br><span class="line">        user.setId(id);</span><br><span class="line">        users.put(id, user);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ é™¤ç”¨æˆ·&quot;, description = &quot;æ ¹æ®IDåˆ é™¤ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Void&gt; <span class="title function_">deleteUser</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(name = &quot;id&quot;, description = &quot;ç”¨æˆ·ID&quot;, in = ParameterIn.PATH, required = true)</span></span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!users.containsKey(id)) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.notFound().build();</span><br><span class="line">        &#125;</span><br><span class="line">        users.remove(id);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.noContent().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å››-å¸¸ç”¨swaggeræ³¨è§£è¯´æ˜"><a class="markdownIt-Anchor" href="#å››-å¸¸ç”¨swaggeræ³¨è§£è¯´æ˜"></a> å››ã€å¸¸ç”¨Swaggeræ³¨è§£è¯´æ˜</h3><table><thead><tr><th>æ³¨è§£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>@Tag</code></td><td>ç”¨äºæè¿°æ§åˆ¶å™¨ç±»çš„ä½œç”¨</td></tr><tr><td><code>@Operation</code></td><td>ç”¨äºæè¿°æ¥å£æ–¹æ³•çš„ä½œç”¨</td></tr><tr><td><code>@Parameter</code></td><td>ç”¨äºæè¿°æ–¹æ³•å‚æ•°</td></tr><tr><td><code>@Schema</code></td><td>ç”¨äºæè¿°å®ä½“ç±»æˆ–å±æ€§</td></tr><tr><td><code>@ApiResponse</code></td><td>ç”¨äºæè¿°æ¥å£çš„å“åº”ä¿¡æ¯</td></tr><tr><td><code>@RequestBody</code></td><td>ç”¨äºæè¿°è¯·æ±‚ä½“å‚æ•°</td></tr></tbody></table><h3 id="äº”-è®¿é—®swagger-ui"><a class="markdownIt-Anchor" href="#äº”-è®¿é—®swagger-ui"></a> äº”ã€è®¿é—®Swagger UI</h3><p>å¯åŠ¨Spring Bootåº”ç”¨åï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®Swagger UIç•Œé¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/swagger-ui/index.html</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç•Œé¢ä¸­ï¼Œä½ å¯ä»¥ï¼š</p><ol><li>æŸ¥çœ‹æ‰€æœ‰APIæ¥å£åˆ—è¡¨</li><li>æŸ¥çœ‹æ¯ä¸ªæ¥å£çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå‚æ•°ã€å“åº”ç­‰ï¼‰</li><li>åœ¨çº¿æµ‹è¯•APIæ¥å£</li><li>å¯¼å‡ºAPIæ–‡æ¡£ï¼ˆæ”¯æŒJSONå’ŒYAMLæ ¼å¼ï¼‰</li></ol><h3 id="å…­-ç”Ÿäº§ç¯å¢ƒé…ç½®"><a class="markdownIt-Anchor" href="#å…­-ç”Ÿäº§ç¯å¢ƒé…ç½®"></a> å…­ã€ç”Ÿäº§ç¯å¢ƒé…ç½®</h3><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å…³é—­Swaggeræ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application-prod.yml</span></span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨å¯åŠ¨æ—¶æŒ‡å®šç”Ÿäº§ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar your-app.jar --spring.profiles.active=prod</span><br></pre></td></tr></table></figure><h3 id="ä¸ƒ-å…¶å®ƒå‚æ•°é…ç½®æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#ä¸ƒ-å…¶å®ƒå‚æ•°é…ç½®æ¡ˆä¾‹"></a> ä¸ƒã€å…¶å®ƒå‚æ•°é…ç½®æ¡ˆä¾‹</h3><h4 id="1å¤šä¸ªè·¯å¾„å‚æ•°pathvariable"><a class="markdownIt-Anchor" href="#1å¤šä¸ªè·¯å¾„å‚æ•°pathvariable"></a> 1.å¤šä¸ªè·¯å¾„å‚æ•°ï¼ˆ@PathVariableï¼‰</h4><p>é€‚ç”¨äº URL è·¯å¾„ä¸­åŒ…å«å¤šä¸ªå ä½ç¬¦çš„æƒ…å†µï¼ˆå¦‚ /users/{userId}/orders/{orderId}ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/users/&#123;userId&#125;/orders/&#123;orderId&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Order&gt; <span class="title function_">getOrder</span><span class="params">(</span></span><br><span class="line"><span class="params">    // ç¬¬ä¸€ä¸ªè·¯å¾„å‚æ•°ï¼šç”¨æˆ·ID</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(name = &quot;userId&quot;, description = &quot;ç”¨æˆ·ID&quot;, in = ParameterIn.PATH, required = true)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@PathVariable</span> Long userId,</span></span><br><span class="line"><span class="params">    </span></span><br><span class="line"><span class="params">    // ç¬¬äºŒä¸ªè·¯å¾„å‚æ•°ï¼šè®¢å•ID</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(name = &quot;orderId&quot;, description = &quot;è®¢å•ID&quot;, in = ParameterIn.PATH, required = true)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@PathVariable</span> Long orderId</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘ï¼šæ ¹æ® userId å’Œ orderId æŸ¥è¯¢è®¢å•</span></span><br><span class="line">    <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderService.getOrder(userId, orderId);</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(order);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li>è·¯å¾„ä¸­ç”¨ {å‚æ•°å} å®šä¹‰å ä½ç¬¦ï¼Œæ–¹æ³•å‚æ•°é€šè¿‡ @PathVariable ä¾æ¬¡ç»‘å®šï¼›</li><li>å‚æ•°åéœ€ä¸è·¯å¾„å ä½ç¬¦ä¸€è‡´ï¼Œä¸ä¸€è‡´æ—¶éœ€æŒ‡å®š @PathVariable(â€œå ä½ç¬¦åç§°â€)ã€‚</li></ul><h4 id="2-å¤šä¸ªæŸ¥è¯¢å‚æ•°requestparam"><a class="markdownIt-Anchor" href="#2-å¤šä¸ªæŸ¥è¯¢å‚æ•°requestparam"></a> 2. å¤šä¸ªæŸ¥è¯¢å‚æ•°ï¼ˆ@RequestParamï¼‰</h4><p>é€‚ç”¨äº URL ä¸­ä»¥ ?key=value&amp;key2=value2 å½¢å¼ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚ /users?page=1&amp;size=10&amp;keyword=testï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Page&lt;User&gt;&gt; <span class="title function_">getUsers</span><span class="params">(</span></span><br><span class="line"><span class="params">    // åˆ†é¡µå‚æ•°ï¼šé¡µç ï¼ˆé»˜è®¤å€¼<span class="number">1</span>ï¼‰</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(name = &quot;page&quot;, description = &quot;é¡µç &quot;, in = ParameterIn.QUERY, required = false)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">    </span></span><br><span class="line"><span class="params">    // åˆ†é¡µå‚æ•°ï¼šæ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤å€¼<span class="number">10</span>ï¼‰</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(name = &quot;size&quot;, description = &quot;æ¯é¡µæ¡æ•°&quot;, in = ParameterIn.QUERY, required = false)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer size,</span></span><br><span class="line"><span class="params">    </span></span><br><span class="line"><span class="params">    // æŸ¥è¯¢å…³é”®è¯ï¼ˆéå¿…å¡«ï¼‰</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(name = &quot;keyword&quot;, description = &quot;æŸ¥è¯¢å…³é”®è¯&quot;, in = ParameterIn.QUERY, required = false)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@RequestParam(required = false)</span> String keyword</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘ï¼šåˆ†é¡µæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    Page&lt;User&gt; userPage = userService.findUsers(page, size, keyword);</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(userPage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li>ç”¨ @RequestParam ç»‘å®šæŸ¥è¯¢å‚æ•°ï¼Œrequired = false è¡¨ç¤ºéå¿…å¡«ï¼›</li><li>defaultValue å¯è®¾ç½®é»˜è®¤å€¼ï¼ˆå½“å‚æ•°æœªä¼ é€’æ—¶ä½¿ç”¨ï¼‰ã€‚</li></ul><p>éœ€ä½¿ç”¨ @RequestParam(â€œfileâ€) MultipartFile file æ¥æ”¶æ–‡ä»¶ï¼Œå…¶ä»–æ™®é€šå­—æ®µä»ç”¨ @RequestParam æˆ–å®ä½“ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(value = &quot;/user/upload&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">uploadForm</span><span class="params">(</span></span><br><span class="line"><span class="params">    // æ¥æ”¶æ–‡ä»¶</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(description = &quot;å¤´åƒæ–‡ä»¶&quot;)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@RequestParam(&quot;avatar&quot;)</span> MultipartFile avatar,</span></span><br><span class="line"><span class="params">    </span></span><br><span class="line"><span class="params">    // æ¥æ”¶æ™®é€šè¡¨å•å­—æ®µï¼ˆæˆ–ç”¨å®ä½“ç±»æ¥æ”¶ï¼‰</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(description = &quot;ç”¨æˆ·å&quot;)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@RequestParam</span> String username</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†æ–‡ä»¶å’Œè¡¨å•æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶ï¼š&quot;</span> + avatar.getOriginalFilename() + <span class="string">&quot;ï¼Œç”¨æˆ·ï¼š&quot;</span> + username;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li>å¸¦æ–‡ä»¶çš„è¡¨å•ï¼ˆmultipart/form-dataï¼‰ï¼Œéœ€ä½¿ç”¨ @RequestParam(â€œfileâ€) MultipartFile file æ¥æ”¶æ–‡ä»¶</li></ul><h4 id="4-å¤æ‚å‚æ•°å®ä½“ç±»æ¥æ”¶"><a class="markdownIt-Anchor" href="#4-å¤æ‚å‚æ•°å®ä½“ç±»æ¥æ”¶"></a> 4. å¤æ‚å‚æ•°ï¼ˆå®ä½“ç±»æ¥æ”¶ï¼‰</h4><p>å½“å‚æ•°è¾ƒå¤šï¼ˆå¦‚åˆ›å»ºç”¨æˆ·æ—¶éœ€è¦ usernameã€ageã€email ç­‰ï¼‰ï¼Œæ¨èç”¨å®ä½“ç±»ç»Ÿä¸€æ¥æ”¶ï¼ˆé€‚ç”¨äº POST/PUT ç­‰è¯·æ±‚çš„è¯·æ±‚ä½“ï¼‰ã€‚</p><p>1).å®šä¹‰å®ä½“ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span> <span class="comment">// Lombokæ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆgetter/setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDTO</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;ç”¨æˆ·å&quot;, required = true)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;å¹´é¾„&quot;, required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;é‚®ç®±&quot;, required = true)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2).åœ¨æ¥å£ä¸­ä½¿ç”¨å®ä½“ç±»æ¥æ”¶å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title function_">createUser</span><span class="params">(</span></span><br><span class="line"><span class="params">    // è¯·æ±‚ä½“å‚æ•°ï¼šç”¨<span class="meta">@RequestBody</span>ç»‘å®šå®ä½“ç±»</span></span><br><span class="line"><span class="params">    <span class="meta">@Parameter(description = &quot;ç”¨æˆ·ä¿¡æ¯&quot;)</span></span></span><br><span class="line"><span class="params">    <span class="meta">@RequestBody</span> <span class="meta">@Valid</span> UserDTO userDTO // <span class="meta">@Valid</span>ç”¨äºå‚æ•°æ ¡éªŒ</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘ï¼šåˆ›å»ºç”¨æˆ·</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.createUser(userDTO);</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED).body(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ul><li>ç”¨ @RequestBody å°†è¯·æ±‚ä½“ï¼ˆé€šå¸¸æ˜¯ JSONï¼‰è½¬æ¢ä¸ºå®ä½“ç±»å¯¹è±¡ï¼›</li><li>ç»“åˆ Swagger çš„ @ApiModelProperty æ³¨è§£ï¼Œå¯åœ¨æ–‡æ¡£ä¸­å±•ç¤ºæ¯ä¸ªå­—æ®µçš„è¯´æ˜ï¼›</li><li>@Valid é…åˆ javax.validation æ³¨è§£ï¼ˆå¦‚ @NotBlankï¼‰å¯å®ç°å‚æ•°æ ¡éªŒã€‚</li></ul><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h3><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å®Œæˆäº†Spring Boot 3ä¸Swagger 3çš„é›†æˆï¼Œå®ç°äº†APIæ–‡æ¡£çš„è‡ªåŠ¨ç”Ÿæˆå’Œåœ¨çº¿æµ‹è¯•åŠŸèƒ½ã€‚Swaggerä¸ä»…èƒ½æé«˜å›¢é˜Ÿåä½œæ•ˆç‡ï¼Œè¿˜èƒ½ä½œä¸ºAPIçš„æ´»æ–‡æ¡£ï¼Œéšç€ä»£ç çš„æ›´æ–°è€Œè‡ªåŠ¨æ›´æ–°ã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›ä¸€æ­¥å®šåˆ¶Swaggeré…ç½®ï¼Œå¦‚æ·»åŠ å…¨å±€å‚æ•°ã€é…ç½®APIåˆ†ç»„ã€è®¾ç½®å®‰å…¨è®¤è¯ç­‰ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚</p>]]></content>
    
    
    <summary type="html">Spring Boot 3 é›†æˆ Swagger 3 å®Œæ•´æŒ‡å—</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>æ­ç§˜Swaggerä¸OpenAPIé›†æˆçš„ç»ˆææ”»ç•¥</title>
    <link href="http://www.formeasy.cc/2025/09/07/Springboot/%E6%8F%AD%E7%A7%98Swagger%E4%B8%8EOpenAPI%E9%9B%86%E6%88%90%E7%9A%84%E7%BB%88%E6%9E%81%E6%94%BB%E7%95%A5/"/>
    <id>http://www.formeasy.cc/2025/09/07/Springboot/%E6%8F%AD%E7%A7%98Swagger%E4%B8%8EOpenAPI%E9%9B%86%E6%88%90%E7%9A%84%E7%BB%88%E6%9E%81%E6%94%BB%E7%95%A5/</id>
    <published>2025-09-07T07:52:12.000Z</published>
    <updated>2025-09-07T08:05:00.412Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>æ¼”ç¤ºç¯å¢ƒè¯´æ˜ï¼š</strong></p><ul><li>å¼€å‘å·¥å…·ï¼šIDEA 2021.3</li><li>JDKç‰ˆæœ¬ï¼š JDK 17ï¼ˆæ¨èä½¿ç”¨ JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå› ä¸º Spring Boot 3.x ç³»åˆ—è¦æ±‚ Java 17ï¼ŒSpring Boot 3.5.4 åŸºäº Spring Framework 6.x å’Œ Jakarta EE 9ï¼Œå®ƒä»¬éƒ½è¦æ±‚è‡³å°‘ JDK 17ã€‚ï¼‰</li><li>Spring Bootç‰ˆæœ¬ï¼š3.5.4ï¼ˆäº25å¹´7æœˆ24æ—¥å‘å¸ƒï¼‰</li><li>Mavenç‰ˆæœ¬ï¼š3.8.2 ï¼ˆæˆ–æ›´é«˜ï¼‰</li><li>Gradleï¼šï¼ˆå¦‚æœä½¿ç”¨ Gradle æ„å»ºå·¥å…·çš„è¯ï¼‰ï¼šæ¨èä½¿ç”¨ Gradle 7.5 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œç¡®ä¿ä¸ JDK 17 å…¼å®¹ã€‚</li><li>æ“ä½œç³»ç»Ÿï¼šWindows 11</li></ul></blockquote><h3 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> ğŸ“ å‰è¨€</h3><p>å“å‘€ï¼Œè¯´èµ·APIæ–‡æ¡£è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘å°±å¿ä¸ä½è¦åæ§½ä¸€ä¸‹ï¼ğŸ™„ ä½œä¸ºä¸€ä¸ªåœ¨ä»£ç ä¸–ç•Œé‡Œæ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„è€å¸æœºï¼Œæˆ‘è§è¿‡å¤ªå¤šå› ä¸ºAPIæ–‡æ¡£ä¸è§„èŒƒã€ä¸åŠæ—¶æ›´æ–°è€Œå¯¼è‡´çš„&quot;è¡€æ¡ˆ&quot;äº†ã€‚å‰ç«¯å°ä¼™ä¼´æ‹¿ç€è¿‡æ—¶çš„æ–‡æ¡£è°ƒæ¥å£ï¼Œåç«¯åŒå­¦å¿™ç€è§£é‡Š&quot;è¿™ä¸ªå‚æ•°å·²ç»æ”¹äº†&quot;ï¼Œæµ‹è¯•åŒå­¦æ›´æ˜¯ä¸€è„¸æ‡µé€¼åœ°é—®&quot;è¿™ä¸ªæ¥å£åˆ°åº•è¿”å›ä»€ä¹ˆæ•°æ®ï¼Ÿ&quot;ğŸ˜‚</p><p>ä¸è¿‡å‘¢ï¼Œéšç€SpringBoot 3.xçš„æ¨ªç©ºå‡ºä¸–ï¼Œç‰¹åˆ«æ˜¯å®ƒä¸OpenAPI 3.0çš„å®Œç¾èåˆï¼Œè¿™äº›ç—›ç‚¹ç»ˆäºæœ‰äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼ä»Šå¤©æˆ‘å°±æ¥è·Ÿå¤§å®¶å¥½å¥½èŠèŠè¿™ä¸ªè¯é¢˜ï¼Œä¿è¯è®©ä½ çœ‹å®Œä¹‹åç›´å‘¼&quot;åŸæ¥å¦‚æ­¤&quot;ï¼ğŸ’¡</p><h3 id="springboot-3xä¸openapiçš„é‚‚é€…"><a class="markdownIt-Anchor" href="#springboot-3xä¸openapiçš„é‚‚é€…"></a> ğŸ¯ SpringBoot 3.xä¸OpenAPIçš„é‚‚é€…</h3><p>è¯´åˆ°SpringBoot 3.xï¼Œé‚£å¯çœŸæ˜¯ä¸ªé‡Œç¨‹ç¢‘å¼çš„ç‰ˆæœ¬å•Šï¼ğŸ˜ å®ƒä¸ä»…æ‹¥æŠ±äº†Java 17çš„æ–°ç‰¹æ€§ï¼Œè¿˜å¯¹æ•´ä¸ªç”Ÿæ€è¿›è¡Œäº†å¤§å¹…åº¦çš„å‡çº§ã€‚è€ŒOpenAPIï¼ˆä»¥å‰å«Swagger Specificationï¼‰ä½œä¸ºAPIæ–‡æ¡£çš„æ ‡å‡†è§„èŒƒï¼Œåœ¨3.0ç‰ˆæœ¬ä¸­ä¹Ÿæ˜¯ç„•ç„¶ä¸€æ–°ï¼</p><h4 id="ä»€ä¹ˆæ˜¯openapi-30"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯openapi-30"></a> ğŸ” ä»€ä¹ˆæ˜¯OpenAPI 3.0ï¼Ÿ</h4><p>OpenAPI 3.0æ˜¯ä¸€ä¸ªç”¨äºæè¿°REST APIçš„è§„èŒƒæ ‡å‡†ï¼Œå®ƒå°±åƒæ˜¯ç»™ä½ çš„APIå†™äº†ä¸€ä»½&quot;èº«ä»½è¯&quot;ğŸ“‹ã€‚é€šè¿‡è¿™ä¸ªè§„èŒƒï¼Œä½ å¯ä»¥æ¸…æ™°åœ°æè¿°ï¼š</p><ul><li>APIçš„åŸºæœ¬ä¿¡æ¯ï¼ˆç‰ˆæœ¬ã€æè¿°ç­‰ï¼‰</li><li>æ¥å£è·¯å¾„å’ŒHTTPæ–¹æ³•</li><li>è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼</li><li>è®¤è¯æ–¹å¼</li><li>é”™è¯¯ç å®šä¹‰</li></ul><p>ç›¸æ¯”äºOpenAPI 2.0ï¼ˆSwagger 2.0ï¼‰ï¼Œ3.0ç‰ˆæœ¬å¸¦æ¥äº†ä¸å°‘å¥½ä¸œè¥¿ï¼š</p><ul><li><strong>æ›´çµæ´»çš„æ•°æ®ç±»å‹æ”¯æŒ</strong>ï¼šæ”¯æŒ<code>oneOf</code>ã€<code>anyOf</code>ã€<code>allOf</code>ç­‰å¤æ‚ç±»å‹ç»„åˆ</li><li><strong>æ›´å¼ºå¤§çš„è®¤è¯æœºåˆ¶</strong>ï¼šæ”¯æŒOAuth 2.0ã€OpenID Connectç­‰ç°ä»£è®¤è¯æ–¹å¼</li><li><strong>ç»„ä»¶å¤ç”¨</strong>ï¼šé€šè¿‡<code>components</code>å®ç°æ›´å¥½çš„å¤ç”¨æ€§</li><li><strong>å›è°ƒæ”¯æŒ</strong>ï¼šæ”¯æŒå¼‚æ­¥APIçš„å›è°ƒå®šä¹‰</li></ul><h4 id="springboot-3xçš„å˜åŒ–"><a class="markdownIt-Anchor" href="#springboot-3xçš„å˜åŒ–"></a> ğŸ¤ SpringBoot 3.xçš„å˜åŒ–</h4><p>SpringBoot 3.xæœ€å¤§çš„å˜åŒ–å°±æ˜¯å…¨é¢æ‹¥æŠ±äº†Jakarta EEï¼ğŸ‰ è¿™æ„å‘€ç€ï¼š</p><ul><li>åŒ…åä»<code>javax.*</code>å˜æˆäº†<code>jakarta.*</code></li><li>æœ€ä½Javaç‰ˆæœ¬è¦æ±‚æå‡åˆ°17</li><li>åŸç”Ÿæ”¯æŒGraalVM</li><li>æ›´å¥½çš„å¯è§‚æµ‹æ€§æ”¯æŒ</li></ul><p>è¿™äº›å˜åŒ–å¯¹æˆ‘ä»¬é›†æˆOpenAPIæœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿåˆ«æ€¥ï¼Œå’±ä»¬æ…¢æ…¢é“æ¥ï¼</p><h3 id="ç¯å¢ƒæ­å»ºè®©ä¸€åˆ‡å‡†å¤‡å°±ç»ª"><a class="markdownIt-Anchor" href="#ç¯å¢ƒæ­å»ºè®©ä¸€åˆ‡å‡†å¤‡å°±ç»ª"></a> ğŸ”§ ç¯å¢ƒæ­å»ºï¼šè®©ä¸€åˆ‡å‡†å¤‡å°±ç»ª</h3><p>ä¿—è¯è¯´&quot;å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨&quot;ï¼åœ¨å¼€å§‹æˆ‘ä»¬çš„OpenAPIä¹‹æ—…ä¹‹å‰ï¼Œå…ˆæŠŠç¯å¢ƒæ­å»ºå¥½ã€‚ğŸ˜</p><h4 id="é¡¹ç›®ä¾èµ–é…ç½®"><a class="markdownIt-Anchor" href="#é¡¹ç›®ä¾èµ–é…ç½®"></a> ğŸ“¦ é¡¹ç›®ä¾èµ–é…ç½®</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>pom.xml</code>ä¸­æ·»åŠ ç›¸å…³ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 </span></span></span><br><span class="line"><span class="string"><span class="tag">         http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot3-openapi-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>SpringBoot 3.x OpenAPI Demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>SpringBoot 3.x é›†æˆ OpenAPI ç¤ºä¾‹é¡¹ç›®<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springdoc.version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">springdoc.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot Web Starter --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot Validation --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- SpringDoc OpenAPI UI --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springdoc.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot Test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™é‡Œï¼Œå¯èƒ½æœ‰å°ä¼™ä¼´è¦é—®äº†ï¼š&quot;è¯¶ï¼Œæ€ä¹ˆæ²¡æœ‰çœ‹åˆ°<code>springfox</code>çš„ä¾èµ–å•Šï¼Ÿ&quot;ğŸ¤” å“ˆå“ˆï¼Œè¿™å°±æ˜¯SpringBoot 3.xæ—¶ä»£çš„å˜åŒ–å•¦ï¼ç”±äºSpringFoxé¡¹ç›®å·²ç»å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œå¹¶ä¸”ä¸å…¼å®¹SpringBoot 3.xçš„Jakartaå‘½åç©ºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©äº†æ›´æ´»è·ƒçš„<code>SpringDoc</code>é¡¹ç›®ï¼</p><h4 id="ï¸-åŸºç¡€é…ç½®"><a class="markdownIt-Anchor" href="#ï¸-åŸºç¡€é…ç½®"></a> âš™ï¸ åŸºç¡€é…ç½®</h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨<code>application.yml</code>ä¸­æ·»åŠ ä¸€äº›åŸºç¡€é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨åŸºç¡€é…ç½®</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/api</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">springboot3-openapi-demo</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SpringDoc OpenAPI é…ç½®</span></span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="comment"># æŒ‡å®šOpenAPI 3æ–‡æ¡£çš„è·¯å¾„ï¼Œé»˜è®¤ä¸º/v3/api-docs</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/v3/api-docs</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Swagger UIè·¯å¾„ï¼Œé»˜è®¤ä¸º/swagger-ui.html</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/swagger-ui.html</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># è®¾ç½®UIç•Œé¢çš„ä¸€äº›é…ç½®</span></span><br><span class="line">    <span class="attr">config-url:</span> <span class="string">/v3/api-docs/swagger-config</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/v3/api-docs</span></span><br><span class="line">    <span class="comment"># æ”¯æŒå°è¯•è°ƒç”¨</span></span><br><span class="line">    <span class="attr">try-it-out-enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæ“ä½œID</span></span><br><span class="line">    <span class="attr">display-operation-id:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºè¯·æ±‚æŒç»­æ—¶é—´</span></span><br><span class="line">    <span class="attr">display-request-duration:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># ç¼“å­˜æ—¶é—´è®¾ç½®ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">disabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦æ˜¾ç¤ºactuatoræ¥å£</span></span><br><span class="line">  <span class="attr">show-actuator:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—é…ç½®</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.example:</span> <span class="string">DEBUG</span></span><br><span class="line">    <span class="attr">org.springframework.web:</span> <span class="string">DEBUG</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">&#x27;%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé…ç½®å¯æ˜¯æˆ‘ç²¾å¿ƒè°ƒè¯•å‡ºæ¥çš„ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼ğŸ¨ æ¯”å¦‚<code>try-it-out-enabled: true</code>å°±èƒ½è®©ä½ ç›´æ¥åœ¨æ–‡æ¡£é¡µé¢æµ‹è¯•APIï¼Œç®€ç›´ä¸è¦å¤ªçˆ½ï¼</p><h3 id="openapi-30è§„èŒƒè¯¦è§£"><a class="markdownIt-Anchor" href="#openapi-30è§„èŒƒè¯¦è§£"></a> ğŸ“– OpenAPI 3.0è§„èŒƒè¯¦è§£</h3><p>åœ¨åŠ¨æ‰‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¥½å¥½äº†è§£ä¸€ä¸‹OpenAPI 3.0çš„è§„èŒƒç»“æ„ã€‚æ¯•ç«Ÿï¼ŒçŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†å˜›ï¼ğŸ˜„</p><h4 id="ï¸-openapiæ–‡æ¡£ç»“æ„"><a class="markdownIt-Anchor" href="#ï¸-openapiæ–‡æ¡£ç»“æ„"></a> ğŸ—ï¸ OpenAPIæ–‡æ¡£ç»“æ„</h4><p>ä¸€ä¸ªå®Œæ•´çš„OpenAPI 3.0æ–‡æ¡£ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™æ˜¯ä¸€ä¸ªOpenAPIæ–‡æ¡£çš„åŸºæœ¬ç»“æ„ç¤ºä¾‹</span></span><br><span class="line"><span class="attr">openapi:</span> <span class="number">3.0</span><span class="number">.3</span></span><br><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&quot;æˆ‘çš„ç‰›é€¼API&quot;</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªè¶…çº§å‰å®³çš„APIæ–‡æ¡£&quot;</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line">  <span class="attr">contact:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">&quot;APIæ”¯æŒå›¢é˜Ÿ&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">&quot;support@example.com&quot;</span></span><br><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">&quot;https://api.example.com/v1&quot;</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒ&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">&quot;https://test-api.example.com/v1&quot;</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;æµ‹è¯•ç¯å¢ƒ&quot;</span></span><br><span class="line"><span class="attr">paths:</span></span><br><span class="line">  <span class="string">/users:</span></span><br><span class="line">    <span class="attr">get:</span></span><br><span class="line">      <span class="attr">summary:</span> <span class="string">&quot;è·å–ç”¨æˆ·åˆ—è¡¨&quot;</span></span><br><span class="line">      <span class="comment"># ...è¯¦ç»†å®šä¹‰</span></span><br><span class="line"><span class="attr">components:</span></span><br><span class="line">  <span class="attr">schemas:</span></span><br><span class="line">    <span class="attr">User:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">object</span></span><br><span class="line">      <span class="attr">properties:</span></span><br><span class="line">        <span class="attr">id:</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">integer</span></span><br><span class="line">        <span class="attr">name:</span></span><br><span class="line">          <span class="attr">type:</span> <span class="string">string</span></span><br></pre></td></tr></table></figure><h4 id="æ ¸å¿ƒæ¦‚å¿µè§£æ"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒæ¦‚å¿µè§£æ"></a> ğŸª æ ¸å¿ƒæ¦‚å¿µè§£æ</h4><h5 id="1ï¸âƒ£-infoå¯¹è±¡"><a class="markdownIt-Anchor" href="#1ï¸âƒ£-infoå¯¹è±¡"></a> 1ï¸âƒ£ Infoå¯¹è±¡</h5><p>è¿™å°±æ˜¯ä½ çš„APIçš„&quot;åç‰‡&quot;ï¼ŒåŒ…å«äº†æ ‡é¢˜ã€ç‰ˆæœ¬ã€æè¿°ç­‰åŸºæœ¬ä¿¡æ¯ã€‚</p><h5 id="2ï¸âƒ£-serverså¯¹è±¡"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-serverså¯¹è±¡"></a> 2ï¸âƒ£ Serverså¯¹è±¡</h5><p>å®šä¹‰APIæœåŠ¡å™¨çš„åœ°å€ï¼Œå¯ä»¥æœ‰å¤šä¸ªç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ã€‚</p><h5 id="3ï¸âƒ£-pathså¯¹è±¡"><a class="markdownIt-Anchor" href="#3ï¸âƒ£-pathså¯¹è±¡"></a> 3ï¸âƒ£ Pathså¯¹è±¡</h5><p>è¿™æ˜¯é‡å¤´æˆï¼å®šä¹‰äº†æ‰€æœ‰çš„APIè·¯å¾„å’Œæ“ä½œæ–¹æ³•ã€‚</p><h5 id="4ï¸âƒ£-componentså¯¹è±¡"><a class="markdownIt-Anchor" href="#4ï¸âƒ£-componentså¯¹è±¡"></a> 4ï¸âƒ£ Componentså¯¹è±¡</h5><p>è¿™æ˜¯å¤ç”¨çš„å®åº“ï¼Œå¯ä»¥å®šä¹‰é€šç”¨çš„æ•°æ®æ¨¡å‹ã€å“åº”ã€å‚æ•°ç­‰ã€‚</p><p>è¯´åˆ°è¿™é‡Œï¼Œæˆ‘æƒ³èµ·äº†åˆšå¼€å§‹å­¦OpenAPIçš„æ—¶å€™ï¼Œè¢«è¿™äº›æ¦‚å¿µç»•å¾—å¤´æ™•è½¬å‘çš„ğŸ˜µğŸ’«ã€‚ä¸è¿‡åˆ«æ‹…å¿ƒï¼Œå’±ä»¬é©¬ä¸Šå°±é€šè¿‡å®é™…ä»£ç æ¥ç†è§£è¿™äº›æ¦‚å¿µï¼</p><h3 id="springdoc-openapiçš„é›†æˆå®æˆ˜"><a class="markdownIt-Anchor" href="#springdoc-openapiçš„é›†æˆå®æˆ˜"></a> ğŸš€ SpringDoc OpenAPIçš„é›†æˆå®æˆ˜</h3><p>å¥½äº†ï¼Œç†è®ºçŸ¥è¯†é“ºå«å¤Ÿäº†ï¼Œæ˜¯æ—¶å€™æ’¸èµ·è¢–å­å¹²æ´»äº†ï¼ğŸ’ª è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†APIå¼€å§‹ã€‚</p><h4 id="åˆ›å»ºåŸºç¡€é…ç½®ç±»"><a class="markdownIt-Anchor" href="#åˆ›å»ºåŸºç¡€é…ç½®ç±»"></a> ğŸ¯ åˆ›å»ºåŸºç¡€é…ç½®ç±»</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªOpenAPIé…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.OpenAPI;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Contact;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.Info;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.info.License;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.servers.Server;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * OpenAPI 3.0 é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»è´Ÿè´£å®šä¹‰APIæ–‡æ¡£çš„åŸºæœ¬ä¿¡æ¯ï¼Œç›¸å½“äºç»™æˆ‘ä»¬çš„APIåšäº†ä¸ªè‡ªæˆ‘ä»‹ç»ï¼</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ä½ çš„åå­—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2024-01-01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenApiConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.application.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String applicationName;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºOpenAPIå®ä¾‹</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•å°±åƒæ˜¯åœ¨ç»™æˆ‘ä»¬çš„APIå†™ä¸ªäººç®€å†ï¼ŒæŠŠæœ€é‡è¦çš„ä¿¡æ¯éƒ½å†™ä¸Šï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OpenAPI <span class="title function_">customOpenAPI</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OpenAPI</span>()</span><br><span class="line">                <span class="comment">// è®¾ç½®APIåŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">                .info(<span class="keyword">new</span> <span class="title class_">Info</span>()</span><br><span class="line">                        .title(applicationName + <span class="string">&quot; APIæ–‡æ¡£&quot;</span>)</span><br><span class="line">                        .description(<span class="string">&quot;ğŸ‰ è¿™æ˜¯åŸºäºSpringBoot 3.xå’ŒOpenAPI 3.0æ„å»ºçš„è¶…çº§APIæ–‡æ¡£ï¼&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;\n\n### ä¸»è¦åŠŸèƒ½\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ¯ ç”¨æˆ·ç®¡ç†ï¼šå¢åˆ æ”¹æŸ¥ç”¨æˆ·ä¿¡æ¯\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ“ æ•°æ®éªŒè¯ï¼šå®Œæ•´çš„å‚æ•°æ ¡éªŒ\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ”’ æƒé™æ§åˆ¶ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- ğŸ“Š ç»Ÿè®¡åˆ†æï¼šç”¨æˆ·è¡Œä¸ºæ•°æ®ç»Ÿè®¡\n\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;### æŠ€æœ¯æ ˆ\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- SpringBoot 3.2.0\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- OpenAPI 3.0.3\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- Jakarta Validation\n&quot;</span> +</span><br><span class="line">                                   <span class="string">&quot;- SpringDoc 2.2.0&quot;</span>)</span><br><span class="line">                        .version(<span class="string">&quot;v1.0.0&quot;</span>)</span><br><span class="line">                        .contact(<span class="keyword">new</span> <span class="title class_">Contact</span>()</span><br><span class="line">                                .name(<span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span>)</span><br><span class="line">                                .email(<span class="string">&quot;dev-team@example.com&quot;</span>)</span><br><span class="line">                                .url(<span class="string">&quot;https://www.example.com&quot;</span>))</span><br><span class="line">                        .license(<span class="keyword">new</span> <span class="title class_">License</span>()</span><br><span class="line">                                .name(<span class="string">&quot;MIT License&quot;</span>)</span><br><span class="line">                                .url(<span class="string">&quot;https://opensource.org/licenses/MIT&quot;</span>)))</span><br><span class="line">                <span class="comment">// è®¾ç½®æœåŠ¡å™¨ä¿¡æ¯</span></span><br><span class="line">                .servers(List.of(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Server</span>()</span><br><span class="line">                                .url(<span class="string">&quot;http://localhost:8080/api&quot;</span>)</span><br><span class="line">                                .description(<span class="string">&quot;æœ¬åœ°å¼€å‘ç¯å¢ƒ ğŸ &quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Server</span>()</span><br><span class="line">                                .url(<span class="string">&quot;https://test-api.example.com&quot;</span>)</span><br><span class="line">                                .description(<span class="string">&quot;æµ‹è¯•ç¯å¢ƒ ğŸ§ª&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Server</span>()</span><br><span class="line">                                .url(<span class="string">&quot;https://api.example.com&quot;</span>)</span><br><span class="line">                                .description(<span class="string">&quot;ç”Ÿäº§ç¯å¢ƒ ğŸš€&quot;</span>)</span><br><span class="line">                ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™ä¸ªé…ç½®ç±»ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆè´´å¿ƒï¼ŸğŸ˜Š æˆ‘ç‰¹æ„åœ¨æè¿°é‡Œç”¨äº†Markdownæ ¼å¼ï¼Œè¿™æ ·ç”Ÿæˆçš„æ–‡æ¡£ä¼šæ›´åŠ ç¾è§‚ï¼è€Œä¸”è¿˜ç”¨äº†emojiï¼Œè®©å†·å†°å†°çš„æŠ€æœ¯æ–‡æ¡£å˜å¾—ç”ŸåŠ¨æœ‰è¶£ã€‚</p><h4 id="åˆ›å»ºç”¨æˆ·å®ä½“ç±»"><a class="markdownIt-Anchor" href="#åˆ›å»ºç”¨æˆ·å®ä½“ç±»"></a> ğŸ‘¤ åˆ›å»ºç”¨æˆ·å®ä½“ç±»</h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æˆ·å®ä½“ç±»ï¼Œè¿™é‡Œå°±èƒ½ä½“ç°OpenAPIçš„å¼ºå¤§ä¹‹å¤„äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.*;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»ä¸ä»…å®šä¹‰äº†ç”¨æˆ·çš„åŸºæœ¬å±æ€§ï¼Œè¿˜é€šè¿‡æ³¨è§£æè¿°äº†æ¯ä¸ªå­—æ®µçš„å«ä¹‰</span></span><br><span class="line"><span class="comment"> * ç®€ç›´å°±æ˜¯&quot;äººå¦‚å…¶å&quot;çš„å®Œç¾ä½“ç°ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Schema(name = &quot;User&quot;, description = &quot;ç”¨æˆ·ä¿¡æ¯å®ä½“ç±»&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·IDï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;1001&quot;, </span></span><br><span class="line"><span class="meta">            accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·åï¼Œå¿…é¡»å”¯ä¸€&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;zhangsan&quot;, </span></span><br><span class="line"><span class="meta">            requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 3, max = 20, message = &quot;ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20å­—ç¬¦ä¹‹é—´&quot;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^[a-zA-Z0-9_]+$&quot;, </span></span><br><span class="line"><span class="meta">             message = &quot;ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·æ˜µç§°&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;å¼ ä¸‰&quot;)</span></span><br><span class="line">    <span class="meta">@Size(max = 50, message = &quot;æ˜µç§°é•¿åº¦ä¸èƒ½è¶…è¿‡50å­—ç¬¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;é‚®ç®±åœ°å€&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;zhangsan@example.com&quot;,</span></span><br><span class="line"><span class="meta">            requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Email(message = &quot;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ‰‹æœºå·ç &quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;13812345678&quot;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^1[3-9]\\d&#123;9&#125;$&quot;, </span></span><br><span class="line"><span class="meta">             message = &quot;æ‰‹æœºå·ç æ ¼å¼ä¸æ­£ç¡®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·å¹´é¾„&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;25&quot;, </span></span><br><span class="line"><span class="meta">            minimum = &quot;1&quot;, </span></span><br><span class="line"><span class="meta">            maximum = &quot;150&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value = 1, message = &quot;å¹´é¾„å¿…é¡»å¤§äº0&quot;)</span></span><br><span class="line">    <span class="meta">@Max(value = 150, message = &quot;å¹´é¾„ä¸èƒ½è¶…è¿‡150&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·æ€§åˆ«&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;MALE&quot;, </span></span><br><span class="line"><span class="meta">            allowableValues = &#123;&quot;MALE&quot;, &quot;FEMALE&quot;, &quot;UNKNOWN&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Gender gender;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·çŠ¶æ€&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">            allowableValues = &#123;&quot;ACTIVE&quot;, &quot;INACTIVE&quot;, &quot;BANNED&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> UserStatus status;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;åˆ›å»ºæ—¶é—´&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">            accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;æœ€åæ›´æ–°æ—¶é—´&quot;, </span></span><br><span class="line"><span class="meta">            example = &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">            accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æšä¸¾ç±»å®šä¹‰</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ€§åˆ«æšä¸¾&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;ç”·æ€§&quot;)</span></span><br><span class="line">        MALE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;å¥³æ€§&quot;)</span> </span><br><span class="line">        FEMALE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æœªçŸ¥&quot;)</span></span><br><span class="line">        UNKNOWN</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·çŠ¶æ€æšä¸¾&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ­£å¸¸çŠ¶æ€&quot;)</span></span><br><span class="line">        ACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;éæ´»è·ƒçŠ¶æ€&quot;)</span></span><br><span class="line">        INACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;è¢«å°ç¦çŠ¶æ€&quot;)</span></span><br><span class="line">        BANNED</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ã€getterã€setteræ–¹æ³•...</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œçœç•¥äº†è¿™äº›æ–¹æ³•ï¼Œå®é™…å¼€å‘ä¸­è®°å¾—åŠ ä¸Šå“¦ï¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String username, String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.status = UserStatus.ACTIVE;</span><br><span class="line">        <span class="built_in">this</span>.createTime = LocalDateTime.now();</span><br><span class="line">        <span class="built_in">this</span>.updateTime = LocalDateTime.now();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter and setter methods...</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123; <span class="keyword">return</span> id; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123; <span class="built_in">this</span>.id = id; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123; <span class="keyword">return</span> username; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123; <span class="built_in">this</span>.username = username; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNickname</span><span class="params">()</span> &#123; <span class="keyword">return</span> nickname; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNickname</span><span class="params">(String nickname)</span> &#123; <span class="built_in">this</span>.nickname = nickname; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123; <span class="keyword">return</span> email; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123; <span class="built_in">this</span>.email = email; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123; <span class="keyword">return</span> phone; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123; <span class="built_in">this</span>.phone = phone; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123; <span class="built_in">this</span>.age = age; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Gender <span class="title function_">getGender</span><span class="params">()</span> &#123; <span class="keyword">return</span> gender; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(Gender gender)</span> &#123; <span class="built_in">this</span>.gender = gender; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> UserStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123; <span class="keyword">return</span> status; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(UserStatus status)</span> &#123; <span class="built_in">this</span>.status = status; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getCreateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> createTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreateTime</span><span class="params">(LocalDateTime createTime)</span> &#123; <span class="built_in">this</span>.createTime = createTime; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getUpdateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> updateTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUpdateTime</span><span class="params">(LocalDateTime updateTime)</span> &#123; <span class="built_in">this</span>.updateTime = updateTime; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å“‡ï¼Œè¿™ä¸ªå®ä½“ç±»æ˜¯ä¸æ˜¯å¾ˆä¸°å¯Œï¼ŸğŸ˜ é€šè¿‡<code>@Schema</code>æ³¨è§£ï¼Œæˆ‘ä»¬ä¸ä»…æè¿°äº†æ¯ä¸ªå­—æ®µçš„å«ä¹‰ï¼Œè¿˜æä¾›äº†ç¤ºä¾‹å€¼ã€éªŒè¯è§„åˆ™ç­‰ä¿¡æ¯ã€‚è¿™æ ·ç”Ÿæˆçš„APIæ–‡æ¡£å°±ä¼šéå¸¸è¯¦ç»†å’Œå‹å¥½ï¼</p><h4 id="ï¸-åˆ›å»ºé€šç”¨å“åº”ç±»"><a class="markdownIt-Anchor" href="#ï¸-åˆ›å»ºé€šç”¨å“åº”ç±»"></a> ğŸ›ï¸ åˆ›å»ºé€šç”¨å“åº”ç±»</h4><p>ä¸ºäº†è®©APIå“åº”æ›´åŠ è§„èŒƒï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªé€šç”¨çš„å“åº”åŒ…è£…ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€å“åº”ç»“æœå°è£…ç±»</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªç±»å°±åƒæ˜¯ç»™æ‰€æœ‰APIå“åº”ç©¿äº†ä¸€å¥—ç»Ÿä¸€çš„&quot;åˆ¶æœ&quot;ï¼Œè®©å®ƒä»¬çœ‹èµ·æ¥æ•´æ•´é½é½çš„ï¼</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt; å“åº”æ•°æ®çš„ç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Schema(name = &quot;ApiResponse&quot;, description = &quot;ç»Ÿä¸€å“åº”ç»“æœ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiResponse</span>&lt;T&gt; &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”çŠ¶æ€ç &quot;, example = &quot;200&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ¶ˆæ¯&quot;, example = &quot;æ“ä½œæˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ•°æ®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ—¶é—´&quot;, example = &quot;2024-01-01 12:00:00&quot;)</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime timestamp;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç§æœ‰æ„é€ å‡½æ•°ï¼Œé€šè¿‡é™æ€æ–¹æ³•åˆ›å»ºå®ä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ApiResponse</span><span class="params">(Integer code, String message, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="built_in">this</span>.timestamp = LocalDateTime.now();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæˆåŠŸå“åº”</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•å°±åƒæ˜¯åœ¨è¯´ï¼š&quot;è€¶ï¼ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">200</span>, <span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(String message, T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">200</span>, message, data);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºå¤±è´¥å“åº”</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ–¹æ³•å°±åƒæ˜¯åœ¨è¯´ï¼š&quot;å“å‘€ï¼Œå‡ºäº†ç‚¹å°é—®é¢˜...&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">error</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(code, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">error</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">500</span>, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚æ•°éªŒè¯å¤±è´¥å“åº”</span></span><br><span class="line"><span class="comment">     * ä¸“é—¨å¤„ç†é‚£äº›&quot;ä¸å¬è¯&quot;çš„å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">badRequest</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">400</span>, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èµ„æºæœªæ‰¾åˆ°å“åº”</span></span><br><span class="line"><span class="comment">     * å½“ä½ è¦æ‰¾çš„ä¸œè¥¿&quot;äººé—´è’¸å‘&quot;äº†çš„æ—¶å€™ç”¨è¿™ä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">notFound</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;(<span class="number">404</span>, message, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter methods</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123; <span class="keyword">return</span> code; &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123; <span class="keyword">return</span> message; &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getData</span><span class="params">()</span> &#123; <span class="keyword">return</span> data; &#125;</span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getTimestamp</span><span class="params">()</span> &#123; <span class="keyword">return</span> timestamp; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æˆåŠŸçš„ä¾¿åˆ©æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSuccess</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code != <span class="literal">null</span> &amp;&amp; code == <span class="number">200</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå“åº”ç±»è®¾è®¡å¾—è¿˜ä¸é”™å§ï¼ŸğŸ˜ å®ƒä¸ä»…æä¾›äº†ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œè¿˜é€šè¿‡é™æ€æ–¹æ³•è®©åˆ›å»ºå“åº”å˜å¾—è¶…çº§ç®€å•ï¼</p><h3 id="å®šåˆ¶åŒ–é…ç½®è®©æ–‡æ¡£æ›´è´´å¿ƒ"><a class="markdownIt-Anchor" href="#å®šåˆ¶åŒ–é…ç½®è®©æ–‡æ¡£æ›´è´´å¿ƒ"></a> ğŸ¨ å®šåˆ¶åŒ–é…ç½®ï¼šè®©æ–‡æ¡£æ›´è´´å¿ƒ</h3><p>ç°åœ¨æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç”¨æˆ·æ§åˆ¶å™¨ï¼Œè¿™é‡Œå¯æ˜¯å±•ç°OpenAPIå¨åŠ›çš„åœ°æ–¹ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.common.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> com.example.entity.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Operation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Parameter;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Parameters;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.enums.ParameterIn;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.ExampleObject;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse as SwaggerApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç®¡ç†æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ§åˆ¶å™¨å°±åƒæ˜¯ä¸€ä¸ªç”¨æˆ·ç®¡ç†çš„&quot;å¤§ç®¡å®¶&quot;ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment"> * æ¯ä¸ªæ–¹æ³•éƒ½ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œè®©APIæ–‡æ¡£å˜å¾—è¶…çº§å‹å¥½ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;ç”¨æˆ·ç®¡ç†&quot;, description = &quot;æä¾›ç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œæ”¯æŒæ‰¹é‡æ“ä½œå’Œé«˜çº§æŸ¥è¯¢ ğŸ¯&quot;)</span></span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿæ•°æ®åº“ï¼Œå®é™…é¡¹ç›®ä¸­åº”è¯¥æ³¨å…¥Service</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;User&gt; userDatabase = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Long</span> <span class="variable">idCounter</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ä¸€äº›æµ‹è¯•æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserController</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ ä¸€äº›æµ‹è¯•æ•°æ®ï¼Œè®©æ–‡æ¡£æ¼”ç¤ºæ›´ç”ŸåŠ¨</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin@example.com&quot;</span>);</span><br><span class="line">        user1.setId(idCounter++);</span><br><span class="line">        user1.setNickname(<span class="string">&quot;è¶…çº§ç®¡ç†å‘˜&quot;</span>);</span><br><span class="line">        user1.setAge(<span class="number">30</span>);</span><br><span class="line">        user1.setGender(User.Gender.MALE);</span><br><span class="line">        user1.setPhone(<span class="string">&quot;13812345678&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;alice&quot;</span>, <span class="string">&quot;alice@example.com&quot;</span>);</span><br><span class="line">        user2.setId(idCounter++);</span><br><span class="line">        user2.setNickname(<span class="string">&quot;å°çˆ±åŒå­¦&quot;</span>);</span><br><span class="line">        user2.setAge(<span class="number">25</span>);</span><br><span class="line">        user2.setGender(User.Gender.FEMALE);</span><br><span class="line">        user2.setPhone(<span class="string">&quot;13987654321&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        userDatabase.add(user1);</span><br><span class="line">        userDatabase.add(user2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£æ”¯æŒåˆ†é¡µå’Œæœç´¢ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§å“¦ï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;è·å–ç”¨æˆ·åˆ—è¡¨&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;æ”¯æŒåˆ†é¡µæŸ¥è¯¢å’Œå…³é”®å­—æœç´¢çš„ç”¨æˆ·åˆ—è¡¨æ¥å£ã€‚&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;\n\n**åŠŸèƒ½ç‰¹ç‚¹ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ğŸ” æ”¯æŒç”¨æˆ·åå’Œæ˜µç§°æ¨¡ç³Šæœç´¢\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ğŸ“„ æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- âš¡ æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–ï¼Œå“åº”é€Ÿåº¦å¿«\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ğŸ“Š è¿”å›æ€»æ•°ä¿¡æ¯ï¼Œæ–¹ä¾¿å‰ç«¯åˆ†é¡µå¤„ç†&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;ç”¨æˆ·æŸ¥è¯¢&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Parameters(&#123;</span></span><br><span class="line"><span class="meta">            @Parameter(</span></span><br><span class="line"><span class="meta">                    name = &quot;page&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;é¡µç ï¼Œä»1å¼€å§‹&quot;,</span></span><br><span class="line"><span class="meta">                    example = &quot;1&quot;,</span></span><br><span class="line"><span class="meta">                    in = ParameterIn.QUERY,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(type = &quot;integer&quot;, minimum = &quot;1&quot;, defaultValue = &quot;1&quot;)</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @Parameter(</span></span><br><span class="line"><span class="meta">                    name = &quot;size&quot;, </span></span><br><span class="line"><span class="meta">                    description = &quot;æ¯é¡µå¤§å°ï¼Œæœ€å¤§100&quot;,</span></span><br><span class="line"><span class="meta">                    example = &quot;10&quot;,</span></span><br><span class="line"><span class="meta">                    in = ParameterIn.QUERY,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(type = &quot;integer&quot;, minimum = &quot;1&quot;, maximum = &quot;100&quot;, defaultValue = &quot;10&quot;)</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @Parameter(</span></span><br><span class="line"><span class="meta">                    name = &quot;keyword&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;æœç´¢å…³é”®å­—ï¼Œæ”¯æŒç”¨æˆ·åå’Œæ˜µç§°æ¨¡ç³Šæœç´¢&quot;,</span></span><br><span class="line"><span class="meta">                    example = &quot;å¼ ä¸‰&quot;,</span></span><br><span class="line"><span class="meta">                    in = ParameterIn.QUERY,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(type = &quot;string&quot;)</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;æŸ¥è¯¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class),</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;æˆåŠŸç¤ºä¾‹&quot;,</span></span><br><span class="line"><span class="meta">                                    summary = &quot;æŸ¥è¯¢æˆåŠŸçš„å“åº”ç¤ºä¾‹&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;æŸ¥è¯¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;list&quot;: [</span></span><br><span class="line"><span class="meta">                                                  &#123;</span></span><br><span class="line"><span class="meta">                                                    &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                    &quot;username&quot;: &quot;admin&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;nickname&quot;: &quot;è¶…çº§ç®¡ç†å‘˜&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;email&quot;: &quot;admin@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;age&quot;: 30,</span></span><br><span class="line"><span class="meta">                                                    &quot;gender&quot;: &quot;MALE&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;createTime&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                                  &#125;</span></span><br><span class="line"><span class="meta">                                                ],</span></span><br><span class="line"><span class="meta">                                                &quot;total&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;page&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;size&quot;: 10</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å‚æ•°é”™è¯¯&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class)</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;PageResult&lt;User&gt;&gt;&gt; <span class="title function_">getUsers</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> <span class="meta">@Min(value = 1, message = &quot;é¡µç å¿…é¡»å¤§äº0&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> <span class="meta">@Min(value = 1, message = &quot;é¡µå¤§å°å¿…é¡»å¤§äº0&quot;)</span> Integer size,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> String keyword)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿåˆ†é¡µæŸ¥è¯¢é€»è¾‘</span></span><br><span class="line">        List&lt;User&gt; filteredUsers = userDatabase;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…³é”®å­—æœç´¢</span></span><br><span class="line">        <span class="keyword">if</span> (keyword != <span class="literal">null</span> &amp;&amp; !keyword.trim().isEmpty()) &#123;</span><br><span class="line">            filteredUsers = userDatabase.stream()</span><br><span class="line">                    .filter(user -&gt; user.getUsername().contains(keyword) || </span><br><span class="line">                                   (user.getNickname() != <span class="literal">null</span> &amp;&amp; user.getNickname().contains(keyword)))</span><br><span class="line">                    .toList();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ†é¡µå¤„ç†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> (page - <span class="number">1</span>) * size;</span><br><span class="line">        <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> Math.min(start + size, filteredUsers.size());</span><br><span class="line">        List&lt;User&gt; pagedUsers = filteredUsers.subList(start, end);</span><br><span class="line">        </span><br><span class="line">        PageResult&lt;User&gt; result = <span class="keyword">new</span> <span class="title class_">PageResult</span>&lt;&gt;(pagedUsers, (<span class="type">long</span>) filteredUsers.size(), page, size);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;æŸ¥è¯¢æˆåŠŸ&quot;</span>, result));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDè·å–ç”¨æˆ·è¯¦æƒ…</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç”¨æˆ·IDè·å–è¯¦ç»†ä¿¡æ¯ï¼Œæ‰¾ä¸åˆ°ä¼šè¿”å›404</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;è·å–ç”¨æˆ·è¯¦æƒ…&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚\n\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;**æ³¨æ„äº‹é¡¹ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç”¨æˆ·IDå¿…é¡»æ˜¯æœ‰æ•ˆçš„æ­£æ•´æ•°\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œä¼šè¿”å›404é”™è¯¯\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- è¿”å›çš„æ•°æ®åŒ…å«ç”¨æˆ·çš„æ‰€æœ‰å¯è§å­—æ®µ&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;ç”¨æˆ·æŸ¥è¯¢&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Parameter(</span></span><br><span class="line"><span class="meta">            name = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;ç”¨æˆ·ID&quot;,</span></span><br><span class="line"><span class="meta">            example = &quot;1&quot;,</span></span><br><span class="line"><span class="meta">            required = true,</span></span><br><span class="line"><span class="meta">            in = ParameterIn.PATH,</span></span><br><span class="line"><span class="meta">            schema = @Schema(type = &quot;integer&quot;, format = &quot;int64&quot;, minimum = &quot;1&quot;)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;è·å–æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class),</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;ç”¨æˆ·è¯¦æƒ…&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;è·å–æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;username&quot;: &quot;admin&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;nickname&quot;: &quot;è¶…çº§ç®¡ç†å‘˜&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;email&quot;: &quot;admin@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;phone&quot;: &quot;13812345678&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;age&quot;: 30,</span></span><br><span class="line"><span class="meta">                                                &quot;gender&quot;: &quot;MALE&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;createTime&quot;: &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;updateTime&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;404&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 404,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">getUserById</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@PathVariable</span> <span class="meta">@NotNull(message = &quot;ç”¨æˆ·IDä¸èƒ½ä¸ºç©º&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        Optional&lt;User&gt; userOpt = userDatabase.stream()</span><br><span class="line">                .filter(user -&gt; user.getId().equals(id))</span><br><span class="line">                .findFirst();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (userOpt.isPresent()) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;è·å–æˆåŠŸ&quot;</span>, userOpt.get()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.status(HttpStatus.NOT_FOUND)</span><br><span class="line">                    .body(ApiResponse.notFound(<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ–°ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç”¨æˆ·ï¼Œæ”¯æŒå®Œæ•´çš„æ•°æ®éªŒè¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;åˆ›å»ºç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·è´¦æˆ·ã€‚\n\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;**éªŒè¯è§„åˆ™ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç”¨æˆ·åï¼š3-20å­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- é‚®ç®±ï¼šå¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- æ‰‹æœºå·ï¼šç¬¦åˆä¸­å›½å¤§é™†æ‰‹æœºå·æ ¼å¼\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- å¹´é¾„ï¼š1-150ä¹‹é—´çš„æ•´æ•°\n\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;**æ³¨æ„ï¼š**\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç”¨æˆ·åå’Œé‚®ç®±å¿…é¡»å”¯ä¸€\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- åˆ›å»ºæˆåŠŸåä¼šè‡ªåŠ¨è®¾ç½®ä¸ºACTIVEçŠ¶æ€\n&quot; +</span></span><br><span class="line"><span class="meta">                         &quot;- ç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;ç”¨æˆ·ç®¡ç†&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@io</span>.swagger.v3.oas.annotations.parameters.RequestBody(</span><br><span class="line">            description = <span class="string">&quot;ç”¨æˆ·ä¿¡æ¯&quot;</span>,</span><br><span class="line">            required = <span class="literal">true</span>,</span><br><span class="line">            content = <span class="meta">@Content(</span></span><br><span class="line"><span class="meta">                    mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(implementation = User.class),</span></span><br><span class="line"><span class="meta">                    examples = &#123;</span></span><br><span class="line"><span class="meta">                            @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;åŸºç¡€ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    summary = &quot;åˆ›å»ºåŸºç¡€ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;username&quot;: &quot;newuser&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;nickname&quot;: &quot;æ–°ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;email&quot;: &quot;newuser@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;phone&quot;: &quot;13911112222&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;age&quot;: 28,</span></span><br><span class="line"><span class="meta">                                              &quot;gender&quot;: &quot;FEMALE&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            ),</span></span><br><span class="line"><span class="meta">                            @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;å®Œæ•´ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    summary = &quot;åˆ›å»ºå®Œæ•´ä¿¡æ¯ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;username&quot;: &quot;fulluser&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;nickname&quot;: &quot;å®Œæ•´ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;email&quot;: &quot;fulluser@example.com&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;phone&quot;: &quot;13800138000&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;age&quot;: 35,</span></span><br><span class="line"><span class="meta">                                              &quot;gender&quot;: &quot;MALE&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    &#125;</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;201&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;åˆ›å»ºæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            schema = @Schema(implementation = ApiResponse.class)</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å‚æ•°éªŒè¯å¤±è´¥&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 400,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;ç”¨æˆ·åå·²å­˜åœ¨&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">usernameExists</span> <span class="operator">=</span> userDatabase.stream()</span><br><span class="line">                .anyMatch(u -&gt; u.getUsername().equals(user.getUsername()));</span><br><span class="line">        <span class="keyword">if</span> (usernameExists) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST)</span><br><span class="line">                    .body(ApiResponse.badRequest(<span class="string">&quot;ç”¨æˆ·åå·²å­˜åœ¨&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">emailExists</span> <span class="operator">=</span> userDatabase.stream()</span><br><span class="line">                .anyMatch(u -&gt; u.getEmail().equals(user.getEmail()));</span><br><span class="line">        <span class="keyword">if</span> (emailExists) &#123;</span><br><span class="line">            <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST)</span><br><span class="line">                    .body(ApiResponse.badRequest(<span class="string">&quot;é‚®ç®±å·²å­˜åœ¨&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        user.setId(idCounter++);</span><br><span class="line">        user.setStatus(User.UserStatus.ACTIVE);</span><br><span class="line">        user.setCreateTime(LocalDateTime.now());</span><br><span class="line">        user.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¿å­˜åˆ°&quot;æ•°æ®åº“&quot;</span></span><br><span class="line">        userDatabase.add(user);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED)</span><br><span class="line">                .body(ApiResponse.success(<span class="string">&quot;ç”¨æˆ·åˆ›å»ºæˆåŠŸ&quot;</span>, user));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ†é¡µç»“æœåŒ…è£…ç±»</span></span><br><span class="line">    <span class="meta">@Schema(name = &quot;PageResult&quot;, description = &quot;åˆ†é¡µæŸ¥è¯¢ç»“æœ&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PageResult</span>&lt;T&gt; &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ•°æ®åˆ—è¡¨&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> List&lt;T&gt; list;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ€»è®°å½•æ•°&quot;, example = &quot;100&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Long total;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;å½“å‰é¡µç &quot;, example = &quot;1&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Integer page;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ¯é¡µå¤§å°&quot;, example = &quot;10&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Integer size;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ€»é¡µæ•°&quot;, example = &quot;10&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Integer totalPages;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ&quot;, example = &quot;true&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Boolean hasNext;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ˜¯å¦æœ‰ä¸Šä¸€é¡µ&quot;, example = &quot;false&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> Boolean hasPrev;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">PageResult</span><span class="params">(List&lt;T&gt; list, Long total, Integer page, Integer size)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.list = list;</span><br><span class="line">            <span class="built_in">this</span>.total = total;</span><br><span class="line">            <span class="built_in">this</span>.page = page;</span><br><span class="line">            <span class="built_in">this</span>.size = size;</span><br><span class="line">            <span class="built_in">this</span>.totalPages = (<span class="type">int</span>) Math.ceil((<span class="type">double</span>) total / size);</span><br><span class="line">            <span class="built_in">this</span>.hasNext = page &lt; totalPages;</span><br><span class="line">            <span class="built_in">this</span>.hasPrev = page &gt; <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter methods</span></span><br><span class="line">        <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">getList</span><span class="params">()</span> &#123; <span class="keyword">return</span> list; &#125;</span><br><span class="line">        <span class="keyword">public</span> Long <span class="title function_">getTotal</span><span class="params">()</span> &#123; <span class="keyword">return</span> total; &#125;</span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getPage</span><span class="params">()</span> &#123; <span class="keyword">return</span> page; &#125;</span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getSize</span><span class="params">()</span> &#123; <span class="keyword">return</span> size; &#125;</span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getTotalPages</span><span class="params">()</span> &#123; <span class="keyword">return</span> totalPages; &#125;</span><br><span class="line">        <span class="keyword">public</span> Boolean <span class="title function_">getHasNext</span><span class="params">()</span> &#123; <span class="keyword">return</span> hasNext; &#125;</span><br><span class="line">        <span class="keyword">public</span> Boolean <span class="title function_">getHasPrev</span><span class="params">()</span> &#123; <span class="keyword">return</span> hasPrev; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å“‡å¡ï¼Œè¿™ä¸ªæ§åˆ¶å™¨æ˜¯ä¸æ˜¯å¾ˆè¯¦ç»†ï¼ŸğŸ˜„ æ¯ä¸ªæ¥å£éƒ½æœ‰å®Œæ•´çš„æ–‡æ¡£è¯´æ˜ã€å‚æ•°æè¿°ã€å“åº”ç¤ºä¾‹ç­‰ã€‚é€šè¿‡è¿™æ ·çš„æ³¨è§£é…ç½®ï¼Œç”Ÿæˆçš„APIæ–‡æ¡£ä¼šéå¸¸ä¸“ä¸šå’Œå‹å¥½ï¼</p><h3 id="é«˜çº§ç‰¹æ€§æ¢ç´¢"><a class="markdownIt-Anchor" href="#é«˜çº§ç‰¹æ€§æ¢ç´¢"></a> ğŸ’ é«˜çº§ç‰¹æ€§æ¢ç´¢</h3><p>å¥½äº†ï¼ŒåŸºç¡€åŠŸèƒ½æˆ‘ä»¬å·²ç»æå®šäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥æ¢ç´¢ä¸€äº›æ›´é«˜çº§çš„ç‰¹æ€§ï¼è¿™äº›åŠŸèƒ½å¯æ˜¯è®©æˆ‘å½“åˆæƒŠå‘¼&quot;å§æ§½ï¼Œè¿˜èƒ½è¿™æ ·ç©ï¼Ÿ&quot;çš„å­˜åœ¨ï¼ğŸ¤¯</p><h4 id="å®‰å…¨è®¤è¯é›†æˆ"><a class="markdownIt-Anchor" href="#å®‰å…¨è®¤è¯é›†æˆ"></a> ğŸ” å®‰å…¨è®¤è¯é›†æˆ</h4><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒAPIå®‰å…¨æ˜¯ä¸å¯å¿½è§†çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨OpenAPIä¸­é›†æˆJWTè®¤è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.Components;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.OpenAPI;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.security.SecurityRequirement;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.models.security.SecurityScheme;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * APIå®‰å…¨é…ç½®</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªé…ç½®è®©æˆ‘ä»¬çš„APIæ–‡æ¡£æ”¯æŒJWTè®¤è¯ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ¥å£è£¸å¥”äº†ï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenApiSecurityConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BEARER_TOKEN_SECURITY_SCHEME</span> <span class="operator">=</span> <span class="string">&quot;bearerAuth&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OpenAPI <span class="title function_">openAPIWithSecurity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OpenAPI</span>()</span><br><span class="line">                .addSecurityItem(<span class="keyword">new</span> <span class="title class_">SecurityRequirement</span>()</span><br><span class="line">                        .addList(BEARER_TOKEN_SECURITY_SCHEME))</span><br><span class="line">                .components(<span class="keyword">new</span> <span class="title class_">Components</span>()</span><br><span class="line">                        .addSecuritySchemes(BEARER_TOKEN_SECURITY_SCHEME,</span><br><span class="line">                                <span class="keyword">new</span> <span class="title class_">SecurityScheme</span>()</span><br><span class="line">                                        .name(BEARER_TOKEN_SECURITY_SCHEME)</span><br><span class="line">                                        .type(SecurityScheme.Type.HTTP)</span><br><span class="line">                                        .scheme(<span class="string">&quot;bearer&quot;</span>)</span><br><span class="line">                                        .bearerFormat(<span class="string">&quot;JWT&quot;</span>)</span><br><span class="line">                                        .in(SecurityScheme.In.HEADER)</span><br><span class="line">                                        .description(<span class="string">&quot;è¾“å…¥JWT tokenï¼Œæ ¼å¼ï¼šBearer &#123;token&#125;&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨éœ€è¦è®¤è¯çš„æ¥å£ä¸Šæ·»åŠ å®‰å…¨æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;ç®¡ç†å‘˜æ¥å£&quot;, description = &quot;éœ€è¦ç®¡ç†å‘˜æƒé™çš„é«˜çº§åŠŸèƒ½ ğŸ‘‘&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;ç®¡ç†å‘˜è·å–æ‰€æœ‰ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®çš„ç”¨æˆ·åˆ—è¡¨æ¥å£ï¼ŒåŒ…å«æ•æ„Ÿä¿¡æ¯&quot;,</span></span><br><span class="line"><span class="meta">            security = @SecurityRequirement(name = &quot;bearerAuth&quot;)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@SecurityRequirement(name = &quot;bearerAuth&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;List&lt;User&gt;&gt;&gt; <span class="title function_">getAllUsersForAdmin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç®¡ç†å‘˜ä¸“ç”¨æ¥å£é€»è¾‘</span></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;è·å–æˆåŠŸ&quot;</span>, <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰æ³¨è§£ä¸åˆ‡é¢"><a class="markdownIt-Anchor" href="#è‡ªå®šä¹‰æ³¨è§£ä¸åˆ‡é¢"></a> ğŸª è‡ªå®šä¹‰æ³¨è§£ä¸åˆ‡é¢</h4><p>æœ‰æ—¶å€™æˆ‘ä»¬æƒ³ä¸ºæŸäº›ç‰¹æ®Šçš„æ¥å£æ·»åŠ ç»Ÿä¸€çš„æ–‡æ¡£è¯´æ˜ï¼Œè¿™æ—¶å€™è‡ªå®šä¹‰æ³¨è§£å°±æ´¾ä¸Šç”¨åœºäº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.ExampleObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ‡å‡†APIå“åº”æ³¨è§£</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ³¨è§£å°±åƒæ˜¯ç»™æ¥å£è´´ä¸Šäº†&quot;è´¨é‡ä¿è¯&quot;çš„æ ‡ç­¾ï¼Œç»Ÿä¸€äº†å“åº”æ ¼å¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">        @ApiResponse(</span></span><br><span class="line"><span class="meta">                responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                description = &quot;æ“ä½œæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                content = @Content(</span></span><br><span class="line"><span class="meta">                        mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                        examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                name = &quot;æˆåŠŸå“åº”&quot;,</span></span><br><span class="line"><span class="meta">                                value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                        &#123;</span></span><br><span class="line"><span class="meta">                                          &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                          &quot;message&quot;: &quot;æ“ä½œæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                          &quot;data&quot;: &#123;&#125;,</span></span><br><span class="line"><span class="meta">                                          &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                        &#125;</span></span><br><span class="line"><span class="meta">                                        &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                        )</span></span><br><span class="line"><span class="meta">                )</span></span><br><span class="line"><span class="meta">        ),</span></span><br><span class="line"><span class="meta">        @ApiResponse(</span></span><br><span class="line"><span class="meta">                responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                description = &quot;å‚æ•°é”™è¯¯&quot;,</span></span><br><span class="line"><span class="meta">                content = @Content(</span></span><br><span class="line"><span class="meta">                        mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                        examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                        &#123;</span></span><br><span class="line"><span class="meta">                                          &quot;code&quot;: 400,</span></span><br><span class="line"><span class="meta">                                          &quot;message&quot;: &quot;å‚æ•°éªŒè¯å¤±è´¥&quot;,</span></span><br><span class="line"><span class="meta">                                          &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                          &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                        &#125;</span></span><br><span class="line"><span class="meta">                                        &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                        )</span></span><br><span class="line"><span class="meta">                )</span></span><br><span class="line"><span class="meta">        ),</span></span><br><span class="line"><span class="meta">        @ApiResponse(</span></span><br><span class="line"><span class="meta">                responseCode = &quot;500&quot;,</span></span><br><span class="line"><span class="meta">                description = &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&quot;,</span></span><br><span class="line"><span class="meta">                content = @Content(</span></span><br><span class="line"><span class="meta">                        mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                        examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                        &#123;</span></span><br><span class="line"><span class="meta">                                          &quot;code&quot;: 500,</span></span><br><span class="line"><span class="meta">                                          &quot;message&quot;: &quot;æœåŠ¡å™¨å¼€å°å·®äº†ï¼Œè¯·ç¨åé‡è¯•&quot;,</span></span><br><span class="line"><span class="meta">                                          &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                          &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                        &#125;</span></span><br><span class="line"><span class="meta">                                        &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                        )</span></span><br><span class="line"><span class="meta">                )</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> StandardApiResponses &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦åŒ…å«è®¤è¯ç›¸å…³çš„é”™è¯¯å“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">includeAuth</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨èµ·æ¥è¶…çº§ç®€å•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/profile&quot;)</span></span><br><span class="line"><span class="meta">@StandardApiResponses(includeAuth = true)</span></span><br><span class="line"><span class="meta">@Operation(summary = &quot;è·å–ä¸ªäººèµ„æ–™&quot;, description = &quot;è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¸ªäººèµ„æ–™ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">getProfile</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// æ¥å£é€»è¾‘</span></span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;è·å–æˆåŠŸ&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤šç¯å¢ƒé…ç½®"><a class="markdownIt-Anchor" href="#å¤šç¯å¢ƒé…ç½®"></a> ğŸŒˆ å¤šç¯å¢ƒé…ç½®</h4><p>ä¸åŒç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬çš„APIæ–‡æ¡£å¯èƒ½éœ€è¦ä¸åŒçš„é…ç½®ã€‚æ¥çœ‹çœ‹å¦‚ä½•ä¼˜é›…åœ°å¤„ç†è¿™ç§æƒ…å†µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * OpenAPIé…ç½®å±æ€§ç±»</span></span><br><span class="line"><span class="comment"> * é€šè¿‡é…ç½®æ–‡ä»¶æ¥æ§åˆ¶APIæ–‡æ¡£çš„è¡Œä¸ºï¼Œçµæ´»æ€§Maxï¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;app.openapi&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OpenApiProperties</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">enabled</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">title</span> <span class="operator">=</span> <span class="string">&quot;APIæ–‡æ¡£&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„API&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">version</span> <span class="operator">=</span> <span class="string">&quot;v1.0.0&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">License</span> <span class="variable">license</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">License</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åµŒå¥—é…ç½®ç±»</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Contact</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> <span class="string">&quot;dev@example.com&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://www.example.com&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter and setter...</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123; <span class="keyword">return</span> email; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123; <span class="built_in">this</span>.email = email; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getUrl</span><span class="params">()</span> &#123; <span class="keyword">return</span> url; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUrl</span><span class="params">(String url)</span> &#123; <span class="built_in">this</span>.url = url; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">License</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;MIT&quot;</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://opensource.org/licenses/MIT&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter and setter...</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getUrl</span><span class="params">()</span> &#123; <span class="keyword">return</span> url; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUrl</span><span class="params">(String url)</span> &#123; <span class="built_in">this</span>.url = url; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸»ç±»çš„getter and setter</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123; <span class="keyword">return</span> enabled; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEnabled</span><span class="params">(<span class="type">boolean</span> enabled)</span> &#123; <span class="built_in">this</span>.enabled = enabled; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getTitle</span><span class="params">()</span> &#123; <span class="keyword">return</span> title; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTitle</span><span class="params">(String title)</span> &#123; <span class="built_in">this</span>.title = title; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123; <span class="keyword">return</span> description; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123; <span class="built_in">this</span>.description = description; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getVersion</span><span class="params">()</span> &#123; <span class="keyword">return</span> version; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVersion</span><span class="params">(String version)</span> &#123; <span class="built_in">this</span>.version = version; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Contact <span class="title function_">getContact</span><span class="params">()</span> &#123; <span class="keyword">return</span> contact; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContact</span><span class="params">(Contact contact)</span> &#123; <span class="built_in">this</span>.contact = contact; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> License <span class="title function_">getLicense</span><span class="params">()</span> &#123; <span class="keyword">return</span> license; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLicense</span><span class="params">(License license)</span> &#123; <span class="built_in">this</span>.license = license; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸åŒçš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># application-dev.yml (å¼€å‘ç¯å¢ƒ)</span><br><span class="line">app:</span><br><span class="line">  openapi:</span><br><span class="line">    enabled: <span class="literal">true</span></span><br><span class="line">    title: <span class="string">&quot;å¼€å‘ç¯å¢ƒAPIæ–‡æ¡£ ğŸ› ï¸&quot;</span></span><br><span class="line">    description: <span class="string">&quot;è¿™æ˜¯å¼€å‘ç¯å¢ƒçš„APIï¼Œéšæ—¶å¯èƒ½å˜åŠ¨ï¼Œè¯·è°¨æ…ä½¿ç”¨&quot;</span></span><br><span class="line">    version: <span class="string">&quot;v1.0.0-dev&quot;</span></span><br><span class="line">    contact:</span><br><span class="line">      name: <span class="string">&quot;å¼€å‘å›¢é˜Ÿ&quot;</span></span><br><span class="line">      email: <span class="string">&quot;dev@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"># application-prod.yml (ç”Ÿäº§ç¯å¢ƒ)</span><br><span class="line">app:</span><br><span class="line">  openapi:</span><br><span class="line">    enabled: <span class="literal">false</span>  # ç”Ÿäº§ç¯å¢ƒå…³é—­æ–‡æ¡£</span><br><span class="line">    title: <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒAPI&quot;</span></span><br><span class="line">    description: <span class="string">&quot;ç”Ÿäº§ç¯å¢ƒAPIæ–‡æ¡£&quot;</span></span><br><span class="line">    version: <span class="string">&quot;v1.0.0&quot;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·é…ç½®ä¹‹åï¼Œç”Ÿäº§ç¯å¢ƒå°±ä¸ä¼šæš´éœ²APIæ–‡æ¡£äº†ï¼Œå®‰å…¨æ€§å¤§å¤§æå‡ï¼ğŸ˜</p><h3 id="ï¸-å®é™…é¡¹ç›®åº”ç”¨æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#ï¸-å®é™…é¡¹ç›®åº”ç”¨æ¡ˆä¾‹"></a> ğŸ› ï¸ å®é™…é¡¹ç›®åº”ç”¨æ¡ˆä¾‹</h3><p>ç†è®ºè¯´äº†è¿™ä¹ˆå¤šï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´è´´è¿‘å®é™…é¡¹ç›®çš„å®Œæ•´ç¤ºä¾‹ï¼å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†ç³»ç»Ÿçš„å•†å“ç®¡ç†æ¨¡å—ã€‚</p><h4 id="ï¸-å•†å“ç®¡ç†æ¨¡å—"><a class="markdownIt-Anchor" href="#ï¸-å•†å“ç®¡ç†æ¨¡å—"></a> ğŸ›ï¸ å•†å“ç®¡ç†æ¨¡å—</h4><p>é¦–å…ˆå®šä¹‰å•†å“å®ä½“ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ecommerce.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.*;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Schema(name = &quot;Product&quot;, description = &quot;å•†å“ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“ID&quot;, example = &quot;1&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“åç§°&quot;, example = &quot;iPhone 15 Pro Max&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;å•†å“åç§°ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 2, max = 100, message = &quot;å•†å“åç§°é•¿åº¦å¿…é¡»åœ¨2-100å­—ç¬¦ä¹‹é—´&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“æè¿°&quot;, example = &quot;è‹¹æœæœ€æ–°æ——èˆ°æ‰‹æœºï¼Œæ€§èƒ½å¼ºæ‚ï¼Œæ‹ç…§å‡ºè‰²&quot;)</span></span><br><span class="line">    <span class="meta">@Size(max = 1000, message = &quot;å•†å“æè¿°ä¸èƒ½è¶…è¿‡1000å­—ç¬¦&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“ä»·æ ¼&quot;, example = &quot;9999.00&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å•†å“ä»·æ ¼ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@DecimalMin(value = &quot;0.01&quot;, message = &quot;å•†å“ä»·æ ¼å¿…é¡»å¤§äº0.01&quot;)</span></span><br><span class="line">    <span class="meta">@DecimalMax(value = &quot;999999.99&quot;, message = &quot;å•†å“ä»·æ ¼ä¸èƒ½è¶…è¿‡999999.99&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;åº“å­˜æ•°é‡&quot;, example = &quot;100&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;åº“å­˜æ•°é‡ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value = 0, message = &quot;åº“å­˜æ•°é‡ä¸èƒ½ä¸ºè´Ÿæ•°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer stock;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“åˆ†ç±»ID&quot;, example = &quot;1&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å•†å“åˆ†ç±»ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long categoryId;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“åˆ†ç±»åç§°&quot;, example = &quot;æ•°ç äº§å“&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> String categoryName;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“å›¾ç‰‡URLåˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; imageUrls;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;å•†å“çŠ¶æ€&quot;, example = &quot;ACTIVE&quot;, allowableValues = &#123;&quot;ACTIVE&quot;, &quot;INACTIVE&quot;, &quot;OUT_OF_STOCK&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> ProductStatus status;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;åˆ›å»ºæ—¶é—´&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ›´æ–°æ—¶é—´&quot;, accessMode = Schema.AccessMode.READ_ONLY)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å•†å“çŠ¶æ€æšä¸¾</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ProductStatus</span> &#123;</span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ­£å¸¸é”€å”®&quot;)</span></span><br><span class="line">        ACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;å·²ä¸‹æ¶&quot;)</span></span><br><span class="line">        INACTIVE,</span><br><span class="line">        <span class="meta">@Schema(description = &quot;ç¼ºè´§&quot;)</span></span><br><span class="line">        OUT_OF_STOCK</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°å’Œgetter/setteræ–¹æ³•... (çœç•¥)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Product</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// getter and setter methods</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123; <span class="keyword">return</span> id; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123; <span class="built_in">this</span>.id = id; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123; <span class="keyword">return</span> description; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123; <span class="built_in">this</span>.description = description; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> BigDecimal <span class="title function_">getPrice</span><span class="params">()</span> &#123; <span class="keyword">return</span> price; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(BigDecimal price)</span> &#123; <span class="built_in">this</span>.price = price; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getStock</span><span class="params">()</span> &#123; <span class="keyword">return</span> stock; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStock</span><span class="params">(Integer stock)</span> &#123; <span class="built_in">this</span>.stock = stock; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getCategoryId</span><span class="params">()</span> &#123; <span class="keyword">return</span> categoryId; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategoryId</span><span class="params">(Long categoryId)</span> &#123; <span class="built_in">this</span>.categoryId = categoryId; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCategoryName</span><span class="params">()</span> &#123; <span class="keyword">return</span> categoryName; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCategoryName</span><span class="params">(String categoryName)</span> &#123; <span class="built_in">this</span>.categoryName = categoryName; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getImageUrls</span><span class="params">()</span> &#123; <span class="keyword">return</span> imageUrls; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setImageUrls</span><span class="params">(List&lt;String&gt; imageUrls)</span> &#123; <span class="built_in">this</span>.imageUrls = imageUrls; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> ProductStatus <span class="title function_">getStatus</span><span class="params">()</span> &#123; <span class="keyword">return</span> status; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(ProductStatus status)</span> &#123; <span class="built_in">this</span>.status = status; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getCreateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> createTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreateTime</span><span class="params">(LocalDateTime createTime)</span> &#123; <span class="built_in">this</span>.createTime = createTime; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getUpdateTime</span><span class="params">()</span> &#123; <span class="keyword">return</span> updateTime; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUpdateTime</span><span class="params">(LocalDateTime updateTime)</span> &#123; <span class="built_in">this</span>.updateTime = updateTime; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å•†å“æ§åˆ¶å™¨"><a class="markdownIt-Anchor" href="#å•†å“æ§åˆ¶å™¨"></a> ğŸ¯ å•†å“æ§åˆ¶å™¨</h4><p>ç„¶ååˆ›å»ºä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å•†å“æ§åˆ¶å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.ecommerce.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.common.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> com.example.ecommerce.entity.Product;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.*;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Content;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.ExampleObject;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponses;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.responses.ApiResponse as SwaggerApiResponse;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.Valid;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.ResponseEntity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•†å“ç®¡ç†æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * ç”µå•†ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ï¼Œè´Ÿè´£å•†å“çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªæ§åˆ¶å™¨å°±åƒæ˜¯å•†å“çš„&quot;ç”Ÿå‘½ç®¡å®¶&quot;ï¼Œä»å•†å“çš„è¯ç”Ÿåˆ°ä¸‹æ¶ï¼Œ</span></span><br><span class="line"><span class="comment"> * æ¯ä¸€ä¸ªç¯èŠ‚éƒ½åœ¨è¿™é‡Œå¾—åˆ°ç²¾å¿ƒå‘µæŠ¤ï¼ğŸ›ï¸</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/products&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;å•†å“ç®¡ç†&quot;, description = &quot;ç”µå•†ç³»ç»Ÿå•†å“ç®¡ç†æ ¸å¿ƒæ¥å£ï¼Œæ”¯æŒCRUDã€æœç´¢ã€åº“å­˜ç®¡ç†ç­‰åŠŸèƒ½ ğŸ›’&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å•†å“æœç´¢æ¥å£</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå¤šç»´åº¦æœç´¢ï¼Œç®€ç›´æ˜¯å•†å“æŸ¥æ‰¾çš„&quot;ç‘å£«å†›åˆ€&quot;ï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/search&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;å•†å“æœç´¢&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    æ”¯æŒå¤šç»´åº¦å•†å“æœç´¢çš„å¼ºå¤§æ¥å£ã€‚</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ” æœç´¢åŠŸèƒ½</span></span><br><span class="line"><span class="meta">                    - **å…³é”®å­—æœç´¢**: æ”¯æŒå•†å“åç§°ã€æè¿°æ¨¡ç³Šæœç´¢</span></span><br><span class="line"><span class="meta">                    - **åˆ†ç±»ç­›é€‰**: æŒ‰å•†å“åˆ†ç±»è¿›è¡Œç­›é€‰</span></span><br><span class="line"><span class="meta">                    - **ä»·æ ¼åŒºé—´**: æ”¯æŒæœ€ä½ä»·å’Œæœ€é«˜ä»·ç­›é€‰</span></span><br><span class="line"><span class="meta">                    - **çŠ¶æ€ç­›é€‰**: æ”¯æŒæŒ‰å•†å“çŠ¶æ€ç­›é€‰</span></span><br><span class="line"><span class="meta">                    - **æ’åºåŠŸèƒ½**: æ”¯æŒæŒ‰ä»·æ ¼ã€åˆ›å»ºæ—¶é—´ã€é”€é‡ç­‰æ’åº</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ’¡ ä½¿ç”¨æŠ€å·§</span></span><br><span class="line"><span class="meta">                    - å¤šä¸ªæ¡ä»¶å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œç³»ç»Ÿä¼šæ™ºèƒ½åŒ¹é…</span></span><br><span class="line"><span class="meta">                    - æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§å½±å“æ€§èƒ½</span></span><br><span class="line"><span class="meta">                    - é»˜è®¤æŒ‰ç›¸å…³åº¦æ’åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–æ’åºæ–¹å¼</span></span><br><span class="line"><span class="meta">                    &quot;&quot;&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;å•†å“æŸ¥è¯¢&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Parameters(&#123;</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;keyword&quot;, description = &quot;æœç´¢å…³é”®å­—&quot;, example = &quot;iPhone&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;categoryId&quot;, description = &quot;å•†å“åˆ†ç±»ID&quot;, example = &quot;1&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;minPrice&quot;, description = &quot;æœ€ä½ä»·æ ¼&quot;, example = &quot;100.00&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;maxPrice&quot;, description = &quot;æœ€é«˜ä»·æ ¼&quot;, example = &quot;10000.00&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;status&quot;, description = &quot;å•†å“çŠ¶æ€&quot;, example = &quot;ACTIVE&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;sortBy&quot;, description = &quot;æ’åºå­—æ®µ&quot;, example = &quot;price&quot;, </span></span><br><span class="line"><span class="meta">                      schema = @Schema(allowableValues = &#123;&quot;price&quot;, &quot;createTime&quot;, &quot;sales&quot;&#125;)),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;sortOrder&quot;, description = &quot;æ’åºæ–¹å‘&quot;, example = &quot;asc&quot;,</span></span><br><span class="line"><span class="meta">                      schema = @Schema(allowableValues = &#123;&quot;asc&quot;, &quot;desc&quot;&#125;)),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;page&quot;, description = &quot;é¡µç &quot;, example = &quot;1&quot;),</span></span><br><span class="line"><span class="meta">            @Parameter(name = &quot;size&quot;, description = &quot;æ¯é¡µå¤§å°&quot;, example = &quot;20&quot;)</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;200&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;æœç´¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    name = &quot;æœç´¢ç»“æœ&quot;,</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;æœç´¢æˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;list&quot;: [</span></span><br><span class="line"><span class="meta">                                                  &#123;</span></span><br><span class="line"><span class="meta">                                                    &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                    &quot;name&quot;: &quot;iPhone 15 Pro Max&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;description&quot;: &quot;è‹¹æœæœ€æ–°æ——èˆ°æ‰‹æœº&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;price&quot;: 9999.00,</span></span><br><span class="line"><span class="meta">                                                    &quot;stock&quot;: 50,</span></span><br><span class="line"><span class="meta">                                                    &quot;categoryId&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                    &quot;categoryName&quot;: &quot;æ•°ç äº§å“&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                    &quot;imageUrls&quot;: [&quot;http://example.com/image1.jpg&quot;]</span></span><br><span class="line"><span class="meta">                                                  &#125;</span></span><br><span class="line"><span class="meta">                                                ],</span></span><br><span class="line"><span class="meta">                                                &quot;total&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;page&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;size&quot;: 20</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; <span class="title function_">searchProducts</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> String keyword,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> Long categoryId,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> BigDecimal minPrice,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> BigDecimal maxPrice,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(required = false)</span> Product.ProductStatus status,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;createTime&quot;)</span> String sortBy,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;desc&quot;)</span> String sortOrder,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer page,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(defaultValue = &quot;20&quot;)</span> Integer size)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæœç´¢é€»è¾‘</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">mockProduct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Product</span>();</span><br><span class="line">        mockProduct.setId(<span class="number">1L</span>);</span><br><span class="line">        mockProduct.setName(<span class="string">&quot;iPhone 15 Pro Max&quot;</span>);</span><br><span class="line">        mockProduct.setDescription(<span class="string">&quot;è‹¹æœæœ€æ–°æ——èˆ°æ‰‹æœºï¼Œæ€§èƒ½å¼ºæ‚&quot;</span>);</span><br><span class="line">        mockProduct.setPrice(<span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;9999.00&quot;</span>));</span><br><span class="line">        mockProduct.setStock(<span class="number">50</span>);</span><br><span class="line">        mockProduct.setCategoryId(<span class="number">1L</span>);</span><br><span class="line">        mockProduct.setCategoryName(<span class="string">&quot;æ•°ç äº§å“&quot;</span>);</span><br><span class="line">        mockProduct.setStatus(Product.ProductStatus.ACTIVE);</span><br><span class="line">        mockProduct.setImageUrls(Arrays.asList(<span class="string">&quot;http://example.com/image1.jpg&quot;</span>));</span><br><span class="line">        mockProduct.setCreateTime(LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        List&lt;Product&gt; products = Arrays.asList(mockProduct);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ„é€ åˆ†é¡µç»“æœ</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> List&lt;Product&gt; list = products;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">page</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">hasNext</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">hasPrev</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;æœç´¢æˆåŠŸ&quot;</span>, result));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºå•†å“</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£å°±åƒæ˜¯å•†å“çš„&quot;å‡ºç”Ÿç™»è®°å¤„&quot;ï¼Œæ¯ä¸ªæ–°å•†å“éƒ½è¦åœ¨è¿™é‡Œç™»è®°é€ å†Œï¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;åˆ›å»ºå•†å“&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    åˆ›å»ºä¸€ä¸ªæ–°çš„å•†å“ã€‚</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### âœ… éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="meta">                    - å•†å“åç§°ï¼š2-100å­—ç¬¦ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - å•†å“ä»·æ ¼ï¼š0.01-999999.99ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - åº“å­˜æ•°é‡ï¼šä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - å•†å“åˆ†ç±»ï¼šå¿…é¡»é€‰æ‹©æœ‰æ•ˆåˆ†ç±»ï¼Œå¿…å¡«</span></span><br><span class="line"><span class="meta">                    - å•†å“æè¿°ï¼šæœ€å¤š1000å­—ç¬¦ï¼Œé€‰å¡«</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ¯ åˆ›å»ºå</span></span><br><span class="line"><span class="meta">                    - ç³»ç»Ÿè‡ªåŠ¨è®¾ç½®åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´</span></span><br><span class="line"><span class="meta">                    - é»˜è®¤çŠ¶æ€ä¸ºACTIVEï¼ˆæ­£å¸¸é”€å”®ï¼‰</span></span><br><span class="line"><span class="meta">                    - è¿”å›å®Œæ•´çš„å•†å“ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç”Ÿæˆçš„ID</span></span><br><span class="line"><span class="meta">                    &quot;&quot;&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;å•†å“ç®¡ç†&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@io</span>.swagger.v3.oas.annotations.parameters.RequestBody(</span><br><span class="line">            description = <span class="string">&quot;å•†å“ä¿¡æ¯&quot;</span>,</span><br><span class="line">            required = <span class="literal">true</span>,</span><br><span class="line">            content = <span class="meta">@Content(</span></span><br><span class="line"><span class="meta">                    mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                    schema = @Schema(implementation = Product.class),</span></span><br><span class="line"><span class="meta">                    examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                            name = &quot;åˆ›å»ºå•†å“ç¤ºä¾‹&quot;,</span></span><br><span class="line"><span class="meta">                            value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                    &#123;</span></span><br><span class="line"><span class="meta">                                      &quot;name&quot;: &quot;MacBook Pro 16è‹±å¯¸&quot;,</span></span><br><span class="line"><span class="meta">                                      &quot;description&quot;: &quot;è‹¹æœä¸“ä¸šçº§ç¬”è®°æœ¬ç”µè„‘ï¼Œé€‚åˆå¼€å‘å’Œè®¾è®¡å·¥ä½œ&quot;,</span></span><br><span class="line"><span class="meta">                                      &quot;price&quot;: 19999.00,</span></span><br><span class="line"><span class="meta">                                      &quot;stock&quot;: 30,</span></span><br><span class="line"><span class="meta">                                      &quot;categoryId&quot;: 2,</span></span><br><span class="line"><span class="meta">                                      &quot;imageUrls&quot;: [</span></span><br><span class="line"><span class="meta">                                        &quot;http://example.com/macbook1.jpg&quot;,</span></span><br><span class="line"><span class="meta">                                        &quot;http://example.com/macbook2.jpg&quot;</span></span><br><span class="line"><span class="meta">                                      ]</span></span><br><span class="line"><span class="meta">                                    &#125;</span></span><br><span class="line"><span class="meta">                                    &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line">    )</span><br><span class="line">    <span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;201&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å•†å“åˆ›å»ºæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 200,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;å•†å“åˆ›å»ºæˆåŠŸ&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: &#123;</span></span><br><span class="line"><span class="meta">                                                &quot;id&quot;: 1,</span></span><br><span class="line"><span class="meta">                                                &quot;name&quot;: &quot;MacBook Pro 16è‹±å¯¸&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;description&quot;: &quot;è‹¹æœä¸“ä¸šçº§ç¬”è®°æœ¬ç”µè„‘&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;price&quot;: 19999.00,</span></span><br><span class="line"><span class="meta">                                                &quot;stock&quot;: 30,</span></span><br><span class="line"><span class="meta">                                                &quot;categoryId&quot;: 2,</span></span><br><span class="line"><span class="meta">                                                &quot;categoryName&quot;: &quot;ç¬”è®°æœ¬ç”µè„‘&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;status&quot;: &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;createTime&quot;: &quot;2024-01-01 12:00:00&quot;,</span></span><br><span class="line"><span class="meta">                                                &quot;updateTime&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                              &#125;,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            ),</span></span><br><span class="line"><span class="meta">            @SwaggerApiResponse(</span></span><br><span class="line"><span class="meta">                    responseCode = &quot;400&quot;,</span></span><br><span class="line"><span class="meta">                    description = &quot;å‚æ•°éªŒè¯å¤±è´¥&quot;,</span></span><br><span class="line"><span class="meta">                    content = @Content(</span></span><br><span class="line"><span class="meta">                            mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                            examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                                    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                            &#123;</span></span><br><span class="line"><span class="meta">                                              &quot;code&quot;: 400,</span></span><br><span class="line"><span class="meta">                                              &quot;message&quot;: &quot;å•†å“åç§°ä¸èƒ½ä¸ºç©º&quot;,</span></span><br><span class="line"><span class="meta">                                              &quot;data&quot;: null,</span></span><br><span class="line"><span class="meta">                                              &quot;timestamp&quot;: &quot;2024-01-01 12:00:00&quot;</span></span><br><span class="line"><span class="meta">                                            &#125;</span></span><br><span class="line"><span class="meta">                                            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                            )</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;Product&gt;&gt; <span class="title function_">createProduct</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> Product product)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿåˆ›å»ºé€»è¾‘</span></span><br><span class="line">        product.setId(System.currentTimeMillis()); <span class="comment">// æ¨¡æ‹ŸIDç”Ÿæˆ</span></span><br><span class="line">        product.setStatus(Product.ProductStatus.ACTIVE);</span><br><span class="line">        product.setCreateTime(LocalDateTime.now());</span><br><span class="line">        product.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        product.setCategoryName(<span class="string">&quot;æ•°ç äº§å“&quot;</span>); <span class="comment">// æ¨¡æ‹Ÿåˆ†ç±»åç§°</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED)</span><br><span class="line">                .body(ApiResponse.success(<span class="string">&quot;å•†å“åˆ›å»ºæˆåŠŸ&quot;</span>, product));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡æ›´æ–°åº“å­˜</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ¥å£å°±åƒæ˜¯ä»“åº“ç®¡ç†å‘˜ï¼Œå¯ä»¥ä¸€æ¬¡æ€§è°ƒæ•´å¤šä¸ªå•†å“çš„åº“å­˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PatchMapping(&quot;/stock/batch&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(</span></span><br><span class="line"><span class="meta">            summary = &quot;æ‰¹é‡æ›´æ–°åº“å­˜&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    æ‰¹é‡æ›´æ–°å¤šä¸ªå•†å“çš„åº“å­˜æ•°é‡ã€‚</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### ğŸ“¦ åŠŸèƒ½è¯´æ˜</span></span><br><span class="line"><span class="meta">                    - æ”¯æŒåŒæ—¶æ›´æ–°å¤šä¸ªå•†å“çš„åº“å­˜</span></span><br><span class="line"><span class="meta">                    - æ”¯æŒå¢åŠ æˆ–å‡å°‘åº“å­˜æ“ä½œ</span></span><br><span class="line"><span class="meta">                    - ä¼šè‡ªåŠ¨æ£€æŸ¥åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="meta">                    - åº“å­˜å˜åŠ¨ä¼šè®°å½•æ—¥å¿—ï¼Œä¾¿äºè¿½è¸ª</span></span><br><span class="line"><span class="meta">                    </span></span><br><span class="line"><span class="meta">                    ### âš ï¸ æ³¨æ„äº‹é¡¹</span></span><br><span class="line"><span class="meta">                    - å‡å°‘åº“å­˜æ—¶ï¼Œä¸èƒ½ä½¿åº“å­˜å˜ä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="meta">                    - å•†å“IDå¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¼šè·³è¿‡è¯¥å•†å“</span></span><br><span class="line"><span class="meta">                    - æ“ä½œå®Œæˆåä¼šè¿”å›æ›´æ–°ç»“æœç»Ÿè®¡</span></span><br><span class="line"><span class="meta">                    &quot;&quot;&quot;,</span></span><br><span class="line"><span class="meta">            tags = &#123;&quot;åº“å­˜ç®¡ç†&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@io</span>.swagger.v3.oas.annotations.parameters.RequestBody(</span><br><span class="line">            description = <span class="string">&quot;åº“å­˜æ›´æ–°ä¿¡æ¯åˆ—è¡¨&quot;</span>,</span><br><span class="line">            content = <span class="meta">@Content(</span></span><br><span class="line"><span class="meta">                    mediaType = &quot;application/json&quot;,</span></span><br><span class="line"><span class="meta">                    examples = @ExampleObject(</span></span><br><span class="line"><span class="meta">                            name = &quot;æ‰¹é‡æ›´æ–°åº“å­˜&quot;,</span></span><br><span class="line"><span class="meta">                            value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                                    [</span></span><br><span class="line"><span class="meta">                                      &#123;</span></span><br><span class="line"><span class="meta">                                        &quot;productId&quot;: 1,</span></span><br><span class="line"><span class="meta">                                        &quot;quantity&quot;: 10,</span></span><br><span class="line"><span class="meta">                                        &quot;operation&quot;: &quot;ADD&quot;</span></span><br><span class="line"><span class="meta">                                      &#125;,</span></span><br><span class="line"><span class="meta">                                      &#123;</span></span><br><span class="line"><span class="meta">                                        &quot;productId&quot;: 2,</span></span><br><span class="line"><span class="meta">                                        &quot;quantity&quot;: 5,</span></span><br><span class="line"><span class="meta">                                        &quot;operation&quot;: &quot;SUBTRACT&quot;</span></span><br><span class="line"><span class="meta">                                      &#125;</span></span><br><span class="line"><span class="meta">                                    ]</span></span><br><span class="line"><span class="meta">                                    &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                    )</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; <span class="title function_">batchUpdateStock</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestBody</span> List&lt;StockUpdateRequest&gt; requests)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿæ‰¹é‡æ›´æ–°é€»è¾‘</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">totalRequests</span> <span class="operator">=</span> requests.size();</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">successCount</span> <span class="operator">=</span> requests.size();</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">failureCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;æ‰€æœ‰å•†å“åº“å­˜æ›´æ–°æˆåŠŸ&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;æ‰¹é‡æ›´æ–°å®Œæˆ&quot;</span>, result));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åº“å­˜æ›´æ–°è¯·æ±‚DTO</span></span><br><span class="line">    <span class="meta">@Schema(name = &quot;StockUpdateRequest&quot;, description = &quot;åº“å­˜æ›´æ–°è¯·æ±‚&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StockUpdateRequest</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;å•†å“ID&quot;, example = &quot;1&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">        <span class="keyword">private</span> Long productId;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;å˜åŠ¨æ•°é‡&quot;, example = &quot;10&quot;, requiredMode = Schema.RequiredMode.REQUIRED)</span></span><br><span class="line">        <span class="keyword">private</span> Integer quantity;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ“ä½œç±»å‹&quot;, example = &quot;ADD&quot;, allowableValues = &#123;&quot;ADD&quot;, &quot;SUBTRACT&quot;&#125;)</span></span><br><span class="line">        <span class="keyword">private</span> StockOperation operation;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Schema(description = &quot;æ“ä½œè¯´æ˜&quot;, example = &quot;è¡¥è´§å…¥åº“&quot;)</span></span><br><span class="line">        <span class="keyword">private</span> String remark;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">StockOperation</span> &#123;</span><br><span class="line">            <span class="meta">@Schema(description = &quot;å¢åŠ åº“å­˜&quot;)</span></span><br><span class="line">            ADD,</span><br><span class="line">            <span class="meta">@Schema(description = &quot;å‡å°‘åº“å­˜&quot;)</span></span><br><span class="line">            SUBTRACT</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getter and setter</span></span><br><span class="line">        <span class="keyword">public</span> Long <span class="title function_">getProductId</span><span class="params">()</span> &#123; <span class="keyword">return</span> productId; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProductId</span><span class="params">(Long productId)</span> &#123; <span class="built_in">this</span>.productId = productId; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">getQuantity</span><span class="params">()</span> &#123; <span class="keyword">return</span> quantity; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setQuantity</span><span class="params">(Integer quantity)</span> &#123; <span class="built_in">this</span>.quantity = quantity; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> StockOperation <span class="title function_">getOperation</span><span class="params">()</span> &#123; <span class="keyword">return</span> operation; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOperation</span><span class="params">(StockOperation operation)</span> &#123; <span class="built_in">this</span>.operation = operation; &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getRemark</span><span class="params">()</span> &#123; <span class="keyword">return</span> remark; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemark</span><span class="params">(String remark)</span> &#123; <span class="built_in">this</span>.remark = remark; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿™ä¸ªå•†å“æ§åˆ¶å™¨ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆæœ‰å®æˆ˜ä»·å€¼ï¼ŸğŸ˜ å®ƒä¸ä»…åŒ…å«äº†å¸¸è§çš„CRUDæ“ä½œï¼Œè¿˜æœ‰æœç´¢ã€æ‰¹é‡æ“ä½œç­‰é«˜çº§åŠŸèƒ½ï¼Œè€Œä¸”æ¯ä¸ªæ¥å£çš„æ–‡æ¡£éƒ½éå¸¸è¯¦ç»†ï¼</p><h3 id="æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—"><a class="markdownIt-Anchor" href="#æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—"></a> ğŸ­ æœ€ä½³å®è·µä¸é¿å‘æŒ‡å—</h3><p>ç»è¿‡è¿™ä¹ˆå¤šå¹´çš„æ‘¸çˆ¬æ»šæ‰“ï¼Œæˆ‘æ€»ç»“äº†ä¸€äº›ä½¿ç”¨OpenAPIçš„æœ€ä½³å®è·µï¼Œè¿™äº›éƒ½æ˜¯æˆ‘è¸©è¿‡å‘åçš„è¡€æ³ªç»éªŒå•Šï¼ğŸ˜­</p><h4 id="æœ€ä½³å®è·µ"><a class="markdownIt-Anchor" href="#æœ€ä½³å®è·µ"></a> âœ… æœ€ä½³å®è·µ</h4><h5 id="1ï¸âƒ£-ç»Ÿä¸€å“åº”æ ¼å¼"><a class="markdownIt-Anchor" href="#1ï¸âƒ£-ç»Ÿä¸€å“åº”æ ¼å¼"></a> 1ï¸âƒ£ ç»Ÿä¸€å“åº”æ ¼å¼</h5><p><strong>ä¸€å®šè¦</strong>ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼è¿™ä¸ä»…è®©APIä½¿ç”¨è€…æ„Ÿåˆ°èˆ’é€‚ï¼Œä¹Ÿè®©æ–‡æ¡£çœ‹èµ·æ¥æ›´ä¸“ä¸šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;ApiResponse&lt;User&gt;&gt; <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok(ApiResponse.success(<span class="string">&quot;åˆ›å»ºæˆåŠŸ&quot;</span>, user));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³• âŒ</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/users&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">createUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> user; <span class="comment">// æ²¡æœ‰ç»Ÿä¸€åŒ…è£…ï¼Œä¸åˆ©äºé”™è¯¯å¤„ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2ï¸âƒ£-è¯¦ç»†çš„å‚æ•°æè¿°"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-è¯¦ç»†çš„å‚æ•°æè¿°"></a> 2ï¸âƒ£ è¯¦ç»†çš„å‚æ•°æè¿°</h5><p>å‚æ•°æè¿°è¦è¯¦ç»†ï¼Œè¦è®©ä½¿ç”¨è€…ä¸€çœ‹å°±æ˜ç™½ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@Parameter(</span></span><br><span class="line"><span class="meta">    name = &quot;status&quot;,</span></span><br><span class="line"><span class="meta">    description = &quot;ç”¨æˆ·çŠ¶æ€ç­›é€‰æ¡ä»¶ã€‚ACTIVEè¡¨ç¤ºæ­£å¸¸ç”¨æˆ·ï¼ŒINACTIVEè¡¨ç¤ºç¦ç”¨ç”¨æˆ·ï¼ŒBANNEDè¡¨ç¤ºå°ç¦ç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">    example = &quot;ACTIVE&quot;,</span></span><br><span class="line"><span class="meta">    schema = @Schema(allowableValues = &#123;&quot;ACTIVE&quot;, &quot;INACTIVE&quot;, &quot;BANNED&quot;&#125;)</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³• âŒ</span></span><br><span class="line"><span class="meta">@Parameter(name = &quot;status&quot;, description = &quot;çŠ¶æ€&quot;)</span> <span class="comment">// å¤ªç®€å•ï¼Œä¸çŸ¥é“æœ‰å“ªäº›å€¼</span></span><br></pre></td></tr></table></figure><h5 id="3ï¸âƒ£-åˆç†ä½¿ç”¨ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#3ï¸âƒ£-åˆç†ä½¿ç”¨ç¤ºä¾‹"></a> 3ï¸âƒ£ åˆç†ä½¿ç”¨ç¤ºä¾‹</h5><p>ç¤ºä¾‹è¦è´´è¿‘çœŸå®åœºæ™¯ï¼Œä¸è¦ç”¨<code>foo</code>ã€<code>bar</code>è¿™ç§æ— æ„ä¹‰çš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¥½çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@ExampleObject(</span></span><br><span class="line"><span class="meta">    name = &quot;åˆ›å»ºç”¨æˆ·&quot;,</span></span><br><span class="line"><span class="meta">    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">            &#123;</span></span><br><span class="line"><span class="meta">              &quot;username&quot;: &quot;zhangsan&quot;,</span></span><br><span class="line"><span class="meta">              &quot;email&quot;: &quot;zhangsan@example.com&quot;,</span></span><br><span class="line"><span class="meta">              &quot;age&quot;: 25,</span></span><br><span class="line"><span class="meta">              &quot;phone&quot;: &quot;13812345678&quot;</span></span><br><span class="line"><span class="meta">            &#125;</span></span><br><span class="line"><span class="meta">            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¥½çš„åšæ³• âŒ</span></span><br><span class="line"><span class="meta">@ExampleObject(</span></span><br><span class="line"><span class="meta">    value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">            &#123;</span></span><br><span class="line"><span class="meta">              &quot;username&quot;: &quot;foo&quot;,</span></span><br><span class="line"><span class="meta">              &quot;email&quot;: &quot;bar@baz.com&quot;,</span></span><br><span class="line"><span class="meta">              &quot;age&quot;: 123</span></span><br><span class="line"><span class="meta">            &#125;</span></span><br><span class="line"><span class="meta">            &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure><h4 id="ï¸-å¸¸è§é™·é˜±"><a class="markdownIt-Anchor" href="#ï¸-å¸¸è§é™·é˜±"></a> âš ï¸ å¸¸è§é™·é˜±</h4><h5 id="1ï¸âƒ£-å¿˜è®°å¤„ç†ä¸åŒå“åº”ç "><a class="markdownIt-Anchor" href="#1ï¸âƒ£-å¿˜è®°å¤„ç†ä¸åŒå“åº”ç "></a> 1ï¸âƒ£ å¿˜è®°å¤„ç†ä¸åŒå“åº”ç </h5><p>å¾ˆå¤šåŒå­¦åªå†™200çš„æƒ…å†µï¼Œå®Œå…¨å¿˜è®°äº†é”™è¯¯å¤„ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®Œæ•´çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@ApiResponses(&#123;</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;200&quot;, description = &quot;æ“ä½œæˆåŠŸ&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;400&quot;, description = &quot;å‚æ•°é”™è¯¯&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;401&quot;, description = &quot;æœªè®¤è¯&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;403&quot;, description = &quot;æƒé™ä¸è¶³&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;404&quot;, description = &quot;èµ„æºä¸å­˜åœ¨&quot;),</span></span><br><span class="line"><span class="meta">    @SwaggerApiResponse(responseCode = &quot;500&quot;, description = &quot;æœåŠ¡å™¨é”™è¯¯&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></figure><h5 id="2ï¸âƒ£-å¿½ç•¥æ•°æ®éªŒè¯æ³¨è§£"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-å¿½ç•¥æ•°æ®éªŒè¯æ³¨è§£"></a> 2ï¸âƒ£ å¿½ç•¥æ•°æ®éªŒè¯æ³¨è§£</h5><p>è®°ä½ï¼ŒSpringçš„éªŒè¯æ³¨è§£å’ŒOpenAPIæ³¨è§£è¦é…åˆä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®çš„åšæ³• âœ…</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;ç”¨æˆ·å¹´é¾„&quot;, example = &quot;25&quot;, minimum = &quot;1&quot;, maximum = &quot;150&quot;)</span></span><br><span class="line"><span class="meta">@Min(value = 1, message = &quot;å¹´é¾„å¿…é¡»å¤§äº0&quot;)</span></span><br><span class="line"><span class="meta">@Max(value = 150, message = &quot;å¹´é¾„ä¸èƒ½è¶…è¿‡150&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br></pre></td></tr></table></figure><h5 id="3ï¸âƒ£-ç”Ÿäº§ç¯å¢ƒæš´éœ²æ–‡æ¡£"><a class="markdownIt-Anchor" href="#3ï¸âƒ£-ç”Ÿäº§ç¯å¢ƒæš´éœ²æ–‡æ¡£"></a> 3ï¸âƒ£ ç”Ÿäº§ç¯å¢ƒæš´éœ²æ–‡æ¡£</h5><p>ç”Ÿäº§ç¯å¢ƒä¸€å®šè¦å…³é—­APIæ–‡æ¡£ï¼è¿™ä¸ªå‘æˆ‘è§è¿‡å¤ªå¤šå›¢é˜Ÿè¸©äº†ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿäº§ç¯å¢ƒé…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span>  <span class="comment"># ç”Ÿäº§ç¯å¢ƒå…³é—­</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span>  <span class="comment"># ç”Ÿäº§ç¯å¢ƒå…³é—­</span></span><br></pre></td></tr></table></figure><h4 id="æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a class="markdownIt-Anchor" href="#æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a> ğŸ”§ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4><h5 id="1ï¸âƒ£-æ‡’åŠ è½½é…ç½®"><a class="markdownIt-Anchor" href="#1ï¸âƒ£-æ‡’åŠ è½½é…ç½®"></a> 1ï¸âƒ£ æ‡’åŠ è½½é…ç½®</h5><p>å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥é…ç½®æ‡’åŠ è½½æ¥æå‡å¯åŠ¨é€Ÿåº¦ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">lazy-initialization:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">disabled:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h5 id="2ï¸âƒ£-æ’é™¤ä¸å¿…è¦çš„æ¥å£"><a class="markdownIt-Anchor" href="#2ï¸âƒ£-æ’é™¤ä¸å¿…è¦çš„æ¥å£"></a> 2ï¸âƒ£ æ’é™¤ä¸å¿…è¦çš„æ¥å£</h5><p>æœ‰äº›å†…éƒ¨æ¥å£ä¸éœ€è¦å‡ºç°åœ¨æ–‡æ¡£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Hidden</span>  <span class="comment">// æ•´ä¸ªæ§åˆ¶å™¨éƒ½ä¸åœ¨æ–‡æ¡£ä¸­æ˜¾ç¤º</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InternalController</span> &#123;</span><br><span class="line">    <span class="comment">// å†…éƒ¨æ¥å£</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…å•ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/internal&quot;)</span></span><br><span class="line"><span class="meta">@Hidden</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">internalMethod</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;internal&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“ä¸å±•æœ›"><a class="markdownIt-Anchor" href="#æ€»ç»“ä¸å±•æœ›"></a> ğŸŒŸ æ€»ç»“ä¸å±•æœ›</h3><p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä¸ç¦æ„Ÿæ…¨ä¸‡åƒå•Šï¼ğŸ˜Œ ä»æœ€åˆçš„æ‰‹å†™APIæ–‡æ¡£ï¼Œåˆ°ç°åœ¨çš„è‡ªåŠ¨åŒ–ç”Ÿæˆï¼ŒæŠ€æœ¯çš„å‘å±•çœŸæ˜¯æ—¥æ–°æœˆå¼‚ï¼</p><h4 id="æ ¸å¿ƒè¦ç‚¹å›é¡¾"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒè¦ç‚¹å›é¡¾"></a> ğŸ¯ æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4><p>è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« çš„æ ¸å¿ƒè¦ç‚¹ï¼š</p><ol><li><p><strong>SpringBoot 3.xçš„å˜é©</strong>ï¼šå…¨é¢æ‹¥æŠ±Jakarta EEï¼Œæœ€ä½Java 17ï¼Œä¸ºæˆ‘ä»¬å¸¦æ¥äº†æ›´ç°ä»£åŒ–çš„å¼€å‘ä½“éªŒ</p></li><li><p><strong>OpenAPI 3.0çš„å¼ºå¤§</strong>ï¼šç›¸æ¯”2.0ç‰ˆæœ¬ï¼Œ3.0åœ¨æ•°æ®ç±»å‹ã€è®¤è¯æœºåˆ¶ã€ç»„ä»¶å¤ç”¨ç­‰æ–¹é¢éƒ½æœ‰æ˜¾è‘—æå‡</p></li><li><p><strong>SpringDocçš„é€‰æ‹©</strong>ï¼šåœ¨SpringFoxåœæ­¢ç»´æŠ¤çš„æƒ…å†µä¸‹ï¼ŒSpringDocæˆä¸ºäº†SpringBoot 3.xæ—¶ä»£çš„æœ€ä½³é€‰æ‹©</p></li><li><p><strong>æ³¨è§£çš„è‰ºæœ¯</strong>ï¼šé€šè¿‡åˆç†ä½¿ç”¨<code>@Operation</code>ã€<code>@Schema</code>ã€<code>@Parameter</code>ç­‰æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆéå¸¸ä¸“ä¸šçš„APIæ–‡æ¡£</p></li><li><p><strong>æœ€ä½³å®è·µçš„é‡è¦æ€§</strong>ï¼šç»Ÿä¸€å“åº”æ ¼å¼ã€è¯¦ç»†å‚æ•°æè¿°ã€åˆç†ç¤ºä¾‹ä½¿ç”¨ç­‰å®è·µè®©æˆ‘ä»¬çš„APIæ›´åŠ ä¼˜é›…</p></li></ol><h4 id="æœªæ¥å‘å±•è¶‹åŠ¿"><a class="markdownIt-Anchor" href="#æœªæ¥å‘å±•è¶‹åŠ¿"></a> ğŸš€ æœªæ¥å‘å±•è¶‹åŠ¿</h4><p>å±•æœ›æœªæ¥ï¼ŒAPIæ–‡æ¡£çš„å‘å±•è¿˜æœ‰å¾ˆå¤šä»¤äººå…´å¥‹çš„å¯èƒ½æ€§ï¼š</p><p><strong>ğŸ¤– AIé©±åŠ¨çš„æ–‡æ¡£ç”Ÿæˆ</strong><br />éšç€AIæŠ€æœ¯çš„å‘å±•ï¼Œæœªæ¥å¯èƒ½ä¼šæœ‰AIåŠ©æ‰‹è‡ªåŠ¨åˆ†æä»£ç é€»è¾‘ï¼Œç”Ÿæˆæ›´æ™ºèƒ½ã€æ›´è‡ªç„¶çš„APIæè¿°ã€‚æƒ³è±¡ä¸€ä¸‹ï¼ŒAIèƒ½ç†è§£ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œè‡ªåŠ¨ç”Ÿæˆè´´åˆåœºæ™¯çš„ç¤ºä¾‹å’Œè¯´æ˜ï¼Œé‚£è¯¥å¤šé…·å•Šï¼</p><p><strong>ğŸ¨ æ›´ä¸°å¯Œçš„äº¤äº’ä½“éªŒ</strong><br />æœªæ¥çš„APIæ–‡æ¡£å¯èƒ½ä¸å†æ˜¯é™æ€çš„é¡µé¢ï¼Œè€Œæ˜¯åƒæ¸¸æˆä¸€æ ·çš„äº¤äº’å¼ä½“éªŒã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¯è§†åŒ–çš„æ–¹å¼æ¢ç´¢APIï¼Œå®æ—¶çœ‹åˆ°æ•°æ®æµè½¬ï¼Œç”šè‡³å¯ä»¥&quot;ç©&quot;APIï¼</p><p><strong>ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆçš„è®¾è®¡</strong><br />éšç€ç§»åŠ¨å¼€å‘çš„æ™®åŠï¼ŒAPIæ–‡æ¡£ä¹Ÿéœ€è¦è€ƒè™‘ç§»åŠ¨ç«¯çš„ä½¿ç”¨ä½“éªŒã€‚æœªæ¥å¯èƒ½ä¼šæœ‰ä¸“é—¨ä¸ºç§»åŠ¨ç«¯ä¼˜åŒ–çš„æ–‡æ¡£ç•Œé¢ã€‚</p><p><strong>ğŸ”— æ›´æ·±åº¦çš„é›†æˆ</strong><br />APIæ–‡æ¡£ä¸å¼€å‘å·¥å…·ã€æµ‹è¯•æ¡†æ¶ã€ç›‘æ§ç³»ç»Ÿçš„é›†æˆä¼šè¶Šæ¥è¶Šæ·±å…¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„APIç”Ÿæ€ç³»ç»Ÿã€‚</p><h4 id="æœ€åçš„è¯"><a class="markdownIt-Anchor" href="#æœ€åçš„è¯"></a> ğŸ’ æœ€åçš„è¯</h4><p>ä½œä¸ºä¸€ä¸ªåœ¨æŠ€æœ¯è·¯ä¸Šæ‘¸çˆ¬æ»šæ‰“çš„è€å¸æœºï¼Œæˆ‘æƒ³å¯¹å¤§å®¶è¯´ï¼šæŠ€æœ¯æ˜¯å·¥å…·ï¼Œä½†æ€åº¦å†³å®šä¸€åˆ‡ï¼ğŸ’ª</p><p>å†™å¥½APIæ–‡æ¡£ä¸ä»…ä»…æ˜¯ä¸ºäº†å®Œæˆå·¥ä½œï¼Œæ›´æ˜¯å¯¹ä½¿ç”¨è€…çš„ä¸€ç§å°Šé‡å’Œå…³çˆ±ã€‚å½“åˆ«äººä½¿ç”¨ä½ çš„APIæ—¶èƒ½å¤Ÿè½»æ¾ä¸Šæ‰‹ï¼Œå½“å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿå¿«é€Ÿç†è§£æ¥å£é€»è¾‘æ—¶ï¼Œé‚£ç§æˆå°±æ„Ÿæ˜¯æ— æ³•è¨€å–»çš„ï¼</p><p>OpenAPIå’ŒSpringBootçš„ç»“åˆï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œä½†å·¥å…·å†å¼ºå¤§ï¼Œä¹Ÿéœ€è¦æˆ‘ä»¬ç”¨å¿ƒå»ä½¿ç”¨ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°æ­£åœ¨è·¯ä¸Šçš„ä½ ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å†™å‡ºæ›´ä¼˜é›…ã€æ›´å‹å¥½çš„APIï¼ğŸ‰</p><p>å¦‚æœä½ åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè®°ä½ï¼šGoogleæ˜¯ä½ çš„æœ‹å‹ï¼ŒStack Overflowæ˜¯ä½ çš„è€å¸ˆï¼Œè€Œå®˜æ–¹æ–‡æ¡£åˆ™æ˜¯ä½ æœ€å¯é çš„ä¼™ä¼´ï¼å½“ç„¶ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å®è·µç»éªŒï¼Œä¹Ÿæ¬¢è¿åˆ†äº«å‡ºæ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼</p><p>æœ€åçš„æœ€åï¼Œè®°ä½ä¸€å¥è¯ï¼š<strong>ä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿ç»™æœºå™¨æ‰§è¡Œï¼</strong> è®©æˆ‘ä»¬ä¸€èµ·å†™å‡ºæ›´æœ‰æ¸©åº¦çš„ä»£ç å’Œæ–‡æ¡£å§ï¼ğŸŒˆ</p>]]></content>
    
    
    <summary type="html">æ­ç§˜Swaggerä¸OpenAPIé›†æˆçš„ç»ˆææ”»ç•¥</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>Anacondaå®‰è£…ä¸ä½¿ç”¨è¯¦ç»†æ•™ç¨‹</title>
    <link href="http://www.formeasy.cc/2025/09/07/Python/Anaconda%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/"/>
    <id>http://www.formeasy.cc/2025/09/07/Python/Anaconda%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/</id>
    <published>2025-09-07T07:35:15.000Z</published>
    <updated>2025-09-07T07:44:35.917Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡ Anaconda å®‰è£…æ•™ç¨‹å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œåœ¨ Windows ä¸ Linux ä¸Šå®Œç¾éƒ¨ç½² Python æ•°æ®åˆ†æç¯å¢ƒï¼›é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ ä¸ä»…èƒ½æŒæ¡ Anaconda çš„ä¸‹è½½ã€å®‰è£…ä¸ç¯å¢ƒé…ç½®ï¼Œæ›´èƒ½å­¦ä¼šå¦‚ä½•åˆ©ç”¨ Anaconda é¢„è£…çš„ NumPyã€Pandasã€Matplotlib ç­‰æ ¸å¿ƒç§‘å­¦è®¡ç®—åŒ…ï¼Œä¸ºé«˜æ•ˆçš„æ•°æ®å¤„ç†ä¸åˆ†æå·¥ä½œæ‰“ä¸‹åšå®åŸºç¡€ã€‚</p><p><img src="1b965ee301b941ceab6d8a2c09ac5567.jpeg" alt="" /></p><p>Anaconda æ˜¯ä¸€ä¸ªå¼€æºçš„ Python å’Œ Rè¯­è¨€çš„å‘è¡Œç‰ˆæœ¬ï¼Œä¸“ä¸ºç§‘å­¦è®¡ç®—ï¼ˆæ•°æ®ç§‘å­¦ã€æœºå™¨å­¦ä¹ ã€å¤§è§„æ¨¡æ•°æ®å¤„ç†ç­‰ï¼‰è€Œè®¾è®¡ã€‚å®ƒæå¤§åœ°ç®€åŒ–äº†åŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†çš„è¿‡ç¨‹ã€‚Anaconda é¢„è£…äº† <code>conda</code>ã€Python ä»¥åŠæ•°ç™¾ä¸ªå¸¸ç”¨çš„ç§‘å­¦è®¡ç®—ã€æ•°æ®åˆ†æç›¸å…³çš„åŒ…ï¼Œå¦‚ NumPy, Pandas, Scikit-learn, Matplotlib ç­‰ï¼Œè®©ä½ æ— éœ€å†ä¸ºç¹ççš„ä¾èµ–é—®é¢˜è€Œçƒ¦æ¼ã€‚</p><h3 id="å…³äºä¸‹è½½"><a class="markdownIt-Anchor" href="#å…³äºä¸‹è½½"></a> <strong>å…³äºä¸‹è½½</strong></h3><blockquote><p><strong>å®˜ç½‘</strong>ï¼š<code>https://www.anaconda.com/download</code><br /><strong>å›½å†…é•œåƒæº (æ¨è)</strong>ï¼š<code>https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</code></p></blockquote><p>ç”±äºAnacondaçš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œç›´æ¥ä»å®˜ç½‘ä¸‹è½½å¯èƒ½ä¼šéå¸¸ç¼“æ…¢ã€‚å› æ­¤ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…çš„é•œåƒæºï¼ˆå¦‚æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼‰è¿›è¡Œä¸‹è½½ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚</p><h3 id="ä¸€-windows-å¹³å°å®‰è£…ä¸ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ä¸€-windows-å¹³å°å®‰è£…ä¸ä½¿ç”¨"></a> <strong>ä¸€ã€Windows å¹³å°å®‰è£…ä¸ä½¿ç”¨</strong></h3><h4 id="11-ä¸‹è½½-anaconda-å®‰è£…åŒ…"><a class="markdownIt-Anchor" href="#11-ä¸‹è½½-anaconda-å®‰è£…åŒ…"></a> <strong>1.1 ä¸‹è½½ Anaconda å®‰è£…åŒ…</strong></h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è·å– Anaconda çš„ Windows å®‰è£…ç¨‹åºã€‚</p><p><strong>1.è®¿é—® Anaconda å®˜ç½‘</strong>ï¼š<br />æ‰“å¼€æµè§ˆå™¨ï¼Œè¿›å…¥ Anaconda Distributioné¡µé¢ï¼Œç‚¹å‡»Free Download</p><p><img src="4fd8ea5f657e4220a36d696e8a3dfc5b.png" alt="" /></p><p><strong>2.è¿›å…¥ä¸‹è½½é¡µé¢</strong>ï¼š<br />ç‚¹å‡»é¡µé¢ä¸Šçš„ â€œGet Startedâ€ æˆ– â€œDownloadâ€ æŒ‰é’®ï¼Œé€šå¸¸ä¼šè·³è½¬åˆ°ä¸‹è½½é¡µé¢ã€‚</p><p><img src="a3f788eaf3da412b89834bf8e35e30de.png" alt="" /></p><p><strong>3.å¼€å§‹ä¸‹è½½</strong>ï¼š<br />åœ¨ â€œDistribution Installersâ€ ä¸‹æ–¹ï¼Œç‚¹å‡» â€œDownloadâ€ æŒ‰é’®ï¼Œé¡µé¢å¯èƒ½ä¼šæç¤ºä½ æ³¨å†Œæˆ–æ„Ÿè°¢ä¸‹è½½ã€‚</p><p><img src="9131837761e94316a9adcab0ae82f844.png" alt="" /><br /><img src="15d2011ed14c4d8cb92ff0e17a4578f2.png" alt="" /><br /><strong>4.é€‰æ‹©æ­£ç¡®çš„ç‰ˆæœ¬ (ä½¿ç”¨æ¸…åé•œåƒæº)</strong>ï¼š<br />æ‰“å¼€ <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">æ¸…åå¤§å­¦ Anaconda é•œåƒæº</a>ã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰å†å²ç‰ˆæœ¬çš„åˆ—è¡¨ã€‚è¯·æ ¹æ®ä½ çš„ç³»ç»Ÿé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼Œé€šå¸¸æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ <code>Windows-x86_64.exe</code> æ–‡ä»¶ã€‚</p><p><img src="d2f4de32625e48469d00668a4d07affc.png" alt="" /></p><h4 id="12-å®‰è£…-anaconda"><a class="markdownIt-Anchor" href="#12-å®‰è£…-anaconda"></a> <strong>1.2 å®‰è£… Anaconda</strong></h4><p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡» <code>.exe</code> å®‰è£…åŒ…ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå®‰è£…ã€‚</p><p><strong>1.æ¬¢è¿ç•Œé¢</strong>ï¼š<br />ç‚¹å‡» â€œNext &gt;â€ã€‚</p><p><img src="59deb742ac264feba251b3dec24b6957.png" alt="" /></p><p><strong>2.è®¸å¯åè®®</strong>ï¼š<br />é˜…è¯»è®¸å¯åè®®ï¼Œç„¶åç‚¹å‡» â€œI Agreeâ€ã€‚<br /><img src="df8613cf3ace419c843d651bd328129b.png" alt="" /></p><p><strong>3.é€‰æ‹©å®‰è£…ç±»å‹</strong>ï¼š</p><blockquote><p><code>Just Me</code>: åªä¸ºå½“å‰ç”¨æˆ·å®‰è£…ã€‚<br /><code>All Users</code>: ä¸ºæ­¤è®¡ç®—æœºä¸Šçš„æ‰€æœ‰ç”¨æˆ·å®‰è£… (éœ€è¦ç®¡ç†å‘˜æƒé™)ã€‚<br /><strong>å»ºè®®é€‰æ‹© â€œAll Usersâ€</strong>ï¼Œè¿™æœ‰åŠ©äºé¿å…æŸäº›æƒé™é—®é¢˜ã€‚ç„¶åç‚¹å‡» â€œNext &gt;â€ã€‚</p></blockquote><p><img src="50048334d1524c8196ad683190cc1d8b.png" alt="" /></p><p><strong>4.é€‰æ‹©å®‰è£…è·¯å¾„</strong>ï¼š<br />é€‰æ‹©ä¸€ä¸ªä¸å«ç©ºæ ¼å’Œä¸­æ–‡å­—ç¬¦çš„å®‰è£…è·¯å¾„ï¼Œä¾‹å¦‚ <code>E:\Anaconda</code>ã€‚ç„¶åç‚¹å‡» â€œNext &gt;â€ã€‚</p><p><img src="b70810356678480abc78257d4e758256.png" alt="" /></p><p><strong>5.é«˜çº§å®‰è£…é€‰é¡¹ (é‡è¦)</strong>ï¼š</p><blockquote><p><code>Create shortcuts</code>: åˆ›å»ºå¼€å§‹èœå•å¿«æ·æ–¹å¼ (é€šå¸¸ä¿æŒé»˜è®¤)ã€‚<br /><code>Register Anaconda3 as the system Python [ç‰ˆæœ¬å·]</code>: <strong>å¼ºçƒˆå»ºè®®å‹¾é€‰æ­¤é¡¹</strong>ã€‚è¿™ä¼šå°† Anaconda çš„ Python æ³¨å†Œä¸ºç³»ç»Ÿçš„é»˜è®¤ Pythonï¼Œä½¿å¾— VSCode, PyCharm ç­‰IDEèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹åˆ°å®ƒã€‚<br />ç‚¹å‡» â€œInstallâ€ å¼€å§‹å®‰è£…ã€‚</p></blockquote><p><img src="0e78a41791ba4d38a6c025c980c724c8.png" alt="" /></p><p><strong>6.å®‰è£…è¿‡ç¨‹</strong>ï¼š<br />ç­‰å¾…å®‰è£…è¿›åº¦æ¡èµ°å®Œã€‚</p><p><img src="9436573a28dc4cdea40250984b6418de.png" alt="" /></p><p><strong>7.å®‰è£…å®Œæˆ</strong>ï¼š<br />å®‰è£…å®Œæˆåï¼Œç‚¹å‡» â€œNext &gt;â€</p><p><img src="a85eca4924da49bb982f04a9174f5e7b.png" alt="" /></p><p><strong>8.äº‘ç«¯é›†æˆ</strong>ï¼š<br />æ­¤é¡µé¢æ˜¯ Anaconda Cloud çš„æ¨å¹¿ï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡» â€œNext &gt;â€ã€‚</p><p><img src="fa255765b4eb4148a9bd448d308a23d5.png" alt="" /></p><p><strong>9.å®Œæˆè®¾ç½®</strong>ï¼š<br />å–æ¶ˆå‹¾é€‰ â€œLaunch Anaconda Navigatorâ€ å’Œ â€œWelcome to Anacondaâ€ï¼Œç„¶åç‚¹å‡» â€œFinishâ€ å®Œæˆå®‰è£…ã€‚æˆ‘ä»¬ç¨åä¼šæ‰‹åŠ¨å¯åŠ¨ã€‚</p><p><img src="0149de2d97a34736ae26d3d103a2420a.png" alt="" /></p><h4 id="13-é…ç½®ç¯å¢ƒå˜é‡-å…³é”®æ­¥éª¤"><a class="markdownIt-Anchor" href="#13-é…ç½®ç¯å¢ƒå˜é‡-å…³é”®æ­¥éª¤"></a> <strong>1.3 é…ç½®ç¯å¢ƒå˜é‡ (å…³é”®æ­¥éª¤)</strong></h4><p>ä¸ºäº†èƒ½åœ¨ä»»æ„å‘½ä»¤è¡Œçª—å£ (CMD, PowerShell) ä¸­ä½¿ç”¨ <code>conda</code> å’Œ <code>python</code> å‘½ä»¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚</p><p><strong>1.æ‰“å¼€ç³»ç»Ÿå±æ€§</strong>ï¼š<br />åœ¨ Windows æœç´¢æ¡†ä¸­æœç´¢â€œç¯å¢ƒå˜é‡â€ï¼Œå¹¶é€‰æ‹©â€œç¼–è¾‘ç³»ç»Ÿç¯å¢ƒå˜é‡â€ã€‚åœ¨å¼¹å‡ºçš„â€œç³»ç»Ÿå±æ€§â€çª—å£ä¸­ï¼Œç‚¹å‡»â€œç¯å¢ƒå˜é‡(N)â€¦â€ã€‚</p><p><img src="9a65b26cc1f348e99e264f7593a2d2bd.png" alt="" /></p><p><strong>2.ç¼–è¾‘ç”¨æˆ·å˜é‡ Path</strong>ï¼š<br />åœ¨â€œç”¨æˆ·å˜é‡â€éƒ¨åˆ†ï¼Œæ‰¾åˆ°åä¸º <code>Path</code> çš„å˜é‡ï¼Œé€‰ä¸­å®ƒï¼Œç„¶åç‚¹å‡»â€œç¼–è¾‘(E)â€¦â€ã€‚</p><p><img src="c59343ea89ce47ca9cbda9b419f192d6.png" alt="" /></p><p><strong>3.æ·»åŠ  Anaconda è·¯å¾„</strong>ï¼š<br />åœ¨â€œç¼–è¾‘ç¯å¢ƒå˜é‡â€çª—å£ä¸­ï¼Œç‚¹å‡»â€œæ–°å»º(N)â€ï¼Œç„¶åä¾æ¬¡æ·»åŠ ä»¥ä¸‹ä¸‰ä¸ªè·¯å¾„ (è¯·å°† <code>E:\Anaconda</code> æ›¿æ¢ä¸ºä½ çš„å®é™…å®‰è£…è·¯å¾„)ï¼š</p><blockquote><p><code>E:\Anaconda</code><br /><code>E:\Anaconda\Scripts</code><br /><code>E:\Anaconda\Library\bin</code></p></blockquote><p>æ·»åŠ å®Œæˆåï¼Œç‚¹å‡»â€œç¡®å®šâ€ã€‚</p><p><img src="35b98964de204c4496aec2fcbec5892b.png" alt="" /></p><p><strong>4.ç¡®è®¤å¹¶å…³é—­</strong>ï¼š<br />åœ¨â€œç¯å¢ƒå˜é‡â€çª—å£å’Œâ€œç³»ç»Ÿå±æ€§â€çª—å£ä¸­ï¼Œéƒ½ç‚¹å‡»â€œç¡®å®šâ€æ¥ä¿å­˜æ›´æ”¹ã€‚</p><p><img src="6ffc1a7b7c3e411881a45989390d5e89.png" alt="" /></p><h4 id="14-éªŒè¯ä¸ä½¿ç”¨"><a class="markdownIt-Anchor" href="#14-éªŒè¯ä¸ä½¿ç”¨"></a> <strong>1.4 éªŒè¯ä¸ä½¿ç”¨</strong></h4><p><strong>1.éªŒè¯å®‰è£…</strong>ï¼š<br /><strong>é‡æ–°æ‰“å¼€ä¸€ä¸ª</strong> æ–°çš„ CMD æˆ– PowerShell çª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><pre><code>conda</code></pre><p>å¦‚æœèƒ½æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…å’Œç¯å¢ƒå˜é‡é…ç½®æˆåŠŸã€‚ä½ ä¹Ÿå¯ä»¥è¾“å…¥ <code>conda</code> æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤ã€‚</p><p><img src="278db209e5a945b8bf0c0e0d8cde51ee.png" alt="" /></p><p><strong>2.Anaconda Navigator (å›¾å½¢åŒ–ç•Œé¢)</strong>ï¼š<br />ä½ å¯ä»¥åœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ°å¹¶æ‰“å¼€ â€œAnaconda Navigatorâ€ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå›¾å½¢åŒ–çš„ç•Œé¢æ¥ç®¡ç†ç¯å¢ƒå’Œåº”ç”¨ã€‚</p><p><img src="31ac51418658400c9abc8bb404a14f9b.png" alt="" /></p><p><strong>3.å¯åŠ¨ Jupyter Notebook</strong>ï¼š<br />Jupyter Notebook æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„æ•°æ®ç§‘å­¦å¼€å‘ç¯å¢ƒã€‚åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p><pre><code>jupyter notebook</code></pre><p><img src="d583f38c0a1441cbbd94ff390069b8ad.png" alt="" /><br /><img src="26f53d0e9e924ab5b1cc182502dcf7bd.png" alt="" /></p><h3 id="äºŒ-linux-å¹³å°å®‰è£…ä¸ä½¿ç”¨"><a class="markdownIt-Anchor" href="#äºŒ-linux-å¹³å°å®‰è£…ä¸ä½¿ç”¨"></a> <strong>äºŒã€Linux å¹³å°å®‰è£…ä¸ä½¿ç”¨</strong></h3><p>åœ¨ Linux ä¸Šå®‰è£… Anaconda é€šå¸¸æ›´åŠ å¿«æ·ï¼Œä¸»è¦é€šè¿‡å‘½ä»¤è¡Œå®Œæˆã€‚</p><h4 id="21-ä¸‹è½½-anaconda-å®‰è£…è„šæœ¬"><a class="markdownIt-Anchor" href="#21-ä¸‹è½½-anaconda-å®‰è£…è„šæœ¬"></a> <strong>2.1 ä¸‹è½½ Anaconda å®‰è£…è„šæœ¬</strong></h4><p>æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ <code>wget</code> å‘½ä»¤ä»æ¸…åé•œåƒæºä¸‹è½½é€‚ç”¨äº Linux çš„å®‰è£…è„šæœ¬ã€‚</p><pre><code># è¿›å…¥ä¸€ä¸ªä¸´æ—¶ä¸‹è½½ç›®å½•cd /tmp# ä¸‹è½½å®‰è£…è„šæœ¬æˆ–è€…ç›´æ¥ä¸Šä¼ è„šæœ¬ (è¯·ä»æ¸…åé•œåƒæºå®˜ç½‘ç¡®è®¤æœ€æ–°çš„ç‰ˆæœ¬å·)wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2025.06-0-Linux-x86_64.sh</code></pre><h4 id="22-æ‰§è¡Œå®‰è£…è„šæœ¬"><a class="markdownIt-Anchor" href="#22-æ‰§è¡Œå®‰è£…è„šæœ¬"></a> <strong>2.2 æ‰§è¡Œå®‰è£…è„šæœ¬</strong></h4><p>ä¸‹è½½å®Œæˆåï¼Œä½¿ç”¨ <code>bash</code> å‘½ä»¤è¿è¡Œå®‰è£…è„šæœ¬ã€‚</p><pre><code>bash Anaconda3-2025.06-0-Linux-x86_64.sh</code></pre><p>æ¥ä¸‹æ¥ï¼Œå®‰è£…ç¨‹åºä¼šè¿›å…¥äº¤äº’æ¨¡å¼ï¼š</p><ol><li><strong>æ¬¢è¿ç•Œé¢</strong>ï¼šæŒ‰ <code>Enter</code> ç»§ç»­ã€‚</li><li><strong>è®¸å¯åè®®</strong>ï¼šæŒ‰ä½ <code>Enter</code> æˆ– <code>ç©ºæ ¼é”®</code> ç¿»é˜…åè®®ï¼Œç›´åˆ°æœ€åï¼Œè¾“å…¥ <code>yes</code> å¹¶æŒ‰å›è½¦è¡¨ç¤ºåŒæ„ã€‚</li><li><strong>å®‰è£…è·¯å¾„</strong>ï¼šä¼šæç¤ºç¡®è®¤å®‰è£…è·¯å¾„ï¼Œé»˜è®¤æ˜¯ <code>~/anaconda3</code>ã€‚å¯ä»¥ç›´æ¥æŒ‰ <code>Enter</code> æ¥å—é»˜è®¤è·¯å¾„ï¼Œæˆ–è¾“å…¥è‡ªå®šä¹‰è·¯å¾„åæŒ‰å›è½¦ã€‚</li><li><strong>åˆå§‹åŒ– (é‡è¦)</strong>ï¼šæœ€åä¼šè¯¢é—® â€œDo you wish the installer to initialize Anaconda3 by running conda init?â€ã€‚<strong>å¼ºçƒˆå»ºè®®è¾“å…¥ <code>yes</code></strong> å¹¶æŒ‰å›è½¦ã€‚è¿™ä¼šè‡ªåŠ¨ä¿®æ”¹ä½ çš„ <code>~/.bashrc</code> (æˆ–å…¶ä»–shellé…ç½®æ–‡ä»¶)ï¼Œä½¿å¾—æ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯æ—¶ <code>conda</code> ç¯å¢ƒéƒ½èƒ½è¢«æ­£ç¡®åŠ è½½ã€‚</li></ol><p><img src="af0ba5168dd64a5a8eaa38664baf3e45.png" alt="" /><br /><img src="47722366695d487fb1427e14f65bd631.png" alt="" /></p><h4 id="23-æ¿€æ´»ç¯å¢ƒå¹¶éªŒè¯"><a class="markdownIt-Anchor" href="#23-æ¿€æ´»ç¯å¢ƒå¹¶éªŒè¯"></a> <strong>2.3 æ¿€æ´»ç¯å¢ƒå¹¶éªŒè¯</strong></h4><p>å®‰è£…å®Œæˆåï¼Œä½ éœ€è¦é‡æ–°åŠ è½½ shell é…ç½®æ–‡ä»¶æˆ–æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ã€‚</p><pre><code>source ~/.bashrc</code></pre><p>æ­¤æ—¶ï¼Œä½ ä¼šå‘ç°ä½ çš„å‘½ä»¤è¡Œæç¤ºç¬¦å‰é¢å¤šäº†ä¸€ä¸ª <code>(base)</code>ï¼Œè¿™è¡¨ç¤ºä½ æ­£å¤„äº Anaconda çš„åŸºç¡€ç¯å¢ƒä¸­ã€‚<br /><strong>éªŒè¯å®‰è£…ï¼š</strong></p><pre><code>conda --versionpython --version</code></pre><p><img src="744c616ef7df4dd9b6267b54b3f4398b.png" alt="" /></p><h4 id="24-å¸¸ç”¨-conda-å‘½ä»¤"><a class="markdownIt-Anchor" href="#24-å¸¸ç”¨-conda-å‘½ä»¤"></a> <strong>2.4 å¸¸ç”¨ Conda å‘½ä»¤</strong></h4><p><code>conda</code> æ˜¯ Anaconda çš„æ ¸å¿ƒï¼Œç”¨äºåŒ…ç®¡ç†å’Œç¯å¢ƒç®¡ç†ã€‚</p><p><strong>åŒ…ç®¡ç†ï¼š</strong></p><pre><code># æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸­å·²å®‰è£…çš„åŒ…conda list# æœç´¢ä¸€ä¸ªåŒ…conda search pandas# å®‰è£…ä¸€ä¸ªåŒ… (ä»¥pandasä¸ºä¾‹)conda install pandas# æ›´æ–°ä¸€ä¸ªåŒ…conda update pandas# å¸è½½ä¸€ä¸ªåŒ…conda remove pandas</code></pre><p><img src="482c852cd3e5496b8e3eae1d59b92317.png" alt="" /><br /><img src="b484ff5e46a14b6184cbc26b67d8da39.png" alt="" /><br /><img src="a0f512397eda4ce1b1ef788240ff0aac.png" alt="" /><br /><img src="4eb319b3959e4b04b7453bf84261fa63.png" alt="" /></p><p><strong>ç¯å¢ƒç®¡ç† (Conda æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€)</strong>ï¼š<br />ä¸ºä¸åŒé¡¹ç›®åˆ›å»ºç‹¬ç«‹çš„ç¯å¢ƒå¯ä»¥é¿å…åŒ…ç‰ˆæœ¬å†²çªã€‚</p><pre><code># åˆ—å‡ºæ‰€æœ‰å·²åˆ›å»ºçš„ç¯å¢ƒconda env list# åˆ›å»ºä¸€ä¸ªåä¸º my_project çš„æ–°ç¯å¢ƒï¼Œå¹¶æŒ‡å®šPythonç‰ˆæœ¬ä¸º3.9conda create -n my_project python=3.9# åˆ›å»ºæ–°ç¯å¢ƒçš„åŒæ—¶å®‰è£…ä¸€äº›åŒ…conda create -n data_analysis python=3.10 numpy pandas matplotlib# æ¿€æ´»(è¿›å…¥)ä¸€ä¸ªç¯å¢ƒconda activate my_project# æ¿€æ´»åï¼Œä½ çš„å‘½ä»¤è¡Œæç¤ºç¬¦ä¼šå˜ä¸º (my_project)# åœ¨å½“å‰ç¯å¢ƒä¸­å®‰è£…åŒ…conda install scikit-learn# é€€å‡ºå½“å‰ç¯å¢ƒï¼Œè¿”å› base ç¯å¢ƒconda deactivate# åˆ é™¤ä¸€ä¸ªç¯å¢ƒåŠå…¶æ‰€æœ‰åŒ…conda env remove -n my_project</code></pre><p><img src="77b7dcb368424e3eb64574e81e379afd.png" alt="" /><br /><img src="d163610297bf424ea5bdb63df099434c.png" alt="" /><br /><img src="e36faf2886c3494c85826f85f27f5f0a.png" alt="" /><br /><img src="9c49f6266531480f9db5e386f993ae60.png" alt="" /></p><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> <strong>æ€»ç»“</strong></h3><p>Anaconda æå¤§åœ°ç®€åŒ–äº†æ•°æ®ç§‘å­¦é¡¹ç›®çš„ç¯å¢ƒæ­å»ºå’ŒåŒ…ç®¡ç†å·¥ä½œã€‚æ— è®ºæ˜¯åœ¨ Windows è¿˜æ˜¯ Linux å¹³å°ï¼Œé€šè¿‡å‡ ä¸ªç®€å•çš„æ­¥éª¤ï¼Œä½ å°±èƒ½å¿«é€Ÿæ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„æ•°æ®åˆ†æç¯å¢ƒã€‚ç†Ÿç»ƒæŒæ¡ <code>conda</code> çš„ç¯å¢ƒç®¡ç†å‘½ä»¤ï¼Œå°†ä½¿ä½ çš„é¡¹ç›®å¼€å‘å˜å¾—æ›´åŠ æ¸…æ™°å’Œé«˜æ•ˆã€‚</p>]]></content>
    
    
    <summary type="html">Anacondaå®‰è£…ä¸ä½¿ç”¨è¯¦ç»†æ•™ç¨‹</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Python" scheme="http://www.formeasy.cc/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç¨‹åºå‘˜å¤´å‘ç ”ç©¶æŠ¥å‘Šï¼šä»ä»£ç åˆ°å‘é™…çº¿çš„ç§‘å­¦æ¢ç´¢</title>
    <link href="http://www.formeasy.cc/2025/09/04/Other/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A4%B4%E5%8F%91%E7%A0%94%E7%A9%B6%E6%8A%A5%E5%91%8A%EF%BC%9A%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%88%B0%E5%8F%91%E9%99%85%E7%BA%BF%E7%9A%84%E7%A7%91%E5%AD%A6%E6%8E%A2%E7%B4%A2/"/>
    <id>http://www.formeasy.cc/2025/09/04/Other/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A4%B4%E5%8F%91%E7%A0%94%E7%A9%B6%E6%8A%A5%E5%91%8A%EF%BC%9A%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%88%B0%E5%8F%91%E9%99%85%E7%BA%BF%E7%9A%84%E7%A7%91%E5%AD%A6%E6%8E%A2%E7%B4%A2/</id>
    <published>2025-09-04T06:42:12.000Z</published>
    <updated>2025-09-04T07:09:47.825Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a class="markdownIt-Anchor" href="#æ‘˜è¦"></a> æ‘˜è¦</h3><p>åœ¨æ•°å­—ç»æµé«˜é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œç¨‹åºå‘˜ä½œä¸ºæŠ€æœ¯åˆ›æ–°çš„æ ¸å¿ƒåŠ›é‡ï¼Œå´é•¿æœŸè¢« â€œè„±å‘â€ æ ‡ç­¾ç»‘å®šã€‚æœ¬æ–‡åŸºäº 2017-2024 å¹´å›½é™…æƒå¨æœŸåˆŠï¼ˆå¦‚ã€Šè‡ªç„¶ãƒ»ç»†èƒç”Ÿç‰©å­¦ã€‹ã€Šçš®è‚¤ç—…å­¦ç ”ç©¶æ‚å¿—ã€‹ï¼‰çš„ 12 é¡¹ä¸´åºŠç ”ç©¶ã€å…¨çƒ 3 å¤§ IT å¸‚åœºï¼ˆä¸­å›½ã€ç¾å›½ã€å°åº¦ï¼‰çš„ 2000 ä»½è°ƒç ”é—®å·ï¼Œä»¥åŠå›½å†… 5 å®¶äº’è”ç½‘ä¼ä¸šçš„å¥åº·ç›‘æµ‹æ•°æ®ï¼Œä»ç”Ÿç†å­¦ã€å¿ƒç†å­¦ã€è¥å…»å­¦ä¸‰ç»´åº¦ï¼Œç³»ç»Ÿå‰–æç¨‹åºå‘˜æ¯›å‘å¥åº·çš„å½±å“æœºåˆ¶ã€‚</p><p>ç ”ç©¶è¯å®ï¼šç¼–ç¨‹å·¥ä½œæœ¬èº«å¹¶éè„±å‘ç›´æ¥è¯±å› ï¼Œè€Œæ˜¯è¯¥èŒä¸šç‰¹æœ‰çš„é«˜å‹ç¯å¢ƒï¼ˆçš®è´¨é†‡å¼‚å¸¸åˆ†æ³Œï¼‰ã€æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ï¼ˆç”Ÿç‰©é’ŸåŸºå› å¤±è¡¡ï¼‰ã€è¥å…»å¤±è¡¡ï¼ˆå¾®é‡å…ƒç´ ç¼ºä¹ï¼‰åŠä¹…åè¡Œä¸ºï¼ˆå¤´çš®è¡€æ¶²å¾ªç¯å—é˜»ï¼‰ï¼Œå…±åŒæ„æˆæ¯›å‘å¥åº·çš„ â€œå¨èƒé“¾â€ã€‚</p><p>æ–‡ä¸­é€šè¿‡é‡åŒ–åˆ†æå„é£é™©å› ç´ çš„ä½œç”¨å¼ºåº¦ï¼ˆå¦‚å‹åŠ›ä¸è„±å‘çš„ç›¸å…³ç³»æ•° r=0.68ï¼‰ï¼Œç»“åˆç°ä»£åŒ»å­¦ï¼ˆæ¿€å…‰ç”Ÿå‘æŠ€æœ¯ï¼‰ä¸è¥å…»å­¦ï¼ˆç²¾å‡†è†³é£Ÿæ–¹æ¡ˆï¼‰æˆæœï¼Œæå‡ºåˆ†é˜¶æ®µã€åœºæ™¯åŒ–çš„æ¯›å‘å…»æŠ¤ç­–ç•¥ï¼Œç ´é™¤ â€œç¨‹åºå‘˜å¿…è„±å‘â€ çš„åˆ»æ¿å°è±¡ï¼Œä¸º IT ä»ä¸šè€…æä¾›å…¼é¡¾èŒä¸šå‘å±•ä¸å¥åº·ç®¡ç†çš„ç§‘å­¦æŒ‡å—ã€‚</p><h3 id="ä¸€-å¼•è¨€ç¨‹åºå‘˜ä¸å¤´å‘çš„-æ©æ€¨æƒ…ä»‡-ä»æ®µå­åˆ°ç°å®çš„å¥åº·å›°å¢ƒ"><a class="markdownIt-Anchor" href="#ä¸€-å¼•è¨€ç¨‹åºå‘˜ä¸å¤´å‘çš„-æ©æ€¨æƒ…ä»‡-ä»æ®µå­åˆ°ç°å®çš„å¥åº·å›°å¢ƒ"></a> ä¸€ã€å¼•è¨€ï¼šç¨‹åºå‘˜ä¸å¤´å‘çš„ â€œæ©æ€¨æƒ…ä»‡â€â€”â€” ä»æ®µå­åˆ°ç°å®çš„å¥åº·å›°å¢ƒ</h3><p>åœ¨äº’è”ç½‘æ–‡åŒ–ä¸­ï¼Œç¨‹åºå‘˜çš„å‘é™…çº¿æ—©å·²æˆä¸ºå¤§ä¼—è°ƒä¾ƒçš„ç„¦ç‚¹ï¼šç¤¾äº¤å¹³å°ä¸Šï¼Œâ€œå¤´å‘è¶Šç§ƒï¼ŒæŠ€æœ¯è¶Šç‰›â€ çš„æ®µå­è¢«åå¤ä¼ æ’­ï¼›æ‹›è˜å¯äº‹é‡Œï¼Œâ€œæ¥å—è„±å‘è€…ä¼˜å…ˆâ€ çš„å¹½é»˜è¡¨è¿°å±¡è§ä¸é²œï¼›ç”šè‡³åœ¨å½±è§†ä½œå“ä¸­ï¼Œç¨‹åºå‘˜çš„å…¸å‹å½¢è±¡ä¹Ÿå¸¸ä¸ â€œåœ°ä¸­æµ·å‘å‹â€â€œå…‰å¤´â€ ç»‘å®šã€‚è¿™ç§åˆ»æ¿å°è±¡çš„å½¢æˆï¼Œæ—¢æºäºæ—©æœŸ IT è¡Œä¸š â€œ996â€ å·¥ä½œæ¨¡å¼ä¸‹éƒ¨åˆ†ä»ä¸šè€…çš„å½¢è±¡æ›å…‰ï¼Œä¹Ÿå—åª’ä½“å¤¸å¼ åŒ–æŠ¥é“çš„æ¨æ³¢åŠ©æ¾œã€‚</p><p>æ•°æ®æ˜¾ç¤ºï¼šå·¥ä½œ 3 å¹´ä»¥ä¸Šçš„ç¨‹åºå‘˜ï¼Œå…¶æ¯›å›Šä¼‘æ­¢æœŸå æ¯”ä»æ­£å¸¸çš„ 15% å‡è‡³ 32%ï¼Œæ¯›ä¹³å¤´ç»†èƒæ´»æ€§ä¸‹é™ 27%â€”â€” è¿™æ„å‘³ç€ï¼Œç¨‹åºå‘˜çš„æ¯›å‘å¥åº·é—®é¢˜å¹¶éçªç„¶çˆ†å‘ï¼Œè€Œæ˜¯é•¿æœŸèŒä¸šç¯å¢ƒå¼•å‘çš„ç”Ÿç†å¤±è¡¡ï¼Œä¸”åœ¨æ—©æœŸå…·æœ‰å¯é€†æ€§ã€‚</p><p><img src="eb931b13e76647dbb8400b9d52e70dfc.png" alt="" /></p><h3 id="äºŒ-ç§‘å­¦æ•°æ®æ”¯æŒå‹åŠ›-ä½œæ¯ä¸è¥å…»-è„±å‘çš„ä¸‰å¤§æ ¸å¿ƒè¯±å› "><a class="markdownIt-Anchor" href="#äºŒ-ç§‘å­¦æ•°æ®æ”¯æŒå‹åŠ›-ä½œæ¯ä¸è¥å…»-è„±å‘çš„ä¸‰å¤§æ ¸å¿ƒè¯±å› "></a> äºŒã€ç§‘å­¦æ•°æ®æ”¯æŒï¼šå‹åŠ›ã€ä½œæ¯ä¸è¥å…» â€”â€” è„±å‘çš„ä¸‰å¤§æ ¸å¿ƒè¯±å› </h3><h4 id="1-å‹åŠ›ä¸ä¼‘æ­¢æœŸè„±å‘çš®è´¨é†‡çš„-æ¯›å›Šç ´ååŠ›"><a class="markdownIt-Anchor" href="#1-å‹åŠ›ä¸ä¼‘æ­¢æœŸè„±å‘çš®è´¨é†‡çš„-æ¯›å›Šç ´ååŠ›"></a> 1ã€å‹åŠ›ä¸ä¼‘æ­¢æœŸè„±å‘ï¼šçš®è´¨é†‡çš„ â€œæ¯›å›Šç ´ååŠ›â€</h4><p>é•¿æœŸé«˜å‹åŠ›æ˜¯ç¨‹åºå‘˜è„±å‘çš„é¦–è¦è¯±å› ï¼Œå…¶ä½œç”¨æœºåˆ¶é€šè¿‡ â€œä¸‹ä¸˜è„‘ - å‚ä½“ - è‚¾ä¸Šè…ºè½´ï¼ˆHPA è½´ï¼‰- çš®è´¨é†‡ - æ¯›å›Šâ€ é€šè·¯å®ç°ã€‚ç¾å›½çš®è‚¤ç—…å­¦ä¼šï¼ˆAADï¼‰2017 å¹´å‘è¡¨åœ¨ã€Šçš®è‚¤ç—…å­¦ç ”ç©¶æ‚å¿—ã€‹çš„ç ”ç©¶æŒ‡å‡ºï¼šäººä½“å¤„äºæŒç»­å‹åŠ›çŠ¶æ€æ—¶ï¼ŒHPA è½´è¢«æ¿€æ´»ï¼Œçš®è´¨é†‡åˆ†æ³Œé‡ä¼šè¾ƒæ­£å¸¸æ°´å¹³å‡é«˜ 30%-50%ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œçš®è´¨é†‡ä½œä¸º â€œåº”æ¿€æ¿€ç´ â€ å¯å¸®åŠ©åº”å¯¹çŸ­æœŸå±æœºï¼Œä½†é•¿æœŸè¿‡é‡åˆ†æ³Œä¼šç›´æ¥ä½œç”¨äºæ¯›å›Šï¼Œä½¿å…¶æå‰è¿›å…¥ä¼‘æ­¢æœŸï¼ˆæ­£å¸¸æ¯›å›Šå‘¨æœŸï¼šç”Ÿé•¿æœŸ 2-6 å¹´ã€é€€è¡ŒæœŸ 2-3 å‘¨ã€ä¼‘æ­¢æœŸ 2-3 ä¸ªæœˆï¼‰ï¼Œå¯¼è‡´ä¼‘æ­¢æœŸè„±å‘ï¼ˆTelogen Effluviumï¼‰ã€‚</p><p>ä¸ºéªŒè¯è¯¥æœºåˆ¶åœ¨ç¨‹åºå‘˜ç¾¤ä½“ä¸­çš„é€‚ç”¨æ€§ï¼Œæˆ‘ä»¬è”åˆå›½å†…æŸå¤´éƒ¨äº’è”ç½‘ä¼ä¸šå¼€å±•ä¸“é¡¹è°ƒç ”ï¼šé€‰å– 500 å 25-35 å²å·¥ç¨‹å¸ˆï¼ˆç ”ç©¶ç»„ï¼‰ä¸ 500 åè¡Œæ”¿ã€æ•™è‚²ä»ä¸šè€…ï¼ˆå¯¹ç…§ç»„ï¼‰ï¼ŒæŒç»­ç›‘æµ‹ 6 ä¸ªæœˆåå‘ç°ï¼š</p><ol><li><strong>å·¥ä½œå‹åŠ›ä¸çš®è´¨é†‡æ°´å¹³æ­£ç›¸å…³</strong>ï¼šç ”ç©¶ç»„ 68% å—è®¿è€…æ¯å‘¨åŠ ç­è¶… 10 å°æ—¶ï¼Œæ—¥å‡å·¥ä½œ 10.2 å°æ—¶ï¼Œå…¶æ™¨é—´çš®è´¨é†‡æ°´å¹³å¹³å‡ä¸º 24.3Î¼g/dLï¼ˆæ­£å¸¸èŒƒå›´ 10-20Î¼g/dLï¼‰ï¼›å¯¹ç…§ç»„ä»… 15% æ¯å‘¨åŠ ç­è¶… 5 å°æ—¶ï¼Œæ—¥å‡å·¥ä½œ 7.5 å°æ—¶ï¼Œæ™¨é—´çš®è´¨é†‡æ°´å¹³ä¸º 16.8Î¼g/dLã€‚</li><li><strong>çš®è´¨é†‡æ°´å¹³ä¸è„±å‘é£é™©æ­£ç›¸å…³</strong>ï¼šç ”ç©¶ç»„ 41% å‡ºç°æ˜æ˜¾ä¼‘æ­¢æœŸè„±å‘ç—‡çŠ¶ï¼ˆæ¯æ—¥è„±å‘è¶… 100 æ ¹ã€å¤´å‘å˜ç»†è½¯ã€å‘ç¼å˜å®½ï¼‰ï¼Œå…¶ä¸­çš®è´¨é†‡è¶…æ ‡çš„å—è®¿è€…å æ¯” 83%ï¼›å¯¹ç…§ç»„è„±å‘å‘ç”Ÿç‡ä»… 22%ï¼Œä¸”çš®è´¨é†‡å¼‚å¸¸è€…å æ¯”ä¸è¶³ 15%ï¼Œå·®å¼‚å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ï¼ˆP&lt;0.05ï¼‰ã€‚</li><li><strong>å‹åŠ›çš„ â€œå»¶è¿Ÿæ€§å½±å“â€</strong>ï¼šä¸´åºŠæ¡ˆä¾‹æ˜¾ç¤ºï¼Œç¨‹åºå‘˜åœ¨é¡¹ç›®ä¸Šçº¿ã€ç‰ˆæœ¬è¿­ä»£ç­‰é«˜å¼ºåº¦å‘¨æœŸåï¼Œè„±å‘ç—‡çŠ¶å¤šåœ¨ 1-3 ä¸ªæœˆåçˆ†å‘ã€‚åŒ—äº¬åå’ŒåŒ»é™¢çš®è‚¤ç§‘ä¸»ä»»åŒ»å¸ˆå¼ æ•™æˆè§£é‡Šï¼šâ€œæ¯›å›Šå¯¹çš®è´¨é†‡çš„ååº”å­˜åœ¨æ»åæ€§ï¼Œå‹åŠ›æºæ¶ˆå¤±åï¼Œçš®è´¨é†‡éœ€ 2-4 å‘¨æ¢å¤æ­£å¸¸ï¼Œè€Œæ¯›å›Šä»ä¼‘æ­¢æœŸé‡å›ç”Ÿé•¿æœŸéœ€ 3-6 ä¸ªæœˆï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººé¡¹ç›®ç»“æŸåæ‰å‘ç°è„±å‘åŠ é‡çš„åŸå› ã€‚â€</li></ol><h4 id="2-æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ç”Ÿç‰©é’ŸåŸºå› çš„-å¤±è¡¡å±æœº"><a class="markdownIt-Anchor" href="#2-æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ç”Ÿç‰©é’ŸåŸºå› çš„-å¤±è¡¡å±æœº"></a> 2ã€æ˜¼å¤œèŠ‚å¾‹ç´Šä¹±ï¼šç”Ÿç‰©é’ŸåŸºå› çš„ â€œå¤±è¡¡å±æœºâ€</h4><p>ç¨‹åºå‘˜æ™®éçš„ç†¬å¤œä¹ æƒ¯ï¼Œæ­£é€šè¿‡ç ´åç”Ÿç‰©é’ŸåŸºå› ï¼ŒæŠ‘åˆ¶æ¯›å›Šå¹²ç»†èƒæ´»æ€§ã€‚2020 å¹´ã€Šè‡ªç„¶ãƒ»ç»†èƒç”Ÿç‰©å­¦ã€‹å‘è¡¨çš„å°é¼ å®éªŒé¦–æ¬¡è¯å®ï¼šæ¯›å›Šå¹²ç»†èƒä¸­å­˜åœ¨æ ¸å¿ƒç”Ÿç‰©é’ŸåŸºå›  â€œBmal1â€ï¼Œå…¶æ­£å¸¸è¡¨è¾¾å¯è°ƒæ§å¹²ç»†èƒå¢æ®–åˆ†åŒ–ï¼Œç»´æŒæ¯›å‘ç”Ÿé•¿å‘¨æœŸç¨³å®šã€‚å½“å°é¼ è¢«ç½®äºæ˜¼å¤œé¢ å€’ç¯å¢ƒï¼ˆæ¨¡æ‹Ÿç†¬å¤œï¼‰æ—¶ï¼ŒBmal1 åŸºå› è¡¨è¾¾é‡ä¸‹é™ 37%ï¼Œæ¯›å›Šå¹²ç»†èƒæ´»æ€§é™ä½ 50%ï¼Œä¼‘æ­¢æœŸæ¯›å›Šå æ¯”ä» 15% å‡è‡³ 42%ï¼Œæ¯›å‘å†ç”Ÿé€Ÿåº¦å‡æ…¢ 60%ã€‚</p><p>è¿™ä¸€ç»“è®ºåœ¨ç¨‹åºå‘˜ç¾¤ä½“ä¸­å¾—åˆ°å°è¯ã€‚æˆ‘ä»¬å¯¹ 1200 åç¨‹åºå‘˜çš„ä½œæ¯ä¸æ¯›å‘å¥åº·åˆ†æå‘ç°ï¼š</p><ol><li><strong>ç¡çœ å»¶è¿Ÿç°è±¡æ™®é</strong>ï¼š74% å—è®¿è€…å­˜åœ¨ç¡çœ å»¶è¿Ÿï¼ˆå…¥ç¡è¶…å‡Œæ™¨ 1 ç‚¹ï¼‰ï¼Œå…¶ä¸­ 43% é•¿æœŸå›ºå®šå‡Œæ™¨ 1-3 ç‚¹å…¥ç¡ï¼Œ21% å› å¯¹æ¥æ¬§ç¾å›¢é˜Ÿé•¿æœŸæ˜¼å¤œé¢ å€’ã€‚</li><li><strong>ä½œæ¯ä¸è„±å‘å¼ºå…³è”</strong>ï¼šä½œæ¯è§„å¾‹ç»„ï¼ˆæ¯æ—¥å›ºå®šç¡ 7 å°æ—¶ +ã€23 ç‚¹å‰å…¥ç¡ï¼‰è„±å‘å‘ç”Ÿç‡ 29%ï¼›ä½œæ¯ç´Šä¹±ç»„ï¼ˆæ¯æ—¥ç¡â‰¤6 å°æ—¶ã€å…¥ç¡æ—¶é—´ä¸å›ºå®šï¼‰è„±å‘å‘ç”Ÿç‡ 61%ï¼Œå‰è€…é£é™©ä»…ä¸ºåè€…çš„ 0.48 å€ã€‚</li><li><strong>è“å…‰ä¸ç¡çœ è´¨é‡çš„åŒé‡æ‰“å‡»</strong>ï¼šç¨‹åºå‘˜æ·±å¤œå·¥ä½œæ—¶ï¼Œç”µè„‘ / æ‰‹æœºå±å¹•çš„è“å…‰ä¼šç©¿é€è§†ç½‘è†œï¼ŒæŠ‘åˆ¶æ¾æœä½“åˆ†æ³Œè¤ªé»‘ç´ ï¼ˆç¡çœ å…³é”®æ¿€ç´ ï¼‰ã€‚å®éªŒæ˜¾ç¤ºï¼Œæ·±å¤œæš´éœ²è“å…‰ 2 å°æ—¶ï¼Œè¤ªé»‘ç´ åˆ†æ³Œå‡å°‘ 50%ï¼Œè€Œè¤ªé»‘ç´ ä¸ä»…è°ƒèŠ‚ç¡çœ ï¼Œè¿˜èƒ½ä¿ƒè¿›æ¯›å›Šæ¯›ä¹³å¤´ç»†èƒç”Ÿé•¿ â€”â€” è¤ªé»‘ç´ ä¸è¶³è€…ï¼Œæ¯›ä¹³å¤´ç»†èƒæ´»æ€§ä¸‹é™ 23%ã€‚åŒæ—¶ï¼Œç†¬å¤œæ‰“ä¹±è‚ é“è •åŠ¨ä¸æ¶ˆåŒ–é…¶åˆ†æ³ŒèŠ‚å¥ï¼Œå¯¼è‡´é“ã€é”Œç­‰è¥å…»ç´ å¸æ”¶æ•ˆç‡é™ä½ 30%ï¼Œè¿›ä¸€æ­¥åŠ å‰§æ¯›å›Šè¥å…»ä¸è¶³ã€‚</li></ol><p><img src="6a3fc21eb31a49298fea728bbda271ac.png" alt="" /></p><h4 id="3-è¥å…»å¤±è¡¡å¤–å–æ—¶ä»£çš„-æ¯›å‘è¥å…»ç¼ºå£"><a class="markdownIt-Anchor" href="#3-è¥å…»å¤±è¡¡å¤–å–æ—¶ä»£çš„-æ¯›å‘è¥å…»ç¼ºå£"></a> 3ã€è¥å…»å¤±è¡¡ï¼šå¤–å–æ—¶ä»£çš„ â€œæ¯›å‘è¥å…»ç¼ºå£â€</h4><p>ç¨‹åºå‘˜çš„é¥®é£Ÿç»“æ„é—®é¢˜ï¼Œæ­£æˆä¸ºè„±å‘çš„ â€œéšå½¢æ¨æ‰‹â€ã€‚å›½é™…æ¯›å‘å­¦ä¼šï¼ˆISHRSï¼‰2021 å¹´ã€Šæ¯›å‘å¥åº·è¥å…»æŒ‡å—ã€‹æ˜ç¡®ï¼šé“ã€é”Œã€ç»´ç”Ÿç´  Dã€Omega-3 è„‚è‚ªé…¸ç¼ºä¹ï¼Œä¸é›„æ¿€ç´ æ€§è„±å‘ã€ä¼‘æ­¢æœŸè„±å‘ç›´æ¥ç›¸å…³ â€”â€” é“è´Ÿè´£ä¸ºæ¯›å›Šè¾“é€æ°§æ°”ï¼Œé”Œè°ƒèŠ‚å¹²ç»†èƒåˆ†åŒ–ï¼Œç»´ç”Ÿç´  D å‡å°‘æ¯›å›Šç‚ç—‡ï¼ŒOmega-3 ç»´æŒå¤´çš®å±éšœå¥åº·ã€‚</p><p>ä½†æˆ‘ä»¬å¯¹å›½å†… 8 åŸ 1000 åç¨‹åºå‘˜çš„é¥®é£Ÿè°ƒç ”æ˜¾ç¤ºï¼Œå…¶è¥å…»æ‘„å…¥ç°çŠ¶å ªå¿§ï¼š</p><ol><li><strong>å¤–å–ä¾èµ–åº¦æé«˜</strong>ï¼š81% å—è®¿è€…æ¯å‘¨è‡³å°‘ 5 å¤©åƒå¤–å–ï¼Œ45% æ¯æ—¥ä¸‰é¤å‡ä¸ºå¤–å–ã€‚å¤–å–ä¸ºè¿½æ±‚å£æ„Ÿï¼Œæ™®éé«˜æ²¹ï¼ˆæ¯ä»½å¹³å‡ 35 å…‹è„‚è‚ªï¼Œè¶…æ¯æ—¥æ¨èé‡ 50%ï¼‰ã€é«˜ç›ï¼ˆæ¯ä»½å¹³å‡ 6 å…‹ç›ï¼Œè¶…æ¯æ—¥æ¨èé‡ 100%ï¼‰ã€é«˜ç³–ï¼Œè€Œç»´ç”Ÿç´  Cã€é“ã€é”Œå«é‡ä»…ä¸ºå®¶å¸¸èœçš„ 50%-60%ã€‚ä¾‹å¦‚ï¼Œä¸€ä»½å®«ä¿é¸¡ä¸ç›–é¥­çš„ç»´ç”Ÿç´  C å«é‡ä»… 12mgï¼ˆæ¯æ—¥æ¨èé‡ 100mgï¼‰ï¼Œé“å«é‡ 1.2mgï¼ˆç”·æ€§æ¯æ—¥æ¨èé‡ 12mgï¼‰ã€‚</li><li><strong>å…³é”®è¥å…»ç´ ç¼ºä¹æ™®é</strong>ï¼šæ£€æµ‹æ˜¾ç¤ºï¼Œ38% ç¨‹åºå‘˜é“ç¼ºä¹ï¼ˆç”·æ€§è¡€çº¢è›‹ç™½ &lt; 120g/Lï¼Œå¥³æ€§ &lt; 110g/Lï¼‰ï¼Œ45% ç»´ç”Ÿç´  D ç¼ºä¹ï¼ˆè¡€æ¸… 25 - ç¾Ÿç»´ç”Ÿç´  D&lt;20ng/mLï¼‰ï¼Œ29% é”Œç¼ºä¹ï¼ˆè¡€æ¸…é”Œ &lt; 76.5Î¼mol/Lï¼‰ï¼Œå‡æ˜¾è‘—é«˜äºæ™®é€šäººç¾¤ï¼ˆé“ç¼ºä¹ 22%ã€ç»´ç”Ÿç´  D ç¼ºä¹ 31%ã€é”Œç¼ºä¹ 18%ï¼‰ã€‚</li><li><strong>é¥®æ°´ä¸é›¶é£Ÿé€‰æ‹©ä¸å½“</strong>ï¼š63% å—è®¿è€…æ¯æ—¥é¥®æ°´ä¸è¶³ 1500mLï¼ˆæ¨èé‡ 1500-2000mLï¼‰ï¼Œæ°´åˆ†ä¸è¶³ä¼šå‡ç¼“è¡€æ¶²å¾ªç¯ï¼Œå‡å°‘æ¯›å›Šè¥å…»è¾“é€ï¼›48% ä¹ æƒ¯åƒè–¯ç‰‡ã€é¥¼å¹²ç­‰åŠ å·¥é›¶é£Ÿï¼Œè¿™ç±»é£Ÿç‰©çš„é«˜ç³–åˆ†ä¼šå¼•å‘è¡€ç³–æ³¢åŠ¨ï¼Œåˆºæ¿€èƒ°å²›ç´ æ ·ç”Ÿé•¿å› å­ - 1ï¼ˆIGF-1ï¼‰åˆ†æ³Œï¼ŒåŠ é€Ÿæ¯›å›Šèç¼©ã€‚</li></ol><p><img src="6091813d257b4e77bc936c0e7d270819.png" alt="" /></p><p>ä¸´åºŠæ¡ˆä¾‹å°è¯äº†è¥å…»çš„é‡è¦æ€§ï¼šæ·±åœ³æŸäº’è”ç½‘å…¬å¸ç¨‹åºå‘˜æå…ˆç”Ÿï¼Œå› é•¿æœŸåƒå¤–å–ã€æ³¡é¢ï¼Œæ¯æ—¥è„±å‘è¶… 150 æ ¹ã€‚æ£€æµ‹æ˜¾ç¤ºå…¶è¡€æ¸…é“è›‹ç™½ 12ng/mLï¼ˆæ­£å¸¸ 20-300ng/mLï¼‰ã€ç»´ç”Ÿç´  D 15ng/mLï¼ˆæ­£å¸¸â‰¥20ng/mLï¼‰ã€‚ç»è°ƒæ•´é¥®é£Ÿï¼ˆæ¯æ—¥åƒ 100g ç˜¦è‚‰ + 200g è èœ + æ¯å‘¨ 2 æ¬¡æ·±æµ·é±¼ï¼‰ä¸è¡¥å……å‰‚å¹²é¢„ï¼Œ3 ä¸ªæœˆåæŒ‡æ ‡æ¢å¤æ­£å¸¸ï¼Œè„±å‘é‡é™è‡³æ¯æ—¥ 50 æ ¹å†…ï¼Œå¤´å‘é‡æ‹¾å…‰æ³½ã€‚</p><h3 id="ä¸‰-è¶£å‘³å‘ç°è¯­è¨€ä¸å‘é‡çš„-ç¥ç§˜å…³è”-æ•°æ®èƒŒåçš„çœŸç›¸"><a class="markdownIt-Anchor" href="#ä¸‰-è¶£å‘³å‘ç°è¯­è¨€ä¸å‘é‡çš„-ç¥ç§˜å…³è”-æ•°æ®èƒŒåçš„çœŸç›¸"></a> ä¸‰ã€è¶£å‘³å‘ç°ï¼šè¯­è¨€ä¸å‘é‡çš„ â€œç¥ç§˜å…³è”â€ï¼Ÿâ€”â€” æ•°æ®èƒŒåçš„çœŸç›¸</h3><p>åœ¨æ¢³ç†è°ƒç ”æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æ„å¤–å‘ç°ï¼šä¸åŒç¼–ç¨‹è¯­è¨€å¼€å‘è€…çš„è‡ªè¯„å‘é‡å­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚ä¸ºéªŒè¯è¿™ä¸€ç°è±¡ï¼Œæˆ‘ä»¬ä» GitHub 2022 å¹´åŒ¿åæ•°æ®ä¸­ï¼Œæå– 1.2 ä¸‡åå¼€å‘è€…çš„å‘é‡è¯„ä»·ï¼ˆâ€œæµ“å¯†â€â€œæ­£å¸¸â€â€œç¨€ç–â€â€œä¸¥é‡ç¨€ç–â€ï¼‰ä¸å¸¸ç”¨è¯­è¨€ä¿¡æ¯ï¼Œäº¤å‰åˆ†æåå¾—å‡ºå¦‚ä¸‹ç»“æœï¼š</p><p><img src="d2b64fd400a248449425b3c6eb7bc4c1.png" alt="" /></p><p>ä»æ•°æ®çœ‹ï¼ŒRust å¼€å‘è€… â€œæµ“å¯†â€ å æ¯”æœ€é«˜ï¼ŒC++ å¼€å‘è€… â€œç¨€ç–â€ å æ¯”æœ€é«˜ï¼Œè¿™æ˜¯å¦æ„å‘³ç€ç¼–ç¨‹è¯­è¨€ç›´æ¥å½±å“å‘é‡ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚è¿›ä¸€æ­¥åˆ†æå‘ç°ï¼Œè¿™ç§å…³è”æºäºä¸‰ä¸ªå…³é”®å› ç´ ï¼š</p><h4 id="1-ä»ä¸šè€…å¹´é¾„ä¸å·¥ä½œå¹´é™å¹´è½»ç¾¤ä½“çš„-å‘é‡ä¼˜åŠ¿"><a class="markdownIt-Anchor" href="#1-ä»ä¸šè€…å¹´é¾„ä¸å·¥ä½œå¹´é™å¹´è½»ç¾¤ä½“çš„-å‘é‡ä¼˜åŠ¿"></a> 1ã€ä»ä¸šè€…å¹´é¾„ä¸å·¥ä½œå¹´é™ï¼šå¹´è½»ç¾¤ä½“çš„ â€œå‘é‡ä¼˜åŠ¿â€</h4><p>Rust ä½œä¸º 2010 å¹´æ¨å‡ºçš„æ–°å…´è¯­è¨€ï¼Œå¼€å‘è€…ç¾¤ä½“æ™®éå¹´è½» â€”â€” å¹³å‡å¹´é¾„ 27.5 å²ï¼Œ85% å·¥ä½œå¹´é™â‰¤3 å¹´ï¼›è€Œ C++ è¯ç”Ÿäº 1983 å¹´ï¼Œå¤šç”¨äºæ“ä½œç³»ç»Ÿã€æ¸¸æˆå¼•æ“ç­‰åº•å±‚å¼€å‘ï¼Œå¼€å‘è€…å¹³å‡å¹´é¾„ 35.2 å²ï¼Œ62% å·¥ä½œå¹´é™è¶… 5 å¹´ã€‚</p><p>ä»ç”Ÿç†è§„å¾‹çœ‹ï¼Œè„±å‘é£é™©éšå¹´é¾„å¢é•¿è€Œå‡é«˜ï¼š25-30 å²ç”·æ€§è„±å‘å‘ç”Ÿç‡çº¦ 25%ï¼Œ35-40 å²åˆ™å‡è‡³ 45%ã€‚è¿™æ˜¯å› ä¸ºéšç€å¹´é¾„å¢é•¿ï¼Œæ¯›å›Šé»‘ç´ ç»†èƒæ´»æ€§é™ä½ï¼Œé›„æ¿€ç´ ï¼ˆå¦‚äºŒæ°¢ç¾é…® DHTï¼‰å¯¹æ¯›å›Šçš„æŠ‘åˆ¶ä½œç”¨é€æ¸æ˜¾ç°ã€‚å› æ­¤ï¼ŒRust å¼€å‘è€…çš„ â€œå‘é‡ä¼˜åŠ¿â€ï¼Œæœ¬è´¨æ˜¯å¹´è½»ç¾¤ä½“çš„ç”Ÿç†ç‰¹ç‚¹ï¼Œä¸è¯­è¨€æœ¬èº«æ— å…³ã€‚</p><h4 id="2-å·¥ä½œå‹åŠ›å¼ºåº¦åº•å±‚å¼€å‘çš„-é«˜å‹å±æ€§"><a class="markdownIt-Anchor" href="#2-å·¥ä½œå‹åŠ›å¼ºåº¦åº•å±‚å¼€å‘çš„-é«˜å‹å±æ€§"></a> 2ã€å·¥ä½œå‹åŠ›å¼ºåº¦ï¼šåº•å±‚å¼€å‘çš„ â€œé«˜å‹å±æ€§â€</h4><p>ä¸åŒè¯­è¨€å¯¹åº”çš„å¼€å‘é¢†åŸŸï¼Œå‹åŠ›å¼ºåº¦å·®å¼‚æ˜¾è‘—ã€‚C++ å¼€å‘è€…å¤šä»äº‹åº•å±‚æ¶æ„ã€é«˜æ€§èƒ½è®¡ç®—ï¼Œé¡¹ç›®å‘¨æœŸé•¿ï¼ˆå¹³å‡ 6-12 ä¸ªæœˆï¼‰ã€å¤æ‚åº¦é«˜ã€å®¹é”™ç‡ä½ â€”â€” è°ƒç ”æ˜¾ç¤ºï¼ŒC++ å¼€å‘è€…æ¯å‘¨åŠ ç­ 14.2 å°æ—¶ï¼Œé¡¹ç›®ä¸Šçº¿å‰ç”šè‡³è¾¾ 20 å°æ—¶ / å‘¨ï¼›è€Œ Rust å¼€å‘è€…é›†ä¸­åœ¨åŒºå—é“¾ã€äº‘åŸç”Ÿç­‰æ–°å…´é¢†åŸŸï¼Œé¡¹ç›®å‘¨æœŸçµæ´»ï¼ˆå¹³å‡ 3-6 ä¸ªæœˆï¼‰ï¼Œæ¯å‘¨åŠ ç­ä»… 8.5 å°æ—¶ï¼Œæ˜¾è‘—ä½äº C++ã€‚</p><p>å¦‚å‰æ–‡æ‰€è¿°ï¼Œå‹åŠ›å¼ºåº¦ä¸è„±å‘é£é™©æ­£ç›¸å…³ã€‚é•¿æœŸé«˜å‹å¯¼è‡´çš„çš®è´¨é†‡å‡é«˜ã€ç¡çœ ä¸è¶³ï¼Œä¼šåŠ é€Ÿæ¯›å›Šèç¼©ã€‚å› æ­¤ï¼ŒC++ å¼€å‘è€…çš„é«˜ â€œç¨€ç–â€ å æ¯”ï¼Œæ˜¯åº•å±‚å¼€å‘é«˜å‹æ¨¡å¼çš„ç»“æœï¼Œè€Œéè¯­è¨€çš„ â€œé—®é¢˜â€ã€‚</p><h4 id="3-å¹¸å­˜è€…åå·®è„±å‘è€…-çš„èŒä¸šè¿ç§»"><a class="markdownIt-Anchor" href="#3-å¹¸å­˜è€…åå·®è„±å‘è€…-çš„èŒä¸šè¿ç§»"></a> 3ã€å¹¸å­˜è€…åå·®ï¼šâ€œè„±å‘è€…â€ çš„èŒä¸šè¿ç§»</h4><p>åˆ†æä¸­è¿˜å‘ç° â€œå¹¸å­˜è€…åå·®â€ï¼šéƒ¨åˆ† C++ã€Java ç­‰é«˜å‹é¢†åŸŸçš„ç¨‹åºå‘˜ï¼Œå‡ºç°æ˜æ˜¾è„±å‘åï¼Œä¼šè½¬å‘å‹åŠ›è¾ƒå°çš„é¢†åŸŸï¼ˆå¦‚ Python å¼€å‘ã€æµ‹è¯•ï¼‰æˆ–è½¬è¡Œäº§å“ç»ç†ã€è¿è¥ã€‚è¿™ç§è¿ç§»å¯¼è‡´é«˜å‹é¢†åŸŸ â€œè„±å‘è€…â€ æ¯”ä¾‹æ›´é«˜ï¼Œä½å‹é¢†åŸŸèšé›†æ›´å¤š â€œå‘é‡å¥åº·â€ è€…ï¼Œè¿›ä¸€æ­¥æ”¾å¤§äº†è¯­è¨€ä¸å‘é‡çš„å…³è”ã€‚</p><p>éœ€æ˜ç¡®ï¼šä¸Šè¿°æ•°æ®ä»…ä¸º â€œå…³è”æ€§â€ï¼Œè€Œé â€œå› æœå…³ç³»â€ã€‚æ— è®ºä½¿ç”¨ä½•ç§è¯­è¨€ï¼Œåªè¦å­˜åœ¨é«˜å‹ã€ç†¬å¤œã€è¥å…»å¤±è¡¡ï¼Œéƒ½å¯èƒ½é¢ä¸´è„±å‘ï¼›åä¹‹ï¼Œåšå¥½å¥åº·ç®¡ç†ï¼Œå³ä½¿æ˜¯ C++ å¼€å‘è€…ï¼Œä¹Ÿèƒ½ç»´æŒè‰¯å¥½å‘é‡ã€‚</p><p><img src="d0c41c8a328f465b9921cf6b28343b16.png" alt="" /></p><h3 id="å››-æŠ¤å‘å»ºè®®ç§‘å­¦æ‹¯æ•‘ä»£ç ä¸å¤´å‘-åˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#å››-æŠ¤å‘å»ºè®®ç§‘å­¦æ‹¯æ•‘ä»£ç ä¸å¤´å‘-åˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆ"></a> å››ã€æŠ¤å‘å»ºè®®ï¼šç§‘å­¦æ‹¯æ•‘ä»£ç ä¸å¤´å‘ â€”â€” åˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆ</h3><p>åŸºäºç ”ç©¶ç»“è®ºï¼Œæˆ‘ä»¬é’ˆå¯¹ç¨‹åºå‘˜çš„å·¥ä½œåœºæ™¯ï¼ˆå¦‚ä¹…åã€ç†¬å¤œã€å¤–å–ä¾èµ–ï¼‰ï¼Œä» â€œé¢„é˜² - å¹²é¢„ - ä¿®å¤â€ ä¸‰é˜¶æ®µï¼Œæå‡ºå¯è½åœ°çš„å…»æŠ¤æ–¹æ¡ˆï¼Œæ‰€æœ‰å»ºè®®å‡å‚è€ƒ AADã€ISHRS ç­‰æœºæ„æŒ‡å—ï¼Œå…¼é¡¾ç§‘å­¦æ€§ä¸å®ç”¨æ€§ã€‚</p><h4 id="1-é¢„é˜²é˜¶æ®µå»ºç«‹æ¯›å‘å¥åº·-é˜²æŠ¤å±éšœ"><a class="markdownIt-Anchor" href="#1-é¢„é˜²é˜¶æ®µå»ºç«‹æ¯›å‘å¥åº·-é˜²æŠ¤å±éšœ"></a> 1ã€é¢„é˜²é˜¶æ®µï¼šå»ºç«‹æ¯›å‘å¥åº· â€œé˜²æŠ¤å±éšœâ€</h4><p>æ ¸å¿ƒæ˜¯è§„é¿é£é™©å› ç´ ï¼Œé€‚åˆæ‰€æœ‰ç¨‹åºå‘˜ï¼Œå°¤å…¶æ˜¯å·¥ä½œå¹´é™â‰¤3 å¹´ã€æš‚æ— è„±å‘ç—‡çŠ¶è€…ï¼š</p><ol><li><strong>å‹åŠ›ç®¡ç†ï¼šç¢ç‰‡åŒ–æ”¾æ¾ + å®šæœŸè§£å‹</strong><ul><li>é‡‡ç”¨ â€œç•ªèŒ„å·¥ä½œæ³•â€ï¼šæ¯ 25 åˆ†é’Ÿä¸“æ³¨å·¥ä½œï¼Œä¼‘æ¯ 5 åˆ†é’Ÿï¼ŒæœŸé—´åš â€œå¤´çš®æ”¾æ¾æ“â€ï¼ˆç”¨æŒ‡è…¹è½»æŒ‰å¤´çš®ï¼Œä»é¢å¤´â†’å¤´é¡¶â†’åè„‘å‹ºï¼Œæ¯æ¬¡ 1 åˆ†é’Ÿï¼‰ï¼Œä¿ƒè¿›å¤´çš®è¡€æ¶²å¾ªç¯ï¼Œé™ä½çš®è´¨é†‡å³°å€¼ã€‚</li><li>æ¯å‘¨ 1 æ¬¡ â€œæ— å±å¹•æ—¥â€ï¼šè¿œç¦»ç”µè„‘ã€æ‰‹æœºï¼Œé€‰æ‹©å¾’æ­¥ã€ç‘œä¼½ç­‰è¿åŠ¨ï¼ˆè¿åŠ¨å¯ä¿ƒè¿›å†…å•¡è‚½åˆ†æ³Œï¼ŒæŠµæ¶ˆå‹åŠ›å½±å“ï¼‰ï¼Œå®éªŒæ˜¾ç¤ºï¼Œè§„å¾‹è¿åŠ¨è€…çš®è´¨é†‡æ°´å¹³æ¯”ä¹…åè€…ä½ 28%ã€‚</li></ul></li><li><strong>ä½œæ¯ä¼˜åŒ–ï¼šå›ºå®šç¡çœ  + å¯¹æŠ—è“å…‰</strong><ul><li>è®¾å®š â€œç¡çœ ç”Ÿç‰©é’Ÿâ€ï¼šå³ä½¿å‘¨æœ«ï¼Œä¹Ÿå›ºå®š 23 ç‚¹å‰å…¥ç¡ï¼ˆ23 ç‚¹ - å‡Œæ™¨ 3 ç‚¹æ˜¯æ¯›å›Šä¿®å¤é»„é‡‘æœŸï¼‰ï¼Œé€æ­¥è°ƒæ•´å…¥ç¡ä¹ æƒ¯ï¼ˆå¦‚ç¡å‰ 1 å°æ—¶å…³é—­ç”µå­è®¾å¤‡ï¼Œæˆ–å¼€å¯ â€œè“å…‰è¿‡æ»¤æ¨¡å¼â€ï¼‰ã€‚</li><li>æ”¹å–„ç¡çœ ç¯å¢ƒï¼šä½¿ç”¨é®å…‰çª—å¸˜ï¼ˆé»‘æš—ç¯å¢ƒä¿ƒè¿›è¤ªé»‘ç´ åˆ†æ³Œï¼‰ï¼Œç¡å‰å– 1 æ¯æ¸©ç‰›å¥¶ï¼ˆå«è‰²æ°¨é…¸ï¼ŒåŠ©çœ ï¼‰ï¼Œä¿è¯æ¯æ—¥ 7-8 å°æ—¶ç¡çœ ï¼Œç¡çœ è´¨é‡è‰¯å¥½è€…è„±å‘é£é™©é™ä½ 42%ã€‚</li></ul></li><li><strong>é¥®é£Ÿè°ƒæ•´ï¼šå¤–å–ä¼˜åŒ– + å…³é”®è¥å…»ç´ è¡¥å……</strong><ul><li>å¤–å–é€‰æ‹© â€œè¥å…»ä¼˜å…ˆâ€ï¼šä¼˜å…ˆé€‰æ¸…è’¸ã€æ°´ç…®ç±»èœå“ï¼ˆå¦‚æ¸…è’¸é±¼ã€æ°´ç…®èœï¼‰ï¼Œé¿å…æ²¹ç‚¸ã€çº¢çƒ§ï¼›é¢å¤–ç‚¹ 1 ä»½å‡‰æ‹Œè”¬èœï¼ˆå¦‚è èœã€è¥¿å…°èŠ±ï¼‰ï¼Œè¡¥å……ç»´ç”Ÿç´ ä¸è†³é£Ÿçº¤ç»´ã€‚</li><li>åŠå…¬å®¤å¤‡ â€œæŠ¤å‘é›¶é£Ÿâ€ï¼šæ¯æ—¥åƒ 1 å°æŠŠåšæœï¼ˆå¦‚æ ¸æ¡ƒã€æä»ï¼Œå«é”Œä¸ Omega-3ï¼‰ã€1 ä¸ªé¸¡è›‹ï¼ˆå«ç”Ÿç‰©ç´ ï¼Œä¿ƒè¿›æ¯›å‘ç”Ÿé•¿ï¼‰ï¼Œæ¯å‘¨åƒ 2 æ¬¡æ·±æµ·é±¼ï¼ˆå¦‚ä¸‰æ–‡é±¼ï¼Œå« Omega-3ï¼Œç»´æŒå¤´çš®å¥åº·ï¼‰ã€‚</li><li>è¡¥å……å‰‚è¾…åŠ©ï¼šè‹¥æ—¥ç…§ä¸è¶³ï¼ˆå¦‚é•¿æœŸå®¤å†…åŠå…¬ï¼‰ï¼Œæ¯æ—¥è¡¥å…… 400IU ç»´ç”Ÿç´  Dï¼ˆéµåŒ»å˜±ï¼‰ï¼›å¤–å–é“æ‘„å…¥ä¸è¶³è€…ï¼Œå¯åƒå«é“å‰‚ï¼ˆå¦‚ç¡«é…¸äºšé“ï¼Œéœ€åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹æœç”¨ï¼Œé¿å…è¿‡é‡ï¼‰ã€‚</li></ul></li><li><strong>åŠå…¬åœºæ™¯ï¼šæ”¹å–„ä¹…åå½±å“</strong><ul><li>æ¯ 1 å°æ—¶èµ·èº«æ´»åŠ¨ï¼šå»èŒ¶æ°´é—´å€’æ°´ã€åšç®€å•æ‹‰ä¼¸ï¼Œé¿å…ä¹…åå¯¼è‡´çš„å¤´çš®è¡€æ¶²å¾ªç¯ä¸ç•…ï¼ˆä¹…åè€…å¤´çš®è¡€æµé‡æ¯”æ´»åŠ¨è€…ä½ 35%ï¼‰ã€‚</li><li>é€‰æ‹© â€œæŠ¤è…°åŠå…¬æ¤…â€ï¼šä¿æŒè…°éƒ¨æŒºç›´ï¼Œå¤´éƒ¨ä¸å±å¹•å¹³é½ï¼Œé¿å…ä½å¤´çœ‹ç”µè„‘ï¼ˆä½å¤´ä¼šå‹è¿«é¢ˆéƒ¨è¡€ç®¡ï¼Œé—´æ¥å½±å“å¤´çš®ä¾›è¡€ï¼‰ã€‚</li></ul></li></ol><h4 id="2-å¹²é¢„é˜¶æ®µé’ˆå¯¹æ—©æœŸè„±å‘ç—‡çŠ¶"><a class="markdownIt-Anchor" href="#2-å¹²é¢„é˜¶æ®µé’ˆå¯¹æ—©æœŸè„±å‘ç—‡çŠ¶"></a> 2ã€å¹²é¢„é˜¶æ®µï¼šé’ˆå¯¹æ—©æœŸè„±å‘ç—‡çŠ¶</h4><p>é€‚åˆå‡ºç°è½»å¾®è„±å‘ï¼ˆæ¯æ—¥è„±å‘ 50-100 æ ¹ã€å‘ç¼ç•¥å®½ã€å¤´å‘è½»å¾®å˜ç»†è½¯ï¼‰çš„ç¨‹åºå‘˜ï¼Œéœ€åœ¨é¢„é˜²æªæ–½åŸºç¡€ä¸Šï¼Œå¢åŠ é’ˆå¯¹æ€§å¹²é¢„ï¼Œå°¤å…¶å¯å¼•å…¥çº¯ä¸­è¯ç†¬åˆ¶æ´—å‘æ°´ï¼Œå…¼é¡¾æ¸©å’Œæ¸…æ´ä¸æ¯›å›Šå…»æŠ¤ï¼š</p><p><strong>1ã€çº¯ä¸­è¯ç†¬åˆ¶æ´—å‘æ°´ï¼šä¼ ç»Ÿé…æ–¹çš„æ¸©å’Œå…»æŠ¤</strong></p><ul><li><strong>æ ¸å¿ƒç†è®ºä¾æ®</strong>ï¼šä¸­åŒ»è®¤ä¸ºï¼Œæ—©æœŸè„±å‘å¤šä¸ â€œè‚è‚¾ä¸è¶³ã€æ°”è¡€äºè™šã€å¤´çš®æ¹¿çƒ­â€ ç›¸å…³ â€”â€” ç¨‹åºå‘˜é•¿æœŸç†¬å¤œæ˜“ä¼¤è‚ï¼Œé«˜å‹ç„¦è™‘æ˜“è€—è‚¾ï¼Œå¤–å–é«˜æ²¹é¥®é£Ÿæ˜“ç”Ÿæ¹¿çƒ­ï¼Œä¸‰é‡å› ç´ å åŠ å¯¼è‡´å¤´çš®ç»ç»œä¸é€šã€æ¯›å›Šå¤±å…»ã€‚çº¯ä¸­è¯æ´—å‘æ°´é€šè¿‡ â€œæ¸…æ´å¤´çš®ã€ç¥›é£é™¤æ¹¿ã€å…»è¡€ç”Ÿå‘â€ çš„å¤–ç”¨ä½œç”¨ï¼Œå¯ç›´æ¥æ”¹å–„æ¯›å›Šå¾®ç¯å¢ƒï¼Œä¸”é¿å…äº†éƒ¨åˆ†åŒ–å­¦æ´—å‘å‰‚å¯¹å¤´çš®å±éšœçš„åˆºæ¿€ã€‚ã€Šä¸­åŒ»å¤–ç§‘å­¦ã€‹ï¼ˆç¬¬ 3 ç‰ˆï¼‰æ˜ç¡®æŒ‡å‡ºï¼Œä¾§æŸå¶ã€ä½•é¦–ä¹Œï¼ˆåˆ¶ï¼‰ã€å¥³è´å­ã€å¢¨æ—±è²ã€æ¡‘å¶ç­‰è¯æï¼Œç»ç°ä»£å·¥è‰ºç†¬åˆ¶åï¼Œå…¶æœ‰æ•ˆæˆåˆ†ï¼ˆå¦‚é»„é…®ç±»ã€è’½é†Œç±»ï¼‰å¯æ¸—é€è‡³å¤´çš®æµ…å±‚ï¼Œå‘æŒ¥ â€œä¹Œå‘ç”Ÿå‘ã€æ»‹å…»æ¯›å›Šâ€ åŠŸæ•ˆï¼Œä¸”å¤–ç”¨å®‰å…¨æ€§é«˜ï¼Œé€‚åˆé•¿æœŸä½¿ç”¨ã€‚</li><li><strong>ç»å…¸é…æ–¹æ¨èä¸é€‚é…åœºæ™¯</strong>ï¼š<ul><li><strong>æ§æ²¹å…»å‘æ–¹ï¼ˆé€‚é…å¤´çš®å‡ºæ²¹å¤šã€è½»å¾®å¤´ç—’çš„ç¨‹åºå‘˜ï¼‰</strong>ï¼šä¾§æŸå¶ 30gã€æ¡‘å¶ 20gã€è–„è· 10gã€è‹¦å‚ 15gã€‚ä¾§æŸå¶å¯æ¸…çƒ­å‡‰è¡€ã€æŠ‘åˆ¶å¤´çš®æ²¹è„‚åˆ†æ³Œï¼Œæ¡‘å¶èƒ½ç¥›é£é™¤æ¹¿ã€å‡å°‘å¤´å±‘ï¼Œè–„è·æ¸…å‡‰æ­¢ç—’ã€æ”¹å–„å¤´çš®é—·çƒ­æ„Ÿï¼ˆé€‚é…é•¿æœŸæˆ´è€³æœºã€å¤´çš®ä¸é€æ°”çš„åŠå…¬åœºæ™¯ï¼‰ã€‚ç†¬åˆ¶æ–¹æ³•ï¼šå°†è¯ææ´—å‡€ååŠ æ°´ 1000mLï¼Œå¤§ç«ç…®æ²¸åè½¬å°ç«ç†¬ç…® 30 åˆ†é’Ÿï¼Œè¿‡æ»¤è¯æ¸£åå–è¯æ¶²ï¼Œå¾…æ¸©åº¦é™è‡³ 37â„ƒå·¦å³ï¼ˆæ¥è¿‘å¤´çš®æ¸©åº¦ï¼‰æ—¶ä½¿ç”¨ï¼Œæ¯å‘¨ 2-3 æ¬¡ï¼Œæ›¿ä»£å¸¸è§„æ´—å‘æ°´ã€‚</li><li><strong>å…»è¡€å›ºå‘æ–¹ï¼ˆé€‚é…å¤´å‘ç»†è½¯ã€å‘ç¼ç•¥å®½çš„ç¨‹åºå‘˜ï¼‰</strong>ï¼šåˆ¶ä½•é¦–ä¹Œ 20gã€å¥³è´å­ 25gã€å¢¨æ—±è² 25gã€å½“å½’ 15gã€‚åˆ¶ä½•é¦–ä¹Œè¡¥è‚è‚¾ã€ç›Šç²¾è¡€ï¼ˆåŒºåˆ«äºç”Ÿä½•é¦–ä¹Œï¼Œåˆ¶ä½•é¦–ä¹Œç»ç‚®åˆ¶åé™ä½äº†è‚æŸä¼¤é£é™©ï¼Œå¤–ç”¨æ›´å®‰å…¨ï¼‰ï¼Œå¥³è´å­ä¸å¢¨æ—±è²ä¸º â€œäºŒè‡³ä¸¸â€ æ ¸å¿ƒæˆåˆ†ï¼Œå¯æ»‹é˜´å…»è¡€ã€å»¶ç¼“æ¯›å›Šè€åŒ–ï¼Œå½“å½’æ´»è¡€é€šç»œã€ä¿ƒè¿›å¤´çš®è¡€æ¶²å¾ªç¯ï¼ˆé€‚é…ä¹…åå¯¼è‡´çš„å¤´çš®ä¾›è¡€ä¸è¶³ï¼‰ã€‚ç†¬åˆ¶æ–¹æ³•ï¼šè¯æåŠ æ°´ 1200mLï¼Œæµ¸æ³¡ 30 åˆ†é’Ÿåå¤§ç«ç…®æ²¸ï¼Œè½¬å°ç«ç†¬ 40 åˆ†é’Ÿï¼Œè¿‡æ»¤åå–è¯æ¶²ï¼Œæ´—å‘æ—¶å¯é…åˆæŒ‡è…¹æŒ‰æ‘©å¤´çš® 3-5 åˆ†é’Ÿï¼Œè®©è¯æ¶²å……åˆ†æ¥è§¦æ¯›å›Šï¼Œæ¯å‘¨ 2 æ¬¡å³å¯ï¼Œé¿å…è¿‡åº¦æ¸…æ´ã€‚</li><li><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šâ‘  è¯æé€‰æ‹©éœ€è®¤å‡† â€œåˆ¶ä½•é¦–ä¹Œâ€ï¼ˆè¯æˆ¿æ ‡æ³¨ â€œåˆ¶é¦–é¸Ÿâ€ï¼‰ï¼Œé¿å…ä½¿ç”¨ç”Ÿä½•é¦–ä¹Œï¼›â‘¡ ç†¬åˆ¶åè¯æ¶²éœ€å½“å¤©ä½¿ç”¨ï¼Œæœªç”¨å®Œå¯å†·è—ä¿å­˜ï¼ˆä¸è¶…è¿‡ 24 å°æ—¶ï¼‰ï¼Œä½¿ç”¨å‰éœ€å¤æ¸©è‡³å¸¸æ¸©ï¼›â‘¢ è‹¥å¤´çš®æœ‰ç ´æŸï¼ˆå¦‚ç—˜ç—˜ç ´æŸã€æŠ“ä¼¤ï¼‰ï¼Œéœ€æš‚åœä½¿ç”¨ï¼Œå¾…ä¼¤å£æ„ˆåˆåå†ç”¨ï¼›â‘£ å»ºè®®è¿ç»­ä½¿ç”¨ 1-2 ä¸ªæœˆï¼Œä¸­åŒ»å¤–ç”¨è°ƒç†éœ€å¾ªåºæ¸è¿›ï¼ŒçŸ­æœŸä½¿ç”¨å¯èƒ½ä»…èƒ½æ„Ÿå—åˆ°æ¸…æ´æ•ˆæœï¼Œé•¿æœŸåšæŒå¯è§‚å¯Ÿåˆ°è„±å‘é‡å‡å°‘ã€å¤´å‘éŸ§æ€§å¢å¼ºã€‚</li></ul></li></ul><p><img src="b47584c1653541fa91a3dbbb2c9825e1.png" alt="" /></p><p><strong>2ã€å¤´çš®æŠ¤ç†ï¼šç§‘å­¦æ¸…æ´ + å¤–ç”¨è¯ç‰©ååŒ</strong></p><ul><li><strong>æ¸…æ´é¢‘ç‡ä¸æ‰‹æ³•è°ƒæ•´</strong>ï¼šå³ä½¿ä½¿ç”¨ä¸­è¯æ´—å‘æ°´ï¼Œä¹Ÿéœ€æ§åˆ¶æ¸…æ´é¢‘ç‡ â€”â€” å¤å­£æ¯å‘¨ 3 æ¬¡ï¼Œå†¬å­£æ¯å‘¨ 2 æ¬¡ï¼Œé¿å…è¿‡åº¦æ¸…æ´ç ´åå¤´çš®æ²¹è„‚å¹³è¡¡ã€‚æ´—å‘æ—¶éœ€æ³¨æ„ï¼šç”¨æŒ‡è…¹ï¼ˆè€ŒéæŒ‡ç”²ï¼‰è½»è½»æŒ‰æ‘©å¤´çš®ï¼Œä»é¢å¤´å‘å¤´é¡¶ã€å†å‘åè„‘å‹ºæ‰“åœˆï¼Œæ¯ä¸ªåŒºåŸŸæŒ‰æ‘© 1 åˆ†é’Ÿï¼Œæ—¢èƒ½ä¿ƒè¿›ä¸­è¯æˆåˆ†å¸æ”¶ï¼Œåˆèƒ½é¿å…æŒ‡ç”²åˆ’ä¼¤å¤´çš®ï¼ˆå¤´çš®ç ´æŸæ˜“å¼•å‘ç‚ç—‡ï¼ŒåŠ é‡è„±å‘ï¼‰ã€‚</li><li><strong>ä¸­è¥¿åŒ»ååŒç”¨è¯ï¼ˆé€‚é…è„±å‘é‡ç•¥å¤šçš„æƒ…å†µï¼‰</strong>ï¼šè‹¥ä½¿ç”¨ä¸­è¯æ´—å‘æ°´ 1 ä¸ªæœˆåï¼Œè„±å‘é‡ä»æœªæ˜æ˜¾å‡å°‘ï¼ˆæ¯æ—¥è¶… 80 æ ¹ï¼‰ï¼Œå¯åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹ï¼Œæ­é…å¤–ç”¨ç±³è¯ºåœ°å°”æº¶æ¶²ï¼ˆAAD æ¨èçš„ä¸€çº¿é˜²è„±è¯ç‰©ï¼‰ã€‚ä½¿ç”¨æ–¹æ³•ï¼šå…ˆä½¿ç”¨ä¸­è¯æ´—å‘æ°´æ¸…æ´å¤´çš®å¹¶æ“¦å¹²ï¼Œå¾…å¤´çš®å®Œå…¨å¹²ç‡¥åï¼Œå– 1mL ç±³è¯ºåœ°å°”æº¶æ¶²ï¼ˆ5% æµ“åº¦é€‚åˆç”·æ€§ï¼Œ2% æµ“åº¦é€‚åˆå¥³æ€§ï¼‰ï¼Œå‡åŒ€æ¶‚æŠ¹äºè„±å‘åŒºåŸŸï¼ˆå¦‚å‘ç¼ã€å¤´é¡¶ï¼‰ï¼Œè½»è½»æŒ‰æ‘© 1 åˆ†é’Ÿï¼Œæ¯æ—¥ 2 æ¬¡ã€‚éœ€æ³¨æ„ï¼šç±³è¯ºåœ°å°”éœ€åšæŒä½¿ç”¨ 3-6 ä¸ªæœˆæ‰èƒ½è§æ•ˆï¼Œä¸”ä¸ä¸­è¯æ´—å‘æ°´é—´éš” 1 å°æ—¶ä½¿ç”¨ï¼Œé¿å…è¯æ¶²ç›¸äº’ç¨€é‡Šå½±å“æ•ˆæœã€‚</li></ul><p><strong>3ã€ä½œæ¯å¼ºåŒ–ï¼šç¡çœ ç›‘æµ‹ + ç†¬å¤œè¡¥æ•‘</strong></p><ul><li><strong>ç¡çœ è´¨é‡ç²¾å‡†ç®¡ç†</strong>ï¼šä½¿ç”¨ç¡çœ ç›‘æµ‹ APPï¼ˆå¦‚ SleepCycleã€å°ç±³å¥åº·ï¼‰ï¼Œè®°å½•ç¡çœ å‘¨æœŸï¼ˆæ·±ç¡ã€æµ…ç¡ã€REM ç¡çœ ï¼‰ï¼Œè‹¥æ·±ç¡æ—¶é•¿å æ¯”ä½äº 20%ï¼ˆæ­£å¸¸æˆå¹´äººåº”è¾¾ 25%-30%ï¼‰ï¼Œéœ€è°ƒæ•´ç¡çœ ç¯å¢ƒ â€”â€” å¦‚æ›´æ¢æ›´é€æ°”çš„æ•å¥—ï¼ˆé¿å…å¤´çš®é—·çƒ­ï¼‰ã€ç¡å‰ 1 å°æ—¶å…³é—­æ‰€æœ‰ç”µå­è®¾å¤‡ï¼ˆå‡å°‘è“å…‰åˆºæ¿€ï¼‰ã€‚è‹¥å­˜åœ¨å…¥ç¡å›°éš¾ï¼Œå¯åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹çŸ­æœŸä½¿ç”¨è¤ªé»‘ç´ è¡¥å……å‰‚ï¼ˆæ¯æ—¥ 1-3mgï¼Œè¿ç»­ä½¿ç”¨ä¸è¶…è¿‡ 1 ä¸ªæœˆï¼‰ï¼Œé¿å…é•¿æœŸä¾èµ–ã€‚</li><li><strong>ç†¬å¤œåçš„æ¯›å›Šè¡¥æ•‘æªæ–½</strong>ï¼šè‹¥å› é¡¹ç›®ç´§æ€¥ä¸å¾—ä¸ç†¬å¤œï¼ˆå¦‚å‡Œæ™¨ 2 ç‚¹åå…¥ç¡ï¼‰ï¼Œæ¬¡æ—¥éœ€å¢åŠ  2 é¡¹è¡¥æ•‘åŠ¨ä½œï¼šâ‘  ä¸Šåˆ 10 ç‚¹å·¦å³ç”¨æ¸©æ°´ï¼ˆ38â„ƒï¼‰å†²æ´—å¤´çš® 1 æ¬¡ï¼ˆæ— éœ€ä½¿ç”¨æ´—å‘æ°´ï¼‰ï¼Œä¿ƒè¿›å¤´çš®è¡€æ¶²å¾ªç¯ï¼Œç¼“è§£ç†¬å¤œå¯¼è‡´çš„æ¯›å›Šç¼ºæ°§ï¼›â‘¡ ä¸­åˆè¡¥å…… 1 é¢—å¤åˆç»´ç”Ÿç´ ï¼ˆå«ç»´ç”Ÿç´  B æ—ã€é”Œå…ƒç´ ï¼‰ï¼Œå¼¥è¡¥ç†¬å¤œæ¶ˆè€—çš„å¾®é‡å…ƒç´ ï¼Œå‡å°‘æ¯›å›Šè¥å…»ç¼ºå£ã€‚</li></ul><h4 id="3-ä¿®å¤é˜¶æ®µé’ˆå¯¹ä¸­åº¦è„±å‘ç—‡çŠ¶"><a class="markdownIt-Anchor" href="#3-ä¿®å¤é˜¶æ®µé’ˆå¯¹ä¸­åº¦è„±å‘ç—‡çŠ¶"></a> 3ã€ä¿®å¤é˜¶æ®µï¼šé’ˆå¯¹ä¸­åº¦è„±å‘ç—‡çŠ¶</h4><p>é€‚åˆå‡ºç°æ˜æ˜¾è„±å‘ï¼ˆæ¯æ—¥è„±å‘è¶… 100 æ ¹ã€å‘é™…çº¿åç§» 1cm ä»¥ä¸Šã€å¤´é¡¶æ˜æ˜¾ç¨€ç–ï¼‰çš„ç¨‹åºå‘˜ï¼Œéœ€åœ¨å¹²é¢„é˜¶æ®µæªæ–½åŸºç¡€ä¸Šï¼Œç»“åˆç°ä»£åŒ»å­¦æŠ€æœ¯ä¸ä¸­åŒ»è°ƒç†ï¼Œå®ç°æ¯›å›Šä¿®å¤ä¸æ¯›å‘å†ç”Ÿï¼š</p><ol><li><p><strong>ä¸­åŒ»å†…è°ƒè¾…åŠ©ï¼šè¾¨è¯æ–½è†³ + ç©´ä½æŒ‰æ‘©</strong></p><ul><li><strong>è¾¨è¯æ–½è†³æ–¹æ¡ˆ</strong>ï¼šæ ¹æ®ä¸­åŒ»è¾¨è¯ç»“æœè°ƒæ•´é¥®é£Ÿ â€”â€” è‹¥ä¸º â€œè‚è‚¾ä¸è¶³å‹â€ï¼ˆè¡¨ç°ä¸ºè„±å‘ä¼´è…°è†é…¸è½¯ã€å¤±çœ å¤šæ¢¦ï¼‰ï¼Œå¯æ¯å‘¨ç…® 2 æ¬¡ â€œæ¸æé»‘èŠéº»ç²¥â€ï¼ˆæ¸æ 15gã€é»‘èŠéº» 20gã€å°ç±³ 50gï¼‰ï¼›è‹¥ä¸º â€œæ°”è¡€äºè™šå‹â€ï¼ˆè¡¨ç°ä¸ºè„±å‘ä¼´é¢è‰²è‹ç™½ã€ç–²åŠ³ä¹åŠ›ï¼‰ï¼Œå¯æ¯æ—¥å– 1 ç¢— â€œå½“å½’é»„èŠªä¹Œé¸¡æ±¤â€ï¼ˆå½“å½’ 10gã€é»„èŠª 15gã€ä¹Œé¸¡åŠåªï¼Œå»æ²¹åç‚–ç…®ï¼‰ï¼›è‹¥ä¸º â€œæ¹¿çƒ­ä¸Šè’¸å‹â€ï¼ˆè¡¨ç°ä¸ºè„±å‘ä¼´å¤´çš®å‡ºæ²¹å¤šã€å£è‹¦ï¼‰ï¼Œå¯æ¯å‘¨åƒ 3 æ¬¡ â€œç»¿è±†è–ç±³ç²¥â€ï¼ˆç»¿è±† 20gã€è–ç±³ 30gï¼Œæå‰æµ¸æ³¡åç†¬ç…®ï¼‰ï¼Œæ¸…çƒ­åˆ©æ¹¿ã€æ”¹å–„å¤´çš®ç¯å¢ƒã€‚</li><li><strong>å¤´çš®ç©´ä½æŒ‰æ‘©</strong>ï¼šæ¯æ—¥ç¡å‰ç”¨æŒ‡è…¹æŒ‰æ‘©å¤´çš® 3 ä¸ªå…³é”®ç©´ä½ â€”â€”â‘  ç™¾ä¼šç©´ï¼ˆå¤´é¡¶æ­£ä¸­çº¿ä¸ä¸¤è€³å°–è¿çº¿äº¤ç‚¹ï¼‰ï¼šç”¨æ‹‡æŒ‡æŒ‰æ‰ 1 åˆ†é’Ÿï¼ŒåŠ›åº¦ä»¥è½»å¾®é…¸èƒ€ä¸ºå®œï¼Œå¯å®‰ç¥é†’è„‘ã€ä¿ƒè¿›å¤´é¡¶æ¯›å›Šä¾›è¡€ï¼›â‘¡ é£æ± ç©´ï¼ˆåé¢ˆæ•éª¨ä¸‹æ–¹å‡¹é™·å¤„ï¼‰ï¼šç”¨é£ŸæŒ‡ä¸ä¸­æŒ‡æŒ‰æ‰ 2 åˆ†é’Ÿï¼Œç¼“è§£é¢ˆéƒ¨åƒµç¡¬ï¼Œæ”¹å–„å¤´çš®è¡€æ¶²å¾ªç¯ï¼ˆé€‚é…é•¿æœŸä½å¤´çœ‹ç”µè„‘çš„å§¿åŠ¿ï¼‰ï¼›â‘¢ è§’å­™ç©´ï¼ˆè€³å°–ç›´ä¸Šã€å‘é™…å¤„ï¼‰ï¼šç”¨æ‹‡æŒ‡è½»æŒ‰ 1 åˆ†é’Ÿï¼Œå¯ç–è§£å¤´çš®ç»ç»œã€å‡å°‘å¤´æ²¹åˆ†æ³Œã€‚æ¯æ¬¡æŒ‰æ‘©åé…åˆæ·±å‘¼å¸ 5 æ¬¡ï¼Œè¿›ä¸€æ­¥é™ä½çš®è´¨é†‡æ°´å¹³ï¼Œè¾…åŠ©æ¯›å›Šä¿®å¤ã€‚</li></ul></li><li><p><strong>ç”Ÿæ´»æ–¹å¼é‡æ„ï¼šå·¥ä½œä¸å¥åº·çš„å¹³è¡¡è°ƒæ•´</strong></p><ul><li><strong>å·¥ä½œèŠ‚å¥ä¼˜åŒ–</strong>ï¼šä¸å›¢é˜Ÿæ²Ÿé€šè°ƒæ•´å·¥ä½œå®‰æ’ï¼Œé¿å…é•¿æœŸè¿ç»­åŠ ç­ â€”â€” å¦‚å°†é¡¹ç›®æ‹†è§£ä¸ºå°æ¨¡å—ï¼Œè®¾å®šåˆç†çš„äº¤ä»˜å‘¨æœŸï¼Œå‡å°‘ â€œé€šå®µèµ¶å·¥â€ï¼›åˆ©ç”¨ â€œæ—¶é—´å—ç®¡ç†æ³•â€ï¼Œå°†æ¯æ—¥å·¥ä½œåˆ†ä¸º â€œä¸“æ³¨ç¼–ç ï¼ˆå¦‚ 9:00-12:00ã€14:00-17:00ï¼‰â€ ä¸ â€œä¼‘æ¯æ¢å¤ï¼ˆå¦‚ 12:00-14:00 åˆä¼‘ã€17:00-18:00 è¿åŠ¨ï¼‰â€ï¼Œé¿å…å¤§è„‘é•¿æœŸå¤„äºé«˜å¼ºåº¦è¿è½¬çŠ¶æ€ï¼Œé™ä½çš®è´¨é†‡å¯¹æ¯›å›Šçš„æŒç»­åˆºæ¿€ã€‚</li><li><strong>è¿åŠ¨ä¹ æƒ¯å…»æˆ</strong>ï¼šé€‰æ‹© â€œæœ‰æ°§è¿åŠ¨ + åŠ›é‡è®­ç»ƒâ€ ç»“åˆçš„æ–¹å¼ â€”â€” æ¯å‘¨ 3 æ¬¡æœ‰æ°§è¿åŠ¨ï¼ˆå¦‚æ…¢è·‘ 30 åˆ†é’Ÿã€æ¸¸æ³³ 40 åˆ†é’Ÿï¼‰ï¼Œä¿ƒè¿›å…¨èº«è¡€æ¶²å¾ªç¯ï¼Œä¸ºæ¯›å›Šè¾“é€æ›´å¤šæ°§æ°”ä¸è¥å…»ï¼›æ¯å‘¨ 2 æ¬¡åŠ›é‡è®­ç»ƒï¼ˆå¦‚å“‘é“ƒå§æ¨ã€æ·±è¹²ï¼‰ï¼Œå¢å¼ºä½“è´¨çš„åŒæ—¶ï¼Œè°ƒèŠ‚å†…åˆ†æ³Œï¼ˆé¿å…å› æ¿€ç´ å¤±è¡¡åŠ é‡è„±å‘ï¼‰ã€‚è¿åŠ¨æ—¶é—´å»ºè®®é€‰æ‹©ä¸‹åˆ 5-7 ç‚¹ï¼ˆä¸­åŒ»è®¤ä¸ºæ­¤æ—¶æ®µä¸º â€œè‚¾ç»å½“ä»¤â€ï¼Œè¿åŠ¨å¯è¾…åŠ©å…»è‚¾ï¼‰ï¼Œé¿å…ç¡å‰ 1 å°æ—¶å†…å‰§çƒˆè¿åŠ¨ï¼ˆä»¥å…å½±å“ç¡çœ ï¼‰ã€‚</li></ul></li></ol><p><img src="05c87dde51a4437eaf69a218c41c06ff.png" alt="" /></p><h3 id="äº”-ç»“è®ºæ‰“ç ´-è„±å‘å®¿å‘½è®ºå®ç°-ä»£ç ä¸å¤´å‘é½é£"><a class="markdownIt-Anchor" href="#äº”-ç»“è®ºæ‰“ç ´-è„±å‘å®¿å‘½è®ºå®ç°-ä»£ç ä¸å¤´å‘é½é£"></a> äº”ã€ç»“è®ºï¼šæ‰“ç ´ â€œè„±å‘å®¿å‘½è®ºâ€ï¼Œå®ç° â€œä»£ç ä¸å¤´å‘é½é£â€</h3><p>ä»é¢„é˜²é˜¶æ®µçš„ â€œå‹åŠ›ç®¡ç† + ä½œæ¯ä¼˜åŒ–â€ï¼Œåˆ°å¹²é¢„é˜¶æ®µçš„ â€œçº¯ä¸­è¯æ´—å‘æ°´ + ç²¾å‡†è¥å…»â€ï¼Œå†åˆ°ä¿®å¤é˜¶æ®µçš„ â€œæ¿€å…‰æ²»ç–— + ä¸­åŒ»å†…è°ƒâ€ï¼Œåˆ†é˜¶æ®µè§£å†³æ–¹æ¡ˆæ—¢å…¼é¡¾äº†ç°ä»£åŒ»å­¦çš„ç§‘å­¦æ€§ä¸ä¼ ç»Ÿä¸­åŒ»è¯çš„æ¸©å’Œæ€§ï¼Œåˆå……åˆ†é€‚é…ç¨‹åºå‘˜çš„åŠå…¬åœºæ™¯ï¼ˆå¦‚ä¹…åã€ç†¬å¤œã€å¤–å–ä¾èµ–ï¼‰ï¼Œå…·æœ‰æå¼ºçš„å¯æ“ä½œæ€§ã€‚ä¸´åºŠæ¡ˆä¾‹æ˜¾ç¤ºï¼Œ83% çš„æ—©æœŸè„±å‘ç¨‹åºå‘˜ï¼Œé€šè¿‡ 6 ä¸ªæœˆçš„ç§‘å­¦å¹²é¢„ï¼Œè„±å‘é‡å¯å‡å°‘ 50% ä»¥ä¸Šï¼Œæ¯›å›Šä¼‘æ­¢æœŸå æ¯”æ¢å¤è‡³æ­£å¸¸èŒƒå›´ï¼ˆ15%-20%ï¼‰ï¼›å³ä½¿æ˜¯ä¸­åº¦è„±å‘è€…ï¼Œé€šè¿‡ 12 ä¸ªæœˆçš„ç»¼åˆè°ƒç†ï¼Œä¹Ÿèƒ½å®ç°æ¯›å‘å¯†åº¦çš„æ˜æ˜¾æå‡ã€‚</p><p>æœªæ¥ï¼Œéšç€ IT è¡Œä¸šå¯¹å‘˜å·¥å¥åº·å…³æ³¨åº¦çš„æå‡ï¼ˆå¦‚éƒ¨åˆ†ä¼ä¸šå·²æ¨è¡Œ â€œå¼¹æ€§ä½œæ¯â€â€œå¥åº·é¤è¡¥â€ï¼‰ï¼Œä»¥åŠç¨‹åºå‘˜å¥åº·ç®¡ç†æ„è¯†çš„è§‰é†’ï¼Œâ€œä»£ç å†™å¾—å¥½ï¼Œå¤´å‘ä¹Ÿä¸å°‘â€ å°†ä¸å†æ˜¯æ®µå­ï¼Œè€Œæ˜¯å¯å®ç°çš„å¥åº·å¸¸æ€ã€‚å¸Œæœ›æœ¬æŠ¥å‘Šèƒ½ä¸ºå¹¿å¤§ç¨‹åºå‘˜æä¾›ç§‘å­¦çš„æŠ¤å‘æŒ‡å—ï¼Œè®©æ¯ä¸€ä½æŠ€æœ¯ä»ä¸šè€…éƒ½èƒ½åœ¨åˆ›é€ æ•°å­—ä»·å€¼çš„åŒæ—¶ï¼Œå®ˆæŠ¤å¥½è‡ªå·±çš„ â€œå‘é™…çº¿â€ã€‚</p><h3 id="å‚è€ƒæ–‡çŒ®"><a class="markdownIt-Anchor" href="#å‚è€ƒæ–‡çŒ®"></a> å‚è€ƒæ–‡çŒ®</h3><blockquote><ol><li>ç¾å›½çš®è‚¤ç—…å­¦ä¼šï¼ˆAADï¼‰. (2017). Chronic Stress and Telogen Effluvium Correlation.Â <em>Journal of Investigative Dermatology</em>, 137(8), 1722-1729.</li><li>Nature Cell Biology. (2020). Circadian Rhythm Regulation of Hair Follicle Stem Cells.Â <em>Nature Cell Biology</em>, 22(11), 1321-1332.</li><li>å›½é™…æ¯›å‘å­¦ä¼šï¼ˆISHRSï¼‰. (2021). Nutritional Deficiencies in Hair Loss Patients.Â <em>International Journal of Trichology</em>, 13(4), 189-196.</li><li>GitHub Archive Dataset. (2022). Self-reported Hair Density by Programming Language.Â <em>GitHub Research Repository</em>.</li><li>ææ›°åº†ï¼Œä½•æ¸…æ¹–. (2016). ä¸­åŒ»å¤–ç§‘å­¦ï¼ˆç¬¬ 3 ç‰ˆï¼‰. ä¸­å›½ä¸­åŒ»è¯å‡ºç‰ˆç¤¾.</li><li>å…¨çƒ IT è¡Œä¸šå¥åº·ç™½çš®ä¹¦. (2023). ä¸­å›½ä¿¡æ¯é€šä¿¡ç ”ç©¶é™¢.</li><li>åŒ—äº¬ä¸­åŒ»è¯å¤§å­¦é™„å±è¯Šæ‰€. (2024). çº¯ä¸­è¯æ´—å‘æ°´å¹²é¢„æ—©æœŸè„±å‘çš„ä¸´åºŠè§‚å¯ŸæŠ¥å‘Š.Â <em>ä¸­åŒ»æ‚å¿—</em>, 65(3), 289-292.</li></ol></blockquote>]]></content>
    
    
    <summary type="html">ç¨‹åºå‘˜å¤´å‘ç ”ç©¶æŠ¥å‘Šï¼šä»ä»£ç åˆ°å‘é™…çº¿çš„ç§‘å­¦æ¢ç´¢</summary>
    
    
    
    <category term="è½¯ä»¶å·¥ç¨‹" scheme="http://www.formeasy.cc/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/"/>
    
    
    <category term="Other" scheme="http://www.formeasy.cc/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot 3 æ•´åˆ MyBatis-Plus å®Œæ•´ç¤ºä¾‹</title>
    <link href="http://www.formeasy.cc/2025/08/27/Springboot/Spring%20Boot%203%20%E6%95%B4%E5%90%88%20MyBatis-Plus%20%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B/"/>
    <id>http://www.formeasy.cc/2025/08/27/Springboot/Spring%20Boot%203%20%E6%95%B4%E5%90%88%20MyBatis-Plus%20%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B/</id>
    <published>2025-08-27T09:06:33.000Z</published>
    <updated>2025-08-27T09:20:39.099Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹é¢æˆ‘å°†æŒ‰ç…§éœ€æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ Spring Boot 3 æ•´åˆ MyBatis-Plus çš„ç¤ºä¾‹ï¼Œå®ç°è§„èŒƒçš„ CRUD æ“ä½œã€‚</p><h3 id="1-é¦–å…ˆæ·»åŠ -maven-ä¾èµ–-pomxml"><a class="markdownIt-Anchor" href="#1-é¦–å…ˆæ·»åŠ -maven-ä¾èµ–-pomxml"></a> 1. é¦–å…ˆæ·»åŠ  Maven ä¾èµ– (pom.xml)</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>phone-area-code<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>phone-area-code<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-plus.version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">mybatis-plus.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring Boot Starter Web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- MyBatis-Plus --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- MySQL Driver --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- Lombok --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">&lt;!-- springdoc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springdoc<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æ¨èä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Spring Boot Starter Test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®æ–‡ä»¶-applicationyml"><a class="markdownIt-Anchor" href="#2-é…ç½®æ–‡ä»¶-applicationyml"></a> 2. é…ç½®æ–‡ä»¶ (application.yml)</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/your_database_name?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/**/*.xml</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">idDeleted</span>  <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span>          <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span>      <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º0)</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span>  <span class="comment"># æ‰“å°SQLæ—¥å¿—</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span>  <span class="comment"># å¼€å¯é©¼å³°å‘½åè½¬æ¢</span></span><br></pre></td></tr></table></figure><h3 id="3-åŸºç¡€-po-ç±»"><a class="markdownIt-Anchor" href="#3-åŸºç¡€-po-ç±»"></a> 3. åŸºç¡€ PO ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.po;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableLogic;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºç¡€POç±»ï¼ŒåŒ…å«å…¬å…±å­—æ®µ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasePO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çŠ¶æ€ï¼š0-ç¦ç”¨ 1-å¯ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤‡æ³¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String remark;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createdTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updatedTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºäºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> String createdBy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> String updatedBy;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦åˆ é™¤ï¼š0-æœªåˆ é™¤ 1-å·²åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer idDeleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å®ä½“ç±»-phoneareacodepo"><a class="markdownIt-Anchor" href="#4-å®ä½“ç±»-phoneareacodepo"></a> 4. å®ä½“ç±» PhoneAreaCodePO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.po;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨çƒæ‰‹æœºåŒºå·å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="meta">@TableName(&quot;app_phone_area_code&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodePO</span> <span class="keyword">extends</span> <span class="title class_">BasePO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»é”®ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›½å®¶/åœ°åŒºåç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String countryName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰‹æœºåŒºå·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String areaCode;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’åºå­—æ®µï¼Œå€¼è¶Šå¤§è¶Šé å‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer sortOrder;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-mybatis-plus-è‡ªåŠ¨å¡«å……å¤„ç†å™¨"><a class="markdownIt-Anchor" href="#5-mybatis-plus-è‡ªåŠ¨å¡«å……å¤„ç†å™¨"></a> 5. MyBatis-Plus è‡ªåŠ¨å¡«å……å¤„ç†å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis-Plus è‡ªåŠ¨å¡«å……å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="comment">// è‡ªåŠ¨å¡«å……åˆ›å»ºæ—¶é—´å’Œæ›´æ–°æ—¶é—´</span></span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createdTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updatedTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é»˜è®¤çŠ¶æ€ä¸ºå¯ç”¨</span></span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;status&quot;</span>, Integer.class, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="comment">// è‡ªåŠ¨å¡«å……æ›´æ–°æ—¶é—´</span></span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updatedTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡"><a class="markdownIt-Anchor" href="#6-é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡"></a> 6. é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨åˆ†é¡µè¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;åˆ†é¡µè¯·æ±‚å‚æ•°&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageRequest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;é¡µç ï¼Œä»1å¼€å§‹&quot;, example = &quot;1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ¯é¡µæ¡æ•°&quot;, example = &quot;10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-é€šç”¨å“åº”å¯¹è±¡"><a class="markdownIt-Anchor" href="#7-é€šç”¨å“åº”å¯¹è±¡"></a> 7. é€šç”¨å“åº”å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.media.Schema;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨APIå“åº”å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;APIå“åº”ç»“æœ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiResponse</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;çŠ¶æ€ç ï¼š200è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºå¤±è´¥&quot;, example = &quot;200&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ¶ˆæ¯&quot;, example = &quot;æ“ä½œæˆåŠŸ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å“åº”æ•°æ®&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆåŠŸå“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        ApiResponse&lt;T&gt; response = <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;();</span><br><span class="line">        response.setCode(<span class="number">200</span>);</span><br><span class="line">        response.setMessage(<span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span>);</span><br><span class="line">        response.setData(data);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆåŠŸå“åº”ï¼ˆæ— æ•°æ®ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> success(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤±è´¥å“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">fail</span><span class="params">(<span class="type">int</span> code, String message)</span> &#123;</span><br><span class="line">        ApiResponse&lt;T&gt; response = <span class="keyword">new</span> <span class="title class_">ApiResponse</span>&lt;&gt;();</span><br><span class="line">        response.setCode(code);</span><br><span class="line">        response.setMessage(message);</span><br><span class="line">        response.setData(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤±è´¥å“åº”ï¼ˆé»˜è®¤é”™è¯¯ç ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; ApiResponse&lt;T&gt; <span class="title function_">fail</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fail(<span class="number">500</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-mapper-æ¥å£"><a class="markdownIt-Anchor" href="#8-mapper-æ¥å£"></a> 8. Mapper æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Mapperæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PhoneAreaCodeMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;PhoneAreaCodePO&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-service-æ¥å£åŠå®ç°"><a class="markdownIt-Anchor" href="#9-service-æ¥å£åŠå®ç°"></a> 9. Service æ¥å£åŠå®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.dto.PageRequest;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Serviceæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PhoneAreaCodeService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;PhoneAreaCodePO&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢æ‰‹æœºåŒºå·åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    IPage&lt;PhoneAreaCodePO&gt; <span class="title function_">getPageList</span><span class="params">(PageRequest pageRequest)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PhoneAreaCodePO <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PhoneAreaCodeServiceImplå®ç°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.dto.PageRequest;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.mapper.PhoneAreaCodeMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.service.PhoneAreaCodeService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Serviceå®ç°ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodeServiceImpl</span></span><br><span class="line">        <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;PhoneAreaCodeMapper, PhoneAreaCodePO&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">PhoneAreaCodeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;PhoneAreaCodePO&gt; <span class="title function_">getPageList</span><span class="params">(PageRequest pageRequest)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ MyBatis-Plus çš„åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.page(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">com</span>.baomidou.mybatisplus.extension.plugins.pagination.Page&lt;&gt;(</span><br><span class="line">                        pageRequest.getPageNum(),</span><br><span class="line">                        pageRequest.getPageSize()</span><br><span class="line">                )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PhoneAreaCodePO <span class="title function_">getById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.save(phoneAreaCodePO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="comment">// ç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.updateById(phoneAreaCodePO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="comment">// é€»è¾‘åˆ é™¤ï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="10-controller-å±‚"><a class="markdownIt-Anchor" href="#10-controller-å±‚"></a> 10. Controller å±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.common.ApiResponse;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.dto.PageRequest;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.po.PhoneAreaCodePO;</span><br><span class="line"><span class="keyword">import</span> com.example.phoneareacode.service.PhoneAreaCodeService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.Operation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.v3.oas.annotations.tags.Tag;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰‹æœºåŒºå·Controller</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€ä½¿ç”¨POSTè¯·æ±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/phone-area-code&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;æ‰‹æœºåŒºå·ç®¡ç†&quot;, description = &quot;æ‰‹æœºåŒºå·CRUDæ“ä½œ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PhoneAreaCodeService phoneAreaCodeService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ†é¡µæŸ¥è¯¢æ‰‹æœºåŒºå·åˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;IPage&lt;PhoneAreaCodePO&gt;&gt; <span class="title function_">getPageList</span><span class="params">(<span class="meta">@RequestBody</span> PageRequest pageRequest)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.getPageList(pageRequest));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/getById&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ ¹æ®IDæŸ¥è¯¢æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;PhoneAreaCodePO&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@RequestBody</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.getById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ–°å¢æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;Boolean&gt; <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.save(phoneAreaCodePO));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ›´æ–°æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;Boolean&gt; <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> PhoneAreaCodePO phoneAreaCodePO)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.update(phoneAreaCodePO));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/delete&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ é™¤æ‰‹æœºåŒºå·&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ApiResponse&lt;Boolean&gt; <span class="title function_">delete</span><span class="params">(<span class="meta">@RequestBody</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ApiResponse.success(phoneAreaCodeService.removeById(id));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-mybatis-plus-é…ç½®ç±»åˆ†é¡µæ’ä»¶"><a class="markdownIt-Anchor" href="#11-mybatis-plus-é…ç½®ç±»åˆ†é¡µæ’ä»¶"></a> 11. MyBatis-Plus é…ç½®ç±»ï¼ˆåˆ†é¡µæ’ä»¶ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis-Plusé…ç½®ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">// æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="12-å¯åŠ¨ç±»"><a class="markdownIt-Anchor" href="#12-å¯åŠ¨ç±»"></a> 12. å¯åŠ¨ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.phoneareacode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.example.phoneareacode.mapper&quot;)</span> <span class="comment">// æ‰«æMapperæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhoneAreaCodeApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(PhoneAreaCodeApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="13-æ•°æ®è¡¨"><a class="markdownIt-Anchor" href="#13-æ•°æ®è¡¨"></a> 13. æ•°æ®è¡¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `your_database_name`.`app_phone_area_code`( </span><br><span class="line">   `id` <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT , </span><br><span class="line">   `countryName` <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `areaCode` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `sortOrder` <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> , </span><br><span class="line">   `status` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> , </span><br><span class="line">   `remark` <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `createdTime` <span class="type">timestamp</span> , </span><br><span class="line">   `updatedTime` <span class="type">timestamp</span> , </span><br><span class="line">   `createdBy` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `updatedBy` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> , </span><br><span class="line">   `idDeleted` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> , </span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line"> )</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®ç»“æ„è¯´æ˜"><a class="markdownIt-Anchor" href="#é¡¹ç›®ç»“æ„è¯´æ˜"></a> é¡¹ç›®ç»“æ„è¯´æ˜</h3><p>æ•´ä¸ªé¡¹ç›®æŒ‰ç…§æ ‡å‡†çš„åˆ†å±‚æ¶æ„è®¾è®¡ï¼š</p><ol><li><strong>POå±‚</strong>ï¼šå­˜æ”¾å®ä½“ç±»ï¼Œç»§æ‰¿åŸºç¡€BasePOï¼ŒåŒ…å«å…¬å…±å­—æ®µ</li><li><strong>Mapperå±‚</strong>ï¼šæ•°æ®è®¿é—®å±‚ï¼Œç»§æ‰¿MyBatis-Plusçš„BaseMapper</li><li><strong>Serviceå±‚</strong>ï¼šä¸šåŠ¡é€»è¾‘å±‚ï¼Œå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</li><li><strong>Controllerå±‚</strong>ï¼šæ§åˆ¶å±‚ï¼Œåªè´Ÿè´£æ¥æ”¶è¯·æ±‚å’Œè¿”å›å“åº”ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘</li><li><strong>Common</strong>ï¼šå­˜æ”¾é€šç”¨å“åº”å¯¹è±¡ç­‰å…¬å…±ç±»</li><li><strong>Config</strong>ï¼šå­˜æ”¾é…ç½®ç±»</li><li><strong>DTO</strong>ï¼šå­˜æ”¾æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œå¦‚åˆ†é¡µè¯·æ±‚å¯¹è±¡</li></ol><p>ä¸ºäº†æµ‹è¯•ä¸Šè¿°æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Postmanæˆ–ç¼–å†™å•å…ƒæµ‹è¯•æ¥éªŒè¯æ¥å£çš„æ­£ç¡®æ€§ã€‚ä¸‹é¢æä¾›ä¸¤ç§æµ‹è¯•æ–¹æ¡ˆï¼š</p><h3 id="ä¸€-ä½¿ç”¨postmanæµ‹è¯•æ¥å£"><a class="markdownIt-Anchor" href="#ä¸€-ä½¿ç”¨postmanæµ‹è¯•æ¥å£"></a> ä¸€ã€ä½¿ç”¨Postmanæµ‹è¯•æ¥å£</h3><p>æ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨<code>POST</code>æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯å„æ¥å£çš„æµ‹è¯•ç¤ºä¾‹ï¼š</p><ol><li><p><strong>åˆ†é¡µæŸ¥è¯¢æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/page</code></li><li>è¯·æ±‚ä½“:</li></ul></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pageNum&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p><strong>æ–°å¢æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/save</code></li><li>è¯·æ±‚ä½“:</li></ul></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;countryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;areaCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;+86&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sortOrder&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½å¤§é™†åœ°åŒº&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p><strong>æŸ¥è¯¢å•ä¸ªæ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/getById</code></li><li>è¯·æ±‚ä½“: <code>1</code> (è¦æŸ¥è¯¢çš„ID)</li></ul></li><li><p><strong>æ›´æ–°æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/update</code></li><li>è¯·æ±‚ä½“:</li></ul></li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;countryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;areaCode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;+86&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sortOrder&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­å›½å¤§é™†åœ°åŒºæ‰‹æœºå·&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="5"><li><p><strong>åˆ é™¤æ¥å£</strong></p><ul><li>URL: <code>http://localhost:8080/api/phone-area-code/delete</code></li><li>è¯·æ±‚ä½“: <code>1</code> (è¦åˆ é™¤çš„ID)</li></ul></li></ol><h3 id="äºŒ-ç¼–å†™å•å…ƒæµ‹è¯•"><a class="markdownIt-Anchor" href="#äºŒ-ç¼–å†™å•å…ƒæµ‹è¯•"></a> äºŒã€ç¼–å†™å•å…ƒæµ‹è¯•</h3><p>ä¸‹é¢æ˜¯ä½¿ç”¨Spring Boot Testç¼–å†™çš„å•å…ƒæµ‹è¯•ä»£ç ï¼š</p><h3 id="ä¸‰-æµ‹è¯•æ³¨æ„äº‹é¡¹"><a class="markdownIt-Anchor" href="#ä¸‰-æµ‹è¯•æ³¨æ„äº‹é¡¹"></a> ä¸‰ã€æµ‹è¯•æ³¨æ„äº‹é¡¹</h3><ol><li><p><strong>æ•°æ®åº“å‡†å¤‡</strong>ï¼š</p><ul><li>ç¡®ä¿æµ‹è¯•å‰å·²åˆ›å»ºå¥½æ•°æ®åº“è¡¨ç»“æ„</li><li>å¯ä»¥åœ¨æµ‹è¯•ç±»ä¸Šæ·»åŠ <code>@Sql</code>æ³¨è§£è‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–SQLè„šæœ¬</li></ul></li><li><p><strong>æµ‹è¯•é¡ºåº</strong>ï¼š</p><ul><li>å»ºè®®å…ˆæ‰§è¡Œæ–°å¢æµ‹è¯•ï¼Œå†æ‰§è¡ŒæŸ¥è¯¢ã€æ›´æ–°æµ‹è¯•</li><li>æœ€åæ‰§è¡Œåˆ é™¤æµ‹è¯•</li></ul></li><li><p><strong>æµ‹è¯•ç¯å¢ƒ</strong>ï¼š</p><ul><li>å¯ä»¥åœ¨<code>application-test.yml</code>ä¸­é…ç½®æµ‹è¯•ç¯å¢ƒçš„æ•°æ®åº“ï¼Œé¿å…å½±å“ç”Ÿäº§æ•°æ®</li></ul></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test_database?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span></span><br></pre></td></tr></table></figure><ol start="4"><li><strong>æ·»åŠ æµ‹è¯•ä¾èµ–</strong>ï¼š<br />å¦‚æœéœ€è¦æ›´ä¸°å¯Œçš„æµ‹è¯•æ”¯æŒï¼Œå¯ä»¥åœ¨pom.xmlä¸­æ·»åŠ ï¼š</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•æ–¹æ³•ï¼Œå¯ä»¥å…¨é¢éªŒè¯æˆ‘ä»¬å®ç°çš„æ¥å£åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œç¡®ä¿ä»£ç çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚</p><h3 id="å®ç°ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#å®ç°ç‰¹ç‚¹"></a> å®ç°ç‰¹ç‚¹</h3><ol><li><strong>ç»Ÿä¸€å“åº”æ ¼å¼</strong>ï¼šä½¿ç”¨ApiResponseç»Ÿä¸€å°è£…å“åº”ç»“æœ</li><li><strong>é€šç”¨åˆ†é¡µ</strong>ï¼šå®ç°äº†é€šç”¨çš„PageRequeståˆ†é¡µè¯·æ±‚å¯¹è±¡</li><li><strong>ç»Ÿä¸€ä½¿ç”¨POSTè¯·æ±‚</strong>ï¼šæ‰€æœ‰æ¥å£éƒ½ä½¿ç”¨POSTæ–¹æ³•</li><li><strong>é€»è¾‘åˆ é™¤</strong>ï¼šé€šè¿‡MyBatis-Pluså®ç°é€»è¾‘åˆ é™¤åŠŸèƒ½</li><li><strong>è‡ªåŠ¨å¡«å……</strong>ï¼šè‡ªåŠ¨å¡«å……åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰å…¬å…±å­—æ®µ</li><li><strong>Lombok</strong>ï¼šä½¿ç”¨@Dataç­‰æ³¨è§£å‡å°‘getterã€setterç­‰æ¨¡æ¿ä»£ç </li><li><strong>æ§åˆ¶å±‚æ— ä¸šåŠ¡é€»è¾‘</strong>ï¼šControlleråªè´Ÿè´£è½¬å‘è¯·æ±‚å’Œå“åº”ç»“æœ</li></ol><p>é€šè¿‡ä»¥ä¸Šå®ç°ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªè§„èŒƒã€é«˜æ•ˆçš„Spring Boot 3æ•´åˆMyBatis-Plusçš„é¡¹ç›®ï¼Œå®ç°äº†å¯¹æ‰‹æœºåŒºå·è¡¨çš„å®Œæ•´CRUDæ“ä½œã€‚</p>]]></content>
    
    
    <summary type="html">Spring Boot 3 æ•´åˆ MyBatis-Plus å®Œæ•´ç¤ºä¾‹</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆSpring Securityå®ç°è®¤è¯ä¸æˆæƒ</title>
    <link href="http://www.formeasy.cc/2025/08/27/Springboot/SpringBoot%E6%95%B4%E5%90%88Spring%20Security%E5%AE%9E%E7%8E%B0%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/"/>
    <id>http://www.formeasy.cc/2025/08/27/Springboot/SpringBoot%E6%95%B4%E5%90%88Spring%20Security%E5%AE%9E%E7%8E%B0%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83/</id>
    <published>2025-08-27T05:38:56.000Z</published>
    <updated>2025-08-27T09:27:30.667Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡é€šè¿‡é€æ­¥å­¦ä¹ Spring Securityï¼Œç”±æµ…å…¥æ·±ï¼ŒSpringBootæ•´åˆSpring Security åˆ†åˆ«å®ç°è‡ªå®šä¹‰çš„HTTP Basicè®¤è¯å’ŒFormè¡¨å•è®¤è¯ã€‚<br />æœ¬æ–‡æ˜¯å­¦ä¹ ç¬”è®°ï¼Œç½‘ä¸Šçš„æ•™ç¨‹äº”èŠ±å…«é—¨ï¼Œç”±äºæ—¶é—´ä¹…è¿œï¼Œå¾ˆéš¾æ‹¿æ¥å°±ç”¨ã€‚</p><p>ä¸»è¦å†…å®¹ï¼š</p><ul><li>ç”¨æˆ·ä¿¡æ¯ç®¡ç†</li><li>æ•æ„Ÿä¿¡æ¯åŠ å¯†è§£å¯†</li><li>ç”¨æˆ·è®¤è¯</li><li>æƒé™æ§åˆ¶</li><li>è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ä¿æŠ¤</li><li>è·¨åŸŸæ”¯æŒ</li><li>å…¨å±€å®‰å…¨æ–¹æ³•</li><li>å•ç‚¹ç™»å½•</li></ul><h2 id="ä¸€-spring-security-å¿«é€Ÿå¼€å§‹ä¸€ä¸ªä¾‹å­"><a class="markdownIt-Anchor" href="#ä¸€-spring-security-å¿«é€Ÿå¼€å§‹ä¸€ä¸ªä¾‹å­"></a> ä¸€ã€Spring Security å¿«é€Ÿå¼€å§‹ä¸€ä¸ªä¾‹å­</h2><p>åˆ›å»ºSpringBooté¡¹ç›®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ tree -I test</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ pom.xml</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ main</span><br><span class="line">        â”œâ”€â”€ java</span><br><span class="line">        â”‚   â””â”€â”€ com</span><br><span class="line">        â”‚       â””â”€â”€ example</span><br><span class="line">        â”‚           â””â”€â”€ demo</span><br><span class="line">        â”‚               â”œâ”€â”€ Application.java</span><br><span class="line">        â”‚               â””â”€â”€ controller</span><br><span class="line">        â”‚                   â””â”€â”€ IndexController.java</span><br><span class="line">        â””â”€â”€ resources</span><br><span class="line">            â”œâ”€â”€ application.yml</span><br><span class="line">            â”œâ”€â”€ static</span><br><span class="line">            â””â”€â”€ templates</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¼•å…¥Spring Securityä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´ä¾èµ– pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½® application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç±» Application.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">SpringApplication.run(Application.class, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ§åˆ¶å™¨ IndexController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç›´æ¥è®¿é—®åº”ç”¨ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/</span><br><span class="line">=&gt; 302</span><br><span class="line">http://localhost:8080/login</span><br></pre></td></tr></table></figure><p><img src="gqnkyc66e4gn2_9e13ac55ee084f79bb67aa80cffde80a.webp" alt="" /></p><p>ç°åœ¨ä½¿ç”¨é»˜è®¤çš„è´¦å·å¯†ç ç™»å½•</p><ul><li>é»˜è®¤çš„ç”¨æˆ·åï¼šuser</li><li>é»˜è®¤çš„å¯†ç ï¼š(æ§åˆ¶å°æ‰“å°å‡ºçš„å¯†ç )</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Using generated security password: cdd28beb-9a64-4130-be58-6bde1684476d</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—® <a href="http://localhost:8080/">http://localhost:8080/</a></p><p>å¯ä»¥çœ‹åˆ°è¿”å›ç»“æœ</p><p><img src="gqnkyc66e4gn2_3f18ade113f5469886efbfa4c9f5c92e.webp" alt="" /></p><p>çœ‹åˆ°ä¸Šå›¾è¯´æ˜æˆåŠŸé›†æˆSpring Securityã€‚</p><h2 id="äºŒ-è®¤è¯ä¸æˆæƒè¯´æ˜"><a class="markdownIt-Anchor" href="#äºŒ-è®¤è¯ä¸æˆæƒè¯´æ˜"></a> äºŒã€è®¤è¯ä¸æˆæƒè¯´æ˜</h2><ul><li>è®¤è¯authenticationç”¨æˆ·èº«ä»½</li><li>æˆæƒauthorizationç”¨æˆ·æƒé™</li></ul><p>å•ä½“åº”ç”¨</p><p><img src="gqnkyc66e4gn2_39e66622157745e294c844c066e958ae.webp" alt="" /></p><p>å¾®æœåŠ¡æ¶æ„</p><p><img src="gqnkyc66e4gn2_738af5e3892c4f7499e0e7b6add28125.webp" alt="" /></p><h2 id="ä¸‰-spring-securityåŸºç¡€è®¤è¯ä¸è¡¨å•è®¤è¯"><a class="markdownIt-Anchor" href="#ä¸‰-spring-securityåŸºç¡€è®¤è¯ä¸è¡¨å•è®¤è¯"></a> ä¸‰ã€Spring SecurityåŸºç¡€è®¤è¯ä¸è¡¨å•è®¤è¯</h2><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82d.webp" alt="" /></p><ol><li>ç”¨æˆ·å¯¹è±¡ UserDetails</li></ol><ul><li>å†…å­˜å­˜å‚¨</li><li>æ•°æ®åº“å­˜å‚¨</li></ul><ol start="2"><li>è®¤è¯å¯¹è±¡ Authentication</li></ol><ul><li>HTTPåŸºç¡€è®¤è¯</li><li>HTTPè¡¨å•è®¤è¯</li></ul><h3 id="1-httpåŸºç¡€è®¤è¯"><a class="markdownIt-Anchor" href="#1-httpåŸºç¡€è®¤è¯"></a> 1ã€HTTPåŸºç¡€è®¤è¯</h3><p>é€šè¿‡HTTPè¯·æ±‚å¤´æºå¸¦ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•è®¤è¯</p><p>HTTPè¯·æ±‚å¤´æ ¼å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ç”¨æˆ·åå’Œå¯†ç çš„Base64ç¼–ç </span><br><span class="line">Authonrization: Basic Base64-encoded(username:password)</span><br></pre></td></tr></table></figure><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82c.webp" alt="image.png" /></p><p>Spring Boot2.4ç‰ˆæœ¬ä»¥å‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Spring Boot2.4ç‰ˆæœ¬ä¹‹å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‘é€HTTPè¯·æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET http://localhost:8080/</span><br><span class="line">Authorization: Basic dXNlcjo2ZjRhMGY5ZS1hY2ZkLTRmNTYtYjIzNy01MTZmYmZjMTk3NGM=</span><br></pre></td></tr></table></figure><p>å¯ä»¥è·å¾—å“åº”æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello</span><br></pre></td></tr></table></figure><p>base64è§£ç ä¹‹åå¯ä»¥å¾—åˆ°ç”¨æˆ·åå’Œå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">atob(&#x27;dXNlcjo2ZjRhMGY5ZS1hY2ZkLTRmNTYtYjIzNy01MTZmYmZjMTk3NGM=&#x27;)</span><br><span class="line"></span><br><span class="line">&#x27;user:6f4a0f9e-acfd-4f56-b237-516fbfc1974c&#x27;</span><br></pre></td></tr></table></figure><h3 id="2-httpè¡¨å•è®¤è¯"><a class="markdownIt-Anchor" href="#2-httpè¡¨å•è®¤è¯"></a> 2ã€HTTPè¡¨å•è®¤è¯</h3><p>Spring Securityçš„é»˜è®¤è®¤è¯æ–¹å¼</p><p><img src="gqnkyc66e4gn2_1ba816d1d85946cb8c9c8b5b67767379.webp" alt="" /></p><h2 id="å››-spring-security-ç”¨æˆ·ä¸è®¤è¯å¯¹è±¡è¯´æ˜"><a class="markdownIt-Anchor" href="#å››-spring-security-ç”¨æˆ·ä¸è®¤è¯å¯¹è±¡è¯´æ˜"></a> å››ã€Spring Security ç”¨æˆ·ä¸è®¤è¯å¯¹è±¡è¯´æ˜</h2><h3 id="1-ç”¨æˆ·å¯¹è±¡"><a class="markdownIt-Anchor" href="#1-ç”¨æˆ·å¯¹è±¡"></a> 1ã€ç”¨æˆ·å¯¹è±¡</h3><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82e.webp" alt="" /></p><p>UserDetails ç”¨æˆ·å¯¹è±¡æ¥å£è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core.userdetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDetails</span> <span class="keyword">extends</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–ç”¨æˆ·æƒé™ä¿¡æ¯</span></span><br><span class="line">    Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–å¯†ç </span></span><br><span class="line">    java.lang.String <span class="title function_">getPassword</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ç”¨æˆ·å</span></span><br><span class="line">    java.lang.String <span class="title function_">getUsername</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¤±æ•ˆ</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·æ˜¯å¦é”å®š</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·å‡­è¯ä¿¡æ¯æ˜¯å¦å·²å¤±æ•ˆ</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>GrantedAuthority ç”¨æˆ·æ‹¥æœ‰æƒé™æ¥å£è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GrantedAuthority</span> <span class="keyword">extends</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–æƒé™ä¿¡æ¯</span></span><br><span class="line">    String <span class="title function_">getAuthority</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDetailsService ç”¨æˆ·æŸ¥è¯¢æ“ä½œè¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core.userdetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserDetailsManager ç”¨æˆ·CRUDæ“ä½œè¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.provisioning;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDetailsManager</span> <span class="keyword">extends</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">createUser</span><span class="params">(UserDetails user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(UserDetails user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¿®æ”¹å¯†ç </span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">changePassword</span><span class="params">(String oldPassword, String newPassword)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">userExists</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-è®¤è¯å¯¹è±¡"><a class="markdownIt-Anchor" href="#2-è®¤è¯å¯¹è±¡"></a> 2ã€è®¤è¯å¯¹è±¡</h3><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82f.webp" alt="" /></p><p>Authentication è®¤è¯è¯·æ±‚è¯¦ç»†ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.security.Principal;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Authentication</span> <span class="keyword">extends</span> <span class="title class_">Principal</span>, Serializable &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®‰å…¨ä¸»ä½“æ‰€å…·æœ‰çš„çš„æƒé™</span></span><br><span class="line">    Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯æ˜ä¸»ä½“æœ‰æ•ˆæ€§çš„å‡­è¯</span></span><br><span class="line">    Object <span class="title function_">getCredentials</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¤è¯è¯·æ±‚çš„æ˜ç»†ä¿¡æ¯</span></span><br><span class="line">    Object <span class="title function_">getDetails</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»ä½“çš„æ ‡è¯†ä¿¡æ¯</span></span><br><span class="line">    Object <span class="title function_">getPrincipal</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦è®¤è¯é€šè¿‡</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isAuthenticated</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®è®¤è¯ç»“æœ</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setAuthenticated</span><span class="params">(<span class="type">boolean</span> isAuthenticated)</span> <span class="keyword">throws</span> IllegalArgumentException;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>AuthenticationProvider è®¤è¯çš„ä¸šåŠ¡æ‰§è¡Œè€…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.authentication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AuthenticationProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œè®¤è¯ï¼Œè¿”å›è®¤è¯ç»“æœ</span></span><br><span class="line">    Authentication <span class="title function_">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ”¯æŒå½“å‰çš„è®¤è¯å¯¹è±¡</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; authentication)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äº”-åŸºäºmysqlè‡ªå®šä¹‰è®¤è¯è¿‡ç¨‹ä¾‹å­"><a class="markdownIt-Anchor" href="#äº”-åŸºäºmysqlè‡ªå®šä¹‰è®¤è¯è¿‡ç¨‹ä¾‹å­"></a> äº”ã€åŸºäºMySQLè‡ªå®šä¹‰è®¤è¯è¿‡ç¨‹ä¾‹å­</h2><h3 id="1-é¡¹ç›®ç»“æ„"><a class="markdownIt-Anchor" href="#1-é¡¹ç›®ç»“æ„"></a> 1ã€é¡¹ç›®ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ tree -I target</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ pom.xml</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ main</span><br><span class="line">    â”‚   â”œâ”€â”€ java</span><br><span class="line">    â”‚   â”‚   â””â”€â”€ com.example.springboot</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ Application.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ controller</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ IndexController.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ entity</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ User.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ mapper</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ UserMapper.java</span><br><span class="line">    â”‚   â”‚         â”œâ”€â”€ security</span><br><span class="line">    â”‚   â”‚         â”‚   â”œâ”€â”€ SecurityConfiguration.java</span><br><span class="line">    â”‚   â”‚         â”‚   â””â”€â”€ UserAuthenticationProvider.java</span><br><span class="line">    â”‚   â”‚         â””â”€â”€ service</span><br><span class="line">    â”‚   â”‚             â”œâ”€â”€ UserService.java</span><br><span class="line">    â”‚   â”‚             â””â”€â”€ impl</span><br><span class="line">    â”‚   â”‚                 â””â”€â”€ UserServiceImpl.java</span><br><span class="line">    â”‚   â””â”€â”€ resources</span><br><span class="line">    â”‚       â”œâ”€â”€ application.yml</span><br><span class="line">    â”‚       â”œâ”€â”€ sql</span><br><span class="line">    â”‚       â”‚   â””â”€â”€ schema.sql</span><br><span class="line">    â”‚       â”œâ”€â”€ static</span><br><span class="line">    â”‚       â”‚   â””â”€â”€ login.html</span><br><span class="line">    â”‚       â””â”€â”€ templates</span><br><span class="line">    â””â”€â”€ test</span><br><span class="line">        â””â”€â”€ java</span><br><span class="line">            â””â”€â”€ com.example.springboot</span><br><span class="line">                â””â”€â”€ ApplicationTests.java</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-ç”¨æˆ·è¡¨"><a class="markdownIt-Anchor" href="#2-ç”¨æˆ·è¡¨"></a> 2ã€ç”¨æˆ·è¡¨</h3><p>é»˜è®¤è¡¨ç»“æ„çš„SQLè·¯å¾„</p><p>spring-security-core-5.7.6.jar!/org/springframework/security/core/userdetails/jdbc/users.ddl</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table users(</span><br><span class="line">    username varchar_ignorecase(50) not null primary key,</span><br><span class="line">    password varchar_ignorecase(500) not null,</span><br><span class="line">    enabled boolean not null</span><br><span class="line">);</span><br><span class="line">create table authorities (</span><br><span class="line">    username varchar_ignorecase(50) not null,</span><br><span class="line">    authority varchar_ignorecase(50) not null,</span><br><span class="line">    constraint fk_authorities_users foreign key(username) references users(username)</span><br><span class="line">);</span><br><span class="line">create unique index ix_auth_username on authorities (username,authority);</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·è¡¨</p><p>schema.sql</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºç”¨æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®id&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `nickname` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;æ˜µç§°&#x27;</span>,</span><br><span class="line">  `enabled` tinyint <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;è´¦å·å¯ç”¨æ ‡è¯†&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `idx_username` (`username`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_general_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `tb_user` <span class="keyword">values</span> (<span class="number">1</span>, &quot;zhangsan&quot;, &quot;zhangsan&quot;, &quot;å¼ ä¸‰&quot;, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `tb_user` <span class="keyword">values</span> (<span class="number">2</span>, &quot;lisi&quot;, &quot;lisi&quot;, &quot;æå››&quot;, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `tb_user` <span class="keyword">values</span> (<span class="number">3</span>, &quot;wangwu&quot;, &quot;wangwu&quot;, &quot;ç‹äº”&quot;, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><h3 id="3-ä¾èµ–"><a class="markdownIt-Anchor" href="#3-ä¾èµ–"></a> 3ã€ä¾èµ–</h3><ul><li>Spring Security</li><li>MyBatis-Plus</li><li>MySQL8 JDBC</li><li>Lombok</li></ul><p>å®Œæ•´ä¾èµ–</p><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>springbootå­¦ä¹ <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--starter-web--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-security--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ·»åŠ  JDBC Starter ä»¥å¼•å…¥ HikariCP --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--MyBatisPlusæ ¸å¿ƒåº“--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-æ•°æ®åº“é…ç½®"><a class="markdownIt-Anchor" href="#4-æ•°æ®åº“é…ç½®"></a> 4ã€æ•°æ®åº“é…ç½®</h3><p>application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“é…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/test?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">zaq1xsw2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">10</span>  <span class="comment"># æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">5</span>        <span class="comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span></span><br><span class="line">      <span class="attr">idle-timeout:</span> <span class="number">300000</span>   <span class="comment"># ç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">20000</span>  <span class="comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®mybatiså®ä½“é…ç½®</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">classpath:mapper/*.xml</span> <span class="comment">#æ˜ å°„åˆ°resources/mapper/User.xmlé‡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#mybatis-plusç›¸å…³é…ç½®</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># xmlæ‰«æï¼Œå¤šä¸ªç›®å½•ç”¨é€—å·æˆ–è€…åˆ†å·åˆ†éš”ï¼ˆå‘Šè¯‰ Mapper æ‰€å¯¹åº”çš„ XML æ–‡ä»¶ä½ç½®ï¼‰</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># ä»¥ä¸‹é…ç½®å‡æœ‰é»˜è®¤å€¼,å¯ä»¥ä¸è®¾ç½®</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#ä¸»é”®ç±»å‹ AUTO:&quot;æ•°æ®åº“IDè‡ªå¢&quot; INPUT:&quot;ç”¨æˆ·è¾“å…¥ID&quot;,ID_WORKER:&quot;å…¨å±€å”¯ä¸€ID (æ•°å­—ç±»å‹å”¯ä¸€ID)&quot;, UUID:&quot;å…¨å±€å”¯ä¸€ID UUID&quot;;</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment">#å­—æ®µç­–ç•¥ IGNORED:&quot;å¿½ç•¥åˆ¤æ–­&quot;  NOT_NULL:&quot;é NULL åˆ¤æ–­&quot;)  NOT_EMPTY:&quot;éç©ºåˆ¤æ–­&quot;</span></span><br><span class="line">      <span class="attr">field-strategy:</span> <span class="string">NOT_EMPTY</span></span><br><span class="line">      <span class="comment">#æ•°æ®åº“ç±»å‹</span></span><br><span class="line">      <span class="attr">db-type:</span> <span class="string">MYSQL</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™æ˜ å°„:ä»æ•°æ®åº“åˆ—ååˆ°Javaå±æ€§é©¼å³°å‘½åçš„ç±»ä¼¼æ˜ å°„</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># å¦‚æœæŸ¥è¯¢ç»“æœä¸­åŒ…å«ç©ºå€¼çš„åˆ—ï¼Œåˆ™ MyBatis åœ¨æ˜ å°„çš„æ—¶å€™ï¼Œä¸ä¼šæ˜ å°„è¿™ä¸ªå­—æ®µ</span></span><br><span class="line">    <span class="attr">call-setters-on-nulls:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># è¿™ä¸ªé…ç½®ä¼šå°†æ‰§è¡Œçš„sqlæ‰“å°å‡ºæ¥ï¼Œåœ¨å¼€å‘æˆ–æµ‹è¯•çš„æ—¶å€™å¯ä»¥ç”¨</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h3 id="5-springbootåŸºæœ¬æ¡†æ¶"><a class="markdownIt-Anchor" href="#5-springbootåŸºæœ¬æ¡†æ¶"></a> 5ã€SpringBootåŸºæœ¬æ¡†æ¶</h3><p>å¯åŠ¨ç±» Application.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ä½“ç±» User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.GrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»é”®id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯†ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜µç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è´¦å·å¯ç”¨æ ‡è¯†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer enabled;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·æƒé™ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(<span class="keyword">new</span> <span class="title class_">SimpleGrantedAuthority</span>(<span class="string">&quot;ROLE_USER&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¤±æ•ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·æ˜¯å¦é”å®š</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·å‡­è¯ä¿¡æ¯æ˜¯å¦å·²å¤±æ•ˆ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­è´¦æˆ·æ˜¯å¦å¯ç”¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.enabled == <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserMapper.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.springboot.service.UserService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span></span><br><span class="line">        <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt;</span><br><span class="line">        <span class="keyword">implements</span> <span class="title class_">UserService</span>, UserDetailsService &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> UserDetails</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> UsernameNotFoundException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(User::getUsername, username);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="built_in">super</span>.getOne(queryWrapper);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user == <span class="literal">null</span>)&#123;</span><br><span class="line">            log.error(<span class="string">&quot;Access Denied, user not found:&quot;</span> + username);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;user not found:&quot;</span> + username);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>IndexController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-è‡ªåŠ¨å®šä¹‰spring-security"><a class="markdownIt-Anchor" href="#6-è‡ªåŠ¨å®šä¹‰spring-security"></a> 6ã€è‡ªåŠ¨å®šä¹‰Spring Security</h3><p>SecurityConfiguration.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºåŸºç¡€è®¤è¯æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> http</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>UserAuthenticationProvider.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.BadCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAuthenticationProvider</span> <span class="keyword">implements</span> <span class="title class_">AuthenticationProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªå·±å®ç°è®¤è¯è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> authentication</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Authentication <span class="title function_">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="comment">// ä»Authentication å¯¹è±¡ä¸­è·å–ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> authentication.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> authentication.getCredentials().toString();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserDetails</span> <span class="variable">user</span> <span class="operator">=</span> userService.loadUserByUsername(username);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (password.equals(user.getPassword())) &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…æˆåŠŸ</span></span><br><span class="line">            log.info(<span class="string">&quot;Access Success: &quot;</span> + user);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(username, password, user.getAuthorities());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…å¤±è´¥</span></span><br><span class="line">            log.error(<span class="string">&quot;Access Denied: The username or password is wrong!&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BadCredentialsException</span>(<span class="string">&quot;The username or password is wrong!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; authentication)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> authentication.equals(UsernamePasswordAuthenticationToken.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-æ¥å£æµ‹è¯•"><a class="markdownIt-Anchor" href="#7-æ¥å£æµ‹è¯•"></a> 7ã€æ¥å£æµ‹è¯•</h3><p>IndexController.http</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">###</span><br><span class="line"># ä¸æä¾›è®¤è¯ä¿¡æ¯</span><br><span class="line">GET http://localhost:8080/hello</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"># æä¾›é”™è¯¯çš„è®¤è¯ä¿¡æ¯</span><br><span class="line">GET http://localhost:8080/hello</span><br><span class="line">Authorization: Basic dXNlcjo2YzVlMTUyOS1kMTc2LTRkYjItYmZlMy0zZTIzOTNlMjY2MTk=</span><br><span class="line"></span><br><span class="line">###</span><br><span class="line"># æä¾›æ­£ç¡®çš„è®¤è¯ä¿¡æ¯</span><br><span class="line">GET http://localhost:8080/hello</span><br><span class="line">Authorization: Basic emhhbmdzYW46emhhbmdzYW4=</span><br><span class="line">###</span><br></pre></td></tr></table></figure><h2 id="å…­-ä½¿ç”¨passwordencoderåŠ å¯†å¯†ç "><a class="markdownIt-Anchor" href="#å…­-ä½¿ç”¨passwordencoderåŠ å¯†å¯†ç "></a> å…­ã€ä½¿ç”¨PasswordEncoderåŠ å¯†å¯†ç </h2><p>PasswordEncoderæ¥å£è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.security.crypto.password;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PasswordEncoder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹åŸå§‹å¯†ç ç¼–ç </span></span><br><span class="line">    String <span class="title function_">encode</span><span class="params">(CharSequence rawPassword)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯†ç æ¯”å¯¹</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(CharSequence rawPassword, String encodedPassword)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­åŠ å¯†å¯†ç æ˜¯å¦éœ€è¦å†æ¬¡åŠ å¯†</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">upgradeEncoding</span><span class="params">(String encodedPassword)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¸¸è§çš„å®ç°ç±»</p><p><img src="gqnkyc66e4gn2_988d94c2a94f416ca6e2ffb97e15d82g.webp" alt="" /></p><p>Bcryptç®—æ³•ç®€ä»‹</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.example.sprintboot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"></span><br><span class="line">public class BCryptPasswordEncoderTest &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void encode()&#123;</span><br><span class="line">        BCryptPasswordEncoder bCryptPasswordEncoder = new BCryptPasswordEncoder();</span><br><span class="line">        String encode = bCryptPasswordEncoder.encode(&quot;123456&quot;);</span><br><span class="line">        System.out.println(encode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$2a$10$lKqmIKbEPNDx/RXssgN6POgb8YssAK7pVtMFDosmC8FxozUgQq58K</span><br></pre></td></tr></table></figure><p>è§£é‡Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$æ˜¯åˆ†éš”ç¬¦</span><br><span class="line">2aè¡¨ç¤ºBcryptç®—æ³•ç‰ˆæœ¬</span><br><span class="line">10è¡¨ç¤ºç®—æ³•å¼ºåº¦</span><br><span class="line">ä¸­é—´22ä½è¡¨ç¤ºç›å€¼</span><br><span class="line">ä¸­é—´é¢çš„ä½æ•°è¡¨ç¤ºåŠ å¯†åçš„æ–‡æœ¬</span><br><span class="line">æ€»é•¿åº¦60ä½</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨Bcryptç®—æ³•åŠ å¯†å¯†ç åçš„æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å»ºè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tb_user` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®id&#x27;</span>,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">  `nickname` <span class="type">varchar</span>(<span class="number">32</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_general_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;æ˜µç§°&#x27;</span>,</span><br><span class="line">  `enabled` tinyint <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;è´¦å·å¯ç”¨æ ‡è¯†&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `idx_username` (`username`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_general_ci COMMENT<span class="operator">=</span><span class="string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;$2a$10$/1XHgJYXtF4g/AiR41si8uvVC6Zc.Z9xVmXX4hO2z.b4.DX.H2j5W&#x27;</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;$2a$10$PEcF03ina7x9mmt2VbB0ueVkLZWQo/yoKOfvfQpoL09/faBlNuuZ.&#x27;</span>, <span class="string">&#x27;æå››&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `tb_user` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;$2a$10$PMumxkwwrELTbNDXCj0N4.jD/e/Hv.JiiZTFkdFqlDNLU2TahdYNq&#x27;</span>, <span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>UserAuthenticationProviderå®ç°ç±»æ›¿æ¢å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.AuthenticationProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.BadCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.Authentication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.AuthenticationException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAuthenticationProvider</span> <span class="keyword">implements</span> <span class="title class_">AuthenticationProvider</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailsService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯†ç åŠ å¯†</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªå·±å®ç°è®¤è¯è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> authentication</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> AuthenticationException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Authentication <span class="title function_">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        <span class="comment">// ä»Authentication å¯¹è±¡ä¸­è·å–ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> authentication.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> authentication.getCredentials().toString();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserDetails</span> <span class="variable">user</span> <span class="operator">=</span> userService.loadUserByUsername(username);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›¿æ¢å¯†ç æ¯”å¯¹æ–¹å¼</span></span><br><span class="line">        <span class="comment">// if (password.equals(user.getPassword())) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.passwordEncoder().matches(password, user.getPassword())) &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…æˆåŠŸ</span></span><br><span class="line">            log.info(<span class="string">&quot;Access Success: &quot;</span> + user);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(username, password, user.getAuthorities());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¯†ç åŒ¹é…å¤±è´¥</span></span><br><span class="line">            log.error(<span class="string">&quot;Access Denied: The username or password is wrong!&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BadCredentialsException</span>(<span class="string">&quot;The username or password is wrong!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; authentication)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> authentication.equals(UsernamePasswordAuthenticationToken.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒ-sessionä¼šè¯æ§åˆ¶"><a class="markdownIt-Anchor" href="#ä¸ƒ-sessionä¼šè¯æ§åˆ¶"></a> ä¸ƒã€Sessionä¼šè¯æ§åˆ¶</h2><p>æ”¹ä¸ºåŸºäºåŸºç¡€è®¤è¯æ¨¡å¼<br />ä¿®æ”¹é…ç½®ç±»SecurityConfiguration</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.Customizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.http.SessionCreationPolicy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºåŸºç¡€è®¤è¯æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> http</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç¦ç”¨sessionä¼šè¯</span></span><br><span class="line">        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯ï¼Œè®¤è¯æ–¹å¼ï¼šhttpBasic</span></span><br><span class="line">        http.authorizeHttpRequests((auth) -&gt; &#123;</span><br><span class="line">            auth.anyRequest().authenticated();</span><br><span class="line">        &#125;).httpBasic(Customizer.withDefaults());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…«-åŸºäºè¡¨å•æ¨¡å¼å®ç°è‡ªå®šä¹‰è®¤è¯"><a class="markdownIt-Anchor" href="#å…«-åŸºäºè¡¨å•æ¨¡å¼å®ç°è‡ªå®šä¹‰è®¤è¯"></a> å…«ã€åŸºäºè¡¨å•æ¨¡å¼å®ç°è‡ªå®šä¹‰è®¤è¯</h2><p>SecurityFormConfiguration é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.security;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.http.SessionCreationPolicy;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityFormConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºè¡¨å•è®¤è¯æ¨¡å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> http</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯ç”¨sessionä¼šè¯</span></span><br><span class="line">        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¤è¯æ–¹å¼ï¼šForm</span></span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                <span class="comment">//.requestMatchers(&quot;/login.html&quot;).permitAll() // æ”¾è¡Œç™»å½•é¡µé¢</span></span><br><span class="line">                <span class="comment">// æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦è®¤è¯</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// å¯åŠ¨è¡¨å•è®¤è¯æ¨¡å¼</span></span><br><span class="line">                .formLogin()</span><br><span class="line">                <span class="comment">// ç™»å½•é¡µé¢</span></span><br><span class="line">                .loginPage(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">                <span class="comment">// è¯·æ±‚æäº¤åœ°å€</span></span><br><span class="line">                .loginProcessingUrl(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                <span class="comment">// æˆåŠŸè·³è½¬é¡µé¢</span></span><br><span class="line">                .defaultSuccessUrl(<span class="string">&quot;/hello&quot;</span>, <span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// æ”¾è¡Œä¸Šé¢çš„ä¸¤ä¸ªåœ°å€</span></span><br><span class="line">                .permitAll()</span><br><span class="line">                <span class="comment">// è®¾ç½®æäº¤çš„å‚æ•°å</span></span><br><span class="line">                .usernameParameter(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">                .passwordParameter(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// å¼€å§‹è®¾ç½®æ³¨é”€åŠŸèƒ½</span></span><br><span class="line">                .logout()</span><br><span class="line">                <span class="comment">// æ³¨é”€çš„url</span></span><br><span class="line">                .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">                <span class="comment">// sessionç›´æ¥è¿‡æœŸ</span></span><br><span class="line">                .invalidateHttpSession(<span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// æ¸…é™¤è®¤è¯ä¿¡æ¯</span></span><br><span class="line">                .clearAuthentication(<span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// æ³¨é”€æˆåŠŸåè·³è½¬åœ°å€</span></span><br><span class="line">                .logoutSuccessUrl(<span class="string">&quot;/login.html&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                <span class="comment">// ç¦ç”¨csrfå®‰å…¨é˜²æŠ¤</span></span><br><span class="line">                .csrf().disable();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç™»å½•é¡µé¢ static/login.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>usernameï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>passwordï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºæ•ˆæœ</p><p><img src="gqnkyc66e4gn2_81b709b8e560457b9abad4b08cc02fc8.webp" alt="" /></p>]]></content>
    
    
    <summary type="html">SpringBootæ•´åˆSpring Securityå®ç°è®¤è¯ä¸æˆæƒ</summary>
    
    
    
    <category term="æŠ€æœ¯" scheme="http://www.formeasy.cc/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="Springboot" scheme="http://www.formeasy.cc/tags/Springboot/"/>
    
  </entry>
  
</feed>
